/*
 MIT
 jQuery JavaScript Library v3.6.0
 https://jquery.com/

 Includes Sizzle.js
 https://sizzlejs.com/

 Copyright OpenJS Foundation and other contributors
 Released under the MIT license
 https://jquery.org/license

 Date: 2021-03-02T17:08Z
 Sizzle CSS Selector Engine v2.3.6
 https://sizzlejs.com/

 Copyright JS Foundation and other contributors
 Released under the MIT license
 https://js.foundation/

 Date: 2021-02-16
 pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(Ia){var Ua=0;return function(){return Ua<Ia.length?{done:!1,value:Ia[Ua++]}:{done:!0}}};$jscomp.arrayIterator=function(Ia){return{next:$jscomp.arrayIteratorImpl(Ia)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(Ia,Ua,Sa){if(Ia==Array.prototype||Ia==Object.prototype)return Ia;Ia[Ua]=Sa.value;return Ia};$jscomp.getGlobal=function(Ia){Ia=["object"==typeof globalThis&&globalThis,Ia,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var Ua=0;Ua<Ia.length;++Ua){var Sa=Ia[Ua];if(Sa&&Sa.Math==Math)return Sa}throw Error("Cannot find global object");};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(Ia,Ua){var Sa=$jscomp.propertyToPolyfillSymbol[Ua];if(null==Sa)return Ia[Ua];Sa=Ia[Sa];return void 0!==Sa?Sa:Ia[Ua]};
$jscomp.polyfill=function(Ia,Ua,Sa,Wa){Ua&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(Ia,Ua,Sa,Wa):$jscomp.polyfillUnisolated(Ia,Ua,Sa,Wa))};$jscomp.polyfillUnisolated=function(Ia,Ua,Sa,Wa){Sa=$jscomp.global;Ia=Ia.split(".");for(Wa=0;Wa<Ia.length-1;Wa++){var ra=Ia[Wa];if(!(ra in Sa))return;Sa=Sa[ra]}Ia=Ia[Ia.length-1];Wa=Sa[Ia];Ua=Ua(Wa);Ua!=Wa&&null!=Ua&&$jscomp.defineProperty(Sa,Ia,{configurable:!0,writable:!0,value:Ua})};
$jscomp.polyfillIsolated=function(Ia,Ua,Sa,Wa){var ra=Ia.split(".");Ia=1===ra.length;Wa=ra[0];Wa=!Ia&&Wa in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var Qb=0;Qb<ra.length-1;Qb++){var Xa=ra[Qb];if(!(Xa in Wa))return;Wa=Wa[Xa]}ra=ra[ra.length-1];Sa=$jscomp.IS_SYMBOL_NATIVE&&"es6"===Sa?Wa[ra]:null;Ua=Ua(Sa);null!=Ua&&(Ia?$jscomp.defineProperty($jscomp.polyfills,ra,{configurable:!0,writable:!0,value:Ua}):Ua!==Sa&&(void 0===$jscomp.propertyToPolyfillSymbol[ra]&&(Sa=1E9*Math.random()>>>0,
$jscomp.propertyToPolyfillSymbol[ra]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(ra):$jscomp.POLYFILL_PREFIX+Sa+"$"+ra),$jscomp.defineProperty(Wa,$jscomp.propertyToPolyfillSymbol[ra],{configurable:!0,writable:!0,value:Ua})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(Ia){if(Ia)return Ia;var Ua=function(Qb,Xa){this.$jscomp$symbol$id_=Qb;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:Xa})};Ua.prototype.toString=function(){return this.$jscomp$symbol$id_};var Sa="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",Wa=0,ra=function(Qb){if(this instanceof ra)throw new TypeError("Symbol is not a constructor");return new Ua(Sa+(Qb||"")+"_"+Wa++,Qb)};return ra},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(Ia){if(Ia)return Ia;Ia=Symbol("Symbol.iterator");for(var Ua="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Sa=0;Sa<Ua.length;Sa++){var Wa=$jscomp.global[Ua[Sa]];"function"===typeof Wa&&"function"!=typeof Wa.prototype[Ia]&&$jscomp.defineProperty(Wa.prototype,Ia,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return Ia},
"es6","es3");$jscomp.iteratorPrototype=function(Ia){Ia={next:Ia};Ia[Symbol.iterator]=function(){return this};return Ia};$jscomp.createTemplateTagFirstArg=function(Ia){return Ia.raw=Ia};$jscomp.createTemplateTagFirstArgWithRaw=function(Ia,Ua){Ia.raw=Ua;return Ia};$jscomp.makeIterator=function(Ia){var Ua="undefined"!=typeof Symbol&&Symbol.iterator&&Ia[Symbol.iterator];return Ua?Ua.call(Ia):$jscomp.arrayIterator(Ia)};
$jscomp.findInternal=function(Ia,Ua,Sa){Ia instanceof String&&(Ia=String(Ia));for(var Wa=Ia.length,ra=0;ra<Wa;ra++){var Qb=Ia[ra];if(Ua.call(Sa,Qb,ra,Ia))return{i:ra,v:Qb}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(Ia){return Ia?Ia:function(Ua,Sa){return $jscomp.findInternal(this,Ua,Sa).v}},"es6","es3");
$jscomp.iteratorFromArray=function(Ia,Ua){Ia instanceof String&&(Ia+="");var Sa=0,Wa=!1,ra={next:function(){if(!Wa&&Sa<Ia.length){var Qb=Sa++;return{value:Ua(Qb,Ia[Qb]),done:!1}}Wa=!0;return{done:!0,value:void 0}}};ra[Symbol.iterator]=function(){return ra};return ra};$jscomp.polyfill("Array.prototype.keys",function(Ia){return Ia?Ia:function(){return $jscomp.iteratorFromArray(this,function(Ua){return Ua})}},"es6","es3");
$jscomp.checkStringArgs=function(Ia,Ua,Sa){if(null==Ia)throw new TypeError("The 'this' value for String.prototype."+Sa+" must not be null or undefined");if(Ua instanceof RegExp)throw new TypeError("First argument to String.prototype."+Sa+" must not be a regular expression");return Ia+""};
$jscomp.polyfill("String.prototype.repeat",function(Ia){return Ia?Ia:function(Ua){var Sa=$jscomp.checkStringArgs(this,null,"repeat");if(0>Ua||1342177279<Ua)throw new RangeError("Invalid count value");Ua|=0;for(var Wa="";Ua;)if(Ua&1&&(Wa+=Sa),Ua>>>=1)Sa+=Sa;return Wa}},"es6","es3");$jscomp.stringPadding=function(Ia,Ua){Ia=void 0!==Ia?String(Ia):" ";return 0<Ua&&Ia?Ia.repeat(Math.ceil(Ua/Ia.length)).substring(0,Ua):""};
$jscomp.polyfill("String.prototype.padEnd",function(Ia){return Ia?Ia:function(Ua,Sa){var Wa=$jscomp.checkStringArgs(this,null,"padStart");return Wa+$jscomp.stringPadding(Sa,Ua-Wa.length)}},"es8","es3");
$jscomp.polyfill("String.prototype.startsWith",function(Ia){return Ia?Ia:function(Ua,Sa){var Wa=$jscomp.checkStringArgs(this,Ua,"startsWith");Ua+="";var ra=Wa.length,Qb=Ua.length;Sa=Math.max(0,Math.min(Sa|0,Wa.length));for(var Xa=0;Xa<Qb&&Sa<ra;)if(Wa[Sa++]!=Ua[Xa++])return!1;return Xa>=Qb}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(Ia){return Ia?Ia:function(Ua,Sa){var Wa=$jscomp.checkStringArgs(this,Ua,"endsWith");Ua+="";void 0===Sa&&(Sa=Wa.length);Sa=Math.max(0,Math.min(Sa|0,Wa.length));for(var ra=Ua.length;0<ra&&0<Sa;)if(Wa[--Sa]!=Ua[--ra])return!1;return 0>=ra}},"es6","es3");
$jscomp.polyfill("Promise",function(Ia){function Ua(){this.batch_=null}function Sa(Xa){return Xa instanceof ra?Xa:new ra(function(Db,c){Db(Xa)})}if(Ia&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return Ia;Ua.prototype.asyncExecute=function(Xa){if(null==this.batch_){this.batch_=[];var Db=this;this.asyncExecuteFunction(function(){Db.executeBatch_()})}this.batch_.push(Xa)};
var Wa=$jscomp.global.setTimeout;Ua.prototype.asyncExecuteFunction=function(Xa){Wa(Xa,0)};Ua.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var Xa=this.batch_;this.batch_=[];for(var Db=0;Db<Xa.length;++Db){var c=Xa[Db];Xa[Db]=null;try{c()}catch(gb){this.asyncThrow_(gb)}}}this.batch_=null};Ua.prototype.asyncThrow_=function(Xa){this.asyncExecuteFunction(function(){throw Xa;})};var ra=function(Xa){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=
!1;var Db=this.createResolveAndReject_();try{Xa(Db.resolve,Db.reject)}catch(c){Db.reject(c)}};ra.prototype.createResolveAndReject_=function(){function Xa(gb){return function(a){c||(c=!0,gb.call(Db,a))}}var Db=this,c=!1;return{resolve:Xa(this.resolveTo_),reject:Xa(this.reject_)}};ra.prototype.resolveTo_=function(Xa){if(Xa===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(Xa instanceof ra)this.settleSameAsPromise_(Xa);else{a:switch(typeof Xa){case "object":var Db=null!=
Xa;break a;case "function":Db=!0;break a;default:Db=!1}Db?this.resolveToNonPromiseObj_(Xa):this.fulfill_(Xa)}};ra.prototype.resolveToNonPromiseObj_=function(Xa){var Db=void 0;try{Db=Xa.then}catch(c){this.reject_(c);return}"function"==typeof Db?this.settleSameAsThenable_(Db,Xa):this.fulfill_(Xa)};ra.prototype.reject_=function(Xa){this.settle_(2,Xa)};ra.prototype.fulfill_=function(Xa){this.settle_(1,Xa)};ra.prototype.settle_=function(Xa,Db){if(0!=this.state_)throw Error("Cannot settle("+Xa+", "+Db+
"): Promise already settled in state"+this.state_);this.state_=Xa;this.result_=Db;2===this.state_&&this.scheduleUnhandledRejectionCheck_();this.executeOnSettledCallbacks_()};ra.prototype.scheduleUnhandledRejectionCheck_=function(){var Xa=this;Wa(function(){if(Xa.notifyUnhandledRejection_()){var Db=$jscomp.global.console;"undefined"!==typeof Db&&Db.error(Xa.result_)}},1)};ra.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var Xa=$jscomp.global.CustomEvent,Db=$jscomp.global.Event,
c=$jscomp.global.dispatchEvent;if("undefined"===typeof c)return!0;"function"===typeof Xa?Xa=new Xa("unhandledrejection",{cancelable:!0}):"function"===typeof Db?Xa=new Db("unhandledrejection",{cancelable:!0}):(Xa=$jscomp.global.document.createEvent("CustomEvent"),Xa.initCustomEvent("unhandledrejection",!1,!0,Xa));Xa.promise=this;Xa.reason=this.result_;return c(Xa)};ra.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var Xa=0;Xa<this.onSettledCallbacks_.length;++Xa)Qb.asyncExecute(this.onSettledCallbacks_[Xa]);
this.onSettledCallbacks_=null}};var Qb=new Ua;ra.prototype.settleSameAsPromise_=function(Xa){var Db=this.createResolveAndReject_();Xa.callWhenSettled_(Db.resolve,Db.reject)};ra.prototype.settleSameAsThenable_=function(Xa,Db){var c=this.createResolveAndReject_();try{Xa.call(Db,c.resolve,c.reject)}catch(gb){c.reject(gb)}};ra.prototype.then=function(Xa,Db){function c(p,e){return"function"==typeof p?function(k){try{gb(p(k))}catch(f){a(f)}}:e}var gb,a,d=new ra(function(p,e){gb=p;a=e});this.callWhenSettled_(c(Xa,
gb),c(Db,a));return d};ra.prototype.catch=function(Xa){return this.then(void 0,Xa)};ra.prototype.callWhenSettled_=function(Xa,Db){function c(){switch(gb.state_){case 1:Xa(gb.result_);break;case 2:Db(gb.result_);break;default:throw Error("Unexpected state: "+gb.state_);}}var gb=this;null==this.onSettledCallbacks_?Qb.asyncExecute(c):this.onSettledCallbacks_.push(c);this.isRejectionHandled_=!0};ra.resolve=Sa;ra.reject=function(Xa){return new ra(function(Db,c){c(Xa)})};ra.race=function(Xa){return new ra(function(Db,
c){for(var gb=$jscomp.makeIterator(Xa),a=gb.next();!a.done;a=gb.next())Sa(a.value).callWhenSettled_(Db,c)})};ra.all=function(Xa){var Db=$jscomp.makeIterator(Xa),c=Db.next();return c.done?Sa([]):new ra(function(gb,a){function d(k){return function(f){p[k]=f;e--;0==e&&gb(p)}}var p=[],e=0;do p.push(void 0),e++,Sa(c.value).callWhenSettled_(d(p.length-1),a),c=Db.next();while(!c.done)})};return ra},"es6","es3");$jscomp.owns=function(Ia,Ua){return Object.prototype.hasOwnProperty.call(Ia,Ua)};
$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(Ia,Ua){for(var Sa=1;Sa<arguments.length;Sa++){var Wa=arguments[Sa];if(Wa)for(var ra in Wa)$jscomp.owns(Wa,ra)&&(Ia[ra]=Wa[ra])}return Ia};$jscomp.polyfill("Object.assign",function(Ia){return Ia||$jscomp.assign},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var Ia={},Ua=Object.create(new $jscomp.global.Proxy(Ia,{get:function(Sa,Wa,ra){return Sa==Ia&&"q"==Wa&&ra==Ua}}));return!0===Ua.q}catch(Sa){return!1}};
$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.polyfill("WeakMap",function(Ia){function Ua(){if(!Ia||!Object.seal)return!1;try{var gb=Object.seal({}),a=Object.seal({}),d=new Ia([[gb,2],[a,3]]);if(2!=d.get(gb)||3!=d.get(a))return!1;d.delete(gb);d.set(a,4);return!d.has(gb)&&4==d.get(a)}catch(p){return!1}}function Sa(){}function Wa(gb){var a=typeof gb;return"object"===a&&null!==gb||"function"===a}function ra(gb){if(!$jscomp.owns(gb,Xa)){var a=new Sa;$jscomp.defineProperty(gb,Xa,{value:a})}}function Qb(gb){if(!$jscomp.ISOLATE_POLYFILLS){var a=
Object[gb];a&&(Object[gb]=function(d){if(d instanceof Sa)return d;Object.isExtensible(d)&&ra(d);return a(d)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(Ia&&$jscomp.ES6_CONFORMANCE)return Ia}else if(Ua())return Ia;var Xa="$jscomp_hidden_"+Math.random();Qb("freeze");Qb("preventExtensions");Qb("seal");var Db=0,c=function(gb){this.id_=(Db+=Math.random()+1).toString();if(gb){gb=$jscomp.makeIterator(gb);for(var a;!(a=gb.next()).done;)a=a.value,this.set(a[0],a[1])}};c.prototype.set=function(gb,
a){if(!Wa(gb))throw Error("Invalid WeakMap key");ra(gb);if(!$jscomp.owns(gb,Xa))throw Error("WeakMap key fail: "+gb);gb[Xa][this.id_]=a;return this};c.prototype.get=function(gb){return Wa(gb)&&$jscomp.owns(gb,Xa)?gb[Xa][this.id_]:void 0};c.prototype.has=function(gb){return Wa(gb)&&$jscomp.owns(gb,Xa)&&$jscomp.owns(gb[Xa],this.id_)};c.prototype.delete=function(gb){return Wa(gb)&&$jscomp.owns(gb,Xa)&&$jscomp.owns(gb[Xa],this.id_)?delete gb[Xa][this.id_]:!1};return c},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(Ia){function Ua(){if($jscomp.ASSUME_NO_NATIVE_MAP||!Ia||"function"!=typeof Ia||!Ia.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),gb=new Ia($jscomp.makeIterator([[c,"s"]]));if("s"!=gb.get(c)||1!=gb.size||gb.get({x:4})||gb.set({x:4},"t")!=gb||2!=gb.size)return!1;var a=gb.entries(),d=a.next();if(d.done||d.value[0]!=c||"s"!=d.value[1])return!1;d=a.next();return d.done||4!=d.value[0].x||"t"!=d.value[1]||!a.next().done?!1:!0}catch(p){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(Ia&&$jscomp.ES6_CONFORMANCE)return Ia}else if(Ua())return Ia;var Sa=new WeakMap,Wa=function(c){this.data_={};this.head_=Xa();this.size=0;if(c){c=$jscomp.makeIterator(c);for(var gb;!(gb=c.next()).done;)gb=gb.value,this.set(gb[0],gb[1])}};Wa.prototype.set=function(c,gb){c=0===c?0:c;var a=ra(this,c);a.list||(a.list=this.data_[a.id]=[]);a.entry?a.entry.value=gb:(a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,value:gb},a.list.push(a.entry),
this.head_.previous.next=a.entry,this.head_.previous=a.entry,this.size++);return this};Wa.prototype.delete=function(c){c=ra(this,c);return c.entry&&c.list?(c.list.splice(c.index,1),c.list.length||delete this.data_[c.id],c.entry.previous.next=c.entry.next,c.entry.next.previous=c.entry.previous,c.entry.head=null,this.size--,!0):!1};Wa.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=Xa();this.size=0};Wa.prototype.has=function(c){return!!ra(this,c).entry};Wa.prototype.get=function(c){return(c=
ra(this,c).entry)&&c.value};Wa.prototype.entries=function(){return Qb(this,function(c){return[c.key,c.value]})};Wa.prototype.keys=function(){return Qb(this,function(c){return c.key})};Wa.prototype.values=function(){return Qb(this,function(c){return c.value})};Wa.prototype.forEach=function(c,gb){for(var a=this.entries(),d;!(d=a.next()).done;)d=d.value,c.call(gb,d[1],d[0],this)};Wa.prototype[Symbol.iterator]=Wa.prototype.entries;var ra=function(c,gb){var a=gb&&typeof gb;"object"==a||"function"==a?Sa.has(gb)?
a=Sa.get(gb):(a=""+ ++Db,Sa.set(gb,a)):a="p_"+gb;var d=c.data_[a];if(d&&$jscomp.owns(c.data_,a))for(c=0;c<d.length;c++){var p=d[c];if(gb!==gb&&p.key!==p.key||gb===p.key)return{id:a,list:d,index:c,entry:p}}return{id:a,list:d,index:-1,entry:void 0}},Qb=function(c,gb){var a=c.head_;return $jscomp.iteratorPrototype(function(){if(a){for(;a.head!=c.head_;)a=a.previous;for(;a.next!=a.head;)return a=a.next,{done:!1,value:gb(a)};a=null}return{done:!0,value:void 0}})},Xa=function(){var c={};return c.previous=
c.next=c.head=c},Db=0;return Wa},"es6","es3");
$jscomp.polyfill("Set",function(Ia){function Ua(){if($jscomp.ASSUME_NO_NATIVE_SET||!Ia||"function"!=typeof Ia||!Ia.prototype.entries||"function"!=typeof Object.seal)return!1;try{var Wa=Object.seal({x:4}),ra=new Ia($jscomp.makeIterator([Wa]));if(!ra.has(Wa)||1!=ra.size||ra.add(Wa)!=ra||1!=ra.size||ra.add({x:4})!=ra||2!=ra.size)return!1;var Qb=ra.entries(),Xa=Qb.next();if(Xa.done||Xa.value[0]!=Wa||Xa.value[1]!=Wa)return!1;Xa=Qb.next();return Xa.done||Xa.value[0]==Wa||4!=Xa.value[0].x||Xa.value[1]!=
Xa.value[0]?!1:Qb.next().done}catch(Db){return!1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(Ia&&$jscomp.ES6_CONFORMANCE)return Ia}else if(Ua())return Ia;var Sa=function(Wa){this.map_=new Map;if(Wa){Wa=$jscomp.makeIterator(Wa);for(var ra;!(ra=Wa.next()).done;)this.add(ra.value)}this.size=this.map_.size};Sa.prototype.add=function(Wa){Wa=0===Wa?0:Wa;this.map_.set(Wa,Wa);this.size=this.map_.size;return this};Sa.prototype.delete=function(Wa){Wa=this.map_.delete(Wa);this.size=this.map_.size;return Wa};
Sa.prototype.clear=function(){this.map_.clear();this.size=0};Sa.prototype.has=function(Wa){return this.map_.has(Wa)};Sa.prototype.entries=function(){return this.map_.entries()};Sa.prototype.values=function(){return this.map_.values()};Sa.prototype.keys=Sa.prototype.values;Sa.prototype[Symbol.iterator]=Sa.prototype.values;Sa.prototype.forEach=function(Wa,ra){var Qb=this;this.map_.forEach(function(Xa){return Wa.call(ra,Xa,Xa,Qb)})};return Sa},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(Ia){return Ia?Ia:function(Ua,Sa,Wa){var ra=this.length||0;0>Sa&&(Sa=Math.max(0,ra+Sa));if(null==Wa||Wa>ra)Wa=ra;Wa=Number(Wa);0>Wa&&(Wa=Math.max(0,ra+Wa));for(Sa=Number(Sa||0);Sa<Wa;Sa++)this[Sa]=Ua;return this}},"es6","es3");$jscomp.typedArrayFill=function(Ia){return Ia?Ia:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Array.prototype.flat",function(Ia){return Ia?Ia:function(Ua){Ua=void 0===Ua?1:Ua;for(var Sa=[],Wa=0;Wa<this.length;Wa++){var ra=this[Wa];Array.isArray(ra)&&0<Ua?(ra=Array.prototype.flat.call(ra,Ua-1),Sa.push.apply(Sa,ra)):Sa.push(ra)}return Sa}},"es9","es5");$jscomp.polyfill("Object.is",function(Ia){return Ia?Ia:function(Ua,Sa){return Ua===Sa?0!==Ua||1/Ua===1/Sa:Ua!==Ua&&Sa!==Sa}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(Ia){return Ia?Ia:function(Ua,Sa){var Wa=this;Wa instanceof String&&(Wa=String(Wa));var ra=Wa.length;Sa=Sa||0;for(0>Sa&&(Sa=Math.max(Sa+ra,0));Sa<ra;Sa++){var Qb=Wa[Sa];if(Qb===Ua||Object.is(Qb,Ua))return!0}return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(Ia){return Ia?Ia:function(Ua,Sa){return-1!==$jscomp.checkStringArgs(this,Ua,"includes").indexOf(Ua,Sa||0)}},"es6","es3");
$jscomp.polyfill("Number.isFinite",function(Ia){return Ia?Ia:function(Ua){return"number"!==typeof Ua?!1:!isNaN(Ua)&&Infinity!==Ua&&-Infinity!==Ua}},"es6","es3");$jscomp.polyfill("Number.isInteger",function(Ia){return Ia?Ia:function(Ua){return Number.isFinite(Ua)?Ua===Math.floor(Ua):!1}},"es6","es3");
(self.webpackChunkwebina=self.webpackChunkwebina||[]).push([[797],{VS3o:function(Ia,Ua,Sa){var Wa=Sa("VS3o"),ra=Sa("EVdn"),Qb,Xa;(function(a,d){"object"==typeof Ia.exports?Ia.exports=a.document?d(a,!0):function(p){if(!p.document)throw Error("jQuery requires a window with a document");return d(p)}:d(a)})("undefined"!=typeof window?window:this,function(a,d){function p(b,g,B){var M,S,ba=(B=B||wb).createElement("script");if(ba.text=b,g)for(M in na)(S=g[M]||g.getAttribute&&g.getAttribute(M))&&ba.setAttribute(M,
S);B.head.appendChild(ba).parentNode.removeChild(ba)}function e(b){return null==b?b+"":"object"==typeof b||"function"==typeof b?uc[Xb.call(b)]||"object":typeof b}function k(b){var g=!!b&&"length"in b&&b.length,B=e(b);return!nb(b)&&!bc(b)&&("array"===B||0===g||"number"==typeof g&&0<g&&g-1 in b)}function f(b,g){return b.nodeName&&b.nodeName.toLowerCase()===g.toLowerCase()}function h(b,g,B){return nb(g)?C.grep(b,function(M,S){return!!g.call(M,S,M)!==B}):g.nodeType?C.grep(b,function(M){return M===g!==
B}):"string"!=typeof g?C.grep(b,function(M){return-1<Pb.call(g,M)!==B}):C.filter(g,b,B)}function r(b,g){for(;(b=b[g])&&1!==b.nodeType;);return b}function u(b){return b}function H(b){throw b;}function z(b,g,B,M){var S;try{b&&nb(S=b.promise)?S.call(b).done(g).fail(B):b&&nb(S=b.then)?S.call(b,g,B):g.apply(void 0,[b].slice(M))}catch(ba){B.apply(void 0,[ba])}}function F(){wb.removeEventListener("DOMContentLoaded",F);a.removeEventListener("load",F);C.ready()}function t(b,g){return g.toUpperCase()}function q(b){return b.replace(fc,
"ms-").replace(Hc,t)}function n(){this.expando=C.expando+n.uid++}function v(b,g,B){var M;if(void 0===B&&1===b.nodeType)if(M="data-"+g.replace(pd,"-$&").toLowerCase(),"string"==typeof(B=b.getAttribute(M))){try{M=B,B="true"===M||"false"!==M&&("null"===M?null:M===+M+""?+M:Nc.test(M)?JSON.parse(M):M)}catch(S){}kc.set(b,g,B)}else B=void 0;return B}function x(b,g,B,M){var S,ba,ca=20,pa=M?function(){return M.cur()}:function(){return C.css(b,g,"")},ta=pa(),Ha=B&&B[3]||(C.cssNumber[g]?"":"px"),Qa=b.nodeType&&
(C.cssNumber[g]||"px"!==Ha&&+ta)&&Vc.exec(C.css(b,g));if(Qa&&Qa[3]!==Ha){ta/=2;Ha=Ha||Qa[3];for(Qa=+ta||1;ca--;)C.style(b,g,Qa+Ha),0>=(1-ba)*(1-(ba=pa()/ta||.5))&&(ca=0),Qa/=ba;Qa*=2;C.style(b,g,Qa+Ha);B=B||[]}return B&&(Qa=+Qa||+ta||0,S=B[1]?Qa+(B[1]+1)*B[2]:+B[2],M&&(M.unit=Ha,M.start=Qa,M.end=S)),S}function w(b,g){for(var B,M,S=[],ba=0,ca=b.length;ba<ca;ba++)if((M=b[ba]).style)if(B=M.style.display,g){if("none"===B&&(S[ba]=pb.get(M,"display")||null,S[ba]||(M.style.display="")),""===M.style.display&&
bd(M)){B=ba;var pa=void 0;var ta=M.ownerDocument;var Ha=M.nodeName;ta=(M=y[Ha])||(pa=ta.body.appendChild(ta.createElement(Ha)),M=C.css(pa,"display"),pa.parentNode.removeChild(pa),"none"===M&&(M="block"),y[Ha]=M,M);S[B]=ta}}else"none"!==B&&(S[ba]="none",pb.set(M,"display",B));for(ba=0;ba<ca;ba++)null!=S[ba]&&(b[ba].style.display=S[ba]);return b}function D(b,g){var B;return B=void 0!==b.getElementsByTagName?b.getElementsByTagName(g||"*"):void 0!==b.querySelectorAll?b.querySelectorAll(g||"*"):[],void 0===
g||g&&f(b,g)?C.merge([b],B):B}function E(b,g){for(var B=0,M=b.length;B<M;B++)pb.set(b[B],"globalEval",!g||pb.get(g[B],"globalEval"))}function Q(b,g,B,M,S){for(var ba,ca,pa,ta,Ha=g.createDocumentFragment(),Qa=[],ya=0,Za=b.length;ya<Za;ya++)if((ba=b[ya])||0===ba)if("object"===e(ba))C.merge(Qa,ba.nodeType?[ba]:ba);else if(ab.test(ba)){ca=ca||Ha.appendChild(g.createElement("div"));pa=(qa.exec(ba)||["",""])[1].toLowerCase();pa=Na[pa]||Na._default;ca.innerHTML=pa[1]+C.htmlPrefilter(ba)+pa[2];for(pa=pa[0];pa--;)ca=
ca.lastChild;C.merge(Qa,ca.childNodes);(ca=Ha.firstChild).textContent=""}else Qa.push(g.createTextNode(ba));Ha.textContent="";for(ya=0;ba=Qa[ya++];)if(M&&-1<C.inArray(ba,M))S&&S.push(ba);else if(ta=Tc(ba),ca=D(Ha.appendChild(ba),"script"),ta&&E(ca),B)for(pa=0;ba=ca[pa++];)Ea.test(ba.type||"")&&B.push(ba);return Ha}function N(){return!0}function R(){return!1}function m(b,g){a:{try{var B=wb.activeElement;break a}catch(M){}B=void 0}return b===B==("focus"===g)}function G(b,g,B,M,S,ba){var ca,pa;if("object"==
typeof g){for(pa in"string"!=typeof B&&(M=M||B,B=void 0),g)G(b,pa,B,M,g[pa],ba);return b}if(null==M&&null==S?(S=B,M=B=void 0):null==S&&("string"==typeof B?(S=M,M=void 0):(S=M,M=B,B=void 0)),!1===S)S=R;else if(!S)return b;return 1===ba&&(ca=S,(S=function(ta){return C().off(ta),ca.apply(this,arguments)}).guid=ca.guid||(ca.guid=C.guid++)),b.each(function(){C.event.add(this,g,S,M,B)})}function L(b,g,B){B?(pb.set(b,g,!1),C.event.add(b,g,{namespace:!1,handler:function(M){var S,ba,ca=pb.get(this,g);if(1&
M.isTrigger&&this[g])if(ca.length)(C.event.special[g]||{}).delegateType&&M.stopPropagation();else{if(ca=Lb.call(arguments),pb.set(this,g,ca),S=B(this,g),this[g](),ca!==(ba=pb.get(this,g))||S?pb.set(this,g,!1):ba={},ca!==ba)return M.stopImmediatePropagation(),M.preventDefault(),ba&&ba.value}else ca.length&&(pb.set(this,g,{value:C.event.trigger(C.extend(ca[0],C.Event.prototype),ca.slice(1),this)}),M.stopImmediatePropagation())}})):void 0===pb.get(b,g)&&C.event.add(b,g,N)}function O(b,g){return f(b,
"table")&&f(11!==g.nodeType?g:g.firstChild,"tr")&&C(b).children("tbody")[0]||b}function Z(b){return b.type=(null!==b.getAttribute("type"))+"/"+b.type,b}function W(b){return"true/"===(b.type||"").slice(0,5)?b.type=b.type.slice(5):b.removeAttribute("type"),b}function ha(b,g){var B,M,S,ba,ca;if(1===g.nodeType){if(pb.hasData(b)&&(ca=pb.get(b).events))for(M in pb.remove(g,"handle events"),ca){var pa=0;for(B=ca[M].length;pa<B;pa++)C.event.add(g,M,ca[M][pa])}kc.hasData(b)&&(S=kc.access(b),ba=C.extend({},
S),kc.set(g,ba))}}function ja(b,g,B,M){g=Ub(g);var S,ba,ca,pa=0,ta=b.length,Ha=ta-1,Qa=g[0],ya=nb(Qa);if(ya||1<ta&&"string"==typeof Qa&&!Fb.checkClone&&eb.test(Qa))return b.each(function(Cb){var sb=b.eq(Cb);ya&&(g[0]=Qa.call(this,Cb,sb.html()));ja(sb,g,B,M)});if(ta&&(ba=(S=Q(g,b[0].ownerDocument,!1,b,M)).firstChild,1===S.childNodes.length&&(S=ba),ba||M)){for(ca=(ba=C.map(D(S,"script"),Z)).length;pa<ta;pa++){var Za=S;pa!==Ha&&(Za=C.clone(Za,!0,!0),ca&&C.merge(ba,D(Za,"script")));B.call(b[pa],Za,pa)}if(ca)for(S=
ba[ba.length-1].ownerDocument,C.map(ba,W),pa=0;pa<ca;pa++)Za=ba[pa],Ea.test(Za.type||"")&&!pb.access(Za,"globalEval")&&C.contains(S,Za)&&(Za.src&&"module"!==(Za.type||"").toLowerCase()?C._evalUrl&&!Za.noModule&&C._evalUrl(Za.src,{nonce:Za.nonce||Za.getAttribute("nonce")},S):p(Za.textContent.replace(ib,""),Za,S))}return b}function ea(b,g,B){for(var M=g?C.filter(g,b):b,S=0;null!=(g=M[S]);S++)B||1!==g.nodeType||C.cleanData(D(g)),g.parentNode&&(B&&Tc(g)&&E(D(g,"script")),g.parentNode.removeChild(g));
return b}function la(b,g,B){var M,S,ba,ca,pa=b.style;return(B=B||Hb(b))&&(""!==(ca=B.getPropertyValue(g)||B[g])||Tc(b)||(ca=C.style(b,g)),!Fb.pixelBoxStyles()&&Gb.test(ca)&&vc.test(g)&&(M=pa.width,S=pa.minWidth,ba=pa.maxWidth,pa.minWidth=pa.maxWidth=pa.width=ca,ca=B.width,pa.width=M,pa.minWidth=S,pa.maxWidth=ba)),void 0!==ca?ca+"":ca}function oa(b,g){return{get:function(){if(!b())return(this.get=g).apply(this,arguments);delete this.get}}}function wa(b){var g;if(!(g=C.cssProps[b]||Oc[b])){if(!(b in
tb)){a:{g=b;for(var B=g[0].toUpperCase()+g.slice(1),M=Cc.length;M--;)if((g=Cc[M]+B)in tb)break a;g=void 0}b=Oc[b]=g||b}g=b}return g}function U(b,g,B){return(b=Vc.exec(g))?Math.max(0,b[2]-(B||0))+(b[3]||"px"):g}function A(b,g,B,M,S,ba){var ca="width"===g?1:0,pa=0,ta=0;if(B===(M?"border":"content"))return 0;for(;4>ca;ca+=2)"margin"===B&&(ta+=C.css(b,B+oc[ca],!0,S)),M?("content"===B&&(ta-=C.css(b,"padding"+oc[ca],!0,S)),"margin"!==B&&(ta-=C.css(b,"border"+oc[ca]+"Width",!0,S))):(ta+=C.css(b,"padding"+
oc[ca],!0,S),"padding"!==B?ta+=C.css(b,"border"+oc[ca]+"Width",!0,S):pa+=C.css(b,"border"+oc[ca]+"Width",!0,S));return!M&&0<=ba&&(ta+=Math.max(0,Math.ceil(b["offset"+g[0].toUpperCase()+g.slice(1)]-ba-ta-pa-.5))||0),ta}function I(b,g,B){var M=Hb(b),S=(!Fb.boxSizingReliable()||B)&&"border-box"===C.css(b,"boxSizing",!1,M),ba=S,ca=la(b,g,M),pa="offset"+g[0].toUpperCase()+g.slice(1);if(Gb.test(ca)){if(!B)return ca;ca="auto"}return(!Fb.boxSizingReliable()&&S||!Fb.reliableTrDimensions()&&f(b,"tr")||"auto"===
ca||!parseFloat(ca)&&"inline"===C.css(b,"display",!1,M))&&b.getClientRects().length&&(S="border-box"===C.css(b,"boxSizing",!1,M),(ba=pa in b)&&(ca=b[pa])),(ca=parseFloat(ca)||0)+A(b,g,B||(S?"border":"content"),ba,M,ca)+"px"}function P(b,g,B,M,S){return new P.prototype.init(b,g,B,M,S)}function T(){Fc&&(!1===wb.hidden&&a.requestAnimationFrame?a.requestAnimationFrame(T):a.setTimeout(T,C.fx.interval),C.fx.tick())}function Y(){return a.setTimeout(function(){cd=void 0}),cd=Date.now()}function V(b,g){var B,
M=0,S={height:b};for(g=g?1:0;4>M;M+=2-g)S["margin"+(B=oc[M])]=S["padding"+B]=b;return g&&(S.opacity=S.width=b),S}function fa(b,g,B){for(var M,S=(ka.tweeners[g]||[]).concat(ka.tweeners["*"]),ba=0,ca=S.length;ba<ca;ba++)if(M=S[ba].call(B,g,b))return M}function ka(b,g,B){var M,S=0,ba=ka.prefilters.length,ca=C.Deferred().always(function(){delete pa.elem}),pa=function(){if(M)return!1;var Ha=cd||Y();Ha=Math.max(0,ta.startTime+ta.duration-Ha);for(var Qa=1-(Ha/ta.duration||0),ya=0,Za=ta.tweens.length;ya<
Za;ya++)ta.tweens[ya].run(Qa);return ca.notifyWith(b,[ta,Qa,Ha]),1>Qa&&Za?Ha:(Za||ca.notifyWith(b,[ta,1,0]),ca.resolveWith(b,[ta]),!1)},ta=ca.promise({elem:b,props:C.extend({},g),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},B),originalProperties:g,originalOptions:B,startTime:cd||Y(),duration:B.duration,tweens:[],createTween:function(Ha,Qa){Ha=C.Tween(b,ta.opts,Ha,Qa,ta.opts.specialEasing[Ha]||ta.opts.easing);return ta.tweens.push(Ha),Ha},stop:function(Ha){var Qa=0,ya=Ha?ta.tweens.length:
0;if(M)return this;for(M=!0;Qa<ya;Qa++)ta.tweens[Qa].run(1);return Ha?(ca.notifyWith(b,[ta,1,0]),ca.resolveWith(b,[ta,Ha])):ca.rejectWith(b,[ta,Ha]),this}});B=ta.props;!function(Ha,Qa){var ya,Za,Cb,sb,Vb;for(ya in Ha)if(Cb=Qa[Za=q(ya)],sb=Ha[ya],Array.isArray(sb)&&(Cb=sb[1],sb=Ha[ya]=sb[0]),ya!==Za&&(Ha[Za]=sb,delete Ha[ya]),(Vb=C.cssHooks[Za])&&"expand"in Vb)for(ya in sb=Vb.expand(sb),delete Ha[Za],sb)ya in Ha||(Ha[ya]=sb[ya],Qa[ya]=Cb);else Qa[Za]=Cb}(B,ta.opts.specialEasing);for(;S<ba;S++)if(g=
ka.prefilters[S].call(ta,b,B,ta.opts))return nb(g.stop)&&(C._queueHooks(ta.elem,ta.opts.queue).stop=g.stop.bind(g)),g;return C.map(B,fa,ta),nb(ta.opts.start)&&ta.opts.start.call(b,ta),ta.progress(ta.opts.progress).done(ta.opts.done,ta.opts.complete).fail(ta.opts.fail).always(ta.opts.always),C.fx.timer(C.extend(pa,{elem:b,anim:ta,queue:ta.opts.queue})),ta}function ma(b){return(b.match(hc)||[]).join(" ")}function za(b){return b.getAttribute&&b.getAttribute("class")||""}function Ma(b){return Array.isArray(b)?
b:"string"==typeof b&&b.match(hc)||[]}function Ra(b,g,B,M){var S;if(Array.isArray(g))C.each(g,function(ba,ca){B||Wc.test(b)?M(b,ca):Ra(b+"["+("object"==typeof ca&&null!=ca?ba:"")+"]",ca,B,M)});else if(B||"object"!==e(g))M(b,g);else for(S in g)Ra(b+"["+S+"]",g[S],B,M)}function va(b){return function(g,B){"string"!=typeof g&&(B=g,g="*");var M=0,S=g.toLowerCase().match(hc)||[];if(nb(B))for(;g=S[M++];)"+"===g[0]?(g=g.slice(1)||"*",(b[g]=b[g]||[]).unshift(B)):(b[g]=b[g]||[]).push(B)}}function Ca(b,g,B,
M){function S(pa){var ta;return ba[pa]=!0,C.each(b[pa]||[],function(Ha,Qa){Ha=Qa(g,B,M);return"string"!=typeof Ha||ca||ba[Ha]?ca?!(ta=Ha):void 0:(g.dataTypes.unshift(Ha),S(Ha),!1)}),ta}var ba={},ca=b===Ba;return S(g.dataTypes[0])||!ba["*"]&&S("*")}function Oa(b,g){var B,M,S=C.ajaxSettings.flatOptions||{};for(B in g)void 0!==g[B]&&((S[B]?b:M||(M={}))[B]=g[B]);return M&&C.extend(!0,b,M),b}var $a=[],ob=Object.getPrototypeOf,Lb=$a.slice,Ub=$a.flat?function(b){return $a.flat.call(b)}:function(b){return $a.concat.apply([],
b)},lc=$a.push,Pb=$a.indexOf,uc={},Xb=uc.toString,Dc=uc.hasOwnProperty,Ec=Dc.toString,pc=Ec.call(Object),Fb={},nb=function(b){return"function"==typeof b&&"number"!=typeof b.nodeType&&"function"!=typeof b.item},bc=function(b){return null!=b&&b===b.window},wb=a.document,na={type:!0,src:!0,nonce:!0,noModule:!0},C=function(b,g){return new C.fn.init(b,g)};C.fn=C.prototype={jquery:"3.6.0",constructor:C,length:0,toArray:function(){return Lb.call(this)},get:function(b){return null==b?Lb.call(this):0>b?this[b+
this.length]:this[b]},pushStack:function(b){b=C.merge(this.constructor(),b);return b.prevObject=this,b},each:function(b){return C.each(this,b)},map:function(b){return this.pushStack(C.map(this,function(g,B){return b.call(g,B,g)}))},slice:function(){return this.pushStack(Lb.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,function(b,g){return(g+1)%2}))},odd:function(){return this.pushStack(C.grep(this,
function(b,g){return g%2}))},eq:function(b){var g=this.length;b=+b+(0>b?g:0);return this.pushStack(0<=b&&b<g?[this[b]]:[])},end:function(){return this.prevObject||this.constructor()},push:lc,sort:$a.sort,splice:$a.splice};C.extend=C.fn.extend=function(){var b,g,B,M,S,ba=arguments[0]||{},ca=1,pa=arguments.length,ta=!1;"boolean"==typeof ba&&(ta=ba,ba=arguments[ca]||{},ca++);"object"==typeof ba||nb(ba)||(ba={});for(ca===pa&&(ba=this,ca--);ca<pa;ca++)if(null!=(b=arguments[ca]))for(g in b){var Ha=b[g];
"__proto__"!==g&&ba!==Ha&&(ta&&Ha&&(C.isPlainObject(Ha)||(M=Array.isArray(Ha)))?(B=ba[g],S=M&&!Array.isArray(B)?[]:M||C.isPlainObject(B)?B:{},M=!1,ba[g]=C.extend(ta,S,Ha)):void 0!==Ha&&(ba[g]=Ha))}return ba};C.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw Error(b);},noop:function(){},isPlainObject:function(b){var g,B;return!(!b||"[object Object]"!==Xb.call(b))&&(!(g=ob(b))||"function"==typeof(B=Dc.call(g,"constructor")&&g.constructor)&&Ec.call(B)===
pc)},isEmptyObject:function(b){for(var g in b)return!1;return!0},globalEval:function(b,g,B){p(b,{nonce:g&&g.nonce},B)},each:function(b,g){var B,M=0;if(k(b))for(B=b.length;M<B&&!1!==g.call(b[M],M,b[M]);M++);else for(M in b)if(!1===g.call(b[M],M,b[M]))break;return b},makeArray:function(b,g){g=g||[];return null!=b&&(k(Object(b))?C.merge(g,"string"==typeof b?[b]:b):lc.call(g,b)),g},inArray:function(b,g,B){return null==g?-1:Pb.call(g,b,B)},merge:function(b,g){for(var B=+g.length,M=0,S=b.length;M<B;M++)b[S++]=
g[M];return b.length=S,b},grep:function(b,g,B){var M=[],S=0,ba=b.length;for(B=!B;S<ba;S++)!g(b[S],S)!==B&&M.push(b[S]);return M},map:function(b,g,B){var M,S,ba=0,ca=[];if(k(b))for(M=b.length;ba<M;ba++)null!=(S=g(b[ba],ba,B))&&ca.push(S);else for(ba in b)null!=(S=g(b[ba],ba,B))&&ca.push(S);return Ub(ca)},guid:1,support:Fb});"function"==typeof Symbol&&(C.fn[Symbol.iterator]=$a[Symbol.iterator]);C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(b,g){uc["[object "+
g+"]"]=g.toLowerCase()});var Va=function(b){function g(ia,ua,Fa,Da){var Pa,hb,jb,Eb,mb=ua&&ua.ownerDocument;var Mb=ua?ua.nodeType:9;if(Fa=Fa||[],"string"!=typeof ia||!ia||1!==Mb&&9!==Mb&&11!==Mb)return Fa;if(!Da&&(id(ua),ua=ua||Rb,Pc)){if(11!==Mb&&(Eb=Td.exec(ia)))if(Pa=Eb[1])if(9===Mb){if(!(hb=ua.getElementById(Pa)))return Fa;if(hb.id===Pa)return Fa.push(hb),Fa}else{if(mb&&(hb=mb.getElementById(Pa))&&wc(ua,hb)&&hb.id===Pa)return Fa.push(hb),Fa}else{if(Eb[2])return td.apply(Fa,ua.getElementsByTagName(ia)),
Fa;if((Pa=Eb[3])&&fb.getElementsByClassName&&ua.getElementsByClassName)return td.apply(Fa,ua.getElementsByClassName(Pa)),Fa}if(!(!fb.qsa||Cd[ia+" "]||Gc&&Gc.test(ia)||1===Mb&&"object"===ua.nodeName.toLowerCase())){if(Pa=ia,mb=ua,1===Mb&&(Ud.test(ia)||Kd.test(ia))){(mb=Hd.test(ia)&&ya(ua.parentNode)||ua)===ua&&fb.scope||((jb=ua.getAttribute("id"))?jb=jb.replace(Ld,Md):ua.setAttribute("id",jb=Sb));for(Mb=(Pa=ud(ia)).length;Mb--;)Pa[Mb]=(jb?"#"+jb:":scope")+" "+Cb(Pa[Mb]);Pa=Pa.join(",")}try{return td.apply(Fa,
mb.querySelectorAll(Pa)),Fa}catch(gc){Cd(ia,!0)}finally{jb===Sb&&ua.removeAttribute("id")}}}return od(ia.replace(Dd,"$1"),ua,Fa,Da)}function B(){var ia=[];return function Pa(Fa,Da){return ia.push(Fa+" ")>ub.cacheLength&&delete Pa[ia.shift()],Pa[Fa+" "]=Da}}function M(ia){return ia[Sb]=!0,ia}function S(ia){var ua=Rb.createElement("fieldset");try{return!!ia(ua)}catch(Fa){return!1}finally{ua.parentNode&&ua.parentNode.removeChild(ua)}}function ba(ia,ua){ia=ia.split("|");for(var Fa=ia.length;Fa--;)ub.attrHandle[ia[Fa]]=
ua}function ca(ia,ua){var Fa=ua&&ia,Da=Fa&&1===ia.nodeType&&1===ua.nodeType&&ia.sourceIndex-ua.sourceIndex;if(Da)return Da;if(Fa)for(;Fa=Fa.nextSibling;)if(Fa===ua)return-1;return ia?1:-1}function pa(ia){return function(ua){return"input"===ua.nodeName.toLowerCase()&&ua.type===ia}}function ta(ia){return function(ua){var Fa=ua.nodeName.toLowerCase();return("input"===Fa||"button"===Fa)&&ua.type===ia}}function Ha(ia){return function(ua){return"form"in ua?ua.parentNode&&!1===ua.disabled?"label"in ua?"label"in
ua.parentNode?ua.parentNode.disabled===ia:ua.disabled===ia:ua.isDisabled===ia||ua.isDisabled!==!ia&&Vd(ua)===ia:ua.disabled===ia:"label"in ua&&ua.disabled===ia}}function Qa(ia){return M(function(ua){return ua=+ua,M(function(Fa,Da){for(var Pa,hb=ia([],Fa.length,ua),jb=hb.length;jb--;)Fa[Pa=hb[jb]]&&(Fa[Pa]=!(Da[Pa]=Fa[Pa]))})})}function ya(ia){return ia&&void 0!==ia.getElementsByTagName&&ia}function Za(){}function Cb(ia){for(var ua=0,Fa=ia.length,Da="";ua<Fa;ua++)Da+=ia[ua].value;return Da}function sb(ia,
ua,Fa){var Da=ua.dir,Pa=ua.next,hb=Pa||Da,jb=Fa&&"parentNode"===hb,Eb=qd++;return ua.first?function(mb,Mb,gc){for(;mb=mb[Da];)if(1===mb.nodeType||jb)return ia(mb,Mb,gc);return!1}:function(mb,Mb,gc){var Ic,Jc,Yb,rc=[xc,Eb];if(gc)for(;mb=mb[Da];){if((1===mb.nodeType||jb)&&ia(mb,Mb,gc))return!0}else for(;mb=mb[Da];)if(1===mb.nodeType||jb)if(Jc=(Yb=mb[Sb]||(mb[Sb]={}))[mb.uniqueID]||(Yb[mb.uniqueID]={}),Pa&&Pa===mb.nodeName.toLowerCase())mb=mb[Da]||mb;else{if((Ic=Jc[hb])&&Ic[0]===xc&&Ic[1]===Eb)return rc[2]=
Ic[2];if(Jc[hb]=rc,rc[2]=ia(mb,Mb,gc))return!0}return!1}}function Vb(ia){return 1<ia.length?function(ua,Fa,Da){for(var Pa=ia.length;Pa--;)if(!ia[Pa](ua,Fa,Da))return!1;return!0}:ia[0]}function Qc(ia,ua,Fa,Da,Pa){for(var hb,jb=[],Eb=0,mb=ia.length,Mb=null!=ua;Eb<mb;Eb++)(hb=ia[Eb])&&(Fa&&!Fa(hb,Da,Pa)||(jb.push(hb),Mb&&ua.push(Eb)));return jb}function jd(ia,ua,Fa,Da,Pa,hb){return Da&&!Da[Sb]&&(Da=jd(Da)),Pa&&!Pa[Sb]&&(Pa=jd(Pa,hb)),M(function(jb,Eb,mb,Mb){var gc,Ic=[],Jc=[],Yb=Eb.length,rc;if(!(rc=
jb)){rc=ua||"*";for(var qc=mb.nodeType?[mb]:mb,dd=[],kd=0,Xc=qc.length;kd<Xc;kd++)g(rc,qc[kd],dd);rc=dd}rc=!ia||!jb&&ua?rc:Qc(rc,Ic,ia,mb,Mb);qc=Fa?Pa||(jb?ia:Yb||Da)?[]:Eb:rc;if(Fa&&Fa(rc,qc,mb,Mb),Da){var Kc=Qc(qc,Jc);Da(Kc,[],mb,Mb);for(mb=Kc.length;mb--;)(gc=Kc[mb])&&(qc[Jc[mb]]=!(rc[Jc[mb]]=gc))}if(jb){if(Pa||ia){if(Pa){Kc=[];for(mb=qc.length;mb--;)(gc=qc[mb])&&Kc.push(rc[mb]=gc);Pa(null,qc=[],Kc,Mb)}for(mb=qc.length;mb--;)(gc=qc[mb])&&-1<(Kc=Pa?wd(jb,gc):Ic[mb])&&(jb[Kc]=!(Eb[Kc]=gc))}}else qc=
Qc(qc===Eb?qc.splice(Yb,qc.length):qc),Pa?Pa(null,Eb,qc,Mb):td.apply(Eb,qc)})}function sc(ia){var ua,Fa,Da=ia.length,Pa=ub.relative[ia[0].type];var hb=Pa||ub.relative[" "];for(var jb=Pa?1:0,Eb=sb(function(gc){return gc===ua},hb,!0),mb=sb(function(gc){return-1<wd(ua,gc)},hb,!0),Mb=[function(gc,Ic,Jc){gc=!Pa&&(Jc||Ic!==vd)||((ua=Ic).nodeType?Eb(gc,Ic,Jc):mb(gc,Ic,Jc));return ua=null,gc}];jb<Da;jb++)if(hb=ub.relative[ia[jb].type])Mb=[sb(Vb(Mb),hb)];else{if((hb=ub.filter[ia[jb].type].apply(null,ia[jb].matches))[Sb]){for(Fa=
++jb;Fa<Da&&!ub.relative[ia[Fa].type];Fa++);return jd(1<jb&&Vb(Mb),1<jb&&Cb(ia.slice(0,jb-1).concat({value:" "===ia[jb-2].type?"*":""})).replace(Dd,"$1"),hb,jb<Fa&&sc(ia.slice(jb,Fa)),Fa<Da&&sc(ia=ia.slice(Fa)),Fa<Da&&Cb(ia))}Mb.push(hb)}return Vb(Mb)}var Rc,fb,ub,Zb,Yc,ud,Ad,od,vd,ld,md,id,Rb,yc,Pc,Gc,ed,$c,wc,Sb="sizzle"+1*new Date,Uc=b.document,xc=0,qd=0,xd=B(),Ed=B(),Nd=B(),Cd=B(),Id=function(ia,ua){return ia===ua&&(md=!0),0},Wd={}.hasOwnProperty,yd=[],Xd=yd.pop,Yd=yd.push,td=yd.push,Od=yd.slice,
wd=function(ia,ua){for(var Fa=0,Da=ia.length;Fa<Da;Fa++)if(ia[Fa]===ua)return Fa;return-1},Zd=/[\x20\t\r\n\f]+/g,Dd=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,$d=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Kd=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,Ud=/[\x20\t\r\n\f]|>/,ae=/:((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
be=/^(?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+$/,Fd={ID:/^#((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)/,CLASS:/^\.((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)/,TAG:/^((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+))|)[\x20\t\r\n\f]*\]/,
PSEUDO:/^:((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ce=/HTML$/i,de=/^(?:input|select|textarea|button)$/i,ee=/^h\d$/i,Bd=/^[^{]+\{\s*\[native \w/,Td=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Hd=/[+~]/,rd=/\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\([^\r\n\f])/g,sd=function(ia,ua){ia="0x"+ia.slice(1)-
65536;return ua||(0>ia?String.fromCharCode(ia+65536):String.fromCharCode(ia>>10|55296,1023&ia|56320))},Ld=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Md=function(ia,ua){return ua?"\x00"===ia?"\ufffd":ia.slice(0,-1)+"\\"+ia.charCodeAt(ia.length-1).toString(16)+" ":"\\"+ia},Pd=function(){id()},Vd=sb(function(ia){return!0===ia.disabled&&"fieldset"===ia.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{td.apply(yd=Od.call(Uc.childNodes),Uc.childNodes),yd[Uc.childNodes.length].nodeType}catch(ia){td=
{apply:yd.length?function(ua,Fa){Yd.apply(ua,Od.call(Fa))}:function(ua,Fa){for(var Da=ua.length,Pa=0;ua[Da++]=Fa[Pa++];);ua.length=Da-1}}}for(Rc in fb=g.support={},Yc=g.isXML=function(ia){var ua=ia&&(ia.ownerDocument||ia).documentElement;return!ce.test(ia&&ia.namespaceURI||ua&&ua.nodeName||"HTML")},id=g.setDocument=function(ia){var ua,Fa;ia=ia?ia.ownerDocument||ia:Uc;return ia!=Rb&&9===ia.nodeType&&ia.documentElement?(yc=(Rb=ia).documentElement,Pc=!Yc(Rb),Uc!=Rb&&(Fa=Rb.defaultView)&&Fa.top!==Fa&&
(Fa.addEventListener?Fa.addEventListener("unload",Pd,!1):Fa.attachEvent&&Fa.attachEvent("onunload",Pd)),fb.scope=S(function(Da){return yc.appendChild(Da).appendChild(Rb.createElement("div")),void 0!==Da.querySelectorAll&&!Da.querySelectorAll(":scope fieldset div").length}),fb.attributes=S(function(Da){return Da.className="i",!Da.getAttribute("className")}),fb.getElementsByTagName=S(function(Da){return Da.appendChild(Rb.createComment("")),!Da.getElementsByTagName("*").length}),fb.getElementsByClassName=
Bd.test(Rb.getElementsByClassName),fb.getById=S(function(Da){return yc.appendChild(Da).id=Sb,!Rb.getElementsByName||!Rb.getElementsByName(Sb).length}),fb.getById?(ub.filter.ID=function(Da){var Pa=Da.replace(rd,sd);return function(hb){return hb.getAttribute("id")===Pa}},ub.find.ID=function(Da,Pa){if(void 0!==Pa.getElementById&&Pc)return(Da=Pa.getElementById(Da))?[Da]:[]}):(ub.filter.ID=function(Da){var Pa=Da.replace(rd,sd);return function(hb){return(hb=void 0!==hb.getAttributeNode&&hb.getAttributeNode("id"))&&
hb.value===Pa}},ub.find.ID=function(Da,Pa){if(void 0!==Pa.getElementById&&Pc){var hb,jb=Pa.getElementById(Da);if(jb){if((hb=jb.getAttributeNode("id"))&&hb.value===Da)return[jb];var Eb=Pa.getElementsByName(Da);for(Pa=0;jb=Eb[Pa++];)if((hb=jb.getAttributeNode("id"))&&hb.value===Da)return[jb]}return[]}}),ub.find.TAG=fb.getElementsByTagName?function(Da,Pa){return void 0!==Pa.getElementsByTagName?Pa.getElementsByTagName(Da):fb.qsa?Pa.querySelectorAll(Da):void 0}:function(Da,Pa){var hb=[],jb=0;Pa=Pa.getElementsByTagName(Da);
if("*"===Da){for(;Da=Pa[jb++];)1===Da.nodeType&&hb.push(Da);return hb}return Pa},ub.find.CLASS=fb.getElementsByClassName&&function(Da,Pa){if(void 0!==Pa.getElementsByClassName&&Pc)return Pa.getElementsByClassName(Da)},ed=[],Gc=[],(fb.qsa=Bd.test(Rb.querySelectorAll))&&(S(function(Da){var Pa;yc.appendChild(Da).innerHTML="<a id='"+Sb+"'></a><select id='"+Sb+"-\r\\' msallowcapture=''><option selected=''></option></select>";Da.querySelectorAll("[msallowcapture^='']").length&&Gc.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");
Da.querySelectorAll("[selected]").length||Gc.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");Da.querySelectorAll("[id~="+Sb+"-]").length||Gc.push("~=");(Pa=Rb.createElement("input")).setAttribute("name","");Da.appendChild(Pa);Da.querySelectorAll("[name='']").length||Gc.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");Da.querySelectorAll(":checked").length||
Gc.push(":checked");Da.querySelectorAll("a#"+Sb+"+*").length||Gc.push(".#.+[+~]");Da.querySelectorAll("\\\f");Gc.push("[\\r\\n\\f]")}),S(function(Da){Da.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Pa=Rb.createElement("input");Pa.setAttribute("type","hidden");Da.appendChild(Pa).setAttribute("name","D");Da.querySelectorAll("[name=d]").length&&Gc.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==Da.querySelectorAll(":enabled").length&&Gc.push(":enabled",
":disabled");yc.appendChild(Da).disabled=!0;2!==Da.querySelectorAll(":disabled").length&&Gc.push(":enabled",":disabled");Da.querySelectorAll("*,:x");Gc.push(",.*:")})),(fb.matchesSelector=Bd.test($c=yc.matches||yc.webkitMatchesSelector||yc.mozMatchesSelector||yc.oMatchesSelector||yc.msMatchesSelector))&&S(function(Da){fb.disconnectedMatch=$c.call(Da,"*");$c.call(Da,"[s!='']:x");ed.push("!=",":((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),
Gc=Gc.length&&new RegExp(Gc.join("|")),ed=ed.length&&new RegExp(ed.join("|")),ua=Bd.test(yc.compareDocumentPosition),wc=ua||Bd.test(yc.contains)?function(Da,Pa){var hb=9===Da.nodeType?Da.documentElement:Da;Pa=Pa&&Pa.parentNode;return Da===Pa||!(!Pa||1!==Pa.nodeType||!(hb.contains?hb.contains(Pa):Da.compareDocumentPosition&&16&Da.compareDocumentPosition(Pa)))}:function(Da,Pa){if(Pa)for(;Pa=Pa.parentNode;)if(Pa===Da)return!0;return!1},Id=ua?function(Da,Pa){if(Da===Pa)return md=!0,0;var hb=!Da.compareDocumentPosition-
!Pa.compareDocumentPosition;return hb||(1&(hb=(Da.ownerDocument||Da)==(Pa.ownerDocument||Pa)?Da.compareDocumentPosition(Pa):1)||!fb.sortDetached&&Pa.compareDocumentPosition(Da)===hb?Da==Rb||Da.ownerDocument==Uc&&wc(Uc,Da)?-1:Pa==Rb||Pa.ownerDocument==Uc&&wc(Uc,Pa)?1:ld?wd(ld,Da)-wd(ld,Pa):0:4&hb?-1:1)}:function(Da,Pa){if(Da===Pa)return md=!0,0;var hb=0,jb=Da.parentNode,Eb=Pa.parentNode,mb=[Da],Mb=[Pa];if(!jb||!Eb)return Da==Rb?-1:Pa==Rb?1:jb?-1:Eb?1:ld?wd(ld,Da)-wd(ld,Pa):0;if(jb===Eb)return ca(Da,
Pa);for(;Da=Da.parentNode;)mb.unshift(Da);for(Da=Pa;Da=Da.parentNode;)Mb.unshift(Da);for(;mb[hb]===Mb[hb];)hb++;return hb?ca(mb[hb],Mb[hb]):mb[hb]==Uc?-1:Mb[hb]==Uc?1:0},Rb):Rb},g.matches=function(ia,ua){return g(ia,null,null,ua)},g.matchesSelector=function(ia,ua){if(id(ia),!(!fb.matchesSelector||!Pc||Cd[ua+" "]||ed&&ed.test(ua)||Gc&&Gc.test(ua)))try{var Fa=$c.call(ia,ua);if(Fa||fb.disconnectedMatch||ia.document&&11!==ia.document.nodeType)return Fa}catch(Da){Cd(ua,!0)}return 0<g(ua,Rb,null,[ia]).length},
g.contains=function(ia,ua){return(ia.ownerDocument||ia)!=Rb&&id(ia),wc(ia,ua)},g.attr=function(ia,ua){(ia.ownerDocument||ia)!=Rb&&id(ia);var Fa=ub.attrHandle[ua.toLowerCase()];Fa=Fa&&Wd.call(ub.attrHandle,ua.toLowerCase())?Fa(ia,ua,!Pc):void 0;return void 0!==Fa?Fa:fb.attributes||!Pc?ia.getAttribute(ua):(Fa=ia.getAttributeNode(ua))&&Fa.specified?Fa.value:null},g.escape=function(ia){return(ia+"").replace(Ld,Md)},g.error=function(ia){throw Error("Syntax error, unrecognized expression: "+ia);},g.uniqueSort=
function(ia){var ua,Fa=[],Da=0,Pa=0;if(md=!fb.detectDuplicates,ld=!fb.sortStable&&ia.slice(0),ia.sort(Id),md){for(;ua=ia[Pa++];)ua===ia[Pa]&&(Da=Fa.push(Pa));for(;Da--;)ia.splice(Fa[Da],1)}return ld=null,ia},Zb=g.getText=function(ia){var ua,Fa="",Da=0;if(ua=ia.nodeType)if(1===ua||9===ua||11===ua){if("string"==typeof ia.textContent)return ia.textContent;for(ia=ia.firstChild;ia;ia=ia.nextSibling)Fa+=Zb(ia)}else{if(3===ua||4===ua)return ia.nodeValue}else for(;ua=ia[Da++];)Fa+=Zb(ua);return Fa},(ub=g.selectors=
{cacheLength:50,createPseudo:M,match:Fd,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ia){return ia[1]=ia[1].replace(rd,sd),ia[3]=(ia[3]||ia[4]||ia[5]||"").replace(rd,sd),"~="===ia[2]&&(ia[3]=" "+ia[3]+" "),ia.slice(0,4)},CHILD:function(ia){return ia[1]=ia[1].toLowerCase(),"nth"===ia[1].slice(0,3)?(ia[3]||g.error(ia[0]),ia[4]=+(ia[4]?ia[5]+(ia[6]||1):2*("even"===ia[3]||
"odd"===ia[3])),ia[5]=+(ia[7]+ia[8]||"odd"===ia[3])):ia[3]&&g.error(ia[0]),ia},PSEUDO:function(ia){var ua,Fa=!ia[6]&&ia[2];return Fd.CHILD.test(ia[0])?null:(ia[3]?ia[2]=ia[4]||ia[5]||"":Fa&&ae.test(Fa)&&(ua=ud(Fa,!0))&&(ua=Fa.indexOf(")",Fa.length-ua)-Fa.length)&&(ia[0]=ia[0].slice(0,ua),ia[2]=Fa.slice(0,ua)),ia.slice(0,3))}},filter:{TAG:function(ia){var ua=ia.replace(rd,sd).toLowerCase();return"*"===ia?function(){return!0}:function(Fa){return Fa.nodeName&&Fa.nodeName.toLowerCase()===ua}},CLASS:function(ia){var ua=
xd[ia+" "];return ua||(ua=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+ia+"([\\x20\\t\\r\\n\\f]|$)"),xd(ia,function(Fa){return ua.test("string"==typeof Fa.className&&Fa.className||void 0!==Fa.getAttribute&&Fa.getAttribute("class")||"")}))},ATTR:function(ia,ua,Fa){return function(Da){Da=g.attr(Da,ia);return null==Da?"!="===ua:!ua||(Da+="","="===ua?Da===Fa:"!="===ua?Da!==Fa:"^="===ua?Fa&&0===Da.indexOf(Fa):"*="===ua?Fa&&-1<Da.indexOf(Fa):"$="===ua?Fa&&Da.slice(-Fa.length)===Fa:"~="===ua?-1<(" "+Da.replace(Zd,
" ")+" ").indexOf(Fa):"|="===ua&&(Da===Fa||Da.slice(0,Fa.length+1)===Fa+"-"))}},CHILD:function(ia,ua,Fa,Da,Pa){var hb="nth"!==ia.slice(0,3),jb="last"!==ia.slice(-4),Eb="of-type"===ua;return 1===Da&&0===Pa?function(mb){return!!mb.parentNode}:function(mb,Mb,gc){var Ic,Jc,Yb,rc;Mb=hb!==jb?"nextSibling":"previousSibling";var qc=mb.parentNode,dd=Eb&&mb.nodeName.toLowerCase(),kd=!gc&&!Eb,Xc=!1;if(qc){if(hb){for(;Mb;){for(Yb=mb;Yb=Yb[Mb];)if(Eb?Yb.nodeName.toLowerCase()===dd:1===Yb.nodeType)return!1;var Kc=
Mb="only"===ia&&!Kc&&"nextSibling"}return!0}if(Kc=[jb?qc.firstChild:qc.lastChild],jb&&kd)for(Xc=(rc=(Ic=(gc=(Jc=(Yb=qc)[Sb]||(Yb[Sb]={}))[Yb.uniqueID]||(Jc[Yb.uniqueID]={}))[ia]||[])[0]===xc&&Ic[1])&&Ic[2],Yb=rc&&qc.childNodes[rc];Yb=++rc&&Yb&&Yb[Mb]||(Xc=rc=0)||Kc.pop();){if(1===Yb.nodeType&&++Xc&&Yb===mb){gc[ia]=[xc,rc,Xc];break}}else if(kd&&(Xc=rc=(Ic=((Jc=(Yb=mb)[Sb]||(Yb[Sb]={}))[Yb.uniqueID]||(Jc[Yb.uniqueID]={}))[ia]||[])[0]===xc&&Ic[1]),!1===Xc)for(;(Yb=++rc&&Yb&&Yb[Mb]||(Xc=rc=0)||Kc.pop())&&
((Eb?Yb.nodeName.toLowerCase()!==dd:1!==Yb.nodeType)||!++Xc||(kd&&((gc=(Jc=Yb[Sb]||(Yb[Sb]={}))[Yb.uniqueID]||(Jc[Yb.uniqueID]={}))[ia]=[xc,Xc]),Yb!==mb)););return(Xc-=Pa)===Da||0==Xc%Da&&0<=Xc/Da}}},PSEUDO:function(ia,ua){var Fa,Da=ub.pseudos[ia]||ub.setFilters[ia.toLowerCase()]||g.error("unsupported pseudo: "+ia);return Da[Sb]?Da(ua):1<Da.length?(Fa=[ia,ia,"",ua],ub.setFilters.hasOwnProperty(ia.toLowerCase())?M(function(Pa,hb){for(var jb,Eb=Da(Pa,ua),mb=Eb.length;mb--;)Pa[jb=wd(Pa,Eb[mb])]=!(hb[jb]=
Eb[mb])}):function(Pa){return Da(Pa,0,Fa)}):Da}},pseudos:{not:M(function(ia){var ua=[],Fa=[],Da=Ad(ia.replace(Dd,"$1"));return Da[Sb]?M(function(Pa,hb,jb,Eb){var mb;jb=Da(Pa,null,Eb,[]);for(Eb=Pa.length;Eb--;)(mb=jb[Eb])&&(Pa[Eb]=!(hb[Eb]=mb))}):function(Pa,hb,jb){return ua[0]=Pa,Da(ua,null,jb,Fa),ua[0]=null,!Fa.pop()}}),has:M(function(ia){return function(ua){return 0<g(ia,ua).length}}),contains:M(function(ia){return ia=ia.replace(rd,sd),function(ua){return-1<(ua.textContent||Zb(ua)).indexOf(ia)}}),
lang:M(function(ia){return be.test(ia||"")||g.error("unsupported lang: "+ia),ia=ia.replace(rd,sd).toLowerCase(),function(ua){var Fa;do if(Fa=Pc?ua.lang:ua.getAttribute("xml:lang")||ua.getAttribute("lang"))return(Fa=Fa.toLowerCase())===ia||0===Fa.indexOf(ia+"-");while((ua=ua.parentNode)&&1===ua.nodeType);return!1}}),target:function(ia){var ua=b.location&&b.location.hash;return ua&&ua.slice(1)===ia.id},root:function(ia){return ia===yc},focus:function(ia){return ia===Rb.activeElement&&(!Rb.hasFocus||
Rb.hasFocus())&&!!(ia.type||ia.href||~ia.tabIndex)},enabled:Ha(!1),disabled:Ha(!0),checked:function(ia){var ua=ia.nodeName.toLowerCase();return"input"===ua&&!!ia.checked||"option"===ua&&!!ia.selected},selected:function(ia){return ia.parentNode&&ia.parentNode.selectedIndex,!0===ia.selected},empty:function(ia){for(ia=ia.firstChild;ia;ia=ia.nextSibling)if(6>ia.nodeType)return!1;return!0},parent:function(ia){return!ub.pseudos.empty(ia)},header:function(ia){return ee.test(ia.nodeName)},input:function(ia){return de.test(ia.nodeName)},
button:function(ia){var ua=ia.nodeName.toLowerCase();return"input"===ua&&"button"===ia.type||"button"===ua},text:function(ia){var ua;return"input"===ia.nodeName.toLowerCase()&&"text"===ia.type&&(null==(ua=ia.getAttribute("type"))||"text"===ua.toLowerCase())},first:Qa(function(){return[0]}),last:Qa(function(ia,ua){return[ua-1]}),eq:Qa(function(ia,ua,Fa){return[0>Fa?Fa+ua:Fa]}),even:Qa(function(ia,ua){for(var Fa=0;Fa<ua;Fa+=2)ia.push(Fa);return ia}),odd:Qa(function(ia,ua){for(var Fa=1;Fa<ua;Fa+=2)ia.push(Fa);
return ia}),lt:Qa(function(ia,ua,Fa){for(ua=0>Fa?Fa+ua:Fa>ua?ua:Fa;0<=--ua;)ia.push(ua);return ia}),gt:Qa(function(ia,ua,Fa){for(Fa=0>Fa?Fa+ua:Fa;++Fa<ua;)ia.push(Fa);return ia})}}).pseudos.nth=ub.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})ub.pseudos[Rc]=pa(Rc);for(Rc in{submit:!0,reset:!0})ub.pseudos[Rc]=ta(Rc);return Za.prototype=ub.filters=ub.pseudos,ub.setFilters=new Za,ud=g.tokenize=function(ia,ua){var Fa,Da,Pa,hb,jb,Eb;if(jb=Ed[ia+" "])return ua?0:jb.slice(0);jb=ia;var mb=
[];for(Eb=ub.preFilter;jb;){for(hb in Fa&&!(Da=$d.exec(jb))||(Da&&(jb=jb.slice(Da[0].length)||jb),mb.push(Pa=[])),Fa=!1,(Da=Kd.exec(jb))&&(Fa=Da.shift(),Pa.push({value:Fa,type:Da[0].replace(Dd," ")}),jb=jb.slice(Fa.length)),ub.filter)!(Da=Fd[hb].exec(jb))||Eb[hb]&&!(Da=Eb[hb](Da))||(Fa=Da.shift(),Pa.push({value:Fa,type:hb,matches:Da}),jb=jb.slice(Fa.length));if(!Fa)break}return ua?jb.length:jb?g.error(ia):Ed(ia,mb).slice(0)},Ad=g.compile=function(ia,ua){var Fa,Da=[],Pa=[],hb=Nd[ia+" "];if(!hb){ua||
(ua=ud(ia));for(Fa=ua.length;Fa--;)(hb=sc(ua[Fa]))[Sb]?Da.push(hb):Pa.push(hb);(hb=Nd(ia,function(jb,Eb){var mb=0<Eb.length,Mb=0<jb.length,gc=function(Ic,Jc,Yb,rc,qc){var dd,kd,Xc=0,Kc="0",Gd=Ic&&[],zd=[],Qd=vd,Rd=Ic||Mb&&ub.find.TAG("*",qc),Sd=xc+=null==Qd?1:Math.random()||.1,fe=Rd.length;for(qc&&(vd=Jc==Rb||Jc||qc);Kc!==fe&&null!=(dd=Rd[Kc]);Kc++){if(Mb&&dd){var Jd=0;for(Jc||dd.ownerDocument==Rb||(id(dd),Yb=!Pc);kd=jb[Jd++];)if(kd(dd,Jc||Rb,Yb)){rc.push(dd);break}qc&&(xc=Sd)}mb&&((dd=!kd&&dd)&&
Xc--,Ic&&Gd.push(dd))}if(Xc+=Kc,mb&&Kc!==Xc){for(Jd=0;kd=Eb[Jd++];)kd(Gd,zd,Jc,Yb);if(Ic){if(0<Xc)for(;Kc--;)Gd[Kc]||zd[Kc]||(zd[Kc]=Xd.call(rc));zd=Qc(zd)}td.apply(rc,zd);qc&&!Ic&&0<zd.length&&1<Xc+Eb.length&&g.uniqueSort(rc)}return qc&&(xc=Sd,vd=Qd),Gd};return mb?M(gc):gc}(Pa,Da))).selector=ia}return hb},od=g.select=function(ia,ua,Fa,Da){var Pa,hb,jb,Eb,mb,Mb="function"==typeof ia&&ia,gc=!Da&&ud(ia=Mb.selector||ia);if(Fa=Fa||[],1===gc.length){if(2<(hb=gc[0]=gc[0].slice(0)).length&&"ID"===(jb=hb[0]).type&&
9===ua.nodeType&&Pc&&ub.relative[hb[1].type]){if(!(ua=(ub.find.ID(jb.matches[0].replace(rd,sd),ua)||[])[0]))return Fa;Mb&&(ua=ua.parentNode);ia=ia.slice(hb.shift().value.length)}for(Pa=Fd.needsContext.test(ia)?0:hb.length;Pa--&&(jb=hb[Pa],!ub.relative[Eb=jb.type]);)if((mb=ub.find[Eb])&&(Da=mb(jb.matches[0].replace(rd,sd),Hd.test(hb[0].type)&&ya(ua.parentNode)||ua))){if(hb.splice(Pa,1),!(ia=Da.length&&Cb(hb)))return td.apply(Fa,Da),Fa;break}}return(Mb||Ad(ia,gc))(Da,ua,!Pc,Fa,!ua||Hd.test(ia)&&ya(ua.parentNode)||
ua),Fa},fb.sortStable=Sb.split("").sort(Id).join("")===Sb,fb.detectDuplicates=!!md,id(),fb.sortDetached=S(function(ia){return 1&ia.compareDocumentPosition(Rb.createElement("fieldset"))}),S(function(ia){return ia.innerHTML="<a href='#'></a>","#"===ia.firstChild.getAttribute("href")})||ba("type|href|height|width",function(ia,ua,Fa){if(!Fa)return ia.getAttribute(ua,"type"===ua.toLowerCase()?1:2)}),fb.attributes&&S(function(ia){return ia.innerHTML="<input/>",ia.firstChild.setAttribute("value",""),""===
ia.firstChild.getAttribute("value")})||ba("value",function(ia,ua,Fa){if(!Fa&&"input"===ia.nodeName.toLowerCase())return ia.defaultValue}),S(function(ia){return null==ia.getAttribute("disabled")})||ba("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(ia,ua,Fa){var Da;if(!Fa)return!0===ia[ua]?ua.toLowerCase():(Da=ia.getAttributeNode(ua))&&Da.specified?Da.value:null}),g}(a);C.find=Va;C.expr=Va.selectors;C.expr[":"]=C.expr.pseudos;
C.uniqueSort=C.unique=Va.uniqueSort;C.text=Va.getText;C.isXMLDoc=Va.isXML;C.contains=Va.contains;C.escapeSelector=Va.escape;var Aa=function(b,g,B){for(var M=[],S=void 0!==B;(b=b[g])&&9!==b.nodeType;)if(1===b.nodeType){if(S&&C(b).is(B))break;M.push(b)}return M},cb=function(b,g){for(var B=[];b;b=b.nextSibling)1===b.nodeType&&b!==g&&B.push(b);return B},vb=C.expr.match.needsContext,lb=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;C.filter=function(b,g,B){var M=g[0];return B&&(b=":not("+
b+")"),1===g.length&&1===M.nodeType?C.find.matchesSelector(M,b)?[M]:[]:C.find.matches(b,C.grep(g,function(S){return 1===S.nodeType}))};C.fn.extend({find:function(b){var g,B=this.length,M=this;if("string"!=typeof b)return this.pushStack(C(b).filter(function(){for(g=0;g<B;g++)if(C.contains(M[g],this))return!0}));var S=this.pushStack([]);for(g=0;g<B;g++)C.find(b,M[g],S);return 1<B?C.uniqueSort(S):S},filter:function(b){return this.pushStack(h(this,b||[],!1))},not:function(b){return this.pushStack(h(this,
b||[],!0))},is:function(b){return!!h(this,"string"==typeof b&&vb.test(b)?C(b):b||[],!1).length}});var zb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(b,g,B){var M,S;if(!b)return this;if(B=B||qb,"string"==typeof b){if(!(M="<"===b[0]&&">"===b[b.length-1]&&3<=b.length?[null,b,null]:zb.exec(b))||!M[1]&&g)return!g||g.jquery?(g||B).find(b):this.constructor(g).find(b);if(M[1]){if(g=g instanceof C?g[0]:g,C.merge(this,C.parseHTML(M[1],g&&g.nodeType?g.ownerDocument||g:wb,!0)),lb.test(M[1])&&C.isPlainObject(g))for(M in g)nb(this[M])?
this[M](g[M]):this.attr(M,g[M]);return this}return(S=wb.getElementById(M[2]))&&(this[0]=S,this.length=1),this}return b.nodeType?(this[0]=b,this.length=1,this):nb(b)?void 0!==B.ready?B.ready(b):b(C):C.makeArray(b,this)}).prototype=C.fn;var qb=C(wb);var Ab=/^(?:parents|prev(?:Until|All))/,Ob={children:!0,contents:!0,next:!0,prev:!0};C.fn.extend({has:function(b){var g=C(b,this),B=g.length;return this.filter(function(){for(var M=0;M<B;M++)if(C.contains(this,g[M]))return!0})},closest:function(b,g){var B,
M=0,S=this.length,ba=[],ca="string"!=typeof b&&C(b);if(!vb.test(b))for(;M<S;M++)for(B=this[M];B&&B!==g;B=B.parentNode)if(11>B.nodeType&&(ca?-1<ca.index(B):1===B.nodeType&&C.find.matchesSelector(B,b))){ba.push(B);break}return this.pushStack(1<ba.length?C.uniqueSort(ba):ba)},index:function(b){return b?"string"==typeof b?Pb.call(C(b),this[0]):Pb.call(this,b.jquery?b[0]:b):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(b,g){return this.pushStack(C.uniqueSort(C.merge(this.get(),
C(b,g))))},addBack:function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}});C.each({parent:function(b){return(b=b.parentNode)&&11!==b.nodeType?b:null},parents:function(b){return Aa(b,"parentNode")},parentsUntil:function(b,g,B){return Aa(b,"parentNode",B)},next:function(b){return r(b,"nextSibling")},prev:function(b){return r(b,"previousSibling")},nextAll:function(b){return Aa(b,"nextSibling")},prevAll:function(b){return Aa(b,"previousSibling")},nextUntil:function(b,g,B){return Aa(b,
"nextSibling",B)},prevUntil:function(b,g,B){return Aa(b,"previousSibling",B)},siblings:function(b){return cb((b.parentNode||{}).firstChild,b)},children:function(b){return cb(b.firstChild)},contents:function(b){return null!=b.contentDocument&&ob(b.contentDocument)?b.contentDocument:(f(b,"template")&&(b=b.content||b),C.merge([],b.childNodes))}},function(b,g){C.fn[b]=function(B,M){var S=C.map(this,g,B);return"Until"!==b.slice(-5)&&(M=B),M&&"string"==typeof M&&(S=C.filter(M,S)),1<this.length&&(Ob[b]||
C.uniqueSort(S),Ab.test(b)&&S.reverse()),this.pushStack(S)}});var hc=/[^\x20\t\r\n\f]+/g;C.Callbacks=function(b){b="string"==typeof b?function(Qa){var ya={};return C.each(Qa.match(hc)||[],function(Za,Cb){ya[Cb]=!0}),ya}(b):C.extend({},b);var g,B,M,S,ba=[],ca=[],pa=-1,ta=function(){S=S||b.once;for(M=g=!0;ca.length;pa=-1)for(B=ca.shift();++pa<ba.length;)!1===ba[pa].apply(B[0],B[1])&&b.stopOnFalse&&(pa=ba.length,B=!1);b.memory||(B=!1);g=!1;S&&(ba=B?[]:"")},Ha={add:function(){return ba&&(B&&!g&&(pa=ba.length-
1,ca.push(B)),function Za(ya){C.each(ya,function(Cb,sb){nb(sb)?b.unique&&Ha.has(sb)||ba.push(sb):sb&&sb.length&&"string"!==e(sb)&&Za(sb)})}(arguments),B&&!g&&ta()),this},remove:function(){return C.each(arguments,function(Qa,ya){for(var Za;-1<(Za=C.inArray(ya,ba,Za));)ba.splice(Za,1),Za<=pa&&pa--}),this},has:function(Qa){return Qa?-1<C.inArray(Qa,ba):0<ba.length},empty:function(){return ba&&(ba=[]),this},disable:function(){return S=ca=[],ba=B="",this},disabled:function(){return!ba},lock:function(){return S=
ca=[],B||g||(ba=B=""),this},locked:function(){return!!S},fireWith:function(Qa,ya){return S||(ya=[Qa,(ya=ya||[]).slice?ya.slice():ya],ca.push(ya),g||ta()),this},fire:function(){return Ha.fireWith(this,arguments),this},fired:function(){return!!M}};return Ha};C.extend({Deferred:function(b){var g=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),
1,"rejected"]],B="pending",M={state:function(){return B},always:function(){return S.done(arguments).fail(arguments),this},catch:function(ba){return M.then(null,ba)},pipe:function(){var ba=arguments;return C.Deferred(function(ca){C.each(g,function(pa,ta){var Ha=nb(ba[ta[4]])&&ba[ta[4]];S[ta[1]](function(){var Qa=Ha&&Ha.apply(this,arguments);Qa&&nb(Qa.promise)?Qa.promise().progress(ca.notify).done(ca.resolve).fail(ca.reject):ca[ta[0]+"With"](this,Ha?[Qa]:arguments)})});ba=null}).promise()},then:function(ba,
ca,pa){function ta(Qa,ya,Za,Cb){return function(){var sb=this,Vb=arguments,Qc=function(){var sc;if(!(Qa<Ha)){if((sc=Za.apply(sb,Vb))===ya.promise())throw new TypeError("Thenable self-resolution");var Rc=sc&&("object"==typeof sc||"function"==typeof sc)&&sc.then;nb(Rc)?Cb?Rc.call(sc,ta(Ha,ya,u,Cb),ta(Ha,ya,H,Cb)):(Ha++,Rc.call(sc,ta(Ha,ya,u,Cb),ta(Ha,ya,H,Cb),ta(Ha,ya,u,ya.notifyWith))):(Za!==u&&(sb=void 0,Vb=[sc]),(Cb||ya.resolveWith)(sb,Vb))}},jd=Cb?Qc:function(){try{Qc()}catch(sc){C.Deferred.exceptionHook&&
C.Deferred.exceptionHook(sc,jd.stackTrace),Qa+1>=Ha&&(Za!==H&&(sb=void 0,Vb=[sc]),ya.rejectWith(sb,Vb))}};Qa?jd():(C.Deferred.getStackHook&&(jd.stackTrace=C.Deferred.getStackHook()),a.setTimeout(jd))}}var Ha=0;return C.Deferred(function(Qa){g[0][3].add(ta(0,Qa,nb(pa)?pa:u,Qa.notifyWith));g[1][3].add(ta(0,Qa,nb(ba)?ba:u));g[2][3].add(ta(0,Qa,nb(ca)?ca:H))}).promise()},promise:function(ba){return null!=ba?C.extend(ba,M):M}},S={};return C.each(g,function(ba,ca){var pa=ca[2],ta=ca[5];M[ca[1]]=pa.add;
ta&&pa.add(function(){B=ta},g[3-ba][2].disable,g[3-ba][3].disable,g[0][2].lock,g[0][3].lock);pa.add(ca[3].fire);S[ca[0]]=function(){return S[ca[0]+"With"](this===S?void 0:this,arguments),this};S[ca[0]+"With"]=pa.fireWith}),M.promise(S),b&&b.call(S,S),S},when:function(b){var g=arguments.length,B=g,M=Array(B),S=Lb.call(arguments),ba=C.Deferred(),ca=function(pa){return function(ta){M[pa]=this;S[pa]=1<arguments.length?Lb.call(arguments):ta;--g||ba.resolveWith(M,S)}};if(1>=g&&(z(b,ba.done(ca(B)).resolve,
ba.reject,!g),"pending"===ba.state()||nb(S[B]&&S[B].then)))return ba.then();for(;B--;)z(S[B],ca(B),ba.reject);return ba.promise()}});var Bc=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(b,g){a.console&&a.console.warn&&b&&Bc.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,g)};C.readyException=function(b){a.setTimeout(function(){throw b;})};var Kb=C.Deferred();C.fn.ready=function(b){return Kb.then(b).catch(function(g){C.readyException(g)}),
this};C.extend({isReady:!1,readyWait:1,ready:function(b){(!0===b?--C.readyWait:C.isReady)||(C.isReady=!0,!0!==b&&0<--C.readyWait||Kb.resolveWith(wb,[C]))}});C.ready.then=Kb.then;"complete"===wb.readyState||"loading"!==wb.readyState&&!wb.documentElement.doScroll?a.setTimeout(C.ready):(wb.addEventListener("DOMContentLoaded",F),a.addEventListener("load",F));var Ib=function(b,g,B,M,S,ba,ca){var pa=0,ta=b.length,Ha=null==B;if("object"===e(B))for(pa in S=!0,B)Ib(b,g,pa,B[pa],!0,ba,ca);else if(void 0!==
M&&(S=!0,nb(M)||(ca=!0),Ha&&(ca?(g.call(b,M),g=null):(Ha=g,g=function(Qa,ya,Za){return Ha.call(C(Qa),Za)})),g))for(;pa<ta;pa++)g(b[pa],B,ca?M:M.call(b[pa],pa,g(b[pa],B)));return S?b:Ha?g.call(b):ta?g(b[0],B):ba},fc=/^-ms-/,Hc=/-([a-z])/g,nc=function(b){return 1===b.nodeType||9===b.nodeType||!+b.nodeType};n.uid=1;n.prototype={cache:function(b){var g=b[this.expando];return g||(g={},nc(b)&&(b.nodeType?b[this.expando]=g:Object.defineProperty(b,this.expando,{value:g,configurable:!0}))),g},set:function(b,
g,B){var M;b=this.cache(b);if("string"==typeof g)b[q(g)]=B;else for(M in g)b[q(M)]=g[M];return b},get:function(b,g){return void 0===g?this.cache(b):b[this.expando]&&b[this.expando][q(g)]},access:function(b,g,B){return void 0===g||g&&"string"==typeof g&&void 0===B?this.get(b,g):(this.set(b,g,B),void 0!==B?B:g)},remove:function(b,g){var B=b[this.expando];if(void 0!==B){if(void 0!==g){var M=(g=Array.isArray(g)?g.map(q):(g=q(g))in B?[g]:g.match(hc)||[]).length;for(;M--;)delete B[g[M]]}(void 0===g||C.isEmptyObject(B))&&
(b.nodeType?b[this.expando]=void 0:delete b[this.expando])}},hasData:function(b){b=b[this.expando];return void 0!==b&&!C.isEmptyObject(b)}};var pb=new n,kc=new n,Nc=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,pd=/[A-Z]/g;C.extend({hasData:function(b){return kc.hasData(b)||pb.hasData(b)},data:function(b,g,B){return kc.access(b,g,B)},removeData:function(b,g){kc.remove(b,g)},_data:function(b,g,B){return pb.access(b,g,B)},_removeData:function(b,g){pb.remove(b,g)}});C.fn.extend({data:function(b,g){var B,M,S,ba=this[0],
ca=ba&&ba.attributes;if(void 0===b){if(this.length&&(S=kc.get(ba),1===ba.nodeType&&!pb.get(ba,"hasDataAttrs"))){for(B=ca.length;B--;)ca[B]&&0===(M=ca[B].name).indexOf("data-")&&(M=q(M.slice(5)),v(ba,M,S[M]));pb.set(ba,"hasDataAttrs",!0)}return S}return"object"==typeof b?this.each(function(){kc.set(this,b)}):Ib(this,function(pa){var ta;if(ba&&void 0===pa)return void 0!==(ta=kc.get(ba,b))||void 0!==(ta=v(ba,b))?ta:void 0;this.each(function(){kc.set(this,b,pa)})},null,g,1<arguments.length,null,!0)},
removeData:function(b){return this.each(function(){kc.remove(this,b)})}});C.extend({queue:function(b,g,B){var M;if(b)return g=(g||"fx")+"queue",M=pb.get(b,g),B&&(!M||Array.isArray(B)?M=pb.access(b,g,C.makeArray(B)):M.push(B)),M||[]},dequeue:function(b,g){g=g||"fx";var B=C.queue(b,g),M=B.length,S=B.shift(),ba=C._queueHooks(b,g);"inprogress"===S&&(S=B.shift(),M--);S&&("fx"===g&&B.unshift("inprogress"),delete ba.stop,S.call(b,function(){C.dequeue(b,g)},ba));!M&&ba&&ba.empty.fire()},_queueHooks:function(b,
g){var B=g+"queueHooks";return pb.get(b,B)||pb.access(b,B,{empty:C.Callbacks("once memory").add(function(){pb.remove(b,[g+"queue",B])})})}});C.fn.extend({queue:function(b,g){var B=2;return"string"!=typeof b&&(g=b,b="fx",B--),arguments.length<B?C.queue(this[0],b):void 0===g?this:this.each(function(){var M=C.queue(this,b,g);C._queueHooks(this,b);"fx"===b&&"inprogress"!==M[0]&&C.dequeue(this,b)})},dequeue:function(b){return this.each(function(){C.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||
"fx",[])},promise:function(b,g){var B,M=1,S=C.Deferred(),ba=this,ca=this.length,pa=function(){--M||S.resolveWith(ba,[ba])};"string"!=typeof b&&(g=b,b=void 0);for(b=b||"fx";ca--;)(B=pb.get(ba[ca],b+"queueHooks"))&&B.empty&&(M++,B.empty.add(pa));return pa(),S.promise(g)}});var fd=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Vc=new RegExp("^(?:([+-])=|)("+fd+")([a-z%]*)$","i"),oc=["Top","Right","Bottom","Left"],Sc=wb.documentElement,Tc=function(b){return C.contains(b.ownerDocument,b)},gd={composed:!0};
Sc.getRootNode&&(Tc=function(b){return C.contains(b.ownerDocument,b)||b.getRootNode(gd)===b.ownerDocument});var bd=function(b,g){return"none"===(b=g||b).style.display||""===b.style.display&&Tc(b)&&"none"===C.css(b,"display")},y={};C.fn.extend({show:function(){return w(this,!0)},hide:function(){return w(this)},toggle:function(b){return"boolean"==typeof b?b?this.show():this.hide():this.each(function(){bd(this)?C(this).show():C(this).hide()})}});var J,aa=/^(?:checkbox|radio)$/i,qa=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,
Ea=/^$|^module$|\/(?:java|ecma)script/i;var Ga=wb.createDocumentFragment().appendChild(wb.createElement("div"));(J=wb.createElement("input")).setAttribute("type","radio");J.setAttribute("checked","checked");J.setAttribute("name","t");Ga.appendChild(J);Fb.checkClone=Ga.cloneNode(!0).cloneNode(!0).lastChild.checked;Ga.innerHTML="<textarea>x</textarea>";Fb.noCloneChecked=!!Ga.cloneNode(!0).lastChild.defaultValue;Ga.innerHTML="<option></option>";Fb.option=!!Ga.lastChild;var Na={thead:[1,"<table>","</table>"],
col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Na.tbody=Na.tfoot=Na.colgroup=Na.caption=Na.thead;Na.th=Na.td;Fb.option||(Na.optgroup=Na.option=[1,"<select multiple='multiple'>","</select>"]);var ab=/<|&#?\w+;/,Ya=/^([^.]*)(?:\.(.+)|)/;C.event={global:{},add:function(b,g,B,M,S){var ba,ca,pa,ta,Ha,Qa,ya,Za;var Cb=pb.get(b);if(nc(b))for(B.handler&&(B=(ba=B).handler,S=ba.selector),S&&
C.find.matchesSelector(Sc,S),B.guid||(B.guid=C.guid++),(ta=Cb.events)||(ta=Cb.events=Object.create(null)),(ca=Cb.handle)||(ca=Cb.handle=function(Vb){return void 0!==C&&C.event.triggered!==Vb.type?C.event.dispatch.apply(b,arguments):void 0}),Cb=(g=(g||"").match(hc)||[""]).length;Cb--;){var sb=Za=(pa=Ya.exec(g[Cb])||[])[1];pa=(pa[2]||"").split(".").sort();sb&&(Qa=C.event.special[sb]||{},sb=(S?Qa.delegateType:Qa.bindType)||sb,Qa=C.event.special[sb]||{},Ha=C.extend({type:sb,origType:Za,data:M,handler:B,
guid:B.guid,selector:S,needsContext:S&&C.expr.match.needsContext.test(S),namespace:pa.join(".")},ba),(ya=ta[sb])||((ya=ta[sb]=[]).delegateCount=0,Qa.setup&&!1!==Qa.setup.call(b,M,pa,ca)||b.addEventListener&&b.addEventListener(sb,ca)),Qa.add&&(Qa.add.call(b,Ha),Ha.handler.guid||(Ha.handler.guid=B.guid)),S?ya.splice(ya.delegateCount++,0,Ha):ya.push(Ha),C.event.global[sb]=!0)}},remove:function(b,g,B,M,S){var ba,ca,pa,ta,Ha,Qa,ya,Za,Cb=pb.hasData(b)&&pb.get(b);if(Cb&&(ta=Cb.events)){for(Ha=(g=(g||"").match(hc)||
[""]).length;Ha--;)if(Qa=Za=(pa=Ya.exec(g[Ha])||[])[1],ya=(pa[2]||"").split(".").sort(),Qa){var sb=C.event.special[Qa]||{};var Vb=ta[Qa=(M?sb.delegateType:sb.bindType)||Qa]||[];pa=pa[2]&&new RegExp("(^|\\.)"+ya.join("\\.(?:.*\\.|)")+"(\\.|$)");for(ca=ba=Vb.length;ba--;){var Qc=Vb[ba];!S&&Za!==Qc.origType||B&&B.guid!==Qc.guid||pa&&!pa.test(Qc.namespace)||M&&M!==Qc.selector&&("**"!==M||!Qc.selector)||(Vb.splice(ba,1),Qc.selector&&Vb.delegateCount--,sb.remove&&sb.remove.call(b,Qc))}ca&&!Vb.length&&(sb.teardown&&
!1!==sb.teardown.call(b,ya,Cb.handle)||C.removeEvent(b,Qa,Cb.handle),delete ta[Qa])}else for(Qa in ta)C.event.remove(b,Qa+g[Ha],B,M,!0);C.isEmptyObject(ta)&&pb.remove(b,"handle events")}},dispatch:function(b){var g,B,M,S,ba=Array(arguments.length),ca=C.event.fix(b);var pa=(pb.get(this,"events")||Object.create(null))[ca.type]||[];var ta=C.event.special[ca.type]||{};ba[0]=ca;for(g=1;g<arguments.length;g++)ba[g]=arguments[g];if(ca.delegateTarget=this,!ta.preDispatch||!1!==ta.preDispatch.call(this,ca)){var Ha=
C.event.handlers.call(this,ca,pa);for(g=0;(M=Ha[g++])&&!ca.isPropagationStopped();)for(ca.currentTarget=M.elem,pa=0;(S=M.handlers[pa++])&&!ca.isImmediatePropagationStopped();)ca.rnamespace&&!1!==S.namespace&&!ca.rnamespace.test(S.namespace)||(ca.handleObj=S,ca.data=S.data,void 0!==(B=((C.event.special[S.origType]||{}).handle||S.handler).apply(M.elem,ba))&&!1===(ca.result=B)&&(ca.preventDefault(),ca.stopPropagation()));return ta.postDispatch&&ta.postDispatch.call(this,ca),ca.result}},handlers:function(b,
g){var B,M,S,ba=[],ca=g.delegateCount,pa=b.target;if(ca&&pa.nodeType&&!("click"===b.type&&1<=b.button))for(;pa!==this;pa=pa.parentNode||this)if(1===pa.nodeType&&("click"!==b.type||!0!==pa.disabled)){var ta=[];var Ha={};for(B=0;B<ca;B++)void 0===Ha[S=(M=g[B]).selector+" "]&&(Ha[S]=M.needsContext?-1<C(S,this).index(pa):C.find(S,this,null,[pa]).length),Ha[S]&&ta.push(M);ta.length&&ba.push({elem:pa,handlers:ta})}return pa=this,ca<g.length&&ba.push({elem:pa,handlers:g.slice(ca)}),ba},addProp:function(b,
g){Object.defineProperty(C.Event.prototype,b,{enumerable:!0,configurable:!0,get:nb(g)?function(){if(this.originalEvent)return g(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[b]},set:function(B){Object.defineProperty(this,b,{enumerable:!0,configurable:!0,writable:!0,value:B})}})},fix:function(b){return b[C.expando]?b:new C.Event(b)},special:{load:{noBubble:!0},click:{setup:function(b){b=this||b;return aa.test(b.type)&&b.click&&f(b,"input")&&L(b,"click",N),!1},trigger:function(b){b=
this||b;return aa.test(b.type)&&b.click&&f(b,"input")&&L(b,"click"),!0},_default:function(b){b=b.target;return aa.test(b.type)&&b.click&&f(b,"input")&&pb.get(b,"click")||f(b,"a")}},beforeunload:{postDispatch:function(b){void 0!==b.result&&b.originalEvent&&(b.originalEvent.returnValue=b.result)}}}};C.removeEvent=function(b,g,B){b.removeEventListener&&b.removeEventListener(g,B)};C.Event=function(b,g){if(!(this instanceof C.Event))return new C.Event(b,g);b&&b.type?(this.originalEvent=b,this.type=b.type,
this.isDefaultPrevented=b.defaultPrevented||void 0===b.defaultPrevented&&!1===b.returnValue?N:R,this.target=b.target&&3===b.target.nodeType?b.target.parentNode:b.target,this.currentTarget=b.currentTarget,this.relatedTarget=b.relatedTarget):this.type=b;g&&C.extend(this,g);this.timeStamp=b&&b.timeStamp||Date.now();this[C.expando]=!0};C.Event.prototype={constructor:C.Event,isDefaultPrevented:R,isPropagationStopped:R,isImmediatePropagationStopped:R,isSimulated:!1,preventDefault:function(){var b=this.originalEvent;
this.isDefaultPrevented=N;b&&!this.isSimulated&&b.preventDefault()},stopPropagation:function(){var b=this.originalEvent;this.isPropagationStopped=N;b&&!this.isSimulated&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=N;b&&!this.isSimulated&&b.stopImmediatePropagation();this.stopPropagation()}};C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,
view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp);C.each({focus:"focusin",blur:"focusout"},function(b,g){C.event.special[b]={setup:function(){return L(this,b,m),!1},trigger:function(){return L(this,b),!0},_default:function(){return!0},delegateType:g}});C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",
pointerleave:"pointerout"},function(b,g){C.event.special[b]={delegateType:g,bindType:g,handle:function(B){var M,S=B.relatedTarget,ba=B.handleObj;return S&&(S===this||C.contains(this,S))||(B.type=ba.origType,M=ba.handler.apply(this,arguments),B.type=g),M}}});C.fn.extend({on:function(b,g,B,M){return G(this,b,g,B,M)},one:function(b,g,B,M){return G(this,b,g,B,M,1)},off:function(b,g,B){var M,S;if(b&&b.preventDefault&&b.handleObj)return M=b.handleObj,C(b.delegateTarget).off(M.namespace?M.origType+"."+M.namespace:
M.origType,M.selector,M.handler),this;if("object"==typeof b){for(S in b)this.off(S,g,b[S]);return this}return!1!==g&&"function"!=typeof g||(B=g,g=void 0),!1===B&&(B=R),this.each(function(){C.event.remove(this,b,B,g)})}});var Ka=/<script|<style|<link/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,ib=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;C.extend({htmlPrefilter:function(b){return b},clone:function(b,g,B){var M,S,ba=b.cloneNode(!0),ca=Tc(b);if(!(Fb.noCloneChecked||1!==b.nodeType&&11!==b.nodeType||C.isXMLDoc(b))){var pa=
D(ba);var ta=0;for(M=(S=D(b)).length;ta<M;ta++){var Ha=S[ta],Qa=pa[ta],ya=Qa.nodeName.toLowerCase();"input"===ya&&aa.test(Ha.type)?Qa.checked=Ha.checked:"input"!==ya&&"textarea"!==ya||(Qa.defaultValue=Ha.defaultValue)}}if(g)if(B)for(S=S||D(b),pa=pa||D(ba),ta=0,M=S.length;ta<M;ta++)ha(S[ta],pa[ta]);else ha(b,ba);return 0<(pa=D(ba,"script")).length&&E(pa,!ca&&D(b,"script")),ba},cleanData:function(b){for(var g,B,M,S=C.event.special,ba=0;void 0!==(B=b[ba]);ba++)if(nc(B)){if(g=B[pb.expando]){if(g.events)for(M in g.events)S[M]?
C.event.remove(B,M):C.removeEvent(B,M,g.handle);B[pb.expando]=void 0}B[kc.expando]&&(B[kc.expando]=void 0)}}});C.fn.extend({detach:function(b){return ea(this,b,!0)},remove:function(b){return ea(this,b)},text:function(b){return Ib(this,function(g){return void 0===g?C.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=g)})},null,b,arguments.length)},append:function(){return ja(this,arguments,function(b){1!==this.nodeType&&11!==this.nodeType&&
9!==this.nodeType||O(this,b).appendChild(b)})},prepend:function(){return ja(this,arguments,function(b){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var g=O(this,b);g.insertBefore(b,g.firstChild)}})},before:function(){return ja(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return ja(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this.nextSibling)})},empty:function(){for(var b,g=0;null!=(b=this[g]);g++)1===
b.nodeType&&(C.cleanData(D(b,!1)),b.textContent="");return this},clone:function(b,g){return b=null!=b&&b,g=null==g?b:g,this.map(function(){return C.clone(this,b,g)})},html:function(b){return Ib(this,function(g){var B=this[0]||{},M=0,S=this.length;if(void 0===g&&1===B.nodeType)return B.innerHTML;if("string"==typeof g&&!Ka.test(g)&&!Na[(qa.exec(g)||["",""])[1].toLowerCase()]){g=C.htmlPrefilter(g);try{for(;M<S;M++)1===(B=this[M]||{}).nodeType&&(C.cleanData(D(B,!1)),B.innerHTML=g);B=0}catch(ba){}}B&&
this.empty().append(g)},null,b,arguments.length)},replaceWith:function(){var b=[];return ja(this,arguments,function(g){var B=this.parentNode;0>C.inArray(this,b)&&(C.cleanData(D(this)),B&&B.replaceChild(g,this))},b)}});C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,g){C.fn[b]=function(B){for(var M=[],S=C(B),ba=S.length-1,ca=0;ca<=ba;ca++)B=ca===ba?this:this.clone(!0),C(S[ca])[g](B),lc.apply(M,B.get());return this.pushStack(M)}});
var Gb=new RegExp("^("+fd+")(?!px)[a-z%]+$","i"),Hb=function(b){var g=b.ownerDocument.defaultView;return g&&g.opener||(g=a),g.getComputedStyle(b)},Jb=function(b,g,B){var M,S={};for(M in g)S[M]=b.style[M],b.style[M]=g[M];for(M in B=B.call(b),g)b.style[M]=S[M];return B},vc=new RegExp(oc.join("|"),"i");!function(){function b(){if(ta){pa.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";ta.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";
Sc.appendChild(pa).appendChild(ta);var Ha=a.getComputedStyle(ta);g="1%"!==Ha.top;ca=12===Math.round(parseFloat(Ha.marginLeft));ta.style.right="60%";S=36===Math.round(parseFloat(Ha.right));B=36===Math.round(parseFloat(Ha.width));ta.style.position="absolute";M=12===Math.round(parseFloat(ta.offsetWidth/3));Sc.removeChild(pa);ta=null}}var g,B,M,S,ba,ca,pa=wb.createElement("div"),ta=wb.createElement("div");ta.style&&(ta.style.backgroundClip="content-box",ta.cloneNode(!0).style.backgroundClip="",Fb.clearCloneStyle=
"content-box"===ta.style.backgroundClip,C.extend(Fb,{boxSizingReliable:function(){return b(),B},pixelBoxStyles:function(){return b(),S},pixelPosition:function(){return b(),g},reliableMarginLeft:function(){return b(),ca},scrollboxSize:function(){return b(),M},reliableTrDimensions:function(){var Ha,Qa,ya,Za;return null==ba&&(Ha=wb.createElement("table"),Qa=wb.createElement("tr"),ya=wb.createElement("div"),Ha.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Qa.style.cssText="border:1px solid",
Qa.style.height="1px",ya.style.height="9px",ya.style.display="block",Sc.appendChild(Ha).appendChild(Qa).appendChild(ya),Za=a.getComputedStyle(Qa),ba=parseInt(Za.height,10)+parseInt(Za.borderTopWidth,10)+parseInt(Za.borderBottomWidth,10)===Qa.offsetHeight,Sc.removeChild(Ha)),ba}}))}();var Cc=["Webkit","Moz","ms"],tb=wb.createElement("div").style,Oc={},$b=/^(none|table(?!-c[ea]).+)/,Zc=/^--/,Lc={position:"absolute",visibility:"hidden",display:"block"},Mc={letterSpacing:"0",fontWeight:"400"};C.extend({cssHooks:{opacity:{get:function(b,
g){if(g)return b=la(b,"opacity"),""===b?"1":b}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(b,g,B,M){if(b&&3!==b.nodeType&&8!==b.nodeType&&b.style){var S,ba,ca,pa=q(g),ta=Zc.test(g),Ha=b.style;if(ta||(g=wa(pa)),ca=C.cssHooks[g]||C.cssHooks[pa],
void 0===B)return ca&&"get"in ca&&void 0!==(S=ca.get(b,!1,M))?S:Ha[g];"string"===(ba=typeof B)&&(S=Vc.exec(B))&&S[1]&&(B=x(b,g,S),ba="number");null!=B&&B==B&&("number"!==ba||ta||(B+=S&&S[3]||(C.cssNumber[pa]?"":"px")),Fb.clearCloneStyle||""!==B||0!==g.indexOf("background")||(Ha[g]="inherit"),ca&&"set"in ca&&void 0===(B=ca.set(b,B,M))||(ta?Ha.setProperty(g,B):Ha[g]=B))}},css:function(b,g,B,M){var S,ba,ca,pa=q(g);return Zc.test(g)||(g=wa(pa)),(ca=C.cssHooks[g]||C.cssHooks[pa])&&"get"in ca&&(S=ca.get(b,
!0,B)),void 0===S&&(S=la(b,g,M)),"normal"===S&&g in Mc&&(S=Mc[g]),""===B||B?(ba=parseFloat(S),!0===B||isFinite(ba)?ba||0:S):S}});C.each(["height","width"],function(b,g){C.cssHooks[g]={get:function(B,M,S){if(M)return!$b.test(C.css(B,"display"))||B.getClientRects().length&&B.getBoundingClientRect().width?I(B,g,S):Jb(B,Lc,function(){return I(B,g,S)})},set:function(B,M,S){var ba,ca=Hb(B),pa=!Fb.scrollboxSize()&&"absolute"===ca.position,ta=(pa||S)&&"border-box"===C.css(B,"boxSizing",!1,ca);S=S?A(B,g,S,
ta,ca):0;return ta&&pa&&(S-=Math.ceil(B["offset"+g[0].toUpperCase()+g.slice(1)]-parseFloat(ca[g])-A(B,g,"border",!1,ca)-.5)),S&&(ba=Vc.exec(M))&&"px"!==(ba[3]||"px")&&(B.style[g]=M,M=C.css(B,g)),U(0,M,S)}}});C.cssHooks.marginLeft=oa(Fb.reliableMarginLeft,function(b,g){if(g)return(parseFloat(la(b,"marginLeft"))||b.getBoundingClientRect().left-Jb(b,{marginLeft:0},function(){return b.getBoundingClientRect().left}))+"px"});C.each({margin:"",padding:"",border:"Width"},function(b,g){C.cssHooks[b+g]={expand:function(B){var M=
0,S={};for(B="string"==typeof B?B.split(" "):[B];4>M;M++)S[b+oc[M]+g]=B[M]||B[M-2]||B[0];return S}};"margin"!==b&&(C.cssHooks[b+g].set=U)});C.fn.extend({css:function(b,g){return Ib(this,function(B,M,S){var ba,ca={},pa=0;if(Array.isArray(M)){S=Hb(B);for(ba=M.length;pa<ba;pa++)ca[M[pa]]=C.css(B,M[pa],!1,S);return ca}return void 0!==S?C.style(B,M,S):C.css(B,M)},b,g,1<arguments.length)}});C.Tween=P;P.prototype={constructor:P,init:function(b,g,B,M,S,ba){this.elem=b;this.prop=B;this.easing=S||C.easing._default;
this.options=g;this.start=this.now=this.cur();this.end=M;this.unit=ba||(C.cssNumber[B]?"":"px")},cur:function(){var b=P.propHooks[this.prop];return b&&b.get?b.get(this):P.propHooks._default.get(this)},run:function(b){var g,B=P.propHooks[this.prop];return this.options.duration?this.pos=g=C.easing[this.easing](b,this.options.duration*b,0,1,this.options.duration):this.pos=g=b,this.now=(this.end-this.start)*g+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),B&&B.set?B.set(this):
P.propHooks._default.set(this),this}};P.prototype.init.prototype=P.prototype;P.propHooks={_default:{get:function(b){var g;return 1!==b.elem.nodeType||null!=b.elem[b.prop]&&null==b.elem.style[b.prop]?b.elem[b.prop]:(g=C.css(b.elem,b.prop,""))&&"auto"!==g?g:0},set:function(b){C.fx.step[b.prop]?C.fx.step[b.prop](b):1!==b.elem.nodeType||!C.cssHooks[b.prop]&&null==b.elem.style[wa(b.prop)]?b.elem[b.prop]=b.now:C.style(b.elem,b.prop,b.now+b.unit)}}};P.propHooks.scrollTop=P.propHooks.scrollLeft={set:function(b){b.elem.nodeType&&
b.elem.parentNode&&(b.elem[b.prop]=b.now)}};C.easing={linear:function(b){return b},swing:function(b){return.5-Math.cos(b*Math.PI)/2},_default:"swing"};C.fx=P.prototype.init;C.fx.step={};var cd,Fc,nd=/^(?:toggle|show|hide)$/,zc=/queueHooks$/;C.Animation=C.extend(ka,{tweeners:{"*":[function(b,g){var B=this.createTween(b,g);return x(B.elem,b,Vc.exec(g),B),B}]},tweener:function(b,g){nb(b)?(g=b,b=["*"]):b=b.match(hc);for(var B,M=0,S=b.length;M<S;M++)B=b[M],ka.tweeners[B]=ka.tweeners[B]||[],ka.tweeners[B].unshift(g)},
prefilters:[function(b,g,B){var M,S,ba,ca,pa,ta,Ha,Qa="width"in g||"height"in g,ya=this,Za={},Cb=b.style,sb=b.nodeType&&bd(b),Vb=pb.get(b,"fxshow");for(M in B.queue||(null==(ca=C._queueHooks(b,"fx")).unqueued&&(ca.unqueued=0,pa=ca.empty.fire,ca.empty.fire=function(){ca.unqueued||pa()}),ca.unqueued++,ya.always(function(){ya.always(function(){ca.unqueued--;C.queue(b,"fx").length||ca.empty.fire()})})),g)if(S=g[M],nd.test(S)){if(delete g[M],ba=ba||"toggle"===S,S===(sb?"hide":"show")){if("show"!==S||!Vb||
void 0===Vb[M])continue;sb=!0}Za[M]=Vb&&Vb[M]||C.style(b,M)}if((g=!C.isEmptyObject(g))||!C.isEmptyObject(Za))for(M in Qa&&1===b.nodeType&&(B.overflow=[Cb.overflow,Cb.overflowX,Cb.overflowY],null==(ta=Vb&&Vb.display)&&(ta=pb.get(b,"display")),"none"===(Ha=C.css(b,"display"))&&(ta?Ha=ta:(w([b],!0),ta=b.style.display||ta,Ha=C.css(b,"display"),w([b]))),("inline"===Ha||"inline-block"===Ha&&null!=ta)&&"none"===C.css(b,"float")&&(g||(ya.done(function(){Cb.display=ta}),null==ta&&(Ha=Cb.display,ta="none"===
Ha?"":Ha)),Cb.display="inline-block")),B.overflow&&(Cb.overflow="hidden",ya.always(function(){Cb.overflow=B.overflow[0];Cb.overflowX=B.overflow[1];Cb.overflowY=B.overflow[2]})),g=!1,Za)g||(Vb?"hidden"in Vb&&(sb=Vb.hidden):Vb=pb.access(b,"fxshow",{display:ta}),ba&&(Vb.hidden=!sb),sb&&w([b],!0),ya.done(function(){for(M in sb||w([b]),pb.remove(b,"fxshow"),Za)C.style(b,M,Za[M])})),g=fa(sb?Vb[M]:0,M,ya),M in Vb||(Vb[M]=g.start,sb&&(g.end=g.start,g.start=0))}],prefilter:function(b,g){g?ka.prefilters.unshift(b):
ka.prefilters.push(b)}});C.speed=function(b,g,B){var M=b&&"object"==typeof b?C.extend({},b):{complete:B||!B&&g||nb(b)&&b,duration:b,easing:B&&g||g&&!nb(g)&&g};return C.fx.off?M.duration=0:"number"!=typeof M.duration&&(M.duration in C.fx.speeds?M.duration=C.fx.speeds[M.duration]:M.duration=C.fx.speeds._default),null!=M.queue&&!0!==M.queue||(M.queue="fx"),M.old=M.complete,M.complete=function(){nb(M.old)&&M.old.call(this);M.queue&&C.dequeue(this,M.queue)},M};C.fn.extend({fadeTo:function(b,g,B,M){return this.filter(bd).css("opacity",
0).show().end().animate({opacity:g},b,B,M)},animate:function(b,g,B,M){var S=C.isEmptyObject(b),ba=C.speed(g,B,M);g=function(){var ca=ka(this,C.extend({},b),ba);(S||pb.get(this,"finish"))&&ca.stop(!0)};return g.finish=g,S||!1===ba.queue?this.each(g):this.queue(ba.queue,g)},stop:function(b,g,B){var M=function(S){var ba=S.stop;delete S.stop;ba(B)};return"string"!=typeof b&&(B=g,g=b,b=void 0),g&&this.queue(b||"fx",[]),this.each(function(){var S=!0,ba=null!=b&&b+"queueHooks",ca=C.timers,pa=pb.get(this);
if(ba)pa[ba]&&pa[ba].stop&&M(pa[ba]);else for(ba in pa)pa[ba]&&pa[ba].stop&&zc.test(ba)&&M(pa[ba]);for(ba=ca.length;ba--;)ca[ba].elem!==this||null!=b&&ca[ba].queue!==b||(ca[ba].anim.stop(B),S=!1,ca.splice(ba,1));!S&&B||C.dequeue(this,b)})},finish:function(b){return!1!==b&&(b=b||"fx"),this.each(function(){var g=pb.get(this),B=g[b+"queue"];var M=g[b+"queueHooks"];var S=C.timers,ba=B?B.length:0;g.finish=!0;C.queue(this,b,[]);M&&M.stop&&M.stop.call(this,!0);for(M=S.length;M--;)S[M].elem===this&&S[M].queue===
b&&(S[M].anim.stop(!0),S.splice(M,1));for(M=0;M<ba;M++)B[M]&&B[M].finish&&B[M].finish.call(this);delete g.finish})}});C.each(["toggle","show","hide"],function(b,g){var B=C.fn[g];C.fn[g]=function(M,S,ba){return null==M||"boolean"==typeof M?B.apply(this,arguments):this.animate(V(g,!0),M,S,ba)}});C.each({slideDown:V("show"),slideUp:V("hide"),slideToggle:V("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,g){C.fn[b]=function(B,M,S){return this.animate(g,
B,M,S)}});C.timers=[];C.fx.tick=function(){var b,g=0,B=C.timers;for(cd=Date.now();g<B.length;g++)(b=B[g])()||B[g]!==b||B.splice(g--,1);B.length||C.fx.stop();cd=void 0};C.fx.timer=function(b){C.timers.push(b);C.fx.start()};C.fx.interval=13;C.fx.start=function(){Fc||(Fc=!0,T())};C.fx.stop=function(){Fc=null};C.fx.speeds={slow:600,fast:200,_default:400};C.fn.delay=function(b,g){return b=C.fx&&C.fx.speeds[b]||b,g=g||"fx",this.queue(g,function(B,M){var S=a.setTimeout(B,b);M.stop=function(){a.clearTimeout(S)}})};
(function(){var b=wb.createElement("input"),g=wb.createElement("select").appendChild(wb.createElement("option"));b.type="checkbox";Fb.checkOn=""!==b.value;Fb.optSelected=g.selected;(b=wb.createElement("input")).value="t";b.type="radio";Fb.radioValue="t"===b.value})();var Tb=C.expr.attrHandle;C.fn.extend({attr:function(b,g){return Ib(this,C.attr,b,g,1<arguments.length)},removeAttr:function(b){return this.each(function(){C.removeAttr(this,b)})}});C.extend({attr:function(b,g,B){var M,S,ba=b.nodeType;
if(3!==ba&&8!==ba&&2!==ba)return void 0===b.getAttribute?C.prop(b,g,B):(1===ba&&C.isXMLDoc(b)||(S=C.attrHooks[g.toLowerCase()]||(C.expr.match.bool.test(g)?Wb:void 0)),void 0!==B?null===B?void C.removeAttr(b,g):S&&"set"in S&&void 0!==(M=S.set(b,B,g))?M:(b.setAttribute(g,B+""),B):S&&"get"in S&&null!==(M=S.get(b,g))?M:null==(M=C.find.attr(b,g))?void 0:M)},attrHooks:{type:{set:function(b,g){if(!Fb.radioValue&&"radio"===g&&f(b,"input")){var B=b.value;return b.setAttribute("type",g),B&&(b.value=B),g}}}},
removeAttr:function(b,g){var B=0,M=g&&g.match(hc);if(M&&1===b.nodeType)for(;g=M[B++];)b.removeAttribute(g)}});var Wb={set:function(b,g,B){return!1===g?C.removeAttr(b,B):b.setAttribute(B,B),B}};C.each(C.expr.match.bool.source.match(/\w+/g),function(b,g){var B=Tb[g]||C.find.attr;Tb[g]=function(M,S,ba){var ca,pa,ta=S.toLowerCase();return ba||(pa=Tb[ta],Tb[ta]=ca,ca=null!=B(M,S,ba)?ta:null,Tb[ta]=pa),ca}});var ad=/^(?:input|select|textarea|button)$/i,tc=/^(?:a|area)$/i;C.fn.extend({prop:function(b,g){return Ib(this,
C.prop,b,g,1<arguments.length)},removeProp:function(b){return this.each(function(){delete this[C.propFix[b]||b]})}});C.extend({prop:function(b,g,B){var M,S,ba=b.nodeType;if(3!==ba&&8!==ba&&2!==ba)return 1===ba&&C.isXMLDoc(b)||(g=C.propFix[g]||g,S=C.propHooks[g]),void 0!==B?S&&"set"in S&&void 0!==(M=S.set(b,B,g))?M:b[g]=B:S&&"get"in S&&null!==(M=S.get(b,g))?M:b[g]},propHooks:{tabIndex:{get:function(b){var g=C.find.attr(b,"tabindex");return g?parseInt(g,10):ad.test(b.nodeName)||tc.test(b.nodeName)&&
b.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}});Fb.optSelected||(C.propHooks.selected={get:function(b){b=b.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(b){b=b.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}});C.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){C.propFix[this.toLowerCase()]=this});C.fn.extend({addClass:function(b){var g,B,M,S,ba,
ca,pa,ta=0;if(nb(b))return this.each(function(Ha){C(this).addClass(b.call(this,Ha,za(this)))});if((g=Ma(b)).length)for(;B=this[ta++];)if(S=za(B),M=1===B.nodeType&&" "+ma(S)+" "){for(ca=0;ba=g[ca++];)0>M.indexOf(" "+ba+" ")&&(M+=ba+" ");S!==(pa=ma(M))&&B.setAttribute("class",pa)}return this},removeClass:function(b){var g,B,M,S,ba,ca,pa,ta=0;if(nb(b))return this.each(function(Ha){C(this).removeClass(b.call(this,Ha,za(this)))});if(!arguments.length)return this.attr("class","");if((g=Ma(b)).length)for(;B=
this[ta++];)if(S=za(B),M=1===B.nodeType&&" "+ma(S)+" "){for(ca=0;ba=g[ca++];)for(;-1<M.indexOf(" "+ba+" ");)M=M.replace(" "+ba+" "," ");S!==(pa=ma(M))&&B.setAttribute("class",pa)}return this},toggleClass:function(b,g){var B=typeof b,M="string"===B||Array.isArray(b);return"boolean"==typeof g&&M?g?this.addClass(b):this.removeClass(b):nb(b)?this.each(function(S){C(this).toggleClass(b.call(this,S,za(this),g),g)}):this.each(function(){var S,ba;if(M){var ca=0;var pa=C(this);for(ba=Ma(b);S=ba[ca++];)pa.hasClass(S)?
pa.removeClass(S):pa.addClass(S)}else void 0!==b&&"boolean"!==B||((S=za(this))&&pb.set(this,"__className__",S),this.setAttribute&&this.setAttribute("class",S||!1===b?"":pb.get(this,"__className__")||""))})},hasClass:function(b){var g,B=0;for(b=" "+b+" ";g=this[B++];)if(1===g.nodeType&&-1<(" "+ma(za(g))+" ").indexOf(b))return!0;return!1}});var cc=/\r/g;C.fn.extend({val:function(b){var g,B,M,S=this[0];return arguments.length?(M=nb(b),this.each(function(ba){var ca;1===this.nodeType&&(null==(ca=M?b.call(this,
ba,C(this).val()):b)?ca="":"number"==typeof ca?ca+="":Array.isArray(ca)&&(ca=C.map(ca,function(pa){return null==pa?"":pa+""})),(g=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in g&&void 0!==g.set(this,ca,"value")||(this.value=ca))})):S?(g=C.valHooks[S.type]||C.valHooks[S.nodeName.toLowerCase()])&&"get"in g&&void 0!==(B=g.get(S,"value"))?B:"string"==typeof(B=S.value)?B.replace(cc,""):null==B?"":B:void 0}});C.extend({valHooks:{option:{get:function(b){var g=C.find.attr(b,"value");
return null!=g?g:ma(C.text(b))}},select:{get:function(b){var g,B,M=b.options,S=b.selectedIndex,ba="select-one"===b.type,ca=ba?null:[],pa=ba?S+1:M.length;for(B=0>S?pa:ba?S:0;B<pa;B++)if(!(!(g=M[B]).selected&&B!==S||g.disabled||g.parentNode.disabled&&f(g.parentNode,"optgroup"))){if(b=C(g).val(),ba)return b;ca.push(b)}return ca},set:function(b,g){var B,M,S=b.options;g=C.makeArray(g);for(var ba=S.length;ba--;)((M=S[ba]).selected=-1<C.inArray(C.valHooks.option.get(M),g))&&(B=!0);return B||(b.selectedIndex=
-1),g}}}});C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(b,g){if(Array.isArray(g))return b.checked=-1<C.inArray(C(b).val(),g)}};Fb.checkOn||(C.valHooks[this].get=function(b){return null===b.getAttribute("value")?"on":b.value})});Fb.focusin="onfocusin"in a;var ac=/^(?:focusinfocus|focusoutblur)$/,ic=function(b){b.stopPropagation()};C.extend(C.event,{trigger:function(b,g,B,M){var S,ba,ca,pa,ta,Ha,Qa=[B||wb],ya=Dc.call(b,"type")?b.type:b;var Za=Dc.call(b,"namespace")?b.namespace.split("."):
[];if(S=Ha=ba=B=B||wb,3!==B.nodeType&&8!==B.nodeType&&!ac.test(ya+C.event.triggered)&&(-1<ya.indexOf(".")&&(Za=ya.split("."),ya=Za.shift(),Za.sort()),ca=0>ya.indexOf(":")&&"on"+ya,(b=b[C.expando]?b:new C.Event(ya,"object"==typeof b&&b)).isTrigger=M?2:3,b.namespace=Za.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+Za.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=B),g=null==g?[b]:C.makeArray(g,[b]),ta=C.event.special[ya]||{},M||!ta.trigger||!1!==ta.trigger.apply(B,
g))){if(!M&&!ta.noBubble&&!bc(B)){var Cb=ta.delegateType||ya;for(ac.test(Cb+ya)||(S=S.parentNode);S;S=S.parentNode)Qa.push(S),ba=S;ba===(B.ownerDocument||wb)&&Qa.push(ba.defaultView||ba.parentWindow||a)}for(Za=0;(S=Qa[Za++])&&!b.isPropagationStopped();)Ha=S,b.type=1<Za?Cb:ta.bindType||ya,(pa=(pb.get(S,"events")||Object.create(null))[b.type]&&pb.get(S,"handle"))&&pa.apply(S,g),(pa=ca&&S[ca])&&pa.apply&&nc(S)&&(b.result=pa.apply(S,g),!1===b.result&&b.preventDefault());return b.type=ya,M||b.isDefaultPrevented()||
ta._default&&!1!==ta._default.apply(Qa.pop(),g)||!nc(B)||ca&&nb(B[ya])&&!bc(B)&&((ba=B[ca])&&(B[ca]=null),C.event.triggered=ya,b.isPropagationStopped()&&Ha.addEventListener(ya,ic),B[ya](),b.isPropagationStopped()&&Ha.removeEventListener(ya,ic),C.event.triggered=void 0,ba&&(B[ca]=ba)),b.result}},simulate:function(b,g,B){b=C.extend(new C.Event,B,{type:b,isSimulated:!0});C.event.trigger(b,null,g)}});C.fn.extend({trigger:function(b,g){return this.each(function(){C.event.trigger(b,g,this)})},triggerHandler:function(b,
g){var B=this[0];if(B)return C.event.trigger(b,g,B,!0)}});Fb.focusin||C.each({focus:"focusin",blur:"focusout"},function(b,g){var B=function(M){C.event.simulate(g,M.target,C.event.fix(M))};C.event.special[g]={setup:function(){var M=this.ownerDocument||this.document||this,S=pb.access(M,g);S||M.addEventListener(b,B,!0);pb.access(M,g,(S||0)+1)},teardown:function(){var M=this.ownerDocument||this.document||this,S=pb.access(M,g)-1;S?pb.access(M,g,S):(M.removeEventListener(b,B,!0),pb.remove(M,g))}}});var dc=
a.location,hd=Date.now(),Ac=/\?/;C.parseXML=function(b){var g;if(!b||"string"!=typeof b)return null;try{var B=(new a.DOMParser).parseFromString(b,"text/xml")}catch(M){}return g=B&&B.getElementsByTagName("parsererror")[0],B&&!g||C.error("Invalid XML: "+(g?C.map(g.childNodes,function(M){return M.textContent}).join("\n"):b)),B};var Wc=/\[\]$/,mc=/\r?\n/g,ec=/^(?:submit|button|image|reset|file)$/i,Nb=/^(?:input|select|textarea|keygen)/i;C.param=function(b,g){var B,M=[],S=function(ba,ca){ca=nb(ca)?ca():
ca;M[M.length]=encodeURIComponent(ba)+"="+encodeURIComponent(null==ca?"":ca)};if(null==b)return"";if(Array.isArray(b)||b.jquery&&!C.isPlainObject(b))C.each(b,function(){S(this.name,this.value)});else for(B in b)Ra(B,b[B],g,S);return M.join("&")};C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var b=C.prop(this,"elements");return b?C.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!C(this).is(":disabled")&&
Nb.test(this.nodeName)&&!ec.test(b)&&(this.checked||!aa.test(b))}).map(function(b,g){b=C(this).val();return null==b?null:Array.isArray(b)?C.map(b,function(B){return{name:g.name,value:B.replace(mc,"\r\n")}}):{name:g.name,value:b.replace(mc,"\r\n")}}).get()}});var jc=/%20/g,l=/#.*$/,X=/([?&])_=[^&]*/,K=/^(.*?):[ \t]*([^\r\n]*)$/gm,sa=/^(?:GET|HEAD)$/,xa=/^\/\//,La={},Ba={},Ja="*/".concat("*"),bb=wb.createElement("a");bb.href=dc.href;C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:dc.href,
type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(dc.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ja,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,
"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(b,g){return g?Oa(Oa(b,C.ajaxSettings),g):Oa(C.ajaxSettings,b)},ajaxPrefilter:va(La),ajaxTransport:va(Ba),ajax:function(b,g){function B(Zb,Yc,ud,Ad){var od,vd,ld,md,id,Rb=Yc;ub||(ub=!0,pa&&a.clearTimeout(pa),M=void 0,ba=Ad||"",fb.readyState=0<Zb?4:0,od=200<=Zb&&300>Zb||304===Zb,ud&&(md=function(yc,Pc,Gc){for(var ed,$c,wc,Sb,Uc=yc.contents,xc=yc.dataTypes;"*"===xc[0];)xc.shift(),void 0===ed&&(ed=yc.mimeType||Pc.getResponseHeader("Content-Type"));
if(ed)for($c in Uc)if(Uc[$c]&&Uc[$c].test(ed)){xc.unshift($c);break}if(xc[0]in Gc)wc=xc[0];else{for($c in Gc){if(!xc[0]||yc.converters[$c+" "+xc[0]]){wc=$c;break}Sb||(Sb=$c)}wc=wc||Sb}if(wc)return wc!==xc[0]&&xc.unshift(wc),Gc[wc]}(ya,fb,ud)),!od&&-1<C.inArray("script",ya.dataTypes)&&0>C.inArray("json",ya.dataTypes)&&(ya.converters["text script"]=function(){}),md=function(yc,Pc,Gc,ed){var $c,wc,Sb,Uc,xc,qd={},xd=yc.dataTypes.slice();if(xd[1])for(Sb in yc.converters)qd[Sb.toLowerCase()]=yc.converters[Sb];
for(wc=xd.shift();wc;)if(yc.responseFields[wc]&&(Gc[yc.responseFields[wc]]=Pc),!xc&&ed&&yc.dataFilter&&(Pc=yc.dataFilter(Pc,yc.dataType)),xc=wc,wc=xd.shift())if("*"===wc)wc=xc;else if("*"!==xc&&xc!==wc){if(!(Sb=qd[xc+" "+wc]||qd["* "+wc]))for($c in qd)if((Uc=$c.split(" "))[1]===wc&&(Sb=qd[xc+" "+Uc[0]]||qd["* "+Uc[0]])){!0===Sb?Sb=qd[$c]:!0!==qd[$c]&&(wc=Uc[0],xd.unshift(Uc[1]));break}if(!0!==Sb)if(Sb&&yc.throws)Pc=Sb(Pc);else try{Pc=Sb(Pc)}catch(Ed){return{state:"parsererror",error:Sb?Ed:"No conversion from "+
xc+" to "+wc}}}return{state:"success",data:Pc}}(ya,md,fb,od),od?(ya.ifModified&&((id=fb.getResponseHeader("Last-Modified"))&&(C.lastModified[S]=id),(id=fb.getResponseHeader("etag"))&&(C.etag[S]=id)),204===Zb||"HEAD"===ya.type?Rb="nocontent":304===Zb?Rb="notmodified":(Rb=md.state,vd=md.data,od=!(ld=md.error))):(ld=Rb,!Zb&&Rb||(Rb="error",0>Zb&&(Zb=0))),fb.status=Zb,fb.statusText=(Yc||Rb)+"",od?sb.resolveWith(Za,[vd,Rb,fb]):sb.rejectWith(Za,[fb,Rb,ld]),fb.statusCode(Qc),Qc=void 0,ta&&Cb.trigger(od?
"ajaxSuccess":"ajaxError",[fb,ya,od?vd:ld]),Vb.fireWith(Za,[fb,Rb]),ta&&(Cb.trigger("ajaxComplete",[fb,ya]),--C.active||C.event.trigger("ajaxStop")))}"object"==typeof b&&(g=b,b=void 0);g=g||{};var M,S,ba,ca,pa,ta,Ha,Qa,ya=C.ajaxSetup({},g),Za=ya.context||ya,Cb=ya.context&&(Za.nodeType||Za.jquery)?C(Za):C.event,sb=C.Deferred(),Vb=C.Callbacks("once memory"),Qc=ya.statusCode||{},jd={},sc={},Rc="canceled",fb={readyState:0,getResponseHeader:function(Zb){var Yc;if(ub){if(!ca)for(ca={};Yc=K.exec(ba);)ca[Yc[1].toLowerCase()+
" "]=(ca[Yc[1].toLowerCase()+" "]||[]).concat(Yc[2]);Yc=ca[Zb.toLowerCase()+" "]}return null==Yc?null:Yc.join(", ")},getAllResponseHeaders:function(){return ub?ba:null},setRequestHeader:function(Zb,Yc){return null==ub&&(Zb=sc[Zb.toLowerCase()]=sc[Zb.toLowerCase()]||Zb,jd[Zb]=Yc),this},overrideMimeType:function(Zb){return null==ub&&(ya.mimeType=Zb),this},statusCode:function(Zb){var Yc;if(Zb)if(ub)fb.always(Zb[fb.status]);else for(Yc in Zb)Qc[Yc]=[Qc[Yc],Zb[Yc]];return this},abort:function(Zb){Zb=Zb||
Rc;return M&&M.abort(Zb),B(0,Zb),this}};if(sb.promise(fb),ya.url=((b||ya.url||dc.href)+"").replace(xa,dc.protocol+"//"),ya.type=g.method||g.type||ya.method||ya.type,ya.dataTypes=(ya.dataType||"*").toLowerCase().match(hc)||[""],null==ya.crossDomain){b=wb.createElement("a");try{b.href=ya.url,b.href=b.href,ya.crossDomain=bb.protocol+"//"+bb.host!=b.protocol+"//"+b.host}catch(Zb){ya.crossDomain=!0}}if(ya.data&&ya.processData&&"string"!=typeof ya.data&&(ya.data=C.param(ya.data,ya.traditional)),Ca(La,ya,
g,fb),ub)return fb;for(Ha in(ta=C.event&&ya.global)&&0==C.active++&&C.event.trigger("ajaxStart"),ya.type=ya.type.toUpperCase(),ya.hasContent=!sa.test(ya.type),S=ya.url.replace(l,""),ya.hasContent?ya.data&&ya.processData&&0===(ya.contentType||"").indexOf("application/x-www-form-urlencoded")&&(ya.data=ya.data.replace(jc,"+")):(Qa=ya.url.slice(S.length),ya.data&&(ya.processData||"string"==typeof ya.data)&&(S+=(Ac.test(S)?"&":"?")+ya.data,delete ya.data),!1===ya.cache&&(S=S.replace(X,"$1"),Qa=(Ac.test(S)?
"&":"?")+"_="+hd++ +Qa),ya.url=S+Qa),ya.ifModified&&(C.lastModified[S]&&fb.setRequestHeader("If-Modified-Since",C.lastModified[S]),C.etag[S]&&fb.setRequestHeader("If-None-Match",C.etag[S])),(ya.data&&ya.hasContent&&!1!==ya.contentType||g.contentType)&&fb.setRequestHeader("Content-Type",ya.contentType),fb.setRequestHeader("Accept",ya.dataTypes[0]&&ya.accepts[ya.dataTypes[0]]?ya.accepts[ya.dataTypes[0]]+("*"!==ya.dataTypes[0]?", "+Ja+"; q=0.01":""):ya.accepts["*"]),ya.headers)fb.setRequestHeader(Ha,
ya.headers[Ha]);if(ya.beforeSend&&(!1===ya.beforeSend.call(Za,fb,ya)||ub))return fb.abort();if(Rc="abort",Vb.add(ya.complete),fb.done(ya.success),fb.fail(ya.error),M=Ca(Ba,ya,g,fb)){if(fb.readyState=1,ta&&Cb.trigger("ajaxSend",[fb,ya]),ub)return fb;ya.async&&0<ya.timeout&&(pa=a.setTimeout(function(){fb.abort("timeout")},ya.timeout));try{var ub=!1;M.send(jd,B)}catch(Zb){if(ub)throw Zb;B(-1,Zb)}}else B(-1,"No Transport");return fb},getJSON:function(b,g,B){return C.get(b,g,B,"json")},getScript:function(b,
g){return C.get(b,void 0,g,"script")}});C.each(["get","post"],function(b,g){C[g]=function(B,M,S,ba){return nb(M)&&(ba=ba||S,S=M,M=void 0),C.ajax(C.extend({url:B,type:g,dataType:ba,data:M,success:S},C.isPlainObject(B)&&B))}});C.ajaxPrefilter(function(b){for(var g in b.headers)"content-type"===g.toLowerCase()&&(b.contentType=b.headers[g]||"")});C._evalUrl=function(b,g,B){return C.ajax({url:b,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(M){C.globalEval(M,
g,B)}})};C.fn.extend({wrapAll:function(b){var g;return this[0]&&(nb(b)&&(b=b.call(this[0])),g=C(b,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&g.insertBefore(this[0]),g.map(function(){for(var B=this;B.firstElementChild;)B=B.firstElementChild;return B}).append(this)),this},wrapInner:function(b){return nb(b)?this.each(function(g){C(this).wrapInner(b.call(this,g))}):this.each(function(){var g=C(this),B=g.contents();B.length?B.wrapAll(b):g.append(b)})},wrap:function(b){var g=nb(b);return this.each(function(B){C(this).wrapAll(g?
b.call(this,B):b)})},unwrap:function(b){return this.parent(b).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}});C.expr.pseudos.hidden=function(b){return!C.expr.pseudos.visible(b)};C.expr.pseudos.visible=function(b){return!!(b.offsetWidth||b.offsetHeight||b.getClientRects().length)};C.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Ta={0:200,1223:204},Bb=C.ajaxSettings.xhr();Fb.cors=!!Bb&&"withCredentials"in Bb;Fb.ajax=Bb=!!Bb;C.ajaxTransport(function(b){var g,
B;if(Fb.cors||Bb&&!b.crossDomain)return{send:function(M,S){var ba,ca=b.xhr();if(ca.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(ba in b.xhrFields)ca[ba]=b.xhrFields[ba];for(ba in b.mimeType&&ca.overrideMimeType&&ca.overrideMimeType(b.mimeType),b.crossDomain||M["X-Requested-With"]||(M["X-Requested-With"]="XMLHttpRequest"),M)ca.setRequestHeader(ba,M[ba]);g=function(pa){return function(){g&&(g=B=ca.onload=ca.onerror=ca.onabort=ca.ontimeout=ca.onreadystatechange=null,"abort"===pa?
ca.abort():"error"===pa?"number"!=typeof ca.status?S(0,"error"):S(ca.status,ca.statusText):S(Ta[ca.status]||ca.status,ca.statusText,"text"!==(ca.responseType||"text")||"string"!=typeof ca.responseText?{binary:ca.response}:{text:ca.responseText},ca.getAllResponseHeaders()))}};ca.onload=g();B=ca.onerror=ca.ontimeout=g("error");void 0!==ca.onabort?ca.onabort=B:ca.onreadystatechange=function(){4===ca.readyState&&a.setTimeout(function(){g&&B()})};g=g("abort");try{ca.send(b.hasContent&&b.data||null)}catch(pa){if(g)throw pa;
}},abort:function(){g&&g()}}});C.ajaxPrefilter(function(b){b.crossDomain&&(b.contents.script=!1)});C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(b){return C.globalEval(b),b}}});C.ajaxPrefilter("script",function(b){void 0===b.cache&&(b.cache=!1);b.crossDomain&&(b.type="GET")});C.ajaxTransport("script",function(b){var g,B;if(b.crossDomain||b.scriptAttrs)return{send:function(M,
S){g=C("<script>").attr(b.scriptAttrs||{}).prop({charset:b.scriptCharset,src:b.url}).on("load error",B=function(ba){g.remove();B=null;ba&&S("error"===ba.type?404:200,ba.type)});wb.head.appendChild(g[0])},abort:function(){B&&B()}}});var da,db=[],yb=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=db.pop()||C.expando+"_"+hd++;return this[b]=!0,b}});C.ajaxPrefilter("json jsonp",function(b,g,B){var M,S,ba,ca=!1!==b.jsonp&&(yb.test(b.url)?"url":"string"==typeof b.data&&
0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&yb.test(b.data)&&"data");if(ca||"jsonp"===b.dataTypes[0])return M=b.jsonpCallback=nb(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,ca?b[ca]=b[ca].replace(yb,"$1"+M):!1!==b.jsonp&&(b.url+=(Ac.test(b.url)?"&":"?")+b.jsonp+"="+M),b.converters["script json"]=function(){return ba||C.error(M+" was not called"),ba[0]},b.dataTypes[0]="json",S=a[M],a[M]=function(){ba=arguments},B.always(function(){void 0===S?C(a).removeProp(M):a[M]=
S;b[M]&&(b.jsonpCallback=g.jsonpCallback,db.push(M));ba&&nb(S)&&S(ba[0]);ba=S=void 0}),"script"});Fb.createHTMLDocument=((da=wb.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===da.childNodes.length);C.parseHTML=function(b,g,B){return"string"!=typeof b?[]:("boolean"==typeof g&&(B=g,g=!1),g||(Fb.createHTMLDocument?((M=(g=wb.implementation.createHTMLDocument("")).createElement("base")).href=wb.location.href,g.head.appendChild(M)):g=wb),ba=!B&&[],(S=lb.exec(b))?[g.createElement(S[1])]:
(S=Q([b],g,ba),ba&&ba.length&&C(ba).remove(),C.merge([],S.childNodes)));var M,S,ba};C.fn.load=function(b,g,B){var M,S,ba,ca=this,pa=b.indexOf(" ");return-1<pa&&(M=ma(b.slice(pa)),b=b.slice(0,pa)),nb(g)?(B=g,g=void 0):g&&"object"==typeof g&&(S="POST"),0<ca.length&&C.ajax({url:b,type:S||"GET",dataType:"html",data:g}).done(function(ta){ba=arguments;ca.html(M?C("<div>").append(C.parseHTML(ta)).find(M):ta)}).always(B&&function(ta,Ha){ca.each(function(){B.apply(this,ba||[ta.responseText,Ha,ta])})}),this};
C.expr.pseudos.animated=function(b){return C.grep(C.timers,function(g){return b===g.elem}).length};C.offset={setOffset:function(b,g,B){var M,S,ba,ca=C.css(b,"position"),pa=C(b),ta={};"static"===ca&&(b.style.position="relative");var Ha=pa.offset();var Qa=C.css(b,"top");var ya=C.css(b,"left");("absolute"===ca||"fixed"===ca)&&-1<(Qa+ya).indexOf("auto")?(ba=(M=pa.position()).top,S=M.left):(ba=parseFloat(Qa)||0,S=parseFloat(ya)||0);nb(g)&&(g=g.call(b,B,C.extend({},Ha)));null!=g.top&&(ta.top=g.top-Ha.top+
ba);null!=g.left&&(ta.left=g.left-Ha.left+S);"using"in g?g.using.call(b,ta):pa.css(ta)}};C.fn.extend({offset:function(b){if(arguments.length)return void 0===b?this:this.each(function(S){C.offset.setOffset(this,b,S)});var g,B,M=this[0];return M?M.getClientRects().length?(g=M.getBoundingClientRect(),B=M.ownerDocument.defaultView,{top:g.top+B.pageYOffset,left:g.left+B.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var b,g=this[0],B={top:0,left:0};if("fixed"===C.css(g,"position"))var M=
g.getBoundingClientRect();else{M=this.offset();var S=g.ownerDocument;for(b=g.offsetParent||S.documentElement;b&&(b===S.body||b===S.documentElement)&&"static"===C.css(b,"position");)b=b.parentNode;b&&b!==g&&1===b.nodeType&&((B=C(b).offset()).top+=C.css(b,"borderTopWidth",!0),B.left+=C.css(b,"borderLeftWidth",!0))}return{top:M.top-B.top-C.css(g,"marginTop",!0),left:M.left-B.left-C.css(g,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent;b&&"static"===
C.css(b,"position");)b=b.offsetParent;return b||Sc})}});C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,g){var B="pageYOffset"===g;C.fn[b]=function(M){return Ib(this,function(S,ba,ca){var pa;if(bc(S)?pa=S:9===S.nodeType&&(pa=S.defaultView),void 0===ca)return pa?pa[g]:S[ba];pa?pa.scrollTo(B?pa.pageXOffset:ca,B?ca:pa.pageYOffset):S[ba]=ca},b,M,arguments.length)}});C.each(["top","left"],function(b,g){C.cssHooks[g]=oa(Fb.pixelPosition,function(B,M){if(M)return M=la(B,g),Gb.test(M)?
C(B).position()[g]+"px":M})});C.each({Height:"height",Width:"width"},function(b,g){C.each({padding:"inner"+b,content:g,"":"outer"+b},function(B,M){C.fn[M]=function(S,ba){var ca=arguments.length&&(B||"boolean"!=typeof S),pa=B||(!0===S||!0===ba?"margin":"border");return Ib(this,function(ta,Ha,Qa){var ya;return bc(ta)?0===M.indexOf("outer")?ta["inner"+b]:ta.document.documentElement["client"+b]:9===ta.nodeType?(ya=ta.documentElement,Math.max(ta.body["scroll"+b],ya["scroll"+b],ta.body["offset"+b],ya["offset"+
b],ya["client"+b])):void 0===Qa?C.css(ta,Ha,pa):C.style(ta,Ha,Qa,pa)},g,ca?S:void 0,ca)}})});C.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b,g){C.fn[g]=function(B){return this.on(g,B)}});C.fn.extend({bind:function(b,g,B){return this.on(b,null,g,B)},unbind:function(b,g){return this.off(b,null,g)},delegate:function(b,g,B,M){return this.on(g,b,B,M)},undelegate:function(b,g,B){return 1===arguments.length?this.off(b,"**"):this.off(g,b||"**",B)},hover:function(b,
g){return this.mouseenter(b).mouseleave(g||b)}});C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(b,g){C.fn[g]=function(B,M){return 0<arguments.length?this.on(g,null,B,M):this.trigger(g)}});var xb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;C.proxy=function(b,g){var B,M,S;if("string"==typeof g&&(B=b[g],g=b,b=B),nb(b))return M=Lb.call(arguments,
2),(S=function(){return b.apply(g||this,M.concat(Lb.call(arguments)))}).guid=b.guid=b.guid||C.guid++,S};C.holdReady=function(b){b?C.readyWait++:C.ready(!0)};C.isArray=Array.isArray;C.parseJSON=JSON.parse;C.nodeName=f;C.isFunction=nb;C.isWindow=bc;C.camelCase=q;C.type=e;C.now=Date.now;C.isNumeric=function(b){var g=C.type(b);return("number"===g||"string"===g)&&!isNaN(b-parseFloat(b))};C.trim=function(b){return null==b?"":(b+"").replace(xb,"")};!(Qb=[],Xa=function(){return C}.apply(Ua,Qb),void 0!==Xa&&
(Ia.exports=Xa));var kb=a.jQuery,rb=a.$;return C.noConflict=function(b){return a.$===C&&(a.$=rb),b&&a.jQuery===C&&(a.jQuery=kb),C},void 0===d&&(a.jQuery=a.$=C),C});var Db=Sa.amdD;Sa.amdD=null;!function(a,d){!function(p){function e(U,A,I){U.byteLength;for(var P=0,T=I.length;P<T;P++){var Y=I.charCodeAt(P);if(128>Y)U.setUint8(A++,Y>>>0&127|0);else{if(2048>Y)U.setUint8(A++,Y>>>6&31|192);else{if(65536>Y)U.setUint8(A++,Y>>>12&15|224);else{if(!(1114112>Y))throw Error("bad codepoint "+Y);U.setUint8(A++,Y>>>
18&7|240);U.setUint8(A++,Y>>>12&63|128)}U.setUint8(A++,Y>>>6&63|128)}U.setUint8(A++,Y>>>0&63|128)}}}function k(U){for(var A=0,I=0,P=U.length;I<P;I++){var T=U.charCodeAt(I);if(128>T)A+=1;else if(2048>T)A+=2;else if(65536>T)A+=3;else{if(!(1114112>T))throw Error("bad codepoint "+T);A+=4}}return A}function f(U,A,I){var P=typeof U;if("string"===P){if(32>(T=k(U)))return A.setUint8(I,160|T),e(A,I+1,U),1+T;if(256>T)return A.setUint8(I,217),A.setUint8(I+1,T),e(A,I+2,U),2+T;if(65536>T)return A.setUint8(I,218),
A.setUint16(I+1,T),e(A,I+3,U),3+T;if(4294967296>T)return A.setUint8(I,219),A.setUint32(I+1,T),e(A,I+5,U),5+T}if(U instanceof Uint8Array){var T=U.byteLength,Y=new Uint8Array(A.buffer);if(256>T)return A.setUint8(I,196),A.setUint8(I+1,T),Y.set(U,I+2),2+T;if(65536>T)return A.setUint8(I,197),A.setUint16(I+1,T),Y.set(U,I+3),3+T;if(4294967296>T)return A.setUint8(I,198),A.setUint32(I+1,T),Y.set(U,I+5),5+T}if("number"===P){if(!isFinite(U))throw Error("Number not finite: "+U);if(Math.floor(U)!==U)return A.setUint8(I,
203),A.setFloat64(I+1,U),9;if(0<=U){if(128>U)return A.setUint8(I,U),1;if(256>U)return A.setUint8(I,204),A.setUint8(I+1,U),2;if(65536>U)return A.setUint8(I,205),A.setUint16(I+1,U),3;if(4294967296>U)return A.setUint8(I,206),A.setUint32(I+1,U),5;throw Error("Number too big 0x"+U.toString(16));}if(-32<=U)return A.setInt8(I,U),1;if(-128<=U)return A.setUint8(I,208),A.setInt8(I+1,U),2;if(-32768<=U)return A.setUint8(I,209),A.setInt16(I+1,U),3;if(-2147483648<=U)return A.setUint8(I,210),A.setInt32(I+1,U),5;
throw Error("Number too small -0x"+(-U).toString(16).substr(1));}if(null===U)return A.setUint8(I,192),1;if("boolean"===P)return A.setUint8(I,U?195:194),1;if("object"===P){P=0;if(Y=Array.isArray(U))T=U.length;else{var V=Object.keys(U);T=V.length}if(16>T?(A.setUint8(I,T|(Y?144:128)),P=1):65536>T?(A.setUint8(I,Y?220:222),A.setUint16(I+1,T),P=3):4294967296>T&&(A.setUint8(I,Y?221:223),A.setUint32(I+1,T),P=5),Y)for(Y=0;Y<T;Y++)P+=f(U[Y],A,I+P);else for(Y=0;Y<T;Y++){var fa=V[Y];P+=f(fa,A,I+P);P+=f(U[fa],
A,I+P)}return P}throw Error("Unknown type "+P);}function h(U){var A=typeof U;if("string"===A){if(32>(I=k(U)))return 1+I;if(256>I)return 2+I;if(65536>I)return 3+I;if(4294967296>I)return 5+I}if(U instanceof Uint8Array){if(256>(I=U.byteLength))return 2+I;if(65536>I)return 3+I;if(4294967296>I)return 5+I}if("number"===A){if(Math.floor(U)!==U)return 9;if(0<=U){if(128>U)return 1;if(256>U)return 2;if(65536>U)return 3;if(4294967296>U)return 5;throw Error("Number too big 0x"+U.toString(16));}if(-32<=U)return 1;
if(-128<=U)return 2;if(-32768<=U)return 3;if(-2147483648<=U)return 5;throw Error("Number too small -0x"+U.toString(16).substr(1));}if("boolean"===A||null===U)return 1;if("object"===A){var I;A=0;if(Array.isArray(U)){I=U.length;for(var P=0;P<I;P++)A+=h(U[P])}else{var T=Object.keys(U);I=T.length;for(P=0;P<I;P++){var Y=T[P];A+=h(Y)+h(U[Y])}}if(16>I)return 1+A;if(65536>I)return 3+A;if(4294967296>I)return 5+A;throw Error("Array or object too long 0x"+I.toString(16));}throw Error("Unknown type "+A);}function r(U){var A=
new ArrayBuffer(h(U));return f(U,new DataView(A),0),new Uint8Array(A)}function u(U,A,I){return A?new U(A.buffer,A.byteOffset,A.byteLength/(I||1)):void 0}function H(U,A){var I=U.length/2;A||(A=new Int16Array(I));for(var P=0,T=0;P<I;++P,T+=2)A[P]=U[T]<<8^U[T+1]<<0;return A}function z(U,A){var I=U.length/4;A||(A=new Int32Array(I));for(var P=0,T=0;P<I;++P,T+=4)A[P]=U[T]<<24^U[T+1]<<16^U[T+2]<<8^U[T+3]<<0;return A}function F(U,A){var I=U.length;A||(A=new Uint8Array(4*I));for(var P=u(DataView,A),T=0;T<
I;++T)P.setInt32(4*T,U[T]);return u(Uint8Array,A)}function t(U,A,I){var P=U.length;A=1/A;I||(I=new Float32Array(P));for(var T=0;T<P;++T)I[T]=U[T]*A;return I}function q(U,A,I){var P=U.length;I||(I=new Int32Array(P));for(var T=0;T<P;++T)I[T]=Math.round(U[T]*A);return I}function n(U,A){var I;if(!A){var P=A=0;for(I=U.length;P<I;P+=2)A+=U[P+1];A=new U.constructor(A)}var T=0;P=0;for(I=U.length;P<I;P+=2)for(var Y=U[P],V=U[P+1],fa=0;fa<V;++fa)A[T]=Y,++T;return A}function v(U){if(0===U.length)return new Int32Array;
var A,I=2;var P=1;for(A=U.length;P<A;++P)U[P-1]!==U[P]&&(I+=2);I=new Int32Array(I);var T=0,Y=1;P=1;for(A=U.length;P<A;++P)U[P-1]!==U[P]?(I[T]=U[P-1],I[T+1]=Y,Y=1,T+=2):++Y;return I[T]=U[U.length-1],I[T+1]=Y,I}function x(U,A){var I=U.length;A||(A=new U.constructor(I));I&&(A[0]=U[0]);for(var P=1;P<I;++P)A[P]=U[P]+A[P-1];return A}function w(U,A){var I=U.length;A||(A=new U.constructor(I));A[0]=U[0];for(var P=1;P<I;++P)A[P]=U[P]-U[P-1];return A}function D(U,A){var I,P,T=U instanceof Int8Array?127:32767,
Y=-T-1,V=U.length;if(!A){for(I=A=0;I<V;++I)U[I]<T&&U[I]>Y&&++A;A=new Int32Array(A)}for(P=I=0;I<V;){for(var fa=0;U[I]===T||U[I]===Y;)fa+=U[I],++I;fa+=U[I];++I;A[P]=fa;++P}return A}function E(U,A,I,P){var T=new ArrayBuffer(12+P.byteLength),Y=new Uint8Array(T);T=new DataView(T);return T.setInt32(0,U),T.setInt32(4,A),I&&Y.set(I,8),Y.set(P,12),Y}function Q(U){return E(2,U.length,void 0,u(Uint8Array,U))}function N(U){return E(4,U.length,void 0,F(U))}function R(U,A){return E(5,U.length/A,F([A]),u(Uint8Array,
U))}function m(U){return E(6,U.length,void 0,F(v(U)))}function G(U){return E(8,U.length,void 0,F(v(w(U))))}function L(U,A){return E(9,U.length,F([A]),F(v(q(U,A))))}function O(U,A){var I=U.length,P=F([A]);A=w(q(U,A),void 0);var T,Y=A.length;for(T=U=0;T<Y;++T)0===(fa=A[T])?++U:U+=32767===fa||-32768===fa?2:0<fa?Math.ceil(fa/32767):Math.ceil(fa/-32768);U=new Int16Array(U);var V=0;for(T=0;T<Y;++T){var fa;if(0<=(fa=A[T]))for(;32767<=fa;)U[V]=32767,++V,fa-=32767;else for(;-32768>=fa;)U[V]=-32768,++V,fa-=
-32768;U[V]=fa;++V}fa=void 0;A=U.length;fa||(fa=new Uint8Array(2*A));T=u(DataView,fa);for(Y=0;Y<A;++Y)T.setInt16(2*Y,U[Y]);U=u(Uint8Array,fa);return E(10,I,P,U)}function Z(U){var A={};return oa.forEach(function(I){void 0!==U[I]&&(A[I]=U[I])}),U.bondAtomList&&(A.bondAtomList=N(U.bondAtomList)),U.bondOrderList&&(A.bondOrderList=Q(U.bondOrderList)),A.xCoordList=O(U.xCoordList,1E3),A.yCoordList=O(U.yCoordList,1E3),A.zCoordList=O(U.zCoordList,1E3),U.bFactorList&&(A.bFactorList=O(U.bFactorList,100)),U.atomIdList&&
(A.atomIdList=G(U.atomIdList)),U.altLocList&&(A.altLocList=m(U.altLocList)),U.occupancyList&&(A.occupancyList=L(U.occupancyList,100)),A.groupIdList=G(U.groupIdList),A.groupTypeList=N(U.groupTypeList),U.secStructList&&(A.secStructList=Q(U.secStructList)),U.insCodeList&&(A.insCodeList=m(U.insCodeList)),U.sequenceIndexList&&(A.sequenceIndexList=G(U.sequenceIndexList)),A.chainIdList=R(U.chainIdList,4),U.chainNameList&&(A.chainNameList=R(U.chainNameList,4)),A}function W(U){function A(ka){for(var ma={},
za=0;za<ka;za++)ma[Y()]=Y();return ma}function I(ka){var ma=U.subarray(V,V+ka);return V+=ka,ma}function P(ka){var ma=U.subarray(V,V+ka);V+=ka;if(65535<ka){ka=[];for(var za=0;za<ma.length;za+=65535)ka.push(String.fromCharCode.apply(null,ma.subarray(za,za+65535)));return ka.join("")}return String.fromCharCode.apply(null,ma)}function T(ka){for(var ma=Array(ka),za=0;za<ka;za++)ma[za]=Y();return ma}function Y(){var ka,ma,za=U[V];if(0==(128&za))return V++,za;if(128==(240&za))return V++,A(15&za);if(144==
(240&za))return V++,T(15&za);if(160==(224&za))return V++,P(31&za);if(224==(224&za))return ka=fa.getInt8(V),V++,ka;switch(za){case 192:return V++,null;case 194:return V++,!1;case 195:return V++,!0;case 196:return ma=fa.getUint8(V+1),V+=2,I(ma);case 197:return ma=fa.getUint16(V+1),V+=3,I(ma);case 198:return ma=fa.getUint32(V+1),V+=5,I(ma);case 202:return ka=fa.getFloat32(V+1),V+=5,ka;case 203:return ka=fa.getFloat64(V+1),V+=9,ka;case 204:return ka=U[V+1],V+=2,ka;case 205:return ka=fa.getUint16(V+1),
V+=3,ka;case 206:return ka=fa.getUint32(V+1),V+=5,ka;case 208:return ka=fa.getInt8(V+1),V+=2,ka;case 209:return ka=fa.getInt16(V+1),V+=3,ka;case 210:return ka=fa.getInt32(V+1),V+=5,ka;case 217:return ma=fa.getUint8(V+1),V+=2,P(ma);case 218:return ma=fa.getUint16(V+1),V+=3,P(ma);case 219:return ma=fa.getUint32(V+1),V+=5,P(ma);case 220:return ma=fa.getUint16(V+1),V+=3,T(ma);case 221:return ma=fa.getUint32(V+1),V+=5,T(ma);case 222:return ma=fa.getUint16(V+1),V+=3,A(ma);case 223:return ma=fa.getUint32(V+
1),V+=5,A(ma)}throw Error("Unknown type 0x"+za.toString(16));}var V=0,fa=new DataView(U.buffer);return Y()}function ha(U,A,I,P){switch(U){case 1:P=void 0;I=A.length;P||(P=new Float32Array(I/4));U=u(DataView,P);A=u(DataView,A);var T=0,Y=0;for(I/=4;T<I;++T,Y+=4)U.setFloat32(Y,A.getFloat32(Y),!0);return P;case 2:return u(Int8Array,A);case 3:return H(A);case 4:return z(A);case 5:return u(Uint8Array,A);case 6:return n(z(A),new Uint8Array(I));case 7:return n(z(A));case 8:return P=z(A),x(n(P),void 0);case 9:return U=
z(A),P=z(P)[0],t(n(U,u(Int32Array,void 0,4)),P,void 0);case 10:return U=H(A),P=z(P)[0],U=D(U,u(Int32Array,void 0,4)),A=u(Float32Array,U,4),t(x(U,u(Int32Array,A,4)),P,A);case 11:return t(H(A),z(P)[0]);case 12:return U=H(A),P=z(P)[0],t(D(U,u(Int32Array,void 0,4)),P,void 0);case 13:return U=u(Int8Array,A),P=z(P)[0],t(D(U,u(Int32Array,void 0,4)),P,void 0);case 14:return D(H(A));case 15:return D(u(Int8Array,A))}}function ja(U,A){var I=(A=A||{}).ignoreFields,P={};return wa.forEach(function(T){var Y=!!I&&
-1!==I.indexOf(T),V=U[T];if(!Y&&void 0!==V)if(V instanceof Uint8Array){Y=ha.apply;var fa=u(DataView,V),ka=fa.getInt32(0);fa=fa.getInt32(4);var ma=V.subarray(8,12);V=[ka,V.subarray(12),fa,ma];P[T]=Y.call(ha,null,V)}else P[T]=V}),P}function ea(U,A){return U instanceof ArrayBuffer&&(U=new Uint8Array(U)),ja(U instanceof Uint8Array?W(U):U,A)}function la(U,A,I,P){var T=new XMLHttpRequest;T.addEventListener("load",function(){try{var Y=ea(T.response);I(Y)}catch(V){P(V)}},!0);T.addEventListener("error",P,
!0);T.responseType="arraybuffer";T.open("GET",A+U.toUpperCase());T.send()}var oa="mmtfVersion mmtfProducer unitCell spaceGroup structureId title depositionDate releaseDate experimentalMethods resolution rFree rWork bioAssemblyList ncsOperatorList entityList groupList numBonds numAtoms numGroups numChains numModels groupsPerChain chainsPerModel".split(" "),wa=oa.concat("xCoordList yCoordList zCoordList groupIdList groupTypeList chainIdList bFactorList atomIdList altLocList occupancyList secStructList insCodeList sequenceIndexList chainNameList bondAtomList bondOrderList".split(" "));
p.encode=function(U){return r(Z(U))};p.decode=ea;p.traverse=function(U,A,I){var P,T;I=(I||{}).firstModelOnly;var Y=A.onModel,V=A.onChain,fa=A.onGroup,ka=A.onAtom,ma=A.onBond,za=0,Ma=0,Ra=0,va=0,Ca=-1,Oa=U.chainNameList,$a=U.secStructList,ob=U.insCodeList,Lb=U.sequenceIndexList,Ub=U.atomIdList,lc=U.bFactorList,Pb=U.altLocList,uc=U.occupancyList,Xb=U.bondAtomList,Dc=U.bondOrderList;A=0;for(P=U.chainsPerModel.length;A<P&&!(I&&0<za);++A){var Ec=U.chainsPerModel[za];Y&&Y({chainCount:Ec,modelIndex:za});
for(T=0;T<Ec;++T){var pc=U.groupsPerChain[Ma];if(V){var Fb=String.fromCharCode.apply(null,U.chainIdList.subarray(4*Ma,4*Ma+4)).replace(/\0/g,"");var nb=null;Oa&&(nb=String.fromCharCode.apply(null,Oa.subarray(4*Ma,4*Ma+4)).replace(/\0/g,""));V({groupCount:pc,chainIndex:Ma,modelIndex:za,chainId:Fb,chainName:nb})}for(Fb=0;Fb<pc;++Fb){var bc=U.groupList[U.groupTypeList[Ra]],wb=bc.atomNameList.length;if(fa){nb=null;$a&&(nb=$a[Ra]);var na=null;U.insCodeList&&(na=String.fromCharCode(ob[Ra]));var C=null;
Lb&&(C=Lb[Ra]);fa({atomCount:wb,groupIndex:Ra,chainIndex:Ma,modelIndex:za,groupId:U.groupIdList[Ra],groupType:U.groupTypeList[Ra],groupName:bc.groupName,singleLetterCode:bc.singleLetterCode,chemCompType:bc.chemCompType,secStruct:nb,insCode:na,sequenceIndex:C})}for(nb=0;nb<wb;++nb){if(ka){na=null;Ub&&(na=Ub[va]);C=null;lc&&(C=lc[va]);var Va=null;Pb&&(Va=String.fromCharCode(Pb[va]));var Aa=null;uc&&(Aa=uc[va]);ka({atomIndex:va,groupIndex:Ra,chainIndex:Ma,modelIndex:za,atomId:na,element:bc.elementList[nb],
atomName:bc.atomNameList[nb],formalCharge:bc.formalChargeList[nb],xCoord:U.xCoordList[va],yCoord:U.yCoordList[va],zCoord:U.zCoordList[va],bFactor:C,altLoc:Va,occupancy:Aa})}va+=1}if(ma)for(C=bc.bondAtomList,nb=0,na=bc.bondOrderList.length;nb<na;++nb)ma({atomIndex1:va-wb+C[2*nb],atomIndex2:va-wb+C[2*nb+1],bondOrder:bc.bondOrderList[nb]});Ra+=1}Ma+=1}if(T=Ca+1,Ca=va-1,ma&&Xb)for(nb=0,na=Xb.length;nb<na;nb+=2)Ec=Xb[nb],pc=Xb[nb+1],(Ec>=T&&Ec<=Ca||pc>=T&&pc<=Ca)&&ma({atomIndex1:Ec,atomIndex2:pc,bondOrder:Dc?
Dc[nb/2]:null});za+=1}};p.fetch=function(U,A,I){la(U,"http://mmtf.rcsb.org/v1.0/full/",A,I)};p.fetchReduced=function(U,A,I){la(U,"http://mmtf.rcsb.org/v1.0/reduced/",A,I)};p.version="v1.0.0";p.fetchUrl="http://mmtf.rcsb.org/v1.0/full/";p.fetchReducedUrl="http://mmtf.rcsb.org/v1.0/reduced/";p.encodeMsgpack=r;p.encodeMmtf=Z;p.decodeMsgpack=W;p.decodeMmtf=ja;Object.defineProperty(p,"__esModule",{value:!0})}(a.MMTF=a.MMTF||{})}(this);(function(a,d){d(Ua)})(this,function(a){function d(l){for(var X=l.length;0<=
--X;)l[X]=0}function p(l,X,K,sa,xa){this.static_tree=l;this.extra_bits=X;this.extra_base=K;this.elems=sa;this.max_length=xa;this.has_stree=l&&l.length}function e(l,X){this.dyn_tree=l;this.max_code=0;this.stat_desc=X}function k(l,X,K,sa,xa){this.good_length=l;this.max_lazy=X;this.nice_length=K;this.max_chain=sa;this.func=xa}function f(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=nb;this.last_flush=
-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new Uint16Array(1146);this.dyn_dtree=new Uint16Array(122);this.bl_tree=new Uint16Array(78);
wb(this.dyn_ltree);wb(this.dyn_dtree);wb(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new Uint16Array(16);this.heap=new Uint16Array(573);wb(this.heap);this.heap_max=this.heap_len=0;this.depth=new Uint16Array(573);wb(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function h(l){l=this.options=Ib({level:bd,method:J,chunkSize:16384,windowBits:15,memLevel:8,strategy:y},l||{});l.raw&&
0<l.windowBits?l.windowBits=-l.windowBits:l.gzip&&0<l.windowBits&&16>l.windowBits&&(l.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new Nc;this.strm.avail_out=0;var X=Kb.deflateInit2(this.strm,l.level,l.method,l.windowBits,l.memLevel,l.strategy);if(X!==Tc)throw Error(fa[X]);if(l.header&&Kb.deflateSetHeader(this.strm,l.header),l.dictionary){var K;if(K="string"==typeof l.dictionary?kc(l.dictionary):"[object ArrayBuffer]"===pd.call(l.dictionary)?new Uint8Array(l.dictionary):
l.dictionary,X=Kb.deflateSetDictionary(this.strm,K),X!==Tc)throw Error(fa[X]);this._dict_set=!0}}function r(l,X){X=new h(X);if(X.push(l,!0),X.err)throw X.msg||fa[X.err];return X.result}function u(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=
this.distbits=this.lenbits=0;this.next=null;this.lens=new Uint16Array(320);this.work=new Uint16Array(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function H(l){var X=this.options=Ib({chunkSize:65536,windowBits:15,to:""},l||{});X.raw&&0<=X.windowBits&&16>X.windowBits&&(X.windowBits=-X.windowBits,0===X.windowBits&&(X.windowBits=-15));!(0<=X.windowBits&&16>X.windowBits)||l&&l.windowBits||(X.windowBits+=32);15<X.windowBits&&48>X.windowBits&&0==(15&X.windowBits)&&(X.windowBits|=15);
this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new Nc;this.strm.avail_out=0;l=Tb.inflateInit2(this.strm,X.windowBits);if(l!==ac)throw Error(fa[l]);if(this.header=new Wb,Tb.inflateGetHeader(this.strm,this.header),X.dictionary&&("string"==typeof X.dictionary?X.dictionary=kc(X.dictionary):"[object ArrayBuffer]"===ad.call(X.dictionary)&&(X.dictionary=new Uint8Array(X.dictionary)),X.raw&&(l=Tb.inflateSetDictionary(this.strm,X.dictionary),l!==ac)))throw Error(fa[l]);}function z(l,X){X=new H(X);
if(X.push(l),X.err)throw X.msg||fa[X.err];return X.result}var F=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),t=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),q=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),n=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),v=Array(576);d(v);var x=Array(60);d(x);var w=Array(512);d(w);var D=Array(256);d(D);var E=Array(29);d(E);var Q=Array(30),N,R,m;d(Q);var G=function(l,
X){l.pending_buf[l.pending++]=255&X;l.pending_buf[l.pending++]=X>>>8&255},L=function(l,X,K){l.bi_valid>16-K?(l.bi_buf|=X<<l.bi_valid&65535,G(l,l.bi_buf),l.bi_buf=X>>16-l.bi_valid,l.bi_valid+=K-16):(l.bi_buf|=X<<l.bi_valid&65535,l.bi_valid+=K)},O=function(l,X,K){L(l,K[2*X],K[2*X+1])},Z=function(l,X){var K=0;do K|=1&l,l>>>=1,K<<=1;while(0<--X);return K>>>1},W=function(l,X,K){var sa=Array(16),xa,La=0;for(xa=1;15>=xa;xa++)sa[xa]=La=La+K[xa-1]<<1;for(K=0;K<=X;K++)xa=l[2*K+1],0!==xa&&(l[2*K]=Z(sa[xa]++,
xa))},ha=function(l){var X;for(X=0;286>X;X++)l.dyn_ltree[2*X]=0;for(X=0;30>X;X++)l.dyn_dtree[2*X]=0;for(X=0;19>X;X++)l.bl_tree[2*X]=0;l.dyn_ltree[512]=1;l.opt_len=l.static_len=0;l.last_lit=l.matches=0},ja=function(l){8<l.bi_valid?G(l,l.bi_buf):0<l.bi_valid&&(l.pending_buf[l.pending++]=l.bi_buf);l.bi_buf=0;l.bi_valid=0},ea=function(l,X,K,sa){var xa=2*X,La=2*K;return l[xa]<l[La]||l[xa]===l[La]&&sa[X]<=sa[K]},la=function(l,X,K){for(var sa=l.heap[K],xa=K<<1;xa<=l.heap_len&&(xa<l.heap_len&&ea(X,l.heap[xa+
1],l.heap[xa],l.depth)&&xa++,!ea(X,sa,l.heap[xa],l.depth));)l.heap[K]=l.heap[xa],K=xa,xa<<=1;l.heap[K]=sa},oa=function(l,X,K){var sa,xa,La=0;if(0!==l.last_lit){do{var Ba=l.pending_buf[l.d_buf+2*La]<<8|l.pending_buf[l.d_buf+2*La+1];var Ja=l.pending_buf[l.l_buf+La];La++;0===Ba?O(l,Ja,X):(sa=D[Ja],O(l,sa+256+1,X),xa=F[sa],0!==xa&&(Ja-=E[sa],L(l,Ja,xa)),Ba--,sa=256>Ba?w[Ba]:w[256+(Ba>>>7)],O(l,sa,K),xa=t[sa],0!==xa&&(Ba-=Q[sa],L(l,Ba,xa)))}while(La<l.last_lit)}O(l,256,X)},wa=function(l,X){var K=X.dyn_tree,
sa=X.stat_desc.static_tree,xa=X.stat_desc.has_stree,La=X.stat_desc.elems,Ba,Ja=-1;l.heap_len=0;l.heap_max=573;for(Ba=0;Ba<La;Ba++)0!==K[2*Ba]?(l.heap[++l.heap_len]=Ja=Ba,l.depth[Ba]=0):K[2*Ba+1]=0;for(;2>l.heap_len;){var bb=l.heap[++l.heap_len]=2>Ja?++Ja:0;K[2*bb]=1;l.depth[bb]=0;l.opt_len--;xa&&(l.static_len-=sa[2*bb+1])}X.max_code=Ja;for(Ba=l.heap_len>>1;1<=Ba;Ba--)la(l,K,Ba);bb=La;do Ba=l.heap[1],l.heap[1]=l.heap[l.heap_len--],la(l,K,1),sa=l.heap[1],l.heap[--l.heap_max]=Ba,l.heap[--l.heap_max]=
sa,K[2*bb]=K[2*Ba]+K[2*sa],l.depth[bb]=(l.depth[Ba]>=l.depth[sa]?l.depth[Ba]:l.depth[sa])+1,K[2*Ba+1]=K[2*sa+1]=bb,l.heap[1]=bb++,la(l,K,1);while(2<=l.heap_len);l.heap[--l.heap_max]=l.heap[1];Ba=X.dyn_tree;bb=X.max_code;sa=X.stat_desc.static_tree;xa=X.stat_desc.has_stree;La=X.stat_desc.extra_bits;var Ta=X.stat_desc.extra_base,Bb=X.stat_desc.max_length,da,db,yb,xb=0;for(db=0;15>=db;db++)l.bl_count[db]=0;Ba[2*l.heap[l.heap_max]+1]=0;for(X=l.heap_max+1;573>X;X++){var kb=l.heap[X];db=Ba[2*Ba[2*kb+1]+
1]+1;db>Bb&&(db=Bb,xb++);Ba[2*kb+1]=db;kb>bb||(l.bl_count[db]++,da=0,kb>=Ta&&(da=La[kb-Ta]),yb=Ba[2*kb],l.opt_len+=yb*(db+da),xa&&(l.static_len+=yb*(sa[2*kb+1]+da)))}if(0!==xb){do{for(db=Bb-1;0===l.bl_count[db];)db--;l.bl_count[db]--;l.bl_count[db+1]+=2;l.bl_count[Bb]--;xb-=2}while(0<xb);for(db=Bb;0!==db;db--)for(kb=l.bl_count[db];0!==kb;)da=l.heap[--X],da>bb||(Ba[2*da+1]!==db&&(l.opt_len+=(db-Ba[2*da+1])*Ba[2*da],Ba[2*da+1]=db),kb--)}W(K,Ja,l.bl_count)},U=function(l,X,K){var sa,xa=-1,La=X[1],Ba=
0,Ja=7,bb=4;0===La&&(Ja=138,bb=3);X[2*(K+1)+1]=65535;for(sa=0;sa<=K;sa++){var Ta=La;La=X[2*(sa+1)+1];++Ba<Ja&&Ta===La||(Ba<bb?l.bl_tree[2*Ta]+=Ba:0!==Ta?(Ta!==xa&&l.bl_tree[2*Ta]++,l.bl_tree[32]++):10>=Ba?l.bl_tree[34]++:l.bl_tree[36]++,Ba=0,xa=Ta,0===La?(Ja=138,bb=3):Ta===La?(Ja=6,bb=3):(Ja=7,bb=4))}},A=function(l,X,K){var sa,xa,La=-1,Ba=X[1],Ja=0,bb=7,Ta=4;0===Ba&&(bb=138,Ta=3);for(sa=0;sa<=K;sa++)if(xa=Ba,Ba=X[2*(sa+1)+1],!(++Ja<bb&&xa===Ba)){if(Ja<Ta){do O(l,xa,l.bl_tree);while(0!=--Ja)}else 0!==
xa?(xa!==La&&(O(l,xa,l.bl_tree),Ja--),O(l,16,l.bl_tree),L(l,Ja-3,2)):10>=Ja?(O(l,17,l.bl_tree),L(l,Ja-3,3)):(O(l,18,l.bl_tree),L(l,Ja-11,7));Ja=0;La=xa;0===Ba?(bb=138,Ta=3):xa===Ba?(bb=6,Ta=3):(bb=7,Ta=4)}},I=!1,P=function(l,X,K,sa){L(l,sa?1:0,3);ja(l);G(l,K);G(l,~K);l.pending_buf.set(l.window.subarray(X,X+K),l.pending);l.pending+=K},T=function(l,X,K,sa){var xa=65535&l|0;l=l>>>16&65535|0;for(var La;0!==K;){La=2E3<K?2E3:K;K-=La;do xa=xa+X[sa++]|0,l=l+xa|0;while(--La);xa%=65521;l%=65521}return xa|l<<
16|0},Y=new Uint32Array(function(){for(var l,X=[],K=0;256>K;K++){l=K;for(var sa=0;8>sa;sa++)l=1&l?3988292384^l>>>1:l>>>1;X[K]=l}return X}()),V=function(l,X,K,sa){K=sa+K;for(l^=-1;sa<K;sa++)l=l>>>8^Y[255&(l^X[sa])];return-1^l},fa={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ka={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,
Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},ma=function(l,X,K,sa){var xa,La,Ba=0;0<l.level?(2===l.strm.data_type&&(l.strm.data_type=function(Ja){var bb,Ta=4093624447;for(bb=0;31>=bb;bb++,Ta>>>=1)if(1&Ta&&0!==Ja.dyn_ltree[2*bb])return 0;if(0!==Ja.dyn_ltree[18]||
0!==Ja.dyn_ltree[20]||0!==Ja.dyn_ltree[26])return 1;for(bb=32;256>bb;bb++)if(0!==Ja.dyn_ltree[2*bb])return 1;return 0}(l)),wa(l,l.l_desc),wa(l,l.d_desc),Ba=function(Ja){var bb;U(Ja,Ja.dyn_ltree,Ja.l_desc.max_code);U(Ja,Ja.dyn_dtree,Ja.d_desc.max_code);wa(Ja,Ja.bl_desc);for(bb=18;3<=bb&&0===Ja.bl_tree[2*n[bb]+1];bb--);return Ja.opt_len+=3*(bb+1)+14,bb}(l),xa=l.opt_len+3+7>>>3,La=l.static_len+3+7>>>3,La<=xa&&(xa=La)):xa=La=K+5;K+4<=xa&&-1!==X?P(l,X,K,sa):4===l.strategy||La===xa?(L(l,2+(sa?1:0),3),oa(l,
v,x)):(L(l,4+(sa?1:0),3),function(Ja,bb,Ta,Bb){var da;L(Ja,bb-257,5);L(Ja,Ta-1,5);L(Ja,Bb-4,4);for(da=0;da<Bb;da++)L(Ja,Ja.bl_tree[2*n[da]+1],3);A(Ja,Ja.dyn_ltree,bb-1);A(Ja,Ja.dyn_dtree,Ta-1)}(l,l.l_desc.max_code+1,l.d_desc.max_code+1,Ba+1),oa(l,l.dyn_ltree,l.dyn_dtree));ha(l);sa&&ja(l)},za=function(l,X,K){return l.pending_buf[l.d_buf+2*l.last_lit]=X>>>8&255,l.pending_buf[l.d_buf+2*l.last_lit+1]=255&X,l.pending_buf[l.l_buf+l.last_lit]=255&K,l.last_lit++,0===X?l.dyn_ltree[2*K]++:(l.matches++,X--,
l.dyn_ltree[2*(D[K]+256+1)]++,l.dyn_dtree[2*(256>X?w[X]:w[256+(X>>>7)])]++),l.last_lit===l.lit_bufsize-1},Ma=ka.Z_NO_FLUSH,Ra=ka.Z_PARTIAL_FLUSH,va=ka.Z_FULL_FLUSH,Ca=ka.Z_FINISH,Oa=ka.Z_BLOCK,$a=ka.Z_OK,ob=ka.Z_STREAM_END,Lb=ka.Z_STREAM_ERROR,Ub=ka.Z_DATA_ERROR,lc=ka.Z_BUF_ERROR,Pb=ka.Z_DEFAULT_COMPRESSION,uc=ka.Z_FILTERED,Xb=ka.Z_HUFFMAN_ONLY,Dc=ka.Z_RLE,Ec=ka.Z_FIXED,pc=ka.Z_DEFAULT_STRATEGY,Fb=ka.Z_UNKNOWN,nb=ka.Z_DEFLATED,bc=function(l,X){return l.msg=fa[X],X},wb=function(l){for(var X=l.length;0<=
--X;)l[X]=0},na=function(l,X,K){return(X<<l.hash_shift^K)&l.hash_mask},C=function(l){var X=l.state,K=X.pending;K>l.avail_out&&(K=l.avail_out);0!==K&&(l.output.set(X.pending_buf.subarray(X.pending_out,X.pending_out+K),l.next_out),l.next_out+=K,X.pending_out+=K,l.total_out+=K,l.avail_out-=K,X.pending-=K,0===X.pending&&(X.pending_out=0))},Va=function(l,X){ma(l,0<=l.block_start?l.block_start:-1,l.strstart-l.block_start,X);l.block_start=l.strstart;C(l.strm)},Aa=function(l,X){l.pending_buf[l.pending++]=
X},cb=function(l,X){l.pending_buf[l.pending++]=X>>>8&255;l.pending_buf[l.pending++]=255&X},vb=function(l,X){var K,sa,xa=l.max_chain_length,La=l.strstart,Ba=l.prev_length,Ja=l.nice_match,bb=l.strstart>l.w_size-262?l.strstart-(l.w_size-262):0,Ta=l.window,Bb=l.w_mask,da=l.prev,db=l.strstart+258,yb=Ta[La+Ba-1],xb=Ta[La+Ba];l.prev_length>=l.good_match&&(xa>>=2);Ja>l.lookahead&&(Ja=l.lookahead);do if(K=X,Ta[K+Ba]===xb&&Ta[K+Ba-1]===yb&&Ta[K]===Ta[La]&&Ta[++K]===Ta[La+1]){La+=2;for(K++;Ta[++La]===Ta[++K]&&
Ta[++La]===Ta[++K]&&Ta[++La]===Ta[++K]&&Ta[++La]===Ta[++K]&&Ta[++La]===Ta[++K]&&Ta[++La]===Ta[++K]&&Ta[++La]===Ta[++K]&&Ta[++La]===Ta[++K]&&La<db;);if(sa=258-(db-La),La=db-258,sa>Ba){if(l.match_start=X,Ba=sa,sa>=Ja)break;yb=Ta[La+Ba-1];xb=Ta[La+Ba]}}while((X=da[X&Bb])>bb&&0!=--xa);return Ba<=l.lookahead?Ba:l.lookahead},lb=function(l){var X=l.w_size,K,sa;do{if(sa=l.window_size-l.lookahead-l.strstart,l.strstart>=X+(X-262)){l.window.set(l.window.subarray(X,X+X),0);l.match_start-=X;l.strstart-=X;l.block_start-=
X;var xa=K=l.hash_size;do{var La=l.head[--xa];l.head[xa]=La>=X?La-X:0}while(--K);xa=K=X;do La=l.prev[--xa],l.prev[xa]=La>=X?La-X:0;while(--K);sa+=X}if(0===l.strm.avail_in)break;xa=l.strm;La=l.window;var Ba=l.strstart+l.lookahead,Ja=xa.avail_in;if(K=(Ja>sa&&(Ja=sa),0===Ja?0:(xa.avail_in-=Ja,La.set(xa.input.subarray(xa.next_in,xa.next_in+Ja),Ba),1===xa.state.wrap?xa.adler=T(xa.adler,La,Ja,Ba):2===xa.state.wrap&&(xa.adler=V(xa.adler,La,Ja,Ba)),xa.next_in+=Ja,xa.total_in+=Ja,Ja)),l.lookahead+=K,3<=l.lookahead+
l.insert)for(sa=l.strstart-l.insert,l.ins_h=l.window[sa],l.ins_h=na(l,l.ins_h,l.window[sa+1]);l.insert&&(l.ins_h=na(l,l.ins_h,l.window[sa+3-1]),l.prev[sa&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=sa,sa++,l.insert--,!(3>l.lookahead+l.insert)););}while(262>l.lookahead&&0!==l.strm.avail_in)},zb=function(l,X){for(var K,sa;;){if(262>l.lookahead){if(lb(l),262>l.lookahead&&X===Ma)return 1;if(0===l.lookahead)break}if(K=0,3<=l.lookahead&&(l.ins_h=na(l,l.ins_h,l.window[l.strstart+3-1]),K=l.prev[l.strstart&
l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),0!==K&&l.strstart-K<=l.w_size-262&&(l.match_length=vb(l,K)),3<=l.match_length)if(sa=za(l,l.strstart-l.match_start,l.match_length-3),l.lookahead-=l.match_length,l.match_length<=l.max_lazy_match&&3<=l.lookahead){l.match_length--;do l.strstart++,l.ins_h=na(l,l.ins_h,l.window[l.strstart+3-1]),K=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart;while(0!=--l.match_length);l.strstart++}else l.strstart+=l.match_length,l.match_length=
0,l.ins_h=l.window[l.strstart],l.ins_h=na(l,l.ins_h,l.window[l.strstart+1]);else sa=za(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++;if(sa&&(Va(l,!1),0===l.strm.avail_out))return 1}return l.insert=2>l.strstart?l.strstart:2,X===Ca?(Va(l,!0),0===l.strm.avail_out?3:4):l.last_lit&&(Va(l,!1),0===l.strm.avail_out)?1:2},qb=function(l,X){for(var K,sa,xa;;){if(262>l.lookahead){if(lb(l),262>l.lookahead&&X===Ma)return 1;if(0===l.lookahead)break}if(K=0,3<=l.lookahead&&(l.ins_h=na(l,l.ins_h,l.window[l.strstart+
3-1]),K=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),l.prev_length=l.match_length,l.prev_match=l.match_start,l.match_length=2,0!==K&&l.prev_length<l.max_lazy_match&&l.strstart-K<=l.w_size-262&&(l.match_length=vb(l,K),5>=l.match_length&&(l.strategy===uc||3===l.match_length&&4096<l.strstart-l.match_start)&&(l.match_length=2)),3<=l.prev_length&&l.match_length<=l.prev_length){xa=l.strstart+l.lookahead-3;sa=za(l,l.strstart-1-l.prev_match,l.prev_length-3);l.lookahead-=l.prev_length-
1;l.prev_length-=2;do++l.strstart<=xa&&(l.ins_h=na(l,l.ins_h,l.window[l.strstart+3-1]),K=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart);while(0!=--l.prev_length);if(l.match_available=0,l.match_length=2,l.strstart++,sa&&(Va(l,!1),0===l.strm.avail_out))return 1}else if(l.match_available){if(sa=za(l,0,l.window[l.strstart-1]),sa&&Va(l,!1),l.strstart++,l.lookahead--,0===l.strm.avail_out)return 1}else l.match_available=1,l.strstart++,l.lookahead--}return l.match_available&&(za(l,
0,l.window[l.strstart-1]),l.match_available=0),l.insert=2>l.strstart?l.strstart:2,X===Ca?(Va(l,!0),0===l.strm.avail_out?3:4):l.last_lit&&(Va(l,!1),0===l.strm.avail_out)?1:2},Ab=[new k(0,0,0,0,function(l,X){var K=65535;for(K>l.pending_buf_size-5&&(K=l.pending_buf_size-5);;){if(1>=l.lookahead){if(lb(l),0===l.lookahead&&X===Ma)return 1;if(0===l.lookahead)break}l.strstart+=l.lookahead;l.lookahead=0;var sa=l.block_start+K;if((0===l.strstart||l.strstart>=sa)&&(l.lookahead=l.strstart-sa,l.strstart=sa,Va(l,
!1),0===l.strm.avail_out)||l.strstart-l.block_start>=l.w_size-262&&(Va(l,!1),0===l.strm.avail_out))return 1}return l.insert=0,X===Ca?(Va(l,!0),0===l.strm.avail_out?3:4):(l.strstart>l.block_start&&(Va(l,!1),l.strm.avail_out),1)}),new k(4,4,8,4,zb),new k(4,5,16,8,zb),new k(4,6,32,32,zb),new k(4,4,16,16,qb),new k(8,16,32,32,qb),new k(8,16,128,128,qb),new k(8,32,128,256,qb),new k(32,128,258,1024,qb),new k(32,258,258,4096,qb)],Ob=function(l){if(!l||!l.state)return bc(l,Lb);l.total_in=l.total_out=0;l.data_type=
Fb;var X=l.state;X.pending=0;X.pending_out=0;0>X.wrap&&(X.wrap=-X.wrap);X.status=X.wrap?42:113;l.adler=2===X.wrap?0:1;X.last_flush=Ma;if(!I){var K,sa,xa;l=Array(16);for(xa=sa=0;28>xa;xa++)for(E[xa]=sa,K=0;K<1<<F[xa];K++)D[sa++]=xa;D[sa-1]=xa;for(xa=sa=0;16>xa;xa++)for(Q[xa]=sa,K=0;K<1<<t[xa];K++)w[sa++]=xa;for(sa>>=7;30>xa;xa++)for(Q[xa]=sa<<7,K=0;K<1<<t[xa]-7;K++)w[256+sa++]=xa;for(K=0;15>=K;K++)l[K]=0;for(K=0;143>=K;)v[2*K+1]=8,K++,l[8]++;for(;255>=K;)v[2*K+1]=9,K++,l[9]++;for(;279>=K;)v[2*K+1]=
7,K++,l[7]++;for(;287>=K;)v[2*K+1]=8,K++,l[8]++;W(v,287,l);for(K=0;30>K;K++)x[2*K+1]=5,x[2*K]=Z(K,5);N=new p(v,F,257,286,15);R=new p(x,t,0,30,15);m=new p([],q,0,19,7);I=!0}X.l_desc=new e(X.dyn_ltree,N);X.d_desc=new e(X.dyn_dtree,R);X.bl_desc=new e(X.bl_tree,m);X.bi_buf=0;X.bi_valid=0;ha(X);return $a},hc=function(l){var X=Ob(l),K;return X===$a&&((K=l.state).window_size=2*K.w_size,wb(K.head),K.max_lazy_match=Ab[K.level].max_lazy,K.good_match=Ab[K.level].good_length,K.nice_match=Ab[K.level].nice_length,
K.max_chain_length=Ab[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=2,K.match_available=0,K.ins_h=0),X},Bc=function(l,X,K,sa,xa,La){if(!l)return Lb;var Ba=1;if(X===Pb&&(X=6),0>sa?(Ba=0,sa=-sa):15<sa&&(Ba=2,sa-=16),1>xa||9<xa||K!==nb||8>sa||15<sa||0>X||9<X||0>La||La>Ec)return bc(l,Lb);8===sa&&(sa=9);var Ja=new f;return l.state=Ja,Ja.strm=l,Ja.wrap=Ba,Ja.gzhead=null,Ja.w_bits=sa,Ja.w_size=1<<Ja.w_bits,Ja.w_mask=Ja.w_size-1,Ja.hash_bits=xa+7,Ja.hash_size=
1<<Ja.hash_bits,Ja.hash_mask=Ja.hash_size-1,Ja.hash_shift=~~((Ja.hash_bits+3-1)/3),Ja.window=new Uint8Array(2*Ja.w_size),Ja.head=new Uint16Array(Ja.hash_size),Ja.prev=new Uint16Array(Ja.w_size),Ja.lit_bufsize=1<<xa+6,Ja.pending_buf_size=4*Ja.lit_bufsize,Ja.pending_buf=new Uint8Array(Ja.pending_buf_size),Ja.d_buf=1*Ja.lit_bufsize,Ja.l_buf=3*Ja.lit_bufsize,Ja.level=X,Ja.strategy=La,Ja.method=K,hc(l)},Kb={deflateInit:function(l,X){return Bc(l,X,nb,15,8,pc)},deflateInit2:Bc,deflateReset:hc,deflateResetKeep:Ob,
deflateSetHeader:function(l,X){return l&&l.state?2!==l.state.wrap?Lb:(l.state.gzhead=X,$a):Lb},deflate:function(l,X){if(!l||!l.state||X>Oa||0>X)return l?bc(l,Lb):Lb;var K=l.state;if(!l.output||!l.input&&0!==l.avail_in||666===K.status&&X!==Ca)return bc(l,0===l.avail_out?lc:Lb);K.strm=l;var sa=K.last_flush;if(K.last_flush=X,42===K.status)if(2===K.wrap)l.adler=0,Aa(K,31),Aa(K,139),Aa(K,8),K.gzhead?(Aa(K,(K.gzhead.text?1:0)+(K.gzhead.hcrc?2:0)+(K.gzhead.extra?4:0)+(K.gzhead.name?8:0)+(K.gzhead.comment?
16:0)),Aa(K,255&K.gzhead.time),Aa(K,K.gzhead.time>>8&255),Aa(K,K.gzhead.time>>16&255),Aa(K,K.gzhead.time>>24&255),Aa(K,9===K.level?2:K.strategy>=Xb||2>K.level?4:0),Aa(K,255&K.gzhead.os),K.gzhead.extra&&K.gzhead.extra.length&&(Aa(K,255&K.gzhead.extra.length),Aa(K,K.gzhead.extra.length>>8&255)),K.gzhead.hcrc&&(l.adler=V(l.adler,K.pending_buf,K.pending,0)),K.gzindex=0,K.status=69):(Aa(K,0),Aa(K,0),Aa(K,0),Aa(K,0),Aa(K,0),Aa(K,9===K.level?2:K.strategy>=Xb||2>K.level?4:0),Aa(K,3),K.status=113);else{var xa=
nb+(K.w_bits-8<<4)<<8;var La=-1;La=K.strategy>=Xb||2>K.level?0:6>K.level?1:6===K.level?2:3;xa|=La<<6;0!==K.strstart&&(xa|=32);K.status=113;cb(K,xa+(31-xa%31));0!==K.strstart&&(cb(K,l.adler>>>16),cb(K,65535&l.adler));l.adler=1}if(69===K.status)if(K.gzhead.extra){for(xa=K.pending;K.gzindex<(65535&K.gzhead.extra.length)&&(K.pending!==K.pending_buf_size||(K.gzhead.hcrc&&K.pending>xa&&(l.adler=V(l.adler,K.pending_buf,K.pending-xa,xa)),C(l),xa=K.pending,K.pending!==K.pending_buf_size));)Aa(K,255&K.gzhead.extra[K.gzindex]),
K.gzindex++;K.gzhead.hcrc&&K.pending>xa&&(l.adler=V(l.adler,K.pending_buf,K.pending-xa,xa));K.gzindex===K.gzhead.extra.length&&(K.gzindex=0,K.status=73)}else K.status=73;if(73===K.status)if(K.gzhead.name){xa=K.pending;do{if(K.pending===K.pending_buf_size&&(K.gzhead.hcrc&&K.pending>xa&&(l.adler=V(l.adler,K.pending_buf,K.pending-xa,xa)),C(l),xa=K.pending,K.pending===K.pending_buf_size)){La=1;break}La=K.gzindex<K.gzhead.name.length?255&K.gzhead.name.charCodeAt(K.gzindex++):0;Aa(K,La)}while(0!==La);K.gzhead.hcrc&&
K.pending>xa&&(l.adler=V(l.adler,K.pending_buf,K.pending-xa,xa));0===La&&(K.gzindex=0,K.status=91)}else K.status=91;if(91===K.status)if(K.gzhead.comment){xa=K.pending;do{if(K.pending===K.pending_buf_size&&(K.gzhead.hcrc&&K.pending>xa&&(l.adler=V(l.adler,K.pending_buf,K.pending-xa,xa)),C(l),xa=K.pending,K.pending===K.pending_buf_size)){La=1;break}La=K.gzindex<K.gzhead.comment.length?255&K.gzhead.comment.charCodeAt(K.gzindex++):0;Aa(K,La)}while(0!==La);K.gzhead.hcrc&&K.pending>xa&&(l.adler=V(l.adler,
K.pending_buf,K.pending-xa,xa));0===La&&(K.status=103)}else K.status=103;if(103===K.status&&(K.gzhead.hcrc?(K.pending+2>K.pending_buf_size&&C(l),K.pending+2<=K.pending_buf_size&&(Aa(K,255&l.adler),Aa(K,l.adler>>8&255),l.adler=0,K.status=113)):K.status=113),0!==K.pending){if(C(l),0===l.avail_out)return K.last_flush=-1,$a}else if(0===l.avail_in&&(X<<1)-(4<X?9:0)<=(sa<<1)-(4<sa?9:0)&&X!==Ca)return bc(l,lc);if(666===K.status&&0!==l.avail_in)return bc(l,lc);if(0!==l.avail_in||0!==K.lookahead||X!==Ma&&
666!==K.status){sa=K.strategy===Xb?function(Ba,Ja){for(var bb;;){if(0===Ba.lookahead&&(lb(Ba),0===Ba.lookahead)){if(Ja===Ma)return 1;break}if(Ba.match_length=0,bb=za(Ba,0,Ba.window[Ba.strstart]),Ba.lookahead--,Ba.strstart++,bb&&(Va(Ba,!1),0===Ba.strm.avail_out))return 1}return Ba.insert=0,Ja===Ca?(Va(Ba,!0),0===Ba.strm.avail_out?3:4):Ba.last_lit&&(Va(Ba,!1),0===Ba.strm.avail_out)?1:2}(K,X):K.strategy===Dc?function(Ba,Ja){for(var bb,Ta,Bb,da,db=Ba.window;;){if(258>=Ba.lookahead){if(lb(Ba),258>=Ba.lookahead&&
Ja===Ma)return 1;if(0===Ba.lookahead)break}if(Ba.match_length=0,3<=Ba.lookahead&&0<Ba.strstart&&(Bb=Ba.strstart-1,Ta=db[Bb],Ta===db[++Bb]&&Ta===db[++Bb]&&Ta===db[++Bb])){for(da=Ba.strstart+258;Ta===db[++Bb]&&Ta===db[++Bb]&&Ta===db[++Bb]&&Ta===db[++Bb]&&Ta===db[++Bb]&&Ta===db[++Bb]&&Ta===db[++Bb]&&Ta===db[++Bb]&&Bb<da;);Ba.match_length=258-(da-Bb);Ba.match_length>Ba.lookahead&&(Ba.match_length=Ba.lookahead)}if(3<=Ba.match_length?(bb=za(Ba,1,Ba.match_length-3),Ba.lookahead-=Ba.match_length,Ba.strstart+=
Ba.match_length,Ba.match_length=0):(bb=za(Ba,0,Ba.window[Ba.strstart]),Ba.lookahead--,Ba.strstart++),bb&&(Va(Ba,!1),0===Ba.strm.avail_out))return 1}return Ba.insert=0,Ja===Ca?(Va(Ba,!0),0===Ba.strm.avail_out?3:4):Ba.last_lit&&(Va(Ba,!1),0===Ba.strm.avail_out)?1:2}(K,X):Ab[K.level].func(K,X);if(3!==sa&&4!==sa||(K.status=666),1===sa||3===sa)return 0===l.avail_out&&(K.last_flush=-1),$a;if(sa=2===sa)X===Ra?(L(K,2,3),O(K,256,v),16===K.bi_valid?(G(K,K.bi_buf),K.bi_buf=0,K.bi_valid=0):8<=K.bi_valid&&(K.pending_buf[K.pending++]=
255&K.bi_buf,K.bi_buf>>=8,K.bi_valid-=8)):X!==Oa&&(P(K,0,0,!1),X===va&&(wb(K.head),0===K.lookahead&&(K.strstart=0,K.block_start=0,K.insert=0))),sa=(C(l),0===l.avail_out);if(sa)return K.last_flush=-1,$a}return X!==Ca?$a:0>=K.wrap?ob:(2===K.wrap?(Aa(K,255&l.adler),Aa(K,l.adler>>8&255),Aa(K,l.adler>>16&255),Aa(K,l.adler>>24&255),Aa(K,255&l.total_in),Aa(K,l.total_in>>8&255),Aa(K,l.total_in>>16&255),Aa(K,l.total_in>>24&255)):(cb(K,l.adler>>>16),cb(K,65535&l.adler)),C(l),0<K.wrap&&(K.wrap=-K.wrap),0!==
K.pending?$a:ob)},deflateEnd:function(l){if(!l||!l.state)return Lb;var X=l.state.status;return 42!==X&&69!==X&&73!==X&&91!==X&&103!==X&&113!==X&&666!==X?bc(l,Lb):(l.state=null,113===X?bc(l,Ub):$a)},deflateSetDictionary:function(l,X){var K=X.length;if(!l||!l.state)return Lb;var sa=l.state,xa=sa.wrap;if(2===xa||1===xa&&42!==sa.status||sa.lookahead)return Lb;if(1===xa&&(l.adler=T(l.adler,X,K,0)),sa.wrap=0,K>=sa.w_size){0===xa&&(wb(sa.head),sa.strstart=0,sa.block_start=0,sa.insert=0);var La=new Uint8Array(sa.w_size);
La.set(X.subarray(K-sa.w_size,K),0);X=La;K=sa.w_size}La=l.avail_in;var Ba=l.next_in,Ja=l.input;l.avail_in=K;l.next_in=0;l.input=X;for(lb(sa);3<=sa.lookahead;){X=sa.strstart;K=sa.lookahead-2;do sa.ins_h=na(sa,sa.ins_h,sa.window[X+3-1]),sa.prev[X&sa.w_mask]=sa.head[sa.ins_h],sa.head[sa.ins_h]=X,X++;while(--K);sa.strstart=X;sa.lookahead=2;lb(sa)}return sa.strstart+=sa.lookahead,sa.block_start=sa.strstart,sa.insert=sa.lookahead,sa.lookahead=0,sa.match_length=sa.prev_length=2,sa.match_available=0,l.next_in=
Ba,l.input=Ja,l.avail_in=La,sa.wrap=xa,$a},deflateInfo:"pako deflate (from Nodeca project)"},Ib=function(l){for(var X=Array.prototype.slice.call(arguments,1);X.length;){var K=X.shift();if(K){if("object"!=typeof K)throw new TypeError(K+"must be non-object");for(var sa in K)Object.prototype.hasOwnProperty.call(K,sa)&&(l[sa]=K[sa])}}return l},fc=function(l){for(var X=0,K=0,sa=l.length;K<sa;K++)X+=l[K].length;X=new Uint8Array(X);sa=K=0;for(var xa=l.length;K<xa;K++){var La=l[K];X.set(La,sa);sa+=La.length}return X},
Hc=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(l){Hc=!1}for(var nc=new Uint8Array(256),pb=0;256>pb;pb++)nc[pb]=252<=pb?6:248<=pb?5:240<=pb?4:224<=pb?3:192<=pb?2:1;nc[254]=nc[254]=1;var kc=function(l){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(l);var X,K,sa,xa=l.length,La=0;for(K=0;K<xa;K++){var Ba=l.charCodeAt(K);55296==(64512&Ba)&&K+1<xa&&(X=l.charCodeAt(K+1),56320==(64512&X)&&(Ba=65536+(Ba-55296<<10)+(X-56320),K++));La+=128>
Ba?1:2048>Ba?2:65536>Ba?3:4}var Ja=new Uint8Array(La);for(K=sa=0;sa<La;K++)Ba=l.charCodeAt(K),55296==(64512&Ba)&&K+1<xa&&(X=l.charCodeAt(K+1),56320==(64512&X)&&(Ba=65536+(Ba-55296<<10)+(X-56320),K++)),128>Ba?Ja[sa++]=Ba:2048>Ba?(Ja[sa++]=192|Ba>>>6,Ja[sa++]=128|63&Ba):65536>Ba?(Ja[sa++]=224|Ba>>>12,Ja[sa++]=128|Ba>>>6&63,Ja[sa++]=128|63&Ba):(Ja[sa++]=240|Ba>>>18,Ja[sa++]=128|Ba>>>12&63,Ja[sa++]=128|Ba>>>6&63,Ja[sa++]=128|63&Ba);return Ja},Nc=function(){this.input=null;this.total_in=this.avail_in=
this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0},pd=Object.prototype.toString,fd=ka.Z_NO_FLUSH,Vc=ka.Z_SYNC_FLUSH,oc=ka.Z_FULL_FLUSH,Sc=ka.Z_FINISH,Tc=ka.Z_OK,gd=ka.Z_STREAM_END,bd=ka.Z_DEFAULT_COMPRESSION,y=ka.Z_DEFAULT_STRATEGY,J=ka.Z_DEFLATED;h.prototype.push=function(l,X){var K=this.strm,sa=this.options.chunkSize,xa;if(this.ended)return!1;X=X===~~X?X:!0===X?Sc:fd;"string"==typeof l?K.input=kc(l):"[object ArrayBuffer]"===
pd.call(l)?K.input=new Uint8Array(l):K.input=l;K.next_in=0;for(K.avail_in=K.input.length;;)if(0===K.avail_out&&(K.output=new Uint8Array(sa),K.next_out=0,K.avail_out=sa),(X===Vc||X===oc)&&6>=K.avail_out)this.onData(K.output.subarray(0,K.next_out)),K.avail_out=0;else{if(xa=Kb.deflate(K,X),xa===gd)return 0<K.next_out&&this.onData(K.output.subarray(0,K.next_out)),xa=Kb.deflateEnd(this.strm),this.onEnd(xa),this.ended=!0,xa===Tc;if(0!==K.avail_out)if(0<X&&0<K.next_out)this.onData(K.output.subarray(0,K.next_out)),
K.avail_out=0;else{if(0===K.avail_in)break}else this.onData(K.output)}return!0};h.prototype.onData=function(l){this.chunks.push(l)};h.prototype.onEnd=function(l){l===Tc&&(this.result=fc(this.chunks));this.chunks=[];this.err=l;this.msg=this.strm.msg};var aa=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),qa=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ea=new Uint16Array([1,
2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ga=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Na=function(l,X,K,sa,xa,La,Ba,Ja){var bb=Ja.bits,Ta,Bb,da,db,yb,xb,kb,rb,b,g=0,B,M=null,S=0,ba=new Uint16Array(16);var ca=new Uint16Array(16);var pa,ta,Ha=null,Qa=0;for(yb=0;15>=yb;yb++)ba[yb]=0;for(xb=0;xb<sa;xb++)ba[X[K+xb]]++;var ya=bb;for(kb=15;1<=kb&&0===ba[kb];kb--);
if(ya>kb&&(ya=kb),0===kb)return xa[La++]=20971520,xa[La++]=20971520,Ja.bits=1,0;for(bb=1;bb<kb&&0===ba[bb];bb++);ya<bb&&(ya=bb);for(yb=Ta=1;15>=yb;yb++)if(Ta<<=1,Ta-=ba[yb],0>Ta)return-1;if(0<Ta&&(0===l||1!==kb))return-1;ca[1]=0;for(yb=1;15>yb;yb++)ca[yb+1]=ca[yb]+ba[yb];for(xb=0;xb<sa;xb++)0!==X[K+xb]&&(Ba[ca[X[K+xb]]++]=xb);if(0===l?(M=Ha=Ba,db=19):1===l?(M=aa,S-=257,Ha=qa,Qa-=257,db=256):(M=Ea,Ha=Ga,db=-1),B=0,xb=0,yb=bb,ca=La,rb=ya,b=0,da=-1,g=1<<ya,sa=g-1,1===l&&852<g||2===l&&592<g)return 1;
for(;;){var Za=yb-b;Ba[xb]<db?(pa=0,ta=Ba[xb]):Ba[xb]>db?(pa=Ha[Qa+Ba[xb]],ta=M[S+Ba[xb]]):(pa=96,ta=0);Ta=1<<yb-b;bb=Bb=1<<rb;do Bb-=Ta,xa[ca+(B>>b)+Bb]=Za<<24|pa<<16|ta|0;while(0!==Bb);for(Ta=1<<yb-1;B&Ta;)Ta>>=1;if(0!==Ta?(B&=Ta-1,B+=Ta):B=0,xb++,0==--ba[yb]){if(yb===kb)break;yb=X[K+Ba[xb]]}if(yb>ya&&(B&sa)!==da){0===b&&(b=ya);ca+=bb;rb=yb-b;for(Ta=1<<rb;rb+b<kb&&(Ta-=ba[rb+b],!(0>=Ta));)rb++,Ta<<=1;if(g+=1<<rb,1===l&&852<g||2===l&&592<g)return 1;da=B&sa;xa[da]=ya<<24|rb<<16|ca-La|0}}return 0!==
B&&(xa[ca+B]=yb-b<<24|4194304),Ja.bits=ya,0},ab=ka.Z_FINISH,Ya=ka.Z_BLOCK,Ka=ka.Z_TREES,eb=ka.Z_OK,ib=ka.Z_STREAM_END,Gb=ka.Z_NEED_DICT,Hb=ka.Z_STREAM_ERROR,Jb=ka.Z_DATA_ERROR,vc=ka.Z_MEM_ERROR,Cc=ka.Z_BUF_ERROR,tb=ka.Z_DEFLATED,Oc=function(l){return(l>>>24&255)+(l>>>8&65280)+((65280&l)<<8)+((255&l)<<24)},$b=function(l){if(!l||!l.state)return Hb;var X=l.state;return l.total_in=l.total_out=X.total=0,l.msg="",X.wrap&&(l.adler=1&X.wrap),X.mode=1,X.last=0,X.havedict=0,X.dmax=32768,X.head=null,X.hold=
0,X.bits=0,X.lencode=X.lendyn=new Int32Array(852),X.distcode=X.distdyn=new Int32Array(592),X.sane=1,X.back=-1,eb},Zc=function(l){if(!l||!l.state)return Hb;var X=l.state;return X.wsize=0,X.whave=0,X.wnext=0,$b(l)},Lc=function(l,X){var K;if(!l||!l.state)return Hb;var sa=l.state;return 0>X?(K=0,X=-X):(K=1+(X>>4),48>X&&(X&=15)),X&&(8>X||15<X)?Hb:(null!==sa.window&&sa.wbits!==X&&(sa.window=null),sa.wrap=K,sa.wbits=X,Zc(l))},Mc=function(l,X){if(!l)return Hb;var K=new u;l.state=K;K.window=null;X=Lc(l,X);
return X!==eb&&(l.state=null),X},cd,Fc,nd=!0,zc=function(l,X,K,sa){var xa;l=l.state;return null===l.window&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new Uint8Array(l.wsize)),sa>=l.wsize?(l.window.set(X.subarray(K-l.wsize,K),0),l.wnext=0,l.whave=l.wsize):(xa=l.wsize-l.wnext,xa>sa&&(xa=sa),l.window.set(X.subarray(K-sa,K-sa+xa),l.wnext),(sa-=xa)?(l.window.set(X.subarray(K-sa,K),0),l.wnext=sa,l.whave=l.wsize):(l.wnext+=xa,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=xa))),0},Tb={inflateReset:Zc,
inflateReset2:Lc,inflateResetKeep:$b,inflateInit:function(l){return Mc(l,15)},inflateInit2:Mc,inflate:function(l,X){var K,sa,xa,La,Ba,Ja=0,bb=new Uint8Array(4),Ta,Bb=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!l||!l.state||!l.output||!l.input&&0!==l.avail_in)return Hb;var da=l.state;12===da.mode&&(da.mode=13);var db=l.next_out;var yb=l.output;var xb=l.avail_out;var kb=l.next_in;var rb=l.input;var b=l.avail_in;var g=da.hold;var B=da.bits;var M=b;var S=xb;var ba=eb;a:for(;;)switch(da.mode){case 1:if(0===
da.wrap){da.mode=13;break}for(;16>B;){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}if(2&da.wrap&&35615===g){da.check=0;bb[0]=255&g;bb[1]=g>>>8&255;da.check=V(da.check,bb,2,0);B=g=0;da.mode=2;break}if(da.flags=0,da.head&&(da.head.done=!1),!(1&da.wrap)||(((255&g)<<8)+(g>>8))%31){l.msg="incorrect header check";da.mode=30;break}if((15&g)!==tb){l.msg="unknown compression method";da.mode=30;break}if(g>>>=4,B-=4,Ba=8+(15&g),0===da.wbits)da.wbits=Ba;else if(Ba>da.wbits){l.msg="invalid window size";da.mode=30;
break}da.dmax=1<<da.wbits;l.adler=da.check=1;da.mode=512&g?10:12;B=g=0;break;case 2:for(;16>B;){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}if(da.flags=g,(255&da.flags)!==tb){l.msg="unknown compression method";da.mode=30;break}if(57344&da.flags){l.msg="unknown header flags set";da.mode=30;break}da.head&&(da.head.text=g>>8&1);512&da.flags&&(bb[0]=255&g,bb[1]=g>>>8&255,da.check=V(da.check,bb,2,0));B=g=0;da.mode=3;case 3:for(;32>B;){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}da.head&&(da.head.time=g);512&
da.flags&&(bb[0]=255&g,bb[1]=g>>>8&255,bb[2]=g>>>16&255,bb[3]=g>>>24&255,da.check=V(da.check,bb,4,0));B=g=0;da.mode=4;case 4:for(;16>B;){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}da.head&&(da.head.xflags=255&g,da.head.os=g>>8);512&da.flags&&(bb[0]=255&g,bb[1]=g>>>8&255,da.check=V(da.check,bb,2,0));B=g=0;da.mode=5;case 5:if(1024&da.flags){for(;16>B;){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}da.length=g;da.head&&(da.head.extra_len=g);512&da.flags&&(bb[0]=255&g,bb[1]=g>>>8&255,da.check=V(da.check,bb,
2,0));B=g=0}else da.head&&(da.head.extra=null);da.mode=6;case 6:if(1024&da.flags&&(K=da.length,K>b&&(K=b),K&&(da.head&&(Ba=da.head.extra_len-da.length,da.head.extra||(da.head.extra=new Uint8Array(da.head.extra_len)),da.head.extra.set(rb.subarray(kb,kb+K),Ba)),512&da.flags&&(da.check=V(da.check,rb,K,kb)),b-=K,kb+=K,da.length-=K),da.length))break a;da.length=0;da.mode=7;case 7:if(2048&da.flags){if(0===b)break a;K=0;do Ba=rb[kb+K++],da.head&&Ba&&65536>da.length&&(da.head.name+=String.fromCharCode(Ba));
while(Ba&&K<b);if(512&da.flags&&(da.check=V(da.check,rb,K,kb)),b-=K,kb+=K,Ba)break a}else da.head&&(da.head.name=null);da.length=0;da.mode=8;case 8:if(4096&da.flags){if(0===b)break a;K=0;do Ba=rb[kb+K++],da.head&&Ba&&65536>da.length&&(da.head.comment+=String.fromCharCode(Ba));while(Ba&&K<b);if(512&da.flags&&(da.check=V(da.check,rb,K,kb)),b-=K,kb+=K,Ba)break a}else da.head&&(da.head.comment=null);da.mode=9;case 9:if(512&da.flags){for(;16>B;){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}if(g!==(65535&da.check)){l.msg=
"header crc mismatch";da.mode=30;break}B=g=0}da.head&&(da.head.hcrc=da.flags>>9&1,da.head.done=!0);l.adler=da.check=0;da.mode=12;break;case 10:for(;32>B;){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}l.adler=da.check=Oc(g);B=g=0;da.mode=11;case 11:if(0===da.havedict)return l.next_out=db,l.avail_out=xb,l.next_in=kb,l.avail_in=b,da.hold=g,da.bits=B,Gb;l.adler=da.check=1;da.mode=12;case 12:if(X===Ya||X===Ka)break a;case 13:if(da.last){g>>>=7&B;B-=7&B;da.mode=27;break}for(;3>B;){if(0===b)break a;b--;g+=rb[kb++]<<
B;B+=8}switch(da.last=1&g,g>>>=1,--B,3&g){case 0:da.mode=14;break;case 1:var ca=da;if(nd){cd=new Int32Array(512);Fc=new Int32Array(32);for(La=0;144>La;)ca.lens[La++]=8;for(;256>La;)ca.lens[La++]=9;for(;280>La;)ca.lens[La++]=7;for(;288>La;)ca.lens[La++]=8;Na(1,ca.lens,0,288,cd,0,ca.work,{bits:9});for(La=0;32>La;)ca.lens[La++]=5;Na(2,ca.lens,0,32,Fc,0,ca.work,{bits:5});nd=!1}ca.lencode=cd;ca.lenbits=9;ca.distcode=Fc;ca.distbits=5;if(da.mode=20,X===Ka){g>>>=2;B-=2;break a}break;case 2:da.mode=17;break;
case 3:l.msg="invalid block type",da.mode=30}g>>>=2;B-=2;break;case 14:g>>>=7&B;for(B-=7&B;32>B;){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}if((65535&g)!=(g>>>16^65535)){l.msg="invalid stored block lengths";da.mode=30;break}if(da.length=65535&g,g=0,B=0,da.mode=15,X===Ka)break a;case 15:da.mode=16;case 16:if(K=da.length,K){if(K>b&&(K=b),K>xb&&(K=xb),0===K)break a;yb.set(rb.subarray(kb,kb+K),db);b-=K;kb+=K;xb-=K;db+=K;da.length-=K;break}da.mode=12;break;case 17:for(;14>B;){if(0===b)break a;b--;g+=rb[kb++]<<
B;B+=8}if(da.nlen=257+(31&g),g>>>=5,B-=5,da.ndist=1+(31&g),g>>>=5,B-=5,da.ncode=4+(15&g),g>>>=4,B-=4,286<da.nlen||30<da.ndist){l.msg="too many length or distance symbols";da.mode=30;break}da.have=0;da.mode=18;case 18:for(;da.have<da.ncode;){for(;3>B;){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}da.lens[Bb[da.have++]]=7&g;g>>>=3;B-=3}for(;19>da.have;)da.lens[Bb[da.have++]]=0;if(da.lencode=da.lendyn,da.lenbits=7,Ta={bits:da.lenbits},ba=Na(0,da.lens,0,19,da.lencode,0,da.work,Ta),da.lenbits=Ta.bits,ba){l.msg=
"invalid code lengths set";da.mode=30;break}da.have=0;da.mode=19;case 19:for(;da.have<da.nlen+da.ndist;){for(;Ja=da.lencode[g&(1<<da.lenbits)-1],xa=Ja>>>24,La=65535&Ja,!(xa<=B);){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}if(16>La)g>>>=xa,B-=xa,da.lens[da.have++]=La;else{if(16===La){for(ca=xa+2;B<ca;){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}if(g>>>=xa,B-=xa,0===da.have){l.msg="invalid bit length repeat";da.mode=30;break}Ba=da.lens[da.have-1];K=3+(3&g);g>>>=2;B-=2}else if(17===La){for(ca=xa+3;B<ca;){if(0===
b)break a;b--;g+=rb[kb++]<<B;B+=8}g>>>=xa;B-=xa;Ba=0;K=3+(7&g);g>>>=3;B-=3}else{for(ca=xa+7;B<ca;){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}g>>>=xa;B-=xa;Ba=0;K=11+(127&g);g>>>=7;B-=7}if(da.have+K>da.nlen+da.ndist){l.msg="invalid bit length repeat";da.mode=30;break}for(;K--;)da.lens[da.have++]=Ba}}if(30===da.mode)break;if(0===da.lens[256]){l.msg="invalid code -- missing end-of-block";da.mode=30;break}if(da.lenbits=9,Ta={bits:da.lenbits},ba=Na(1,da.lens,0,da.nlen,da.lencode,0,da.work,Ta),da.lenbits=
Ta.bits,ba){l.msg="invalid literal/lengths set";da.mode=30;break}if(da.distbits=6,da.distcode=da.distdyn,Ta={bits:da.distbits},ba=Na(2,da.lens,da.nlen,da.ndist,da.distcode,0,da.work,Ta),da.distbits=Ta.bits,ba){l.msg="invalid distances set";da.mode=30;break}if(da.mode=20,X===Ka)break a;case 20:da.mode=21;case 21:if(6<=b&&258<=xb){l.next_out=db;l.avail_out=xb;l.next_in=kb;l.avail_in=b;da.hold=g;da.bits=B;var pa;b=kb=void 0;var ta=l,Ha=ta.state;var Qa=ta.next_in;yb=ta.input;var ya=Qa+(ta.avail_in-5);
var Za=ta.next_out;rb=ta.output;var Cb=Za-(S-ta.avail_out);var sb=Za+(ta.avail_out-257);var Vb=Ha.dmax;var Qc=Ha.wsize;var jd=Ha.whave;var sc=Ha.wnext;var Rc=Ha.window;var fb=Ha.hold;La=Ha.bits;ca=Ha.lencode;B=Ha.distcode;g=(1<<Ha.lenbits)-1;xb=(1<<Ha.distbits)-1;b:do{15>La&&(fb+=yb[Qa++]<<La,La+=8,fb+=yb[Qa++]<<La,La+=8);var ub=ca[fb&g];c:for(;;){if(b=ub>>>24,fb>>>=b,La-=b,b=ub>>>16&255,0===b)rb[Za++]=65535&ub;else{if(!(16&b)){if(0==(64&b)){ub=ca[(65535&ub)+(fb&(1<<b)-1)];continue c}if(32&b){Ha.mode=
12;break b}ta.msg="invalid literal/length code";Ha.mode=30;break b}db=65535&ub;(b&=15)&&(La<b&&(fb+=yb[Qa++]<<La,La+=8),db+=fb&(1<<b)-1,fb>>>=b,La-=b);15>La&&(fb+=yb[Qa++]<<La,La+=8,fb+=yb[Qa++]<<La,La+=8);ub=B[fb&xb];d:for(;;){if(b=ub>>>24,fb>>>=b,La-=b,b=ub>>>16&255,!(16&b)){if(0==(64&b)){ub=B[(65535&ub)+(fb&(1<<b)-1)];continue d}ta.msg="invalid distance code";Ha.mode=30;break b}if(kb=65535&ub,b&=15,La<b&&(fb+=yb[Qa++]<<La,La+=8,La<b&&(fb+=yb[Qa++]<<La,La+=8)),kb+=fb&(1<<b)-1,kb>Vb){ta.msg="invalid distance too far back";
Ha.mode=30;break b}if(fb>>>=b,La-=b,b=Za-Cb,kb>b){if(b=kb-b,b>jd&&Ha.sane){ta.msg="invalid distance too far back";Ha.mode=30;break b}if(pa=0,ub=Rc,0===sc){if(pa+=Qc-b,b<db){db-=b;do rb[Za++]=Rc[pa++];while(--b);pa=Za-kb;ub=rb}}else if(sc<b){if(pa+=Qc+sc-b,b-=sc,b<db){db-=b;do rb[Za++]=Rc[pa++];while(--b);if(pa=0,sc<db){b=sc;db-=b;do rb[Za++]=Rc[pa++];while(--b);pa=Za-kb;ub=rb}}}else if(pa+=sc-b,b<db){db-=b;do rb[Za++]=Rc[pa++];while(--b);pa=Za-kb;ub=rb}for(;2<db;)rb[Za++]=ub[pa++],rb[Za++]=ub[pa++],
rb[Za++]=ub[pa++],db-=3;db&&(rb[Za++]=ub[pa++],1<db&&(rb[Za++]=ub[pa++]))}else{pa=Za-kb;do rb[Za++]=rb[pa++],rb[Za++]=rb[pa++],rb[Za++]=rb[pa++],db-=3;while(2<db);db&&(rb[Za++]=rb[pa++],1<db&&(rb[Za++]=rb[pa++]))}break}}break}}while(Qa<ya&&Za<sb);db=La>>3;Qa-=db;La-=db<<3;fb&=(1<<La)-1;ta.next_in=Qa;ta.next_out=Za;ta.avail_in=Qa<ya?ya-Qa+5:5-(Qa-ya);ta.avail_out=Za<sb?sb-Za+257:257-(Za-sb);Ha.hold=fb;Ha.bits=La;db=l.next_out;yb=l.output;xb=l.avail_out;kb=l.next_in;rb=l.input;b=l.avail_in;g=da.hold;
B=da.bits;12===da.mode&&(da.back=-1);break}for(da.back=0;Ja=da.lencode[g&(1<<da.lenbits)-1],xa=Ja>>>24,ca=Ja>>>16&255,La=65535&Ja,!(xa<=B);){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}if(ca&&0==(240&ca)){fb=xa;Rc=ca;for(sc=La;Ja=da.lencode[sc+((g&(1<<fb+Rc)-1)>>fb)],xa=Ja>>>24,ca=Ja>>>16&255,La=65535&Ja,!(fb+xa<=B);){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}g>>>=fb;B-=fb;da.back+=fb}if(g>>>=xa,B-=xa,da.back+=xa,da.length=La,0===ca){da.mode=26;break}if(32&ca){da.back=-1;da.mode=12;break}if(64&ca){l.msg=
"invalid literal/length code";da.mode=30;break}da.extra=15&ca;da.mode=22;case 22:if(da.extra){for(ca=da.extra;B<ca;){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}da.length+=g&(1<<da.extra)-1;g>>>=da.extra;B-=da.extra;da.back+=da.extra}da.was=da.length;da.mode=23;case 23:for(;Ja=da.distcode[g&(1<<da.distbits)-1],xa=Ja>>>24,ca=Ja>>>16&255,La=65535&Ja,!(xa<=B);){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}if(0==(240&ca)){fb=xa;Rc=ca;for(sc=La;Ja=da.distcode[sc+((g&(1<<fb+Rc)-1)>>fb)],xa=Ja>>>24,ca=Ja>>>16&
255,La=65535&Ja,!(fb+xa<=B);){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}g>>>=fb;B-=fb;da.back+=fb}if(g>>>=xa,B-=xa,da.back+=xa,64&ca){l.msg="invalid distance code";da.mode=30;break}da.offset=La;da.extra=15&ca;da.mode=24;case 24:if(da.extra){for(ca=da.extra;B<ca;){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}da.offset+=g&(1<<da.extra)-1;g>>>=da.extra;B-=da.extra;da.back+=da.extra}if(da.offset>da.dmax){l.msg="invalid distance too far back";da.mode=30;break}da.mode=25;case 25:if(0===xb)break a;if(K=S-xb,
da.offset>K){if(K=da.offset-K,K>da.whave&&da.sane){l.msg="invalid distance too far back";da.mode=30;break}K>da.wnext?(K-=da.wnext,sa=da.wsize-K):sa=da.wnext-K;K>da.length&&(K=da.length);ca=da.window}else ca=yb,sa=db-da.offset,K=da.length;K>xb&&(K=xb);xb-=K;da.length-=K;do yb[db++]=ca[sa++];while(--K);0===da.length&&(da.mode=21);break;case 26:if(0===xb)break a;yb[db++]=da.length;xb--;da.mode=21;break;case 27:if(da.wrap){for(;32>B;){if(0===b)break a;b--;g|=rb[kb++]<<B;B+=8}if(S-=xb,l.total_out+=S,da.total+=
S,S&&(l.adler=da.check=da.flags?V(da.check,yb,S,db-S):T(da.check,yb,S,db-S)),S=xb,(da.flags?g:Oc(g))!==da.check){l.msg="incorrect data check";da.mode=30;break}B=g=0}da.mode=28;case 28:if(da.wrap&&da.flags){for(;32>B;){if(0===b)break a;b--;g+=rb[kb++]<<B;B+=8}if(g!==(4294967295&da.total)){l.msg="incorrect length check";da.mode=30;break}B=g=0}da.mode=29;case 29:ba=ib;break a;case 30:ba=Jb;break a;case 31:return vc;default:return Hb}return l.next_out=db,l.avail_out=xb,l.next_in=kb,l.avail_in=b,da.hold=
g,da.bits=B,(da.wsize||S!==l.avail_out&&30>da.mode&&(27>da.mode||X!==ab))&&zc(l,l.output,l.next_out,S-l.avail_out),M-=l.avail_in,S-=l.avail_out,l.total_in+=M,l.total_out+=S,da.total+=S,da.wrap&&S&&(l.adler=da.check=da.flags?V(da.check,yb,S,l.next_out-S):T(da.check,yb,S,l.next_out-S)),l.data_type=da.bits+(da.last?64:0)+(12===da.mode?128:0)+(20===da.mode||15===da.mode?256:0),(0===M&&0===S||X===ab)&&ba===eb&&(ba=Cc),ba},inflateEnd:function(l){if(!l||!l.state)return Hb;var X=l.state;return X.window&&
(X.window=null),l.state=null,eb},inflateGetHeader:function(l,X){if(!l||!l.state)return Hb;l=l.state;return 0==(2&l.wrap)?Hb:(l.head=X,X.done=!1,eb)},inflateSetDictionary:function(l,X){var K=X.length,sa,xa,La;return l&&l.state?(sa=l.state,0!==sa.wrap&&11!==sa.mode?Hb:11===sa.mode&&(xa=1,xa=T(xa,X,K,0),xa!==sa.check)?Jb:(La=zc(l,X,K,K),La?(sa.mode=31,vc):(sa.havedict=1,eb))):Hb},inflateInfo:"pako inflate (from Nodeca project)"},Wb=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;
this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1},ad=Object.prototype.toString,tc=ka.Z_NO_FLUSH,cc=ka.Z_FINISH,ac=ka.Z_OK,ic=ka.Z_STREAM_END,dc=ka.Z_NEED_DICT,hd=ka.Z_STREAM_ERROR,Ac=ka.Z_DATA_ERROR,Wc=ka.Z_MEM_ERROR;H.prototype.push=function(l,X){var K=this.strm,sa=this.options.chunkSize,xa=this.options.dictionary,La;if(this.ended)return!1;var Ba=X===~~X?X:!0===X?cc:tc;"[object ArrayBuffer]"===ad.call(l)?K.input=new Uint8Array(l):K.input=l;K.next_in=0;for(K.avail_in=K.input.length;;){0===
K.avail_out&&(K.output=new Uint8Array(sa),K.next_out=0,K.avail_out=sa);X=Tb.inflate(K,Ba);for(X===dc&&xa&&(X=Tb.inflateSetDictionary(K,xa),X===ac?X=Tb.inflate(K,Ba):X===Ac&&(X=dc));0<K.avail_in&&X===ic&&0<K.state.wrap&&0!==l[K.next_in];)Tb.inflateReset(K),X=Tb.inflate(K,Ba);switch(X){case hd:case Ac:case dc:case Wc:return this.onEnd(X),this.ended=!0,!1}if(La=K.avail_out,K.next_out&&(0===K.avail_out||X===ic))if("string"===this.options.to){var Ja=K.output;var bb=K.next_out;(bb=bb||Ja.length)>Ja.length&&
(bb=Ja.length);for(var Ta=bb-1;0<=Ta&&128==(192&Ja[Ta]);)Ta--;Ja=0>Ta||0===Ta?bb:Ta+nc[Ja[Ta]]>bb?Ta:bb;bb=K.next_out-Ja;var Bb,da,db=K.output,yb=(Ta=Ja)||db.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)Ta=(new TextDecoder).decode(db.subarray(0,Ta));else{Ta=Array(2*yb);for(da=Bb=0;da<yb;){var xb=db[da++];if(128>xb)Ta[Bb++]=xb;else{var kb=nc[xb];if(4<kb)Ta[Bb++]=65533,da+=kb-1;else{for(xb&=2===kb?31:3===kb?15:7;1<kb&&da<yb;)xb=xb<<6|63&db[da++],kb--;1<kb?Ta[Bb++]=65533:65536>
xb?Ta[Bb++]=xb:(xb-=65536,Ta[Bb++]=55296|xb>>10&1023,Ta[Bb++]=56320|1023&xb)}}}db=Bb;if(65534>db&&Ta.subarray&&Hc)Ta=String.fromCharCode.apply(null,Ta.length===db?Ta:Ta.subarray(0,db));else{yb="";for(Bb=0;Bb<db;Bb++)yb+=String.fromCharCode(Ta[Bb]);Ta=yb}}K.next_out=bb;K.avail_out=sa-bb;bb&&K.output.set(K.output.subarray(Ja,Ja+bb),0);this.onData(Ta)}else this.onData(K.output.length===K.next_out?K.output:K.output.subarray(0,K.next_out));if(X!==ac||0!==La){if(X===ic)return X=Tb.inflateEnd(this.strm),
this.onEnd(X),this.ended=!0,!0;if(0===K.avail_in)break}}return!0};H.prototype.onData=function(l){this.chunks.push(l)};H.prototype.onEnd=function(l){l===ac&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=fc(this.chunks));this.chunks=[];this.err=l;this.msg=this.strm.msg};var mc=function(l,X){return(X=X||{}).raw=!0,r(l,X)},ec=function(l,X){return(X=X||{}).gzip=!0,r(l,X)},Nb=function(l,X){return(X=X||{}).raw=!0,z(l,X)},jc={Deflate:h,deflate:r,deflateRaw:mc,gzip:ec,Inflate:H,
inflate:z,inflateRaw:Nb,ungzip:z,constants:ka};a.Deflate=h;a.Inflate=H;a.constants=ka;a.default=jc;a.deflate=r;a.deflateRaw=mc;a.gzip=ec;a.inflate=z;a.inflateRaw=Nb;a.ungzip=z;Object.defineProperty(a,"__esModule",{value:!0})});(function(a,d){Ia.exports=d()})("undefined"!=typeof self?self:this,function(){return function(a){function d(e){if(p[e])return p[e].exports;var k=p[e]={i:e,l:!1,exports:{}};return a[e].call(k.exports,k,k.exports,d),k.l=!0,k.exports}var p={};return d.m=a,d.c=p,d.d=function(e,
k,f){d.o(e,k)||Object.defineProperty(e,k,{enumerable:!0,get:f})},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,k){if((1&k&&(e=d(e)),8&k)||4&k&&"object"==typeof e&&e&&e.__esModule)return e;var f=Object.create(null);if(d.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:e}),2&k&&"string"!=typeof e)for(var h in e)d.d(f,h,function(r){return e[r]}.bind(null,
h));return f},d.n=function(e){var k=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(k,"a",k),k},d.o=function(e,k){return Object.prototype.hasOwnProperty.call(e,k)},d.p="",d(d.s=3)}([function(a,d,p){function e(k){0!=k.offset%4&&k.skip(4-k.offset%4)}a.exports.notNetcdf=function(k,f){if(k)throw new TypeError("Not a valid NetCDF v3.x file: ".concat(f));};a.exports.padding=e;a.exports.readName=function(k){var f=k.readUint32();f=k.readChars(f);return e(k),f}},function(a,d,p){!function(e){function k(t){for(var q,
n,v=[],x=0,w=t.length;x<w;)55296<=(q=t.charCodeAt(x++))&&56319>=q&&x<w?56320==(64512&(n=t.charCodeAt(x++)))?v.push(((1023&q)<<10)+(1023&n)+65536):(v.push(q),x--):v.push(q);return v}function f(t){if(55296<=t&&57343>=t)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");}function h(){if(z>=H)throw Error("Invalid byte index");var t=255&u[z];if(z++,128==(192&t))return 63&t;throw Error("Invalid continuation byte");}function r(){var t,q;if(z>H)throw Error("Invalid byte index");
if(z==H)return!1;if(t=255&u[z],z++,0==(128&t))return t;if(192==(224&t)){if(128<=(q=(31&t)<<6|h()))return q;throw Error("Invalid continuation byte");}if(224==(240&t)){if(2048<=(q=(15&t)<<12|h()<<6|h()))return f(q),q;throw Error("Invalid continuation byte");}if(240==(248&t)&&65536<=(q=(7&t)<<18|h()<<12|h()<<6|h())&&1114111>=q)return q;throw Error("Invalid UTF-8 detected");}var u,H,z,F=String.fromCharCode;e.version="3.0.0";e.encode=function(t){t=k(t);for(var q=t.length,n=-1,v="";++n<q;){var x=t[n];if(0==
(4294967168&x))x=F(x);else{var w="";x=(0==(4294965248&x)?w=F(x>>6&31|192):0==(4294901760&x)?(f(x),w=F(x>>12&15|224),w+=F(x>>6&63|128)):0==(4292870144&x)&&(w=F(x>>18&7|240),w+=F(x>>12&63|128),w+=F(x>>6&63|128)),w+F(63&x|128))}v+=x}return v};e.decode=function(t){u=k(t);H=u.length;z=0;var q;for(t=[];!1!==(q=r());)t.push(q);var n;q=t.length;for(var v=-1,x="";++v<q;)65535<(n=t[v])&&(x+=F((n-=65536)>>>10&1023|55296),n=56320|1023&n),x+=F(n);return x}}(d)},function(a,d,p){function e(h,r){if(1!==h){for(var u=
Array(h),H=0;H<h;H++)u[H]=r();return u}return r()}var k=p(0).notNetcdf,f={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};a.exports=f;a.exports.num2str=function(h){switch(Number(h)){case f.BYTE:return"byte";case f.CHAR:return"char";case f.SHORT:return"short";case f.INT:return"int";case f.FLOAT:return"float";case f.DOUBLE:return"double";default:return"undefined"}};a.exports.num2bytes=function(h){switch(Number(h)){case f.BYTE:case f.CHAR:return 1;case f.SHORT:return 2;case f.INT:case f.FLOAT:return 4;
case f.DOUBLE:return 8;default:return-1}};a.exports.str2num=function(h){switch(String(h)){case "byte":return f.BYTE;case "char":return f.CHAR;case "short":return f.SHORT;case "int":return f.INT;case "float":return f.FLOAT;case "double":return f.DOUBLE;default:return-1}};a.exports.readType=function(h,r,u){switch(r){case f.BYTE:return h.readBytes(u);case f.CHAR:return h=h.readChars(u),h=0===h.charCodeAt(h.length-1)?h.substring(0,h.length-1):h,h;case f.SHORT:return e(u,h.readInt16.bind(h));case f.INT:return e(u,
h.readInt32.bind(h));case f.FLOAT:return e(u,h.readFloat32.bind(h));case f.DOUBLE:return e(u,h.readFloat64.bind(h));default:return void k(!0,"non valid type ".concat(r))}}},function(a,d,p){var e=p(4).IOBuffer,k=p(0),f=p(5),h=p(6),r=p(7);a.exports=function(u){u=new e(u);u.setBigEndian();k.notNetcdf("CDF"!==u.readChars(3),"should start with CDF");var H=u.readByte();k.notNetcdf(2<H,"unknown version");this.header=h(u,H);this.buffer=u};a.exports.prototype.getAttribute=function(u){var H=this.globalAttributes.find(function(z){return z.name===
u});return H?H.value:null};a.exports.prototype.getDataVariableAsString=function(u){return(u=this.getDataVariable(u))?u.join(""):null};a.exports.prototype.toString=function(){return r.call(this)};a.exports.prototype.getDataVariable=function(u){var H;return H="string"==typeof u?this.header.variables.find(function(z){return z.name===u}):u,k.notNetcdf(void 0===H,"variable not found: ".concat(u)),this.buffer.seek(H.offset),H.record?f.record(this.buffer,H,this.header.recordDimension):f.nonRecord(this.buffer,
H)};a.exports.prototype.dataVariableExists=function(u){return void 0!==this.header.variables.find(function(H){return H.name===u})};a.exports.prototype.attributeExists=function(u){return void 0!==this.globalAttributes.find(function(H){return H.name===u})};$jscomp.global.Object.defineProperties(a.exports.prototype,{version:{configurable:!0,enumerable:!0,get:function(){return 1===this.header.version?"classic format":"64-bit offset format"}},recordDimension:{configurable:!0,enumerable:!0,get:function(){return this.header.recordDimension}},
dimensions:{configurable:!0,enumerable:!0,get:function(){return this.header.dimensions}},globalAttributes:{configurable:!0,enumerable:!0,get:function(){return this.header.globalAttributes}},variables:{configurable:!0,enumerable:!0,get:function(){return this.header.variables}}})},function(a,d,p){p.r(d);p.d(d,"IOBuffer",function(){return k});var e=p(1),k=function(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:8192,h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=!1;"number"==
typeof f?f=new ArrayBuffer(f):(r=!0,this.lastWrittenByte=f.byteLength);h=h.offset?h.offset>>>0:0;var u=f.byteLength-h,H=h;(ArrayBuffer.isView(f)||f instanceof k)&&(f.byteLength!==f.buffer.byteLength&&(H=f.byteOffset+h),f=f.buffer);this.lastWrittenByte=r?u:0;this.buffer=f;this.byteLength=this.length=u;this.byteOffset=H;this.offset=0;this.littleEndian=!0;this._data=new DataView(this.buffer,H,u);this._mark=0;this._marks=[]};k.prototype.available=function(){return this.offset+(0<arguments.length&&void 0!==
arguments[0]?arguments[0]:1)<=this.length};k.prototype.isLittleEndian=function(){return this.littleEndian};k.prototype.setLittleEndian=function(){return this.littleEndian=!0,this};k.prototype.isBigEndian=function(){return!this.littleEndian};k.prototype.setBigEndian=function(){return this.littleEndian=!1,this};k.prototype.skip=function(){return this.offset+=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,this};k.prototype.seek=function(f){return this.offset=f,this};k.prototype.mark=function(){return this._mark=
this.offset,this};k.prototype.reset=function(){return this.offset=this._mark,this};k.prototype.pushMark=function(){return this._marks.push(this.offset),this};k.prototype.popMark=function(){var f=this._marks.pop();if(void 0===f)throw Error("Mark stack empty");return this.seek(f),this};k.prototype.rewind=function(){return this.offset=0,this};k.prototype.ensureAvailable=function(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;if(!this.available(f)){f=2*(this.offset+f);var h=new Uint8Array(f);
h.set(new Uint8Array(this.buffer));this.buffer=h.buffer;this.length=this.byteLength=f;this._data=new DataView(this.buffer)}return this};k.prototype.readBoolean=function(){return 0!==this.readUint8()};k.prototype.readInt8=function(){return this._data.getInt8(this.offset++)};k.prototype.readUint8=function(){return this._data.getUint8(this.offset++)};k.prototype.readByte=function(){return this.readUint8()};k.prototype.readBytes=function(){for(var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
1,h=new Uint8Array(f),r=0;r<f;r++)h[r]=this.readByte();return h};k.prototype.readInt16=function(){var f=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,f};k.prototype.readUint16=function(){var f=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,f};k.prototype.readInt32=function(){var f=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,f};k.prototype.readUint32=function(){var f=this._data.getUint32(this.offset,this.littleEndian);
return this.offset+=4,f};k.prototype.readFloat32=function(){var f=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,f};k.prototype.readFloat64=function(){var f=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,f};k.prototype.readChar=function(){return String.fromCharCode(this.readInt8())};k.prototype.readChars=function(){for(var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,h="",r=0;r<f;r++)h+=this.readChar();return h};k.prototype.readUtf8=
function(){var f=this.readChars(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1);return Object(e.decode)(f)};k.prototype.writeBoolean=function(f){return this.writeUint8(f?255:0),this};k.prototype.writeInt8=function(f){return this.ensureAvailable(1),this._data.setInt8(this.offset++,f),this._updateLastWrittenByte(),this};k.prototype.writeUint8=function(f){return this.ensureAvailable(1),this._data.setUint8(this.offset++,f),this._updateLastWrittenByte(),this};k.prototype.writeByte=function(f){return this.writeUint8(f)};
k.prototype.writeBytes=function(f){this.ensureAvailable(f.length);for(var h=0;h<f.length;h++)this._data.setUint8(this.offset++,f[h]);return this._updateLastWrittenByte(),this};k.prototype.writeInt16=function(f){return this.ensureAvailable(2),this._data.setInt16(this.offset,f,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this};k.prototype.writeUint16=function(f){return this.ensureAvailable(2),this._data.setUint16(this.offset,f,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),
this};k.prototype.writeInt32=function(f){return this.ensureAvailable(4),this._data.setInt32(this.offset,f,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this};k.prototype.writeUint32=function(f){return this.ensureAvailable(4),this._data.setUint32(this.offset,f,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this};k.prototype.writeFloat32=function(f){return this.ensureAvailable(4),this._data.setFloat32(this.offset,f,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),
this};k.prototype.writeFloat64=function(f){return this.ensureAvailable(8),this._data.setFloat64(this.offset,f,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this};k.prototype.writeChar=function(f){return this.writeUint8(f.charCodeAt(0))};k.prototype.writeChars=function(f){for(var h=0;h<f.length;h++)this.writeUint8(f.charCodeAt(h));return this};k.prototype.writeUtf8=function(f){f=Object(e.encode)(f);return this.writeChars(f)};k.prototype.toArray=function(){return new Uint8Array(this.buffer,
this.byteOffset,this.lastWrittenByte)};k.prototype._updateLastWrittenByte=function(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}},function(a,d,p){var e=p(2);a.exports.nonRecord=function(k,f){var h=e.str2num(f.type);f=f.size/e.num2bytes(h);for(var r=Array(f),u=0;u<f;u++)r[u]=e.readType(k,h,1);return r};a.exports.record=function(k,f,h){var r=e.str2num(f.type);f=f.size?f.size/e.num2bytes(r):1;var u=h.length,H=Array(u);h=h.recordStep;for(var z=0;z<u;z++){var F=k.offset;H[z]=
e.readType(k,r,f);k.seek(F+h)}return H}},function(a,d,p){function e(h){var r=h.readUint32();if(0===r)return k.notNetcdf(0!==h.readUint32(),"wrong empty tag for list of attributes"),[];k.notNetcdf(12!==r,"wrong tag for list of attributes");r=h.readUint32();for(var u=Array(r),H=0;H<r;H++){var z=k.readName(h),F=h.readUint32();k.notNetcdf(1>F||6<F,"non valid type ".concat(F));var t=h.readUint32();t=f.readType(h,F,t);k.padding(h);u[H]={name:z,type:f.num2str(F),value:t}}return u}var k=p(0),f=p(2);a.exports=
function(h,r){var u={recordDimension:{length:h.readUint32()}};u.version=r;var H=function(z){var F,t,q=z.readUint32();if(0===q)return k.notNetcdf(0!==z.readUint32(),"wrong empty tag for list of dimensions"),[];k.notNetcdf(10!==q,"wrong tag for list of dimensions");q=z.readUint32();for(var n=Array(q),v=0;v<q;v++){var x=k.readName(z),w=z.readUint32();0===w&&(F=v,t=x);n[v]={name:x,size:w}}return{dimensions:n,recordId:F,recordName:t}}(h);u.recordDimension.id=H.recordId;u.recordDimension.name=H.recordName;
u.dimensions=H.dimensions;u.globalAttributes=e(h);h=function(z,F,t){var q=z.readUint32(),n=0;if(0===q)return k.notNetcdf(0!==z.readUint32(),"wrong empty tag for list of variables"),[];k.notNetcdf(11!==q,"wrong tag for list of variables");q=z.readUint32();for(var v=Array(q),x=0;x<q;x++){for(var w=k.readName(z),D=z.readUint32(),E=Array(D),Q=0;Q<D;Q++)E[Q]=z.readUint32();D=e(z);Q=z.readUint32();k.notNetcdf(1>Q&&6<Q,"non valid type ".concat(Q));var N=z.readUint32(),R=z.readUint32();2===t&&(k.notNetcdf(0<
R,"offsets larger than 4GB not supported"),R=z.readUint32());var m=!1;void 0!==F&&E[0]===F&&(n+=N,m=!0);v[x]={name:w,dimensions:E,attributes:D,type:f.num2str(Q),size:N,offset:R,record:m}}return{variables:v,recordStep:n}}(h,H.recordId,r);return u.variables=h.variables,u.recordDimension.recordStep=h.recordStep,u}},function(a,d,p){a.exports=function(){var e=[];e.push("DIMENSIONS");for(var k=$jscomp.makeIterator(this.dimensions),f=k.next();!f.done;f=k.next())f=f.value,e.push("  ".concat(f.name.padEnd(30),
" = size: ").concat(f.size));e.push("");e.push("GLOBAL ATTRIBUTES");k=$jscomp.makeIterator(this.globalAttributes);for(f=k.next();!f.done;f=k.next())f=f.value,e.push("  ".concat(f.name.padEnd(30)," = ").concat(f.value));k=JSON.parse(JSON.stringify(this.variables));e.push("");e.push("VARIABLES:");k=$jscomp.makeIterator(k);for(f=k.next();!f.done;f=k.next()){f=f.value;f.value=this.getDataVariable(f);var h=JSON.stringify(f.value);50<h.length&&(h=h.substring(0,50));isNaN(f.value.length)||(h+=" (length: ".concat(f.value.length,
")"));e.push("  ".concat(f.name.padEnd(30)," = ").concat(h))}return e.join("\n")}}])});(function(){var a={};Ia.exports=a;(function(d,p){d.toRGBA8=function(e){var k=e.width,f=e.height;if(null==e.tabs.acTL)return[d.toRGBA8.decodeImage(e.data,k,f,e).buffer];var h=[];null==e.frames[0].data&&(e.frames[0].data=e.data);for(var r,u=new Uint8Array(k*f*4),H=0;H<e.frames.length;H++){var z=e.frames[H],F=z.rect.x,t=z.rect.y,q=z.rect.width,n=z.rect.height,v=d.toRGBA8.decodeImage(z.data,q,n,e);if(0==H?r=v:0==z.blend?
d._copyTile(v,q,n,r,k,f,F,t,0):1==z.blend&&d._copyTile(v,q,n,r,k,f,F,t,1),h.push(r.buffer),r=r.slice(0),0!=z.dispose)if(1==z.dispose)d._copyTile(u,q,n,r,k,f,F,t,0);else if(2==z.dispose){for(r=H-1;2==e.frames[r].dispose;)r--;r=(new Uint8Array(h[r])).slice(0)}}return h};d.toRGBA8.decodeImage=function(e,k,f,h){var r=k*f,u=d.decode._getBPP(h),H=Math.ceil(k*u/8);u=new Uint8Array(4*r);var z=new Uint32Array(u.buffer),F=h.ctype,t=h.depth,q=d._bin.readUshort;if(6==F){r<<=2;if(8==t)for(h=0;h<r;h++)u[h]=e[h];
if(16==t)for(h=0;h<r;h++)u[h]=e[h<<1]}else if(2==F){h=h.tabs.tRNS;H=f=k=-1;if(h&&(k=h[0],f=h[1],H=h[2]),8==t)for(h=0;h<r;h++)F=3*h,u[z=h<<2]=e[F],u[z+1]=e[F+1],u[z+2]=e[F+2],u[z+3]=255,-1!=k&&e[F]==k&&e[F+1]==f&&e[F+2]==H&&(u[z+3]=0);if(16==t)for(h=0;h<r;h++)F=6*h,u[z=h<<2]=e[F],u[z+1]=e[F+2],u[z+2]=e[F+4],u[z+3]=255,-1!=k&&q(e,F)==k&&q(e,F+2)==f&&q(e,F+4)==H&&(u[z+3]=0)}else if(3==F){q=h.tabs.PLTE;var n=(F=h.tabs.tRNS)?F.length:0;if(1==t)for(var v=0;v<f;v++){var x=v*H,w=v*k;for(h=0;h<k;h++){z=w+
h<<2;var D=3*(E=e[x+(h>>3)]>>7-((7&h)<<0)&1);u[z]=q[D];u[z+1]=q[D+1];u[z+2]=q[D+2];u[z+3]=E<n?F[E]:255}}if(2==t)for(v=0;v<f;v++)for(x=v*H,w=v*k,h=0;h<k;h++)z=w+h<<2,D=3*(E=e[x+(h>>2)]>>6-((3&h)<<1)&3),u[z]=q[D],u[z+1]=q[D+1],u[z+2]=q[D+2],u[z+3]=E<n?F[E]:255;if(4==t)for(v=0;v<f;v++)for(x=v*H,w=v*k,h=0;h<k;h++)z=w+h<<2,D=3*(E=e[x+(h>>1)]>>4-((1&h)<<2)&15),u[z]=q[D],u[z+1]=q[D+1],u[z+2]=q[D+2],u[z+3]=E<n?F[E]:255;if(8==t)for(h=0;h<r;h++){var E;z=h<<2;D=3*(E=e[h]);u[z]=q[D];u[z+1]=q[D+1];u[z+2]=q[D+
2];u[z+3]=E<n?F[E]:255}}else if(4==F){if(8==t)for(h=0;h<r;h++)z=h<<2,f=e[k=h<<1],u[z]=f,u[z+1]=f,u[z+2]=f,u[z+3]=e[k+1];if(16==t)for(h=0;h<r;h++)z=h<<2,f=e[k=h<<2],u[z]=f,u[z+1]=f,u[z+2]=f,u[z+3]=e[k+2]}else if(0==F){k=h.tabs.tRNS?h.tabs.tRNS:-1;if(1==t)for(h=0;h<r;h++)H=(f=255*(e[h>>3]>>7-(7&h)&1))==255*k?0:255,z[h]=H<<24|f<<16|f<<8|f;if(2==t)for(h=0;h<r;h++)H=(f=85*(e[h>>2]>>6-((3&h)<<1)&3))==85*k?0:255,z[h]=H<<24|f<<16|f<<8|f;if(4==t)for(h=0;h<r;h++)H=(f=17*(e[h>>1]>>4-((1&h)<<2)&15))==17*k?0:
255,z[h]=H<<24|f<<16|f<<8|f;if(8==t)for(h=0;h<r;h++)H=(f=e[h])==k?0:255,z[h]=H<<24|f<<16|f<<8|f;if(16==t)for(h=0;h<r;h++)f=e[h<<1],H=q(e,h<<1)==k?0:255,z[h]=H<<24|f<<16|f<<8|f}return u};d.decode=function(e){e=new Uint8Array(e);for(var k=8,f=d._bin,h=f.readUshort,r=f.readUint,u={tabs:{},frames:[]},H=new Uint8Array(e.length),z=0,F=0,t=[137,80,78,71,13,10,26,10],q=0;8>q;q++)if(e[q]!=t[q])throw"The input is not a PNG file!";for(;k<e.length;){t=f.readUint(e,k);k+=4;var n=f.readASCII(e,k,4);if(k+=4,"IHDR"==
n)d.decode._IHDR(e,k,u);else if("IDAT"==n){for(q=0;q<t;q++)H[z+q]=e[k+q];z+=t}else if("acTL"==n){u.tabs[n]={num_frames:r(e,k),num_plays:r(e,k+4)};var v=new Uint8Array(e.length)}else if("fcTL"==n)0!=F&&((D=u.frames[u.frames.length-1]).data=d.decode._decompress(u,v.slice(0,F),D.rect.width,D.rect.height),F=0),n={x:r(e,k+12),y:r(e,k+16),width:r(e,k+4),height:r(e,k+8)},q=h(e,k+22),q=h(e,k+20)/(0==q?100:q),u.frames.push({rect:n,delay:Math.round(1E3*q),dispose:e[k+24],blend:e[k+25]});else if("fdAT"==n){for(q=
0;q<t-4;q++)v[F+q]=e[k+q+4];F+=t-4}else if("pHYs"==n)u.tabs[n]=[f.readUint(e,k),f.readUint(e,k+4),e[k+8]];else if("cHRM"==n)for(u.tabs[n]=[],q=0;8>q;q++)u.tabs[n].push(f.readUint(e,k+4*q));else if("tEXt"==n){null==u.tabs[n]&&(u.tabs[n]={});var x=f.nextZero(e,k);q=f.readASCII(e,k,x-k);x=f.readASCII(e,x+1,k+t-x-1);u.tabs[n][q]=x}else if("iTXt"==n){null==u.tabs[n]&&(u.tabs[n]={});var w=k;x=f.nextZero(e,w);q=f.readASCII(e,w,x-w);e[w=x+1];e[w+1];w+=2;x=f.nextZero(e,w);f.readASCII(e,w,x-w);w=x+1;x=f.nextZero(e,
w);f.readUTF8(e,w,x-w);w=x+1;x=f.readUTF8(e,w,t-(w-k));u.tabs[n][q]=x}else if("PLTE"==n)u.tabs[n]=f.readBytes(e,k,t);else if("hIST"==n)for(x=u.tabs.PLTE.length/3,u.tabs[n]=[],q=0;q<x;q++)u.tabs[n].push(h(e,k+2*q));else if("tRNS"==n)3==u.ctype?u.tabs[n]=f.readBytes(e,k,t):0==u.ctype?u.tabs[n]=h(e,k):2==u.ctype&&(u.tabs[n]=[h(e,k),h(e,k+2),h(e,k+4)]);else if("gAMA"==n)u.tabs[n]=f.readUint(e,k)/1E5;else if("sRGB"==n)u.tabs[n]=e[k];else if("bKGD"==n)0==u.ctype||4==u.ctype?u.tabs[n]=[h(e,k)]:2==u.ctype||
6==u.ctype?u.tabs[n]=[h(e,k),h(e,k+2),h(e,k+4)]:3==u.ctype&&(u.tabs[n]=e[k]);else if("IEND"==n){var D;0!=F&&((D=u.frames[u.frames.length-1]).data=d.decode._decompress(u,v.slice(0,F),D.rect.width,D.rect.height));u.data=d.decode._decompress(u,H,u.width,u.height);break}k+=t;f.readUint(e,k);k+=4}return delete u.compress,delete u.interlace,delete u.filter,u};d.decode._decompress=function(e,k,f,h){return 0==e.compress&&(k=d.decode._inflate(k)),0==e.interlace?k=d.decode._filterZero(k,e,0,f,h):1==e.interlace&&
(k=d.decode._readInterlace(k,e)),k};d.decode._inflate=function(e){return p.inflate(e)};d.decode._readInterlace=function(e,k){for(var f=k.width,h=k.height,r=d.decode._getBPP(k),u=r>>3,H=Math.ceil(f*r/8),z=new Uint8Array(h*H),F=0,t=[0,0,4,0,2,0,1],q=[0,4,0,2,0,1,0],n=[8,8,8,4,4,2,2],v=[8,8,4,4,2,2,1],x=0;7>x;){for(var w=n[x],D=v[x],E=0,Q=0,N=t[x];N<h;)N+=w,Q++;for(N=q[x];N<f;)N+=D,E++;N=Math.ceil(E*r/8);d.decode._filterZero(e,k,F,E,Q);for(var R=0,m=t[x];m<h;){for(var G=q[x],L=F+R*N<<3;G<f;){if(1==r){var O=
(O=e[L>>3])>>7-(7&L)&1;z[m*H+(G>>3)]|=O<<7-((3&G)<<0)}2==r&&(O=(O=e[L>>3])>>6-(7&L)&3,z[m*H+(G>>2)]|=O<<6-((3&G)<<1));4==r&&(O=(O=e[L>>3])>>4-(7&L)&15,z[m*H+(G>>1)]|=O<<4-((1&G)<<2));if(8<=r){O=m*H+G*u;for(var Z=0;Z<u;Z++)z[O+Z]=e[(L>>3)+Z]}L+=r;G+=D}R++;m+=w}0!=E*Q&&(F+=Q*(1+N));x+=1}return z};d.decode._getBPP=function(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth};d.decode._filterZero=function(e,k,f,h,r){k=d.decode._getBPP(k);h=Math.ceil(h*k/8);var u=d.decode._paeth;k=Math.ceil(k/8);for(var H=
0;H<r;H++){var z=f+H*h,F=z+H+1,t=e[F-1];if(0==t)for(var q=0;q<h;q++)e[z+q]=e[F+q];else if(1==t){for(q=0;q<k;q++)e[z+q]=e[F+q];for(q=k;q<h;q++)e[z+q]=e[F+q]+e[z+q-k]&255}else if(0==H){for(q=0;q<k;q++)e[z+q]=e[F+q];if(2==t)for(q=k;q<h;q++)e[z+q]=255&e[F+q];if(3==t)for(q=k;q<h;q++)e[z+q]=e[F+q]+(e[z+q-k]>>1)&255;if(4==t)for(q=k;q<h;q++)e[z+q]=e[F+q]+u(e[z+q-k],0,0)&255}else{if(2==t)for(q=0;q<h;q++)e[z+q]=e[F+q]+e[z+q-h]&255;if(3==t){for(q=0;q<k;q++)e[z+q]=e[F+q]+(e[z+q-h]>>1)&255;for(q=k;q<h;q++)e[z+
q]=e[F+q]+(e[z+q-h]+e[z+q-k]>>1)&255}if(4==t){for(q=0;q<k;q++)e[z+q]=e[F+q]+u(0,e[z+q-h],0)&255;for(q=k;q<h;q++)e[z+q]=e[F+q]+u(e[z+q-k],e[z+q-h],e[z+q-k-h])&255}}}return e};d.decode._paeth=function(e,k,f){var h=e+k-f,r=Math.abs(h-e),u=Math.abs(h-k);h=Math.abs(h-f);return r<=u&&r<=h?e:u<=h?k:f};d.decode._IHDR=function(e,k,f){var h=d._bin;f.width=h.readUint(e,k);k+=4;f.height=h.readUint(e,k);k+=4;f.depth=e[k];k++;f.ctype=e[k];k++;f.compress=e[k];k++;f.filter=e[k];k++;f.interlace=e[k]};d._bin={nextZero:function(e,
k){for(;0!=e[k];)k++;return k},readUshort:function(e,k){return e[k]<<8|e[k+1]},writeUshort:function(e,k,f){e[k]=f>>8&255;e[k+1]=255&f},readUint:function(e,k){return 16777216*e[k]+(e[k+1]<<16|e[k+2]<<8|e[k+3])},writeUint:function(e,k,f){e[k]=f>>24&255;e[k+1]=f>>16&255;e[k+2]=f>>8&255;e[k+3]=255&f},readASCII:function(e,k,f){for(var h="",r=0;r<f;r++)h+=String.fromCharCode(e[k+r]);return h},writeASCII:function(e,k,f){for(var h=0;h<f.length;h++)e[k+h]=f.charCodeAt(h)},readBytes:function(e,k,f){for(var h=
[],r=0;r<f;r++)h.push(e[k+r]);return h},pad:function(e){return 2>e.length?"0"+e:e},readUTF8:function(e,k,f){for(var h,r="",u=0;u<f;u++)r+="%"+d._bin.pad(e[k+u].toString(16));try{h=decodeURIComponent(r)}catch(H){return d._bin.readASCII(e,k,f)}return h}};d._copyTile=function(e,k,f,h,r,u,H,z,F){var t=Math.min(k,r);f=Math.min(f,u);for(var q=u=0,n=0;n<f;n++)for(var v=0;v<t;v++)if(0<=H&&0<=z?(u=n*k+v<<2,q=(z+n)*r+H+v<<2):(u=(-z+n)*k-H+v<<2,q=n*r+v<<2),0==F)h[q]=e[u],h[q+1]=e[u+1],h[q+2]=e[u+2],h[q+3]=e[u+
3];else if(1==F){var x=1/255*e[u+3],w=e[u]*x,D=e[u+1]*x,E=e[u+2]*x,Q=1/255*h[q+3],N=h[q]*Q,R=h[q+1]*Q,m=h[q+2]*Q,G=1-x;x+=Q*G;Q=0==x?0:1/x;h[q+3]=255*x;h[q+0]=(w+N*G)*Q;h[q+1]=(D+R*G)*Q;h[q+2]=(E+m*G)*Q}else if(2==F)x=e[u+3],w=e[u],D=e[u+1],E=e[u+2],Q=h[q+3],N=h[q],R=h[q+1],m=h[q+2],x==Q&&w==N&&D==R&&E==m?(h[q]=0,h[q+1]=0,h[q+2]=0,h[q+3]=0):(h[q]=w,h[q+1]=D,h[q+2]=E,h[q+3]=x);else if(3==F&&(x=e[u+3],w=e[u],D=e[u+1],E=e[u+2],Q=h[q+3],N=h[q],R=h[q+1],m=h[q+2],(x!=Q||w!=N||D!=R||E!=m)&&220>x&&20<Q))return!1;
return!0};d.encode=function(e,k,f,h,r,u){null==h&&(h=0);null==u&&(u=!1);for(var H=new Uint8Array(e[0].byteLength*e.length+100),z=[137,80,78,71,13,10,26,10],F=0;8>F;F++)H[F]=z[F];z=8;F=d._bin;var t=d.crc.crc,q=F.writeUint,n=F.writeUshort,v=F.writeASCII;h=d.encode.compressPNG(e,k,f,h,u);q(H,z,13);v(H,z+=4,"IHDR");q(H,z+=4,k);q(H,z+=4,f);H[z+=4]=h.depth;H[++z]=h.ctype;H[++z]=0;H[++z]=0;H[++z]=0;q(H,++z,t(H,z-17,17));q(H,z+=4,1);v(H,z+=4,"sRGB");H[z+=4]=1;q(H,++z,t(H,z-5,5));z+=4;k=1<e.length;if(k&&(q(H,
z,8),v(H,z+=4,"acTL"),q(H,z+=4,e.length),q(H,z+=4,0),q(H,z+=4,t(H,z-12,12)),z+=4),3==h.ctype){q(H,z,3*(e=h.plte.length));v(H,z+=4,"PLTE");z+=4;for(F=0;F<e;F++){f=3*F;u=h.plte[F];var x=u>>8&255,w=u>>16&255;H[z+f+0]=255&u;H[z+f+1]=x;H[z+f+2]=w}if(q(H,z+=3*e,t(H,z-3*e-4,3*e+4)),z+=4,h.gotAlpha){q(H,z,e);v(H,z+=4,"tRNS");z+=4;for(F=0;F<e;F++)H[z+F]=h.plte[F]>>24&255;q(H,z+=e,t(H,z-e-4,e+4));z+=4}}for(u=f=0;u<h.frames.length;u++){F=h.frames[u];k&&(q(H,z,26),v(H,z+=4,"fcTL"),q(H,z+=4,f++),q(H,z+=4,F.rect.width),
q(H,z+=4,F.rect.height),q(H,z+=4,F.rect.x),q(H,z+=4,F.rect.y),n(H,z+=4,r[u]),n(H,z+=2,1E3),H[z+=2]=F.dispose,H[++z]=F.blend,q(H,++z,t(H,z-30,30)),z+=4);x=F.cimg;q(H,z,(e=x.length)+(0==u?0:4));w=z+=4;v(H,z,0==u?"IDAT":"fdAT");z+=4;0!=u&&(q(H,z,f++),z+=4);for(F=0;F<e;F++)H[z+F]=x[F];q(H,z+=e,t(H,w,z-w));z+=4}return q(H,z,0),v(H,z+=4,"IEND"),q(H,z+=4,t(H,z-4,4)),z+=4,H.buffer.slice(0,z)};d.encode.compressPNG=function(e,k,f,h,r){k=d.encode.compress(e,k,f,h,!1,r);for(f=0;f<e.length;f++){h=k.frames[f];
r=(h.rect.width,h.rect.height);var u=h.bpl,H=h.bpp,z=new Uint8Array(r*u+r);h.cimg=d.encode._filterZero(h.img,r,H,u,z)}return k};d.encode.compress=function(e,k,f,h,r,u){null==u&&(u=!1);for(var H=6,z=8,F=4,t=255,q=0;q<e.length;q++)for(var n=new Uint8Array(e[q]),v=n.length,x=0;x<v;x+=4)t&=n[x+3];t=255!=t;n={};var w=[];if(0!=e.length&&(n[0]=0,w.push(0),0!=h&&h--),0!=h)for(q=d.quantize(e,h,r),e=q.bufs,x=0;x<q.plte.length;x++)null==n[D=q.plte[x].est.rgba]&&(n[D]=w.length,w.push(D));else for(q=0;q<e.length;q++)for(h=
new Uint32Array(e[q]),v=h.length,x=0;x<v;x++){var D=h[x];if((x<k||D!=h[x-1]&&D!=h[x-k])&&null==n[D]&&(n[D]=w.length,w.push(D),300<=w.length))break}D=!!t&&r;v=w.length;256>=v&&0==u&&(z=2>=v?1:4>=v?2:16>=v?4:8,r&&(z=8),t=!0);h=[];for(q=0;q<e.length;q++){var E=new Uint8Array(e[q]),Q=new Uint32Array(E.buffer),N=0,R=0,m=k,G=f,L=0;if(0!=q&&!D){for(var O=r||1==q||2==h[h.length-2].dispose?1:2,Z=0,W=1E9,ha=0;ha<O;ha++){new Uint8Array(e[q-1-ha]);for(var ja=new Uint32Array(e[q-1-ha]),ea=k,la=f,oa=-1,wa=-1,U=
0;U<f;U++)for(var A=0;A<k;A++)Q[x=U*k+A]!=ja[x]&&(A<ea&&(ea=A),A>oa&&(oa=A),U<la&&(la=U),U>wa&&(wa=U));U=-1==oa?1:(oa-ea+1)*(wa-la+1);U<W&&(W=U,Z=ha,-1==oa?(N=R=0,m=G=1):(N=ea,R=la,m=oa-ea+1,G=wa-la+1))}Q=new Uint8Array(e[q-1-Z]);1==Z&&(h[h.length-1].dispose=2);Z=new Uint8Array(m*G*4);new Uint32Array(Z.buffer);d._copyTile(Q,k,f,Z,m,G,-N,-R,0);d._copyTile(E,k,f,Z,m,G,-N,-R,3)?(d._copyTile(E,k,f,Z,m,G,-N,-R,2),L=1):(d._copyTile(E,k,f,Z,m,G,-N,-R,0),L=0);E=Z;Q=new Uint32Array(E.buffer)}O=4*m;if(256>=
v&&0==u){O=Math.ceil(z*m/8);Z=new Uint8Array(O*G);for(U=0;U<G;U++)if(x=U*O,H=U*m,8==z)for(A=0;A<m;A++)Z[x+A]=n[Q[H+A]];else if(4==z)for(A=0;A<m;A++)Z[x+(A>>1)]|=n[Q[H+A]]<<4-4*(1&A);else if(2==z)for(A=0;A<m;A++)Z[x+(A>>2)]|=n[Q[H+A]]<<6-2*(3&A);else if(1==z)for(A=0;A<m;A++)Z[x+(A>>3)]|=n[Q[H+A]]<<7-(7&A);E=Z;H=3;F=1}else if(0==t&&1==e.length){Z=new Uint8Array(m*G*3);H=m*G;for(x=0;x<H;x++)F=3*x,Q=4*x,Z[F]=E[Q],Z[F+1]=E[Q+1],Z[F+2]=E[Q+2];E=Z;H=2;F=3;O=3*m}h.push({rect:{x:N,y:R,width:m,height:G},img:E,
bpl:O,bpp:F,blend:L,dispose:D?1:0})}return{ctype:H,depth:z,plte:w,gotAlpha:t,frames:h}};d.encode._filterZero=function(e,k,f,h,r){for(var u=[],H=0;5>H;H++)if(!(5E5<k*h)||2!=H&&3!=H&&4!=H){for(var z=0;z<k;z++)d.encode._filterLine(r,e,z,h,f,H);if(u.push(p.deflate(r)),1==f)break}var F;e=1E9;for(k=0;k<u.length;k++)u[k].length<e&&(F=k,e=u[k].length);return u[F]};d.encode._filterLine=function(e,k,f,h,r,u){var H=f*h,z=H+f,F=d.decode._paeth;if(e[z]=u,z++,0==u)for(f=0;f<h;f++)e[z+f]=k[H+f];else if(1==u){for(f=
0;f<r;f++)e[z+f]=k[H+f];for(f=r;f<h;f++)e[z+f]=k[H+f]-k[H+f-r]+256&255}else if(0==f){for(f=0;f<r;f++)e[z+f]=k[H+f];if(2==u)for(f=r;f<h;f++)e[z+f]=k[H+f];if(3==u)for(f=r;f<h;f++)e[z+f]=k[H+f]-(k[H+f-r]>>1)+256&255;if(4==u)for(f=r;f<h;f++)e[z+f]=k[H+f]-F(k[H+f-r],0,0)+256&255}else{if(2==u)for(f=0;f<h;f++)e[z+f]=k[H+f]+256-k[H+f-h]&255;if(3==u){for(f=0;f<r;f++)e[z+f]=k[H+f]+256-(k[H+f-h]>>1)&255;for(f=r;f<h;f++)e[z+f]=k[H+f]+256-(k[H+f-h]+k[H+f-r]>>1)&255}if(4==u){for(f=0;f<r;f++)e[z+f]=k[H+f]+256-F(0,
k[H+f-h],0)&255;for(f=r;f<h;f++)e[z+f]=k[H+f]+256-F(k[H+f-r],k[H+f-h],k[H+f-r-h])&255}}};d.crc={table:function(){for(var e=new Uint32Array(256),k=0;256>k;k++){for(var f=k,h=0;8>h;h++)1&f?f=3988292384^f>>>1:f>>>=1;e[k]=f}return e}(),update:function(e,k,f,h){for(var r=0;r<h;r++)e=d.crc.table[255&(e^k[f+r])]^e>>>8;return e},crc:function(e,k,f){return 4294967295^d.crc.update(4294967295,e,k,f)}};d.quantize=function(e,k,f){for(var h=[],r=0,u=0;u<e.length;u++)h.push(d.encode.alphaMul(new Uint8Array(e[u]),
f)),r+=e[u].byteLength;r=new Uint8Array(r);var H=new Uint32Array(r.buffer);for(u=e=0;u<h.length;u++){f=h[u];for(var z=f.length,F=0;F<z;F++)r[e+F]=f[F];e+=z}e={i0:0,i1:r.length,bst:null,est:null,tdst:0,left:null,right:null};e.bst=d.quantize.stats(r,e.i0,e.i1);e.est=d.quantize.estats(e.bst);for(f=[e];f.length<k;){for(u=z=F=0;u<f.length;u++)f[u].est.L>F&&(F=f[u].est.L,z=u);if(.001>F)break;F=f[z];u=d.quantize.splitPixels(r,H,F.i0,F.i1,F.est.e,F.est.eMq255);var t={i0:F.i0,i1:u,bst:null,est:null,tdst:0,
left:null,right:null};t.bst=d.quantize.stats(r,t.i0,t.i1);t.est=d.quantize.estats(t.bst);var q={i0:u,i1:F.i1,bst:null,est:null,tdst:0,left:null,right:null};q.bst={R:[],m:[],N:F.bst.N-t.bst.N};for(u=0;16>u;u++)q.bst.R[u]=F.bst.R[u]-t.bst.R[u];for(u=0;4>u;u++)q.bst.m[u]=F.bst.m[u]-t.bst.m[u];q.est=d.quantize.estats(q.bst);F.left=t;F.right=q;f[z]=t;f.push(q)}f.sort(function(w,D){return D.bst.N-w.bst.N});for(k=0;k<h.length;k++){r=d.quantize.planeDst;H=new Uint8Array(h[k].buffer);z=new Uint32Array(h[k].buffer);
F=H.length;for(u=0;u<F;u+=4){t=1/255*H[u];q=1/255*H[u+1];for(var n=1/255*H[u+2],v=1/255*H[u+3],x=e;x.left;)x=0>=r(x.est,t,q,n,v)?x.left:x.right;z[u>>2]=x.est.rgba}h[k]=z.buffer}return{bufs:h,plte:f}};d.quantize.getNearest=function(e,k,f,h,r){if(null==e.left)return e.tdst=d.quantize.dist(e.est.q,k,f,h,r),e;var u=d.quantize.planeDst(e.est,k,f,h,r),H=e.left,z=e.right;0<u&&(H=e.right,z=e.left);e=d.quantize.getNearest(H,k,f,h,r);if(e.tdst<=u*u)return e;k=d.quantize.getNearest(z,k,f,h,r);return k.tdst<
e.tdst?k:e};d.quantize.planeDst=function(e,k,f,h,r){var u=e.e;return u[0]*k+u[1]*f+u[2]*h+u[3]*r-e.eMq};d.quantize.dist=function(e,k,f,h,r){k-=e[0];f-=e[1];h-=e[2];e=r-e[3];return k*k+f*f+h*h+e*e};d.quantize.splitPixels=function(e,k,f,h,r,u){var H=d.quantize.vecDot;for(h-=4;f<h;){for(;H(e,f,r)<=u;)f+=4;for(;H(e,h,r)>u;)h-=4;if(f>=h)break;var z=k[f>>2];k[f>>2]=k[h>>2];k[h>>2]=z;f+=4;h-=4}for(;H(e,f,r)>u;)f-=4;return f+4};d.quantize.vecDot=function(e,k,f){return e[k]*f[0]+e[k+1]*f[1]+e[k+2]*f[2]+e[k+
3]*f[3]};d.quantize.stats=function(e,k,f){for(var h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=[0,0,0,0],u=k;u<f;u+=4){var H=1/255*e[u],z=1/255*e[u+1],F=1/255*e[u+2],t=1/255*e[u+3];r[0]+=H;r[1]+=z;r[2]+=F;r[3]+=t;h[0]+=H*H;h[1]+=H*z;h[2]+=H*F;h[3]+=H*t;h[5]+=z*z;h[6]+=z*F;h[7]+=z*t;h[10]+=F*F;h[11]+=F*t;h[15]+=t*t}return h[4]=h[1],h[8]=h[2],h[12]=h[3],h[9]=h[6],h[13]=h[7],h[14]=h[11],{R:h,m:r,N:f-k>>2}};d.quantize.estats=function(e){var k=e.R,f=e.m,h=e.N,r=f[0],u=f[1],H=f[2],z=f[3],F=0==h?0:1/h;k=[k[0]-
r*r*F,k[1]-r*u*F,k[2]-r*H*F,k[3]-r*z*F,k[4]-u*r*F,k[5]-u*u*F,k[6]-u*H*F,k[7]-u*z*F,k[8]-H*r*F,k[9]-H*u*F,k[10]-H*H*F,k[11]-H*z*F,k[12]-z*r*F,k[13]-z*u*F,k[14]-z*H*F,k[15]-z*z*F];f=d.M4;e=[.5,.5,.5,.5];var t=0,q=0;if(0!=h)for(h=0;10>h&&(e=f.multVec(k,e),q=Math.sqrt(f.dot(e,e)),e=f.sml(1/q,e),!(1E-9>Math.abs(q-t)));h++)t=q;r=[r*F,u*F,H*F,z*F];u=f.dot(f.sml(255,r),e);H=.001>r[3]?0:1/r[3];return{Cov:k,q:r,e:e,L:t,eMq255:u,eMq:f.dot(e,r),rgba:(Math.round(255*r[3])<<24|Math.round(255*r[2]*H)<<16|Math.round(255*
r[1]*H)<<8|Math.round(255*r[0]*H)<<0)>>>0}};d.M4={multVec:function(e,k){return[e[0]*k[0]+e[1]*k[1]+e[2]*k[2]+e[3]*k[3],e[4]*k[0]+e[5]*k[1]+e[6]*k[2]+e[7]*k[3],e[8]*k[0]+e[9]*k[1]+e[10]*k[2]+e[11]*k[3],e[12]*k[0]+e[13]*k[1]+e[14]*k[2]+e[15]*k[3]]},dot:function(e,k){return e[0]*k[0]+e[1]*k[1]+e[2]*k[2]+e[3]*k[3]},sml:function(e,k){return[e*k[0],e*k[1],e*k[2],e*k[3]]}};d.encode.alphaMul=function(e,k){for(var f=new Uint8Array(e.length),h=e.length>>2,r=0;r<h;r++){var u=r<<2,H=e[u+3];k&&(H=128>H?0:255);
var z=1/255*H;f[u+0]=e[u+0]*z;f[u+1]=e[u+1]*z;f[u+2]=e[u+2]*z;f[u+3]=H}return f}})(a,Sa("16wW"))})();c=Wa||{};"object"==typeof Ia.exports&&(Ia.exports=c);!0;String.prototype.startsWith||(String.prototype.startsWith=function(a){return 0===this.lastIndexOf(a,0)});String.prototype.endsWith||(String.prototype.endsWith=function(a){return-1!==this.indexOf(a,this.length-a.length)});ra.ajaxTransport("+binary",function(a,d,p){if(window.FormData&&(a.dataType&&"binary"==a.dataType||a.data&&(window.ArrayBuffer&&
a.data instanceof ArrayBuffer||window.Blob&&a.data instanceof Blob)))return{send:function(e,k){var f=new XMLHttpRequest,h=a.url,r=a.type,u=a.async||!0,H=a.responseType||"blob",z=a.data||null,F=a.username||null,t=a.password||null,q=function(){var v={};v[a.dataType]=f.response;k(f.status,f.statusText,v,f.getAllResponseHeaders())},n;for(n in f.addEventListener("load",q),f.addEventListener("error",q),f.addEventListener("abort",q),f.open(r,h,u,F,t),e)f.setRequestHeader(n,e[n]);f.responseType=H;f.send(z)},
abort:function(){p.abort()}}});c.createViewer=function(a,d,p){if("string"==typeof a&&(a=ra("#"+a)),a){d=d||{};p=p||{};try{return new c.GLViewer(a,d,p)}catch(e){throw"error creating viewer: "+e;}}};c.createViewerGrid=function(a,d,p){if("string"==typeof a&&(a=ra("#"+a)),a){d=d||{};p=p||{};var e=[],k=document.createElement("canvas");p.rows=d.rows;p.cols=d.cols;p.control_all=null!=d.control_all&&d.control_all;ra(a).append(ra(k));try{for(var f=0;f<d.rows;f++){for(var h=[],r=0;r<d.cols;r++){p.row=f;p.col=
r;p.canvas=k;p.viewers=e;p.control_all=d.control_all;var u=c.createViewer(a,p);h.push(u)}e.unshift(h)}}catch(H){throw"error creating viewer grid: "+H;}return e}};c.viewers={};c.getbin=function(a,d,p,e){var k=new Promise(function(f,h){p=null==p?"GET":p;ra.ajax({url:a,dataType:"binary",method:p,data:e,responseType:"arraybuffer",processData:!1}).done(function(r){f(r)}).fail(function(r,u){console.log(u);h()})});return d?k.then(d):k};c.base64ToArray=function(a){a=window.atob(a);for(var d=a.length,p=new Uint8Array(d),
e=0;e<d;e++)p[e]=a.charCodeAt(e);return p};c.download=function(a,d,p,e){var k="",f="",h="",r="",u=null,H=d.addModel();if(0>a.indexOf(":")&&(a=4==a.length?"pdb:"+a:isNaN(a)?"url:"+a:"cid:"+a),"mmtf:"===a.substr(0,5))f=p&&p.pdbUri?p.pdbUri:"https://mmtf.rcsb.org/v1.0/full/",a=a.substr(5).toUpperCase(),r=f+a,p&&void 0===p.noComputeSecondaryStructure&&(p.noComputeSecondaryStructure=!0),u=new Promise(function(F){c.getbin(r).then(function(t){H.addMolData(t,"mmtf",p);d.zoomTo();d.render();F(H)},function(){console.log("fetch of "+
r+" failed.")})});else{if("pdb:"===a.substr(0,4)){if(k="mmtf",p&&p.format&&(k=p.format),p&&void 0===p.noComputeSecondaryStructure&&(p.noComputeSecondaryStructure=!0),!(a=a.substr(4).toUpperCase()).match(/^[1-9][A-Za-z0-9]{3}$/))return void alert("Wrong PDB ID");"mmtf"==k?(h=p&&p.mmtfUri?p.mmtfUri:"https://mmtf.rcsb.org/v1.0/full/",r=h+a.toUpperCase()):(f=p&&p.pdbUri?p.pdbUri:"https://files.rcsb.org/view/",r=f+a+"."+k)}else if("cid:"==a.substr(0,4)){if(k="sdf",!(a=a.substr(4)).match(/^[0-9]+$/))return void alert("Wrong Compound ID");
r="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+a+"/SDF?record_type=3d"}else"url:"==a.substr(0,4)&&(r=a.substr(4),k=r);var z=function(F){H.addMolData(F,k,p);d.zoomTo();d.render()};u=new Promise(function(F){"mmtf"==k?c.getbin(r).then(function(t){z(t);F(H)}).catch(function(){f=p&&p.pdbUri?p.pdbUri:"https://files.rcsb.org/view/";r=f+a+".pdb";console.log("falling back to pdb format");ra.get(r,function(t){z(t);F(H)}).fail(function(t){z("");F(H);console.log("fetch of "+r+" failed: "+t.statusText)})}):
ra.get(r,function(t){z(t);F(H)}).fail(function(t){z("");F(H);console.log("fetch of "+r+" failed: "+t.statusText)})})}return e?(u.then(function(F){e(F)}),H):u};c.SurfaceType={VDW:1,MS:2,SAS:3,SES:4};c.mergeGeos=function(a,d){d=d.geometry;void 0!==d&&a.geometryGroups.push(d.geometryGroups[0])};c.multiLineString=function(a){return a.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"")};c.syncSurface=!1;(0<=window.navigator.userAgent.indexOf("MSIE ")||0<=window.navigator.userAgent.indexOf("Trident/"))&&
(c.syncSurface=!0);c.specStringToObject=function(a){if("object"==typeof a||void 0===a||null==a)return a;var d=function(H){return c.isNumeric(H)?Math.floor(parseFloat(H))==parseInt(H)||0<=H.indexOf(".")?parseFloat(H):parseInt(H):"true"===H||"false"!==H&&H},p={};if("all"===(a=a.replace(/%7E/,"~")))return p;a=a.split(";");for(var e=0;e<a.length;e++){var k=a[e].split(":"),f=k[0],h={};if(k=k[1])if(-1!==(k=k.replace(/~/g,"=")).indexOf("=")){k=k.split(",");for(var r=0;r<k.length;r++){var u=k[r].split("=",
2);h[u[0]]=d(u[1])}}else h=-1!==k.indexOf(",")?k.split(","):d(k);p[f]=h}return p};c.getExtent=function(a,d){var p,e,k,f,h,r,u,H,z,F=!d;if(d=p=e=9999,k=f=h=-9999,r=u=H=z=0,0===a.length)return[[0,0,0],[0,0,0],[0,0,0]];for(var t=0;t<a.length;t++){var q=a[t];if(void 0!==q&&isFinite(q.x)&&isFinite(q.y)&&isFinite(q.z)&&(z++,r+=q.x,u+=q.y,H+=q.z,d=d<q.x?d:q.x,p=p<q.y?p:q.y,e=e<q.z?e:q.z,k=k>q.x?k:q.x,f=f>q.y?f:q.y,h=h>q.z?h:q.z,q.symmetries&&F))for(var n=0;n<q.symmetries.length;n++)z++,r+=q.symmetries[n].x,
u+=q.symmetries[n].y,H+=q.symmetries[n].z,d=d<q.symmetries[n].x?d:q.symmetries[n].x,p=p<q.symmetries[n].y?p:q.symmetries[n].y,e=e<q.symmetries[n].z?e:q.symmetries[n].z,k=k>q.symmetries[n].x?k:q.symmetries[n].x,f=f>q.symmetries[n].y?f:q.symmetries[n].y,h=h>q.symmetries[n].z?h:q.symmetries[n].z}return[[d,p,e],[k,f,h],[r/z,u/z,H/z]]};c.getAtomProperty=function(a,d){var p=null;return a.properties&&void 0!==a.properties[d]?p=a.properties[d]:void 0!==a[d]&&(p=a[d]),p};c.getPropertyRange=function(a,d){for(var p=
Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,k=0,f=a.length;k<f;k++){var h=c.getAtomProperty(a[k],d);null!=h&&(h<p&&(p=h),h>e&&(e=h))}return isFinite(p)||isFinite(e)?isFinite(p)?isFinite(e)||(e=p):p=e:p=e=0,[p,e]};void 0!==Db&&(Sa.amdD=Db);!(Qb=[],Xa=function(){return c}.apply(Ua,Qb),void 0!==Xa&&(Ia.exports=Xa));c.createStereoViewer=function(a){var d=this;if("string"==typeof a&&(a=ra("#"+a)),a){a=c.createViewerGrid(a,{rows:1,cols:2,control_all:!0});this.glviewer1=a[0][0];this.glviewer2=a[0][1];
this.glviewer1.setAutoEyeSeparation(!1);this.glviewer2.setAutoEyeSeparation(!0);this.glviewer1.linkViewer(this.glviewer2);this.glviewer2.linkViewer(this.glviewer1);a=Object.getOwnPropertyNames(this.glviewer1).filter(function(e){return"function"==typeof d.glviewer1[e]});for(var p=0;p<a.length;p++)this[a[p]]=function(e){return function(){var k=this.glviewer1[e].apply(this.glviewer1,arguments),f=this.glviewer2[e].apply(this.glviewer2,arguments);return[k,f]}}(a[p]);this.setCoordinates=function(e,k,f){for(var h=
0;h<e.length;h++)e[h].setCoordinates(k,f)};this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()};this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()};this.render=function(e){this.glviewer1.render();this.glviewer2.render();e&&e(this)};this.getCanvas=function(){return this.glviewer1.getCanvas()}}};c.extend=function(a,d){for(var p in d)d.hasOwnProperty(p)&&void 0!==d[p]&&(a[p]=d[p]);return a};c.deepCopy=function(a){var d,
p;if(null==a)return{};if("object"!=typeof a||null===a)return a;for(p in d=Array.isArray(a)?[]:{},a){var e=a[p];d[p]=c.deepCopy(e)}return d};c.isNumeric=function(a){var d=typeof a;return("number"===d||"string"===d)&&!isNaN(a-parseFloat(a))};c.isEmptyObject=function(a){for(var d in a)return!1;return!0};c.makeFunction=function(a){return a&&"string"==typeof a&&(a=eval("("+a+")")),a&&"function"!=typeof a?null:a};c.adjustVolumeStyle=function(a){a&&(!a.volformat||a.voldata instanceof c.VolumeData||(a.voldata=
new c.VolumeData(a.voldata,a.volformat)),a.volscheme&&(a.volscheme=c.Gradient.getGradient(a.volscheme)))};var c=c||{};c.Math={clamp:function(a,d,p){return Math.min(Math.max(a,d),p)},degToRad:function(){var a=Math.PI/180;return function(d){return d*a}}()};c.Quaternion=function(a,d,p,e){this.x=a||0;this.y=d||0;this.z=p||0;this.w=void 0!==e?e:1};c.Quaternion.prototype={constructor:c.Quaternion,set:function(a,d,p,e){return this.x=a,this.y=d,this.z=p,this.w=e,this},copy:function(a){return this.x=a.x,this.y=
a.y,this.z=a.z,this.w=a.w,this},conjugate:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},inverse:function(){return this.conjugate().normalize()},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthxyz:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var a=this.length();return 0===a?(this.x=0,this.y=0,this.z=0,this.w=1):(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a),this},multiply:function(a){return this.multiplyQuaternions(this,
a)},multiplyScalar:function(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this},multiplyQuaternions:function(a,d){var p=a.x,e=a.y,k=a.z;a=a.w;var f=d.x,h=d.y,r=d.z;d=d.w;return this.x=p*d+a*f+e*r-k*h,this.y=e*d+a*h+k*f-p*r,this.z=k*d+a*r+p*h-e*f,this.w=a*d-p*f-e*h-k*r,this},sub:function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this},clone:function(){return new c.Quaternion(this.x,this.y,this.z,this.w)},setFromEuler:function(a){var d=Math.cos(a.x/2),p=Math.cos(a.y/2),e=Math.cos(a.z/
2),k=Math.sin(a.x/2),f=Math.sin(a.y/2);a=Math.sin(a.z/2);return this.x=k*p*e+d*f*a,this.y=d*f*e-k*p*a,this.z=d*p*a+k*f*e,this.w=d*p*e-k*f*a,this}};c.Vector2=function(a,d){this.x=a||0;this.y=d||0};c.Vector2.prototype={constructor:c.Vector2,set:function(a,d){return this.x=a,this.y=d,this},subVectors:function(a,d){return this.x=a.x-d.x,this.y=a.y-d.y,this},copy:function(a){return this.x=a.x,this.y=a.y,this},clone:function(){return new c.Vector2(this.x,this.y)}};c.Vector3=function(a,d,p){this.x=a||0;
this.y=d||0;this.z=p||0};c.Vector3.prototype={constructor:c.Vector3,set:function(a,d,p){return this.x=a,this.y=d,this.z=p,this},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},add:function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z,this},addVectors:function(a,d){return this.x=a.x+d.x,this.y=a.y+d.y,this.z=a.z+d.z,this},multiplyVectors:function(a,d){return this.x=a.x*d.x,this.y=a.y*d.y,this.z=a.z*d.z,this},sub:function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z,this},subVectors:function(a,
d){return this.x=a.x-d.x,this.y=a.y-d.y,this.z=a.z-d.z,this},multiplyScalar:function(a){return this.x*=a,this.y*=a,this.z*=a,this},divideScalar:function(a){return 0!==a?(this.x/=a,this.y/=a,this.z/=a):(this.x=0,this.y=0,this.z=0),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},
distanceToSquared:function(a){var d=this.x-a.x,p=this.y-a.y;a=this.z-a.z;return d*d+p*p+a*a},applyMatrix3:function(a){var d=this.x,p=this.y,e=this.z;a=a.elements;return this.x=a[0]*d+a[3]*p+a[6]*e,this.y=a[1]*d+a[4]*p+a[7]*e,this.z=a[2]*d+a[5]*p+a[8]*e,this},applyMatrix4:function(a){var d=this.x,p=this.y,e=this.z;a=a.elements;return this.x=a[0]*d+a[4]*p+a[8]*e+a[12],this.y=a[1]*d+a[5]*p+a[9]*e+a[13],this.z=a[2]*d+a[6]*p+a[10]*e+a[14],this},applyProjection:function(a){var d=this.x,p=this.y,e=this.z;
a=a.elements;var k=a[3]*d+a[7]*p+a[11]*e+a[15];return this.x=(a[0]*d+a[4]*p+a[8]*e+a[12])/k,this.y=(a[1]*d+a[5]*p+a[9]*e+a[13])/k,this.z=(a[2]*d+a[6]*p+a[10]*e+a[14])/k,this},applyQuaternion:function(a){var d=this.x,p=this.y,e=this.z,k=a.x,f=a.y,h=a.z;a=a.w;var r=2*(p*h-e*f);var u=2*(e*k-d*h);var H=2*(d*f-p*k);var z,F,t;return z=u*h-H*f,F=H*k-r*h,t=r*f-u*k,this.x=d+a*r+z,this.y=p+a*u+F,this.z=e+a*H+t,this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*
a.y+this.z*a.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},normalize:function(){return this.divideScalar(this.length())},cross:function(a){var d=this.x,p=this.y,e=this.z;return this.x=p*a.z-e*a.y,this.y=e*a.x-d*a.z,this.z=d*a.y-p*a.x,this},crossVectors:function(a,d){return this.x=a.y*d.z-a.z*d.y,this.y=a.z*d.x-a.x*d.z,this.z=a.x*d.y-a.y*d.x,this},getPositionFromMatrix:function(a){return this.x=
a.elements[12],this.y=a.elements[13],this.z=a.elements[14],this},setEulerFromRotationMatrix:function(a,d){var p=a.elements;a=p[0];var e=p[4],k=p[8],f=p[5],h=p[9],r=p[6];p=p[10];return void 0===d||"XYZ"===d?(this.y=Math.asin(c.Math.clamp(k,-1,1)),.99999>Math.abs(k)?(this.x=Math.atan2(-h,p),this.z=Math.atan2(-e,a)):(this.x=Math.atan2(r,f),this.z=0)):console.error("Error with vector's setEulerFromRotationMatrix: Unknown order: "+d),this},rotateAboutVector:function(a,d){a.normalize();var p=Math.cos(d),
e=Math.sin(d);d=this.clone().multiplyScalar(p);e=a.clone().cross(this).multiplyScalar(e);a=a.clone().multiplyScalar(a.clone().dot(this)).multiplyScalar(1-p);a=d.add(e).add(a);return this.x=a.x,this.y=a.y,this.z=a.z,this},setFromMatrixPosition:function(a){a=a.elements;return this.x=a[12],this.y=a[13],this.z=a[14],this},transformDirection:function(a){var d=this.x,p=this.y,e=this.z;a=a.elements;return this.x=a[0]*d+a[4]*p+a[8]*e,this.y=a[1]*d+a[5]*p+a[9]*e,this.z=a[2]*d+a[6]*p+a[10]*e,this.normalize()},
clone:function(){return new c.Vector3(this.x,this.y,this.z)}};c.Matrix3=function(a,d,p,e,k,f,h,r,u){this.elements=new Float32Array(9);this.set(void 0!==a?a:1,d||0,p||0,e||0,void 0!==k?k:1,f||0,h||0,r||0,void 0!==u?u:1)};c.square=function(a){return a*a};c.conversionMatrix3=function(a,d,p,e,k,f){e=e*Math.PI/180;k=k*Math.PI/180;f=f*Math.PI/180;var h=c.square;e=Math.cos(e);k=Math.cos(k);var r=Math.cos(f);f=Math.sin(f);return new c.Matrix3(a,d*r,p*k,0,d*f,p*(e-k*r)/f,0,0,p*Math.sqrt(1-h(e)-h(k)-h(r)+2*
e*k*r)/f)};c.Matrix3.prototype={constructor:c.Matrix3,set:function(a,d,p,e,k,f,h,r,u){var H=this.elements;return H[0]=a,H[3]=d,H[6]=p,H[1]=e,H[4]=k,H[7]=f,H[2]=h,H[5]=r,H[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8])},multiplyScalar:function(a){var d=this.elements;return d[0]*=a,d[3]*=a,d[6]*=a,d[1]*=a,d[4]*=a,d[7]*=a,d[2]*=a,d[5]*=a,d[8]*=a,this},getInverse3:function(a){a=a.elements;var d=
this.elements;d[0]=a[4]*a[8]-a[5]*a[7];d[3]=a[6]*a[5]-a[3]*a[8];d[6]=a[3]*a[7]-a[6]*a[4];d[1]=a[7]*a[2]-a[1]*a[8];d[4]=a[0]*a[8]-a[6]*a[2];d[7]=a[1]*a[6]-a[0]*a[7];d[2]=a[1]*a[5]-a[2]*a[4];d[5]=a[2]*a[3]-a[0]*a[5];d[8]=a[0]*a[4]-a[1]*a[3];return this.multiplyScalar(1/(a[0]*d[0]+a[3]*d[1]+a[6]*d[2])),this},getInverse:function(a,d){a=a.elements;var p=this.elements;p[0]=a[10]*a[5]-a[6]*a[9];p[1]=-a[10]*a[1]+a[2]*a[9];p[2]=a[6]*a[1]-a[2]*a[5];p[3]=-a[10]*a[4]+a[6]*a[8];p[4]=a[10]*a[0]-a[2]*a[8];p[5]=
-a[6]*a[0]+a[2]*a[4];p[6]=a[9]*a[4]-a[5]*a[8];p[7]=-a[9]*a[0]+a[1]*a[8];p[8]=a[5]*a[0]-a[1]*a[4];a=a[0]*p[0]+a[1]*p[3]+a[2]*p[6];if(0===a){if(d)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/a),this},getDeterminant:function(){var a=this.elements;return a[0]*a[4]*a[8]+a[1]*a[5]*a[6]+a[2]*a[3]*a[7]-a[2]*a[4]*a[6]-a[1]*a[3]*a[8]-a[0]*a[5]*a[7]},
getMatrix4:function(){var a=this.elements;return new c.Matrix4(a[0],a[3],a[6],0,a[1],a[4],a[7],0,a[2],a[5],a[8],0)},transpose:function(){var a,d=this.elements;return a=d[1],d[1]=d[3],d[3]=a,a=d[2],d[2]=d[6],d[6]=a,a=d[5],d[5]=d[7],d[7]=a,this},clone:function(){var a=this.elements;return new c.Matrix3(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8])}};c.Matrix4=function(a,d,p,e,k,f,h,r,u,H,z,F,t,q,n,v){if(void 0===d&&void 0!==a)this.elements=new Float32Array(a);else{var x=this.elements=new Float32Array(16);
x[0]=void 0!==a?a:1;x[4]=d||0;x[8]=p||0;x[12]=e||0;x[1]=k||0;x[5]=void 0!==f?f:1;x[9]=h||0;x[13]=r||0;x[2]=u||0;x[6]=H||0;x[10]=void 0!==z?z:1;x[14]=F||0;x[3]=t||0;x[7]=q||0;x[11]=n||0;x[15]=void 0!==v?v:1}};c.Matrix4.prototype={constructor:c.Matrix4,set:function(a,d,p,e,k,f,h,r,u,H,z,F,t,q,n,v){var x=this.elements;return x[0]=a,x[4]=d,x[8]=p,x[12]=e,x[1]=k,x[5]=f,x[9]=h,x[13]=r,x[2]=u,x[6]=H,x[10]=z,x[14]=F,x[3]=t,x[7]=q,x[11]=n,x[15]=v,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,
0,1,0,0,0,0,1),this},copy:function(a){a=a.elements;return this.set(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]),this},matrix3FromTopLeft:function(){var a=this.elements;return new c.Matrix3(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10])},setRotationFromEuler:function(a,d){var p=this.elements,e=a.x,k=a.y,f=a.z;a=Math.cos(e);e=Math.sin(e);var h=Math.cos(k);k=Math.sin(k);var r=Math.cos(f);f=Math.sin(f);if(void 0===d||"XYZ"===d){d=a*r;var u=a*f,H=e*r,z=e*f;p[0]=
h*r;p[4]=-h*f;p[8]=k;p[1]=u+H*k;p[5]=d-z*k;p[9]=-e*h;p[2]=z-d*k;p[6]=H+u*k;p[10]=a*h}else console.error("Error with matrix4 setRotationFromEuler. Order: "+d);return this},setRotationFromQuaternion:function(a){var d=this.elements,p=a.x,e=a.y,k=a.z,f=a.w,h=p+p,r=e+e,u=k+k;a=p*h;var H=p*r;p*=u;var z=e*r;e*=u;k*=u;h*=f;r*=f;f*=u;return d[0]=1-(z+k),d[4]=H-f,d[8]=p+r,d[1]=H+f,d[5]=1-(a+k),d[9]=e-h,d[2]=p-r,d[6]=e+h,d[10]=1-(a+z),this},lookAt:function(){var a=new c.Vector3,d=new c.Vector3,p=new c.Vector3;
return function(e,k,f){var h=this.elements;return p.subVectors(e,k).normalize(),0===p.length()&&(p.z=1),a.crossVectors(f,p).normalize(),0===a.length()&&(p.x+=1E-4,a.crossVectors(f,p).normalize()),d.crossVectors(p,a),h[0]=a.x,h[4]=d.x,h[8]=p.x,h[1]=a.y,h[5]=d.y,h[9]=p.y,h[2]=a.z,h[6]=d.z,h[10]=p.z,this}}(),multiplyMatrices:function(a,d){var p=a.elements,e=d.elements;d=this.elements;a=p[0];var k=p[4],f=p[8],h=p[12],r=p[1],u=p[5],H=p[9],z=p[13],F=p[2],t=p[6],q=p[10],n=p[14],v=p[3],x=p[7],w=p[11];p=p[15];
var D=e[0],E=e[4],Q=e[8],N=e[12],R=e[1],m=e[5],G=e[9],L=e[13],O=e[2],Z=e[6],W=e[10],ha=e[14],ja=e[3],ea=e[7],la=e[11];e=e[15];return d[0]=a*D+k*R+f*O+h*ja,d[4]=a*E+k*m+f*Z+h*ea,d[8]=a*Q+k*G+f*W+h*la,d[12]=a*N+k*L+f*ha+h*e,d[1]=r*D+u*R+H*O+z*ja,d[5]=r*E+u*m+H*Z+z*ea,d[9]=r*Q+u*G+H*W+z*la,d[13]=r*N+u*L+H*ha+z*e,d[2]=F*D+t*R+q*O+n*ja,d[6]=F*E+t*m+q*Z+n*ea,d[10]=F*Q+t*G+q*W+n*la,d[14]=F*N+t*L+q*ha+n*e,d[3]=v*D+x*R+w*O+p*ja,d[7]=v*E+x*m+w*Z+p*ea,d[11]=v*Q+x*G+w*W+p*la,d[15]=v*N+x*L+w*ha+p*e,this},multiplyScalar:function(a){var d=
this.elements;return d[0]*=a,d[4]*=a,d[8]*=a,d[12]*=a,d[1]*=a,d[5]*=a,d[9]*=a,d[13]*=a,d[2]*=a,d[6]*=a,d[10]*=a,d[14]*=a,d[3]*=a,d[7]*=a,d[11]*=a,d[15]*=a,this},makeTranslation:function(a,d,p){return this.set(1,0,0,a,0,1,0,d,0,0,1,p,0,0,0,1),this},snap:function(a){a=Math.pow(10,4);for(var d=this.elements,p=0;16>p;p++){var e=Math.round(d[p]);e==Math.round(d[p]*a)/a&&(d[p]=e)}return this},transpose:function(){var a,d=this.elements;return a=d[1],d[1]=d[4],d[4]=a,a=d[2],d[2]=d[8],d[8]=a,a=d[6],d[6]=d[9],
d[9]=a,a=d[3],d[3]=d[12],d[12]=a,a=d[7],d[7]=d[13],d[13]=a,a=d[11],d[11]=d[14],d[14]=a,this},getPosition:function(){var a=new c.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.getPositionFromMatrix( matrix ) instead.");var d=this.elements;return a.set(d[12],d[13],d[14])}}(),setPosition:function(a){var d=this.elements;return d[12]=a.x,d[13]=a.y,d[14]=a.z,this},translate:function(a){var d=this.elements;return d[12]+=a.x,d[13]+=a.y,d[14]+=a.z,
this},getInverse:function(a,d){var p=this.elements,e=a.elements;a=e[0];var k=e[4],f=e[8],h=e[12],r=e[1],u=e[5],H=e[9],z=e[13],F=e[2],t=e[6],q=e[10],n=e[14],v=e[3],x=e[7],w=e[11];e=e[15];p[0]=H*n*x-z*q*x+z*t*w-u*n*w-H*t*e+u*q*e;p[4]=h*q*x-f*n*x-h*t*w+k*n*w+f*t*e-k*q*e;p[8]=f*z*x-h*H*x+h*u*w-k*z*w-f*u*e+k*H*e;p[12]=h*H*t-f*z*t-h*u*q+k*z*q+f*u*n-k*H*n;p[1]=z*q*v-H*n*v-z*F*w+r*n*w+H*F*e-r*q*e;p[5]=f*n*v-h*q*v+h*F*w-a*n*w-f*F*e+a*q*e;p[9]=h*H*v-f*z*v-h*r*w+a*z*w+f*r*e-a*H*e;p[13]=f*z*F-h*H*F+h*r*q-a*z*
q-f*r*n+a*H*n;p[2]=u*n*v-z*t*v+z*F*x-r*n*x-u*F*e+r*t*e;p[6]=h*t*v-k*n*v-h*F*x+a*n*x+k*F*e-a*t*e;p[10]=k*z*v-h*u*v+h*r*x-a*z*x-k*r*e+a*u*e;p[14]=h*u*F-k*z*F-h*r*t+a*z*t+k*r*n-a*u*n;p[3]=H*t*v-u*q*v-H*F*x+r*q*x+u*F*w-r*t*w;p[7]=k*q*v-f*t*v+f*F*x-a*q*x-k*F*w+a*t*w;p[11]=f*u*v-k*H*v-f*r*x+a*H*x+k*r*w-a*u*w;p[15]=k*H*F-f*u*F+f*r*t-a*H*t-k*r*q+a*u*q;p=a*p[0]+r*p[4]+F*p[8]+v*p[12];if(0===p){if(d)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0"),
this.identity(),this}return this.multiplyScalar(1/p),this},isReflected:function(){var a=this.elements,d=a[0],p=a[4],e=a[8],k=a[1],f=a[5],h=a[9],r=a[2],u=a[6];a=a[10];return 0>d*f*a+k*u*e+r*p*h-r*f*e-k*p*a-d*u*h},compose:function(){var a=new c.Matrix4,d=new c.Matrix4;return function(p,e,k){var f=this.elements;return a.identity(),a.setRotationFromQuaternion(e),d.makeScale(k.x,k.y,k.z),this.multiplyMatrices(a,d),f[12]=p.x,f[13]=p.y,f[14]=p.z,this}}(),getScale:function(){var a=new c.Vector3,d=new c.Vector3,
p=new c.Vector3;return function(e){var k=this.elements;return e=e instanceof c.Vector3?e:new c.Vector3,a.set(k[0],k[1],k[2]),d.set(k[4],k[5],k[6]),p.set(k[8],k[9],k[10]),e.x=a.length(),e.y=d.length(),e.z=p.length(),e}}(),decompose:function(){var a=new c.Vector3,d=new c.Vector3,p=new c.Vector3,e=new c.Matrix4;return function(k,f,h){var r=this.elements;return a.set(r[0],r[1],r[2]),d.set(r[4],r[5],r[6]),p.set(r[8],r[9],r[10]),k=k instanceof c.Vector3?k:new c.Vector3,f=f instanceof c.Quaternion?f:new c.Quaternion,
(h=h instanceof c.Vector3?h:new c.Vector3).x=a.length(),h.y=d.length(),h.z=p.length(),k.x=r[12],k.y=r[13],k.z=r[14],e.copy(this),e.elements[0]/=h.x,e.elements[1]/=h.x,e.elements[2]/=h.x,e.elements[4]/=h.y,e.elements[5]/=h.y,e.elements[6]/=h.y,e.elements[8]/=h.z,e.elements[9]/=h.z,e.elements[10]/=h.z,f.setFromRotationMatrix(e),[k,f,h]}}(),scale:function(a){var d=this.elements,p=a.x,e=a.y;a=a.z;return d[0]*=p,d[4]*=e,d[8]*=a,d[1]*=p,d[5]*=e,d[9]*=a,d[2]*=p,d[6]*=e,d[10]*=a,d[3]*=p,d[7]*=e,d[11]*=a,
this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeFrustum:function(a,d,p,e,k,f){var h=this.elements;return h[0]=2*k/(d-a),h[4]=0,h[8]=(d+a)/(d-a),h[12]=0,h[1]=0,h[5]=2*k/(e-p),h[9]=(e+p)/(e-p),h[13]=0,h[2]=0,h[6]=0,h[10]=-(f+k)/(f-k),h[14]=-2*f*k/(f-k),h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this},makePerspective:function(a,d,p,e){a=p*Math.tan(c.Math.degToRad(.5*a));var k=
-a;return this.makeFrustum(k*d,a*d,k,a,p,e)},makeOrthographic:function(a,d,p,e,k,f){var h=this.elements,r=1/(d-a),u=1/(p-e),H=1/(f-k);return h[0]=2*r,h[4]=0,h[8]=0,h[12]=-((d+a)*r),h[1]=0,h[5]=2*u,h[9]=0,h[13]=-((p+e)*u),h[2]=0,h[6]=0,h[10]=-2*H,h[14]=-((f+k)*H),h[3]=0,h[7]=0,h[11]=0,h[15]=1,this},isEqual:function(a){a=a.elements;var d=this.elements;return d[0]==a[0]&&d[4]==a[4]&&d[8]==a[8]&&d[12]==a[12]&&d[1]==a[1]&&d[5]==a[5]&&d[9]==a[9]&&d[13]==a[13]&&d[2]==a[2]&&d[6]==a[6]&&d[10]==a[10]&&d[14]==
a[14]&&d[3]==a[3]&&d[7]==a[7]&&d[11]==a[11]&&d[15]==a[15]},clone:function(){var a=this.elements;return new c.Matrix4(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])},isIdentity:function(){var a=this.elements;return 1==a[0]&&0==a[4]&&0==a[8]&&0==a[12]&&0==a[1]&&1==a[5]&&0==a[9]&&0==a[13]&&0==a[2]&&0==a[6]&&1==a[10]&&0==a[14]&&0==a[3]&&0==a[7]&&0==a[11]&&1==a[15]},isNearlyIdentity:function(a){return this.clone().snap(a).isIdentity()}};c.Vector3.prototype.unproject=
function(){var a=new c.Matrix4;return function(d){return a.multiplyMatrices(d.matrixWorld,a.getInverse(d.projectionMatrix)),this.applyMatrix4(a)}}();c.Ray=function(a,d){this.origin=void 0!==a?a:new c.Vector3;this.direction=void 0!==d?d:new c.Vector3};c.Ray.prototype={constructor:c.Ray,set:function(a,d){return this.origin.copy(a),this.direction.copy(d),this},copy:function(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this},at:function(a,d){return(d||new c.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},
recast:function(){var a=new c.Vector3;return function(d){return this.origin.copy(this.at(d,a)),this}}(),closestPointToPoint:function(a,d){d=d||new c.Vector3;d.subVectors(a,this.origin);a=d.dot(this.direction);return d.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(){var a=new c.Vector3;return function(d){var p=a.subVectors(d,this.origin).dot(this.direction);return a.copy(this.direction).multiplyScalar(p).add(this.origin),a.distanceTo(d)}}(),isIntersectionCylinder:function(){},
isIntersectionSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},isIntersectionPlane:function(a){return 0!==a.normal.dot(this.direction)||0===a.distanceToPoint(this.origin)},distanceToPlane:function(a){var d=a.normal.dot(this.direction);return 0===d?0===a.distanceToPoint(this.origin)?0:void 0:-(this.origin.dot(a.normal)+a.constant)/d},intersectPlane:function(a,d){a=this.distanceToPlane(a);if(void 0!==a)return this.at(a,d)},applyMatrix4:function(a){return this.direction.add(this.origin).applyMatrix4(a),
this.origin.applyMatrix4(a),this.direction.sub(this.origin),this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)},clone:function(){return(new c.Ray).copy(this)}};c.Sphere=function(a,d){this.center=void 0!==a?a:new c.Vector3;this.radius=void 0!==d?d:0};c.Sphere.prototype={constructor:c.Sphere,set:function(a,d){return this.center.copy(a),this.radius=d,this},copy:function(a){return this.center.copy(a.center),this.radius=a.radius,this},applyMatrix4:function(a){return this.center.applyMatrix4(a),
this.radius*=a.getMaxScaleOnAxis(),this},translate:function(a){return this.center.add(a),this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius},clone:function(){return(new c.Sphere).copy(this)}};c.Cylinder=function(a,d,p){this.c1=void 0!==a?a:new c.Vector3;this.c2=void 0!==d?d:new c.Vector3;this.direction=(new c.Vector3).subVectors(this.c2,this.c1).normalize();this.radius=void 0!==p?p:0};c.Cylinder.prototype={constructor:c.Cylinder,copy:function(a){return this.c1.copy(a.c1),
this.c2.copy(a.c2),this.direction.copy(a.direction),this.radius=a.radius,this},lengthSq:function(){var a=new c.Vector3;return function(){return a.subVectors(this.c2,this.c1).lengthSq()}}(),applyMatrix4:function(a){return this.direction.add(this.c1).applyMatrix4(a),this.c1.applyMatrix4(a),this.c2.applyMatrix4(a),this.direction.sub(this.c1).normalize(),this.radius*=a.getMaxScaleOnAxis(),this}};c.Triangle=function(a,d,p){this.a=void 0!==a?a:new c.Vector3;this.b=void 0!==d?d:new c.Vector3;this.c=void 0!==
p?p:new c.Vector3};c.Triangle.prototype={constructor:c.Triangle,copy:function(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this},applyMatrix4:function(a){return this.a.applyMatrix4(a),this.b.applyMatrix4(a),this.c.applyMatrix4(a),this},getNormal:function(){var a=new c.Vector3;return function(){var d=this.a.clone();return d.sub(this.b),a.subVectors(this.c,this.b),d.cross(a),d.normalize(),d}}()};c.EventDispatcher=function(){var a={};this.addEventListener=function(d,p){void 0===a[d]&&
(a[d]=[]);-1===a[d].indexOf(p)&&a[d].push(p)};this.removeEventListener=function(d,p){p=a[d].indexOf(p);-1!==p&&a[d].splice(p,1)};this.dispatchEvent=function(d){var p=a[d.type];if(void 0!==p){d.target=this;for(var e=0,k=p.length;e<k;e++)p[e].call(this,d)}}};c.Color=function(a){return 1<arguments.length?(this.r=arguments[0]||0,this.g=arguments[1]||0,this.b=arguments[2]||0,this):this.set(a)};c.Color.prototype={constructor:c.Color,r:0,g:0,b:0,set:function(a){if(a instanceof c.Color)return a.clone();"number"==
typeof a?this.setHex(a):"object"==typeof a&&"r"in a&&"g"in a&&"b"in a&&(this.r=a.r,this.g=a.g,this.b=a.b)},setHex:function(a){return a=Math.floor(a),this.r=(a>>16&255)/255,this.g=(a>>8&255)/255,this.b=(255&a)/255,this},getHex:function(){return Math.round(255*this.r)<<16|Math.round(255*this.g)<<8|Math.round(255*this.b)},clone:function(){return new c.Color(this.r,this.g,this.b)},copy:function(a){return this.r=a.r,this.g=a.g,this.b=a.b,this},scaled:function(){var a={};return a.r=Math.round(255*this.r),
a.g=Math.round(255*this.g),a.b=Math.round(255*this.b),a.a=1,a}};c.Object3D=function(){this.id=c.Object3DIDCount++;this.name="";this.parent=void 0;this.children=[];this.position=new c.Vector3;this.rotation=new c.Vector3;this.matrix=new c.Matrix4;this.matrixWorld=new c.Matrix4;this.quaternion=new c.Quaternion;this.eulerOrder="XYZ";this.up=new c.Vector3(0,1,0);this.scale=new c.Vector3(1,1,1);this.rotationAutoUpdate=this.matrixWorldNeedsUpdate=this.matrixAutoUpdate=!0;this.useQuaternion=!1;this.visible=
!0};c.Object3D.prototype={constructor:c.Object3D,lookAt:function(a){this.matrix.lookAt(a,this.position,this.up);this.rotationAutoUpdate&&(!0===this.useQuaternion?this.quaternion.copy(this.matrix.decompose()[1]):this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))},add:function(a){if(a!==this){a.parent=this;this.children.push(a);for(var d=this;void 0!==d.parent;)d=d.parent;void 0!==d&&d instanceof c.Scene&&d.__addObject(a)}else console.error("Can't add $3Dmol.Object3D to itself")},
remove:function(a){var d=this.children.indexOf(a);if(-1!==d){a.parent=void 0;this.children.splice(d,1);for(d=this;void 0!==d.parent;)d=d.parent;void 0!==d&&d instanceof c.Scene&&d.__removeObject(a)}},vrml:function(a){a||(a=" ");var d=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),p=0,e=0,k=0;0!=d&&(k=Math.sin(d/2),p=this.quaternion.x/k,e=this.quaternion.y/k,k=this.quaternion.z/k);d=a+"Transform {\n"+a+" center "+this.position.x+" "+this.position.y+" "+this.position.z+"\n"+a+" rotation "+
p+" "+e+" "+k+" "+d+"\n"+a+" children [\n";this.geometry&&(d+=this.geometry.vrml(a,this.material));for(p=0;p<this.children.length;p++)d+=this.children[p].vrml(a+" ")+",\n";return d+=" ]\n",d+"}"},updateMatrix:function(){this.matrix.setPosition(this.position);!1===this.useQuaternion?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion);1===this.scale.x&&1===this.scale.y&&1===this.scale.z||this.matrix.scale(this.scale);this.matrixWorldNeedsUpdate=
!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();!0!==this.matrixWorldNeedsUpdate&&!0!==a||(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix));this.matrixWorldNeedsUpdate=!1;for(a=0;a<this.children.length;a++)this.children[a].updateMatrixWorld(!0)},clone:function(a){void 0===a&&(a=new c.Object3D);a.name=this.name;a.up.copy(this.up);a.position.copy(this.position);a.rotation.copy(this.rotation);
a.eulerOrder=this.eulerOrder;a.scale.copy(this.scale);a.rotationAutoUpdate=this.rotationAutoUpdate;a.matrix.copy(this.matrix);a.matrixWorld.copy(this.matrixWorld);a.quaternion.copy(this.quaternion);a.matrixAutoUpdate=this.matrixAutoUpdate;a.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate;a.useQuaternion=this.useQuaternion;a.visible=this.visible;for(var d=0;d<this.children.length;d++)a.add(this.children[d].clone());return a},setVisible:function(a){this.visible=a;for(var d=0;d<this.children.length;d++)this.children[d].setVisible(a)}};
c.Object3DIDCount=0;c.Geometry=function(){var a=function(e){this.id=e||0;this.lineArray=this.radiusArray=this.faceArray=this.normalArray=this.colorArray=this.vertexArray=null;this.lineidx=this.faceidx=this.vertices=0};a.prototype.setColors=function(e){var k=this.vertexArray,f=this.colorArray;if(k.length==f.length)for(var h=0;h<k.length;h+=3){var r=e(k[h],k[h+1],k[h+2]);r instanceof c.Color||(r=c.CC.color(r));f[h]=r.r;f[h+1]=r.g;f[h+2]=r.b}else console.log("Cannot re-color geometry group due to mismatched lengths.")};
a.prototype.getNumVertices=function(){return this.vertices};a.prototype.getVertices=function(){return this.vertexArray};a.prototype.getCentroid=function(){for(var e,k,f,h=new c.Vector3,r=0;r<this.vertices;++r)e=3*r,k=this.vertexArray[e],f=this.vertexArray[e+1],e=this.vertexArray[e+2],h.x+=k,h.y+=f,h.z+=e;return h.divideScalar(this.vertices),h};a.prototype.setNormals=function(){var e=this.faceArray,k=this.vertexArray,f=this.normalArray;if(this.vertices&&this.faceidx)for(var h,r,u,H,z,F,t=0;t<e.length/
3;++t)h=3*e[3*t],r=3*e[3*t+1],u=3*e[3*t+2],H=new c.Vector3(k[h],k[h+1],k[h+2]),z=new c.Vector3(k[r],k[r+1],k[r+2]),F=new c.Vector3(k[u],k[u+1],k[u+2]),H.subVectors(H,z),F.subVectors(F,z),F.cross(H),(H=F).normalize(),f[h]+=H.x,f[r]+=H.x,f[u]+=H.x,f[h+1]+=H.y,f[r+1]+=H.y,f[u+1]+=H.y,f[h+2]+=H.z,f[r+2]+=H.z,f[u+2]+=H.z};a.prototype.setLineIndices=function(){if(this.faceidx&&(!this.lineArray||this.lineArray.length!=2*this.faceidx||this.lineidx!=2*this.faceidx)){var e=this.faceArray,k=this.lineArray=new Uint16Array(2*
this.faceidx);this.lineidx=2*this.faceidx;for(var f=0;f<this.faceidx/3;++f){var h=3*f,r=2*h,u=e[h],H=e[h+1];h=e[h+2];k[r]=u;k[r+1]=H;k[r+2]=u;k[r+3]=h;k[r+4]=H;k[r+5]=h}}};a.prototype.vrml=function(e,k){var f=e+"Shape {\n"+e+" appearance Appearance {\n"+e+"  material Material {\n"+e+"   diffuseColor "+k.color.r+" "+k.color.g+" "+k.color.b+"\n";k.transparent&&(f+=e+"   transparency "+(1-k.opacity)+"\n");f=f+(e+"  }\n")+(e+" }\n");var h=e;if(e+=" ",k instanceof c.LineBasicMaterial){f+=e+"geometry IndexedLineSet {\n"+
e+" colorPerVertex TRUE\n"+e+" coord Coordinate {\n"+e+"  point [\n";for(var r=0;r<this.vertices;++r){var u=3*r;k=this.vertexArray[u];var H=this.vertexArray[u+1];u=this.vertexArray[u+2];f+=e+"   "+k+" "+H+" "+u+",\n"}if(f+=e+"  ]\n",f+=e+" }\n",this.colorArray){f+=e+" color Color {\n"+e+"  color [\n";for(r=0;r<this.vertices;++r)u=3*r,k=this.colorArray[u],H=this.colorArray[u+1],u=this.colorArray[u+2],f+=e+"   "+k+" "+H+" "+u+",\n";f=f+(e+"  ]\n")+(e+" }\n")}f+=e+" coordIndex [\n";for(k=0;k<this.vertices;k+=
2)f+=e+"  "+k+", "+(k+1)+", -1,\n"}else{f=f+(e+"geometry IndexedFaceSet {\n"+e+" colorPerVertex TRUE\n"+e+" normalPerVertex TRUE\n"+e+" solid FALSE\n")+(e+" coord Coordinate {\n"+e+"  point [\n");for(r=0;r<this.vertices;++r)u=3*r,k=this.vertexArray[u],H=this.vertexArray[u+1],u=this.vertexArray[u+2],f+=e+"   "+k+" "+H+" "+u+",\n";f=f+(e+"  ]\n")+(e+" }\n")+(e+" normal Normal {\n"+e+"  vector [\n");for(r=0;r<this.vertices;++r)u=3*r,k=this.normalArray[u],H=this.normalArray[u+1],u=this.normalArray[u+
2],f+=e+"   "+k+" "+H+" "+u+",\n";if(f+=e+"  ]\n",f+=e+" }\n",this.colorArray){f+=e+" color Color {\n"+e+"  color [\n";for(r=0;r<this.vertices;++r)u=3*r,k=this.colorArray[u],H=this.colorArray[u+1],u=this.colorArray[u+2],f+=e+"   "+k+" "+H+" "+u+",\n";f=f+(e+"  ]\n")+(e+" }\n")}f+=e+" coordIndex [\n";for(r=0;r<this.faceidx;r+=3)k=this.faceArray[r],H=this.faceArray[r+1],u=this.faceArray[r+2],f+=e+"  "+k+", "+H+", "+u+", -1,\n"}return f+(e+" ]\n")+(e+"}\n")+(h+"}")};a.prototype.truncateArrayBuffers=
function(e,k){e=!0===e;var f=this.colorArray,h=this.normalArray,r=this.faceArray,u=this.lineArray,H=this.radiusArray;this.vertexArray=this.vertexArray.subarray(0,3*this.vertices);this.colorArray=f.subarray(0,3*this.vertices);e?(this.normalArray=h.subarray(0,3*this.vertices),this.faceArray=r.subarray(0,this.faceidx),0<this.lineidx?this.lineArray=u.subarray(0,this.lineidx):this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0));
H&&(this.radiusArray=H.subarray(0,this.vertices));k&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray)));this.__inittedArrays=!0};var d=
function(e){var k=new a(e.geometryGroups.length);return e.geometryGroups.push(k),e.groups=e.geometryGroups.length,k.vertexArray=new Float32Array(196605),k.colorArray=new Float32Array(196605),e.mesh&&(k.normalArray=new Float32Array(196605),k.faceArray=new Uint16Array(393210),k.lineArray=new Uint16Array(393210)),e.radii&&(k.radiusArray=new Float32Array(65535)),k.useOffset=e.offset,k},p=function(e,k,f){c.EventDispatcher.call(this);this.id=c.GeometryIDCount++;this.name="";this.hasTangents=!1;this.dynamic=
!0;this.mesh=!0===e;this.radii=k||!1;this.offset=f||!1;this.buffersNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1;this.geometryGroups=[];this.groups=0};return p.prototype={constructor:p,updateGeoGroup:function(e){var k=0<this.groups?this.geometryGroups[this.groups-1]:null;return(!k||k.vertices+(e||0)>k.vertexArray.length/3)&&(k=d(this)),k},vrml:function(e,k){for(var f="",h=this.geometryGroups.length,r=0;r<h;r++)f+=this.geometryGroups[r].vrml(e,
k)+",\n";return f},addGeoGroup:function(){return d(this)},setUpNormals:function(e){e=e||!1;for(var k=0;k<this.groups;k++)this.geometryGroups[k].setNormals(e)},setColors:function(e){for(var k=this.geometryGroups.length,f=0;f<k;f++)this.geometryGroups[f].setColors(e)},setUpWireframe:function(){for(var e=0;e<this.groups;e++)this.geometryGroups[e].setLineIndices()},initTypedArrays:function(){for(var e=0;e<this.groups;e++){var k=this.geometryGroups[e];!0!==k.__inittedArrays&&k.truncateArrayBuffers(this.mesh,
!1)}},dispose:function(){this.dispatchEvent({type:"dispose"})}},p}();Object.defineProperty(c.Geometry.prototype,"vertices",{get:function(){for(var a=0,d=0;d<this.groups;d++)a+=this.geometryGroups[d].vertices;return a}});c.GeometryIDCount=0;c.Raycaster=function(){var a,d=function(F,t,q,n){this.ray=new c.Ray(F,t);0<this.ray.direction.lengthSq()&&this.ray.direction.normalize();this.near=n||0;this.far=q||1/0},p=new c.Sphere,e=new c.Cylinder,k=new c.Triangle,f=new c.Vector3,h=new c.Vector3,r=new c.Vector3,
u=new c.Vector3,H=new c.Vector3,z=function(F,t){return F.distance-t.distance};return d.prototype.precision=1E-4,d.prototype.linePrecision=.2,d.prototype.set=function(F,t){this.ray.set(F,t)},d.prototype.setFromCamera=(a=new c.Matrix4,function(F,t){t.ortho?(this.ray.origin.set(F.x,F.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(F.x,F.y,F.z),t.projectionMatrixInverse.getInverse(t.projectionMatrix),
a.multiplyMatrices(t.matrixWorld,t.projectionMatrixInverse),this.ray.direction.applyProjection(a),this.ray.direction.sub(this.ray.origin).normalize())}),d.prototype.intersectObjects=function(F,t){for(var q=[],n=0,v=t.length;n<v;n++)a:{var x=void 0,w=void 0,D=void 0,E=void 0,Q=void 0,N=void 0,R=void 0,m=void 0,G,L=void 0;var O=void 0;var Z=F,W=t[n],ha=q;if(H.getPositionFromMatrix(Z.matrixWorld),void 0!==W.intersectionShape){var ja=W.intersectionShape;var ea=this.linePrecision;var la=(ea*=Z.matrixWorld.getMaxScaleOnAxis())*
ea;if(!(void 0!==W.boundingSphere&&W.boundingSphere instanceof c.Sphere)||(p.copy(W.boundingSphere),p.applyMatrix4(Z.matrixWorld),this.ray.isIntersectionSphere(p))){var oa=0;for(ea=ja.triangle.length;oa<ea;oa++)if(ja.triangle[oa]instanceof c.Triangle&&!(k.copy(ja.triangle[oa]),k.applyMatrix4(Z.matrixWorld),O=k.getNormal(),0<=(L=this.ray.direction.dot(O)))&&!(f.subVectors(k.a,this.ray.origin),0>(R=O.dot(f)/L))){h.copy(this.ray.direction).multiplyScalar(R).add(this.ray.origin);h.sub(k.a);r.copy(k.b).sub(k.a);
u.copy(k.c).sub(k.a);var wa=r.dot(u),U=r.lengthSq(),A=u.lengthSq();0>(D=(U*h.dot(u)-wa*h.dot(r))/(U*A-wa*wa))||1<D||0>(E=(h.dot(r)-D*wa)/U)||1<E||1<E+D||ha.push({clickable:W,distance:R})}oa=0;for(ea=ja.cylinder.length;oa<ea;oa++)ja.cylinder[oa]instanceof c.Cylinder&&(e.copy(ja.cylinder[oa]),e.applyMatrix4(Z.matrixWorld),f.subVectors(e.c1,this.ray.origin),G=f.dot(e.direction),m=f.dot(this.ray.direction),0!==(N=1-(L=Math.min(Math.max(this.ray.direction.dot(e.direction),-1),1))*L))&&(w=(L*m-G)/N,x=(m-
L*G)/N,h.copy(e.direction).multiplyScalar(w).add(e.c1),r.copy(this.ray.direction).multiplyScalar(x).add(this.ray.origin),O=u.subVectors(h,r).lengthSq(),wa=e.radius*e.radius,O<=wa&&!(0>(E=L*(D=R=0>=(Q=(L*G-m)*(L*G-m)-N*(f.lengthSq()-G*G-wa))?Math.sqrt(O):(m-L*G-Math.sqrt(Q))/N)-G)||E*E>e.lengthSq()||0>D)&&ha.push({clickable:W,distance:R}));oa=0;for(ea=ja.line.length;oa<ea;oa+=2)h.copy(ja.line[oa]),h.applyMatrix4(Z.matrixWorld),r.copy(ja.line[oa+1]),r.applyMatrix4(Z.matrixWorld),u.subVectors(r,h),Q=
u.lengthSq(),u.normalize(),f.subVectors(h,this.ray.origin),D=f.dot(u),m=f.dot(this.ray.direction),0!==(N=1-(L=Math.min(Math.max(this.ray.direction.dot(u),-1),1))*L)&&(w=(L*m-D)/N,x=(m-L*D)/N,h.add(u.multiplyScalar(w)),r.copy(this.ray.direction).multiplyScalar(x).add(this.ray.origin),u.subVectors(r,h).lengthSq()<la&&w*w<Q&&ha.push({clickable:W,distance:x}));oa=0;for(ea=ja.sphere.length;oa<ea;oa++)if(ja.sphere[oa]instanceof c.Sphere&&(p.copy(ja.sphere[oa]),p.applyMatrix4(Z.matrixWorld),this.ray.isIntersectionSphere(p))){h.subVectors(p.center,
this.ray.origin);x=h.dot(this.ray.direction);if(Q=x*x-(h.lengthSq()-p.radius*p.radius),0>x)break a;R=0>=Q?x:x-Math.sqrt(Q);ha.push({clickable:W,distance:R})}}}}return q.sort(z),q},d}();c.Projector=function(){var a=new c.Matrix4;this.projectVector=function(d,p){return p.matrixWorldInverse.getInverse(p.matrixWorld),a.multiplyMatrices(p.projectionMatrix,p.matrixWorldInverse),d.applyProjection(a)};this.unprojectVector=function(d,p){return p.projectionMatrixInverse.getInverse(p.projectionMatrix),a.multiplyMatrices(p.matrixWorld,
p.projectionMatrixInverse),d.applyProjection(a)}};c.Camera=function(a,d,p,e,k){c.Object3D.call(this);this.fov=void 0!==a?a:50;this.aspect=void 0!==d?d:1;this.near=void 0!==p?p:.1;this.far=void 0!==e?e:2E3;this.projectionMatrix=new c.Matrix4;this.projectionMatrixInverse=new c.Matrix4;this.matrixWorldInverse=new c.Matrix4;this.right=this.position.z*Math.tan(Math.PI/180*a);this.left=-this.right;this.top=this.right/this.aspect;this.bottom=-this.top;this.ortho=!!k;this.updateProjectionMatrix()};c.Camera.prototype=
Object.create(c.Object3D.prototype);c.Camera.prototype.lookAt=function(a){this.matrix.lookAt(this.position,a,this.up);this.rotationAutoUpdate&&(!1===this.useQuaternion?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):this.quaternion.copy(this.matrix.decompose()[1]))};c.Camera.prototype.updateProjectionMatrix=function(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,
this.aspect,this.near,this.far);this.projectionMatrixInverse.getInverse(this.projectionMatrix)};c.SpritePlugin=function(){function a(F,t){return F.z!==t.z?t.z-F.z:t.id-F.id}var d,p,e,k,f,h,r,u,H,z;this.init=function(F){d=F.context;p=F;e=F.getPrecision();k=new Float32Array(16);f=new Uint16Array(6);F=0;k[F++]=-1;k[F++]=-1;k[F++]=0;k[F++]=0;k[F++]=1;k[F++]=-1;k[F++]=1;k[F++]=0;k[F++]=1;k[F++]=1;k[F++]=1;k[F++]=1;k[F++]=-1;k[F++]=1;k[F++]=0;k[F++]=1;F=0;f[F++]=0;f[F++]=1;f[F++]=2;f[F++]=0;f[F++]=2;f[F++]=
3;h=d.createBuffer();r=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,h);d.bufferData(d.ARRAY_BUFFER,k,d.STATIC_DRAW);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,r);d.bufferData(d.ELEMENT_ARRAY_BUFFER,f,d.STATIC_DRAW);F=c.ShaderLib.sprite;var t=e,q=d.createProgram(),n=d.createShader(d.FRAGMENT_SHADER),v=d.createShader(d.VERTEX_SHADER);t="precision "+t+" float;\n";(d.shaderSource(n,t+F.fragmentShader),d.shaderSource(v,t+F.vertexShader),d.compileShader(n),d.compileShader(v),d.getShaderParameter(n,d.COMPILE_STATUS)&&
d.getShaderParameter(v,d.COMPILE_STATUS))?(d.attachShader(q,n),d.attachShader(q,v),d.linkProgram(q),d.getProgramParameter(q,d.LINK_STATUS)||console.error("Could not initialize shader"),F=q):F=(console.error(d.getShaderInfoLog(n)),console.error("could not initialize shader"),null);u=F;H={};z={};H.position=d.getAttribLocation(u,"position");H.uv=d.getAttribLocation(u,"uv");z.uvOffset=d.getUniformLocation(u,"uvOffset");z.uvScale=d.getUniformLocation(u,"uvScale");z.rotation=d.getUniformLocation(u,"rotation");
z.scale=d.getUniformLocation(u,"scale");z.alignment=d.getUniformLocation(u,"alignment");z.color=d.getUniformLocation(u,"color");z.map=d.getUniformLocation(u,"map");z.opacity=d.getUniformLocation(u,"opacity");z.useScreenCoordinates=d.getUniformLocation(u,"useScreenCoordinates");z.screenPosition=d.getUniformLocation(u,"screenPosition");z.modelViewMatrix=d.getUniformLocation(u,"modelViewMatrix");z.projectionMatrix=d.getUniformLocation(u,"projectionMatrix");z.fogType=d.getUniformLocation(u,"fogType");
z.fogDensity=d.getUniformLocation(u,"fogDensity");z.fogNear=d.getUniformLocation(u,"fogNear");z.fogFar=d.getUniformLocation(u,"fogFar");z.fogColor=d.getUniformLocation(u,"fogColor");z.alphaTest=d.getUniformLocation(u,"alphaTest")};this.render=function(F,t,q,n,v){var x=[];F.__webglSprites.forEach(function(ea){(v&&0==ea.material.depthTest||!v&&ea.material.depthTest)&&x.push(ea)});var w=x.length;if(w){var D=H,E=z,Q=.5*q,N=.5*n;d.useProgram(u);d.enableVertexAttribArray(D.position);d.enableVertexAttribArray(D.uv);
d.disable(d.CULL_FACE);d.enable(d.BLEND);d.bindBuffer(d.ARRAY_BUFFER,h);d.vertexAttribPointer(D.position,2,d.FLOAT,!1,16,0);d.vertexAttribPointer(D.uv,2,d.FLOAT,!1,16,8);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,r);d.uniformMatrix4fv(E.projectionMatrix,!1,t.projectionMatrix.elements);d.activeTexture(d.TEXTURE0);d.uniform1i(E.map,0);var R=D=0,m=F.fog;m?(d.uniform3f(E.fogColor,m.color.r,m.color.g,m.color.b),d.uniform1f(E.fogNear,m.near),d.uniform1f(E.fogFar,m.far),d.uniform1i(E.fogType,1),D=1,R=1):(d.uniform1i(E.fogType,
0),D=0,R=0);var G,L,O,Z=[];for(m=0;m<w;m++)(0!=(L=(G=x[m]).material).depthTest||v)&&G.visible&&0!==L.opacity&&(L.useScreenCoordinates?G.z=-G.position.z:(G._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,G.matrixWorld),G.z=-G._modelViewMatrix.elements[14]));x.sort(a);for(m=0;m<w;m++)if(L=(G=x[m]).material,G.visible&&0!==L.opacity&&L.map&&L.map.image&&L.map.image.width){d.uniform1f(E.alphaTest,L.alphaTest);t=L.map.image.width;var W=L.map.image.height;Z[0]=t*p.devicePixelRatio/q;Z[1]=W*p.devicePixelRatio/
n;!0===L.useScreenCoordinates?(d.uniform1i(E.useScreenCoordinates,1),d.uniform3f(E.screenPosition,(G.position.x*p.devicePixelRatio-Q)/Q,(N-G.position.y*p.devicePixelRatio)/N,Math.max(0,Math.min(1,G.position.z)))):(d.uniform1i(E.useScreenCoordinates,0),d.uniformMatrix4fv(E.modelViewMatrix,!1,G._modelViewMatrix.elements));D!==(O=F.fog&&L.fog?R:0)&&(d.uniform1i(E.fogType,O),D=O);var ha=1/(L.scaleByViewport?n:1);Z[0]=Z[0]*ha*G.scale.x;Z[1]=Z[1]*ha*G.scale.y;ha=L.alignment.x;var ja=L.alignment.y;L.screenOffset&&
(ha+=2*L.screenOffset.x/t,ja+=2*L.screenOffset.y/W);d.uniform2f(E.uvScale,L.uvScale.x,L.uvScale.y);d.uniform2f(E.uvOffset,L.uvOffset.x,L.uvOffset.y);d.uniform2f(E.alignment,ha,ja);d.uniform1f(E.opacity,L.opacity);d.uniform3f(E.color,L.color.r,L.color.g,L.color.b);d.uniform1f(E.rotation,G.rotation);d.uniform2fv(E.scale,Z);p.setDepthTest(L.depthTest);p.setDepthWrite(L.depthWrite);p.setTexture(L.map,0);d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0)}d.enable(d.CULL_FACE)}}};c.Light=function(a,d){c.Object3D.call(this);
this.color=new c.Color(a);this.position=new c.Vector3(0,1,0);this.target=new c.Object3D;this.intensity=void 0!==d?d:1;this.onlyShadow=this.castShadow=!1};c.Light.prototype=Object.create(c.Object3D.prototype);c.Material=function(){c.EventDispatcher.call(this);this.id=c.MaterialIdCount++;this.name="";this.side=c.FrontSide;this.opacity=1;this.transparent=!1;this.stencilTest=this.depthWrite=this.depthTest=!0;this.polygonOffset=!1;this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.needsUpdate=
this.visible=!0};c.Material.prototype.setValues=function(a){if(void 0!==a)for(var d in a){var p=a[d];if(void 0!==p){if(d in this){var e=this[d];e instanceof c.Color&&p instanceof c.Color?e.copy(p):e instanceof c.Color?e.set(p):e instanceof c.Vector3&&p instanceof c.Vector3?e.copy(p):this[d]=p}}else console.warn("$3Dmol.Material: '"+d+"' parameter is undefined.")}};c.Material.prototype.clone=function(a){return void 0===a&&(a=new c.Material),a.name=this.name,a.side=this.side,a.opacity=this.opacity,
a.transparent=this.transparent,a.depthTest=this.depthTest,a.depthWrite=this.depthWrite,a.stencilTest=this.stencilTest,a.polygonOffset=this.polygonOffset,a.polygonOffsetFactor=this.polygonOffsetFactor,a.polygonOffsetUnits=this.polygonOffsetUnits,a.alphaTest=this.alphaTest,a.overdraw=this.overdraw,a.visible=this.visible,a};c.Material.prototype.dispose=function(){this.dispatchEvent({type:"dispose"})};c.MaterialIdCount=0;c.LineBasicMaterial=function(a){c.Material.call(this);this.color=new c.Color(16777215);
this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=!1;this.fog=!0;this.shaderID="basic";this.setValues(a)};c.LineBasicMaterial.prototype=Object.create(c.Material.prototype);c.LineBasicMaterial.prototype.clone=function(){var a=new c.LineBasicMaterial;return c.Material.prototype.clone.call(this,a),a.color.copy(this.color),a};c.MeshLambertMaterial=function(a){c.Material.call(this);this.color=new c.Color(16777215);this.ambient=new c.Color(1048575);this.emissive=new c.Color(0);this.wrapAround=
!1;this.wrapRGB=new c.Vector3(1,1,1);this.envMap=this.specularMap=this.lightMap=this.map=null;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.shading=c.SmoothShading;this.shaderID="lambert";this.vertexColors=c.NoColors;this.skinning=!1;this.setValues(a)};c.MeshLambertMaterial.prototype=Object.create(c.Material.prototype);c.MeshLambertMaterial.prototype.clone=function(a){return void 0===a&&
(a=new c.MeshLambertMaterial),c.Material.prototype.clone.call(this,a),a.color.copy(this.color),a.ambient.copy(this.ambient),a.emissive.copy(this.emissive),a.wrapAround=this.wrapAround,a.wrapRGB.copy(this.wrapRGB),a.map=this.map,a.lightMap=this.lightMap,a.specularMap=this.specularMap,a.envMap=this.envMap,a.combine=this.combine,a.reflectivity=this.reflectivity,a.refractionRatio=this.refractionRatio,a.fog=this.fog,a.shading=this.shading,a.shaderID=this.shaderID,a.vertexColors=this.vertexColors,a.skinning=
this.skinning,a.morphTargets=this.morphTargets,a.morphNormals=this.morphNormals,a};c.MeshDoubleLambertMaterial=function(a){c.MeshLambertMaterial.call(this,a);this.shaderID="lambertdouble";this.side=c.DoubleSide};c.MeshDoubleLambertMaterial.prototype=Object.create(c.MeshLambertMaterial.prototype);c.MeshDoubleLambertMaterial.prototype.clone=function(){var a=new c.MeshDoubleLambertMaterial;return c.MeshLambertMaterial.prototype.clone.call(this,a),a};c.MeshOutlineMaterial=function(a){c.Material.call(this);
a=a||{};this.fog=!0;this.shaderID="outline";this.wireframe=!1;this.outlineColor=a.color||new c.Color(0,0,0);this.outlineWidth=a.width||.1;this.outlinePushback=a.pushback||1};c.MeshOutlineMaterial.prototype=Object.create(c.Material.prototype);c.MeshOutlineMaterial.prototype.clone=function(a){return void 0===a&&(a=new c.MeshOutlineMaterial),c.Material.prototype.clone.call(this,a),a.fog=this.fog,a.shaderID=this.shaderID,a.wireframe=this.wireframe,a};c.ImposterMaterial=function(a){c.Material.call(this);
this.color=new c.Color(16777215);this.ambient=new c.Color(1048575);this.emissive=new c.Color(0);this.imposter=!0;this.wrapAround=!1;this.wrapRGB=new c.Vector3(1,1,1);this.envMap=this.specularMap=this.lightMap=this.map=null;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.shading=c.SmoothShading;this.shaderID=null;this.vertexColors=c.NoColors;this.skinning=!1;this.setValues(a)};c.ImposterMaterial.prototype=
Object.create(c.Material.prototype);c.ImposterMaterial.prototype.clone=function(){var a=new c.ImposterMaterial;return c.Material.prototype.clone.call(this,a),a.color.copy(this.color),a.ambient.copy(this.ambient),a.emissive.copy(this.emissive),a.wrapAround=this.wrapAround,a.wrapRGB.copy(this.wrapRGB),a.map=this.map,a.lightMap=this.lightMap,a.specularMap=this.specularMap,a.envMap=this.envMap,a.combine=this.combine,a.reflectivity=this.reflectivity,a.refractionRatio=this.refractionRatio,a.fog=this.fog,
a.shading=this.shading,a.shaderID=this.shaderID,a.vertexColors=this.vertexColors,a.skinning=this.skinning,a.morphTargets=this.morphTargets,a.morphNormals=this.morphNormals,a};c.SphereImposterMaterial=function(a){c.ImposterMaterial.call(this);this.shaderID="sphereimposter";this.setValues(a)};c.SphereImposterMaterial.prototype=Object.create(c.ImposterMaterial.prototype);c.SphereImposterMaterial.prototype.clone=function(){var a=new c.SphereImposterMaterial;return c.ImposterMaterial.prototype.clone.call(this,
a),a};c.SphereImposterOutlineMaterial=function(a){c.ImposterMaterial.call(this);a=a||{};this.shaderID="sphereimposteroutline";this.outlineColor=a.color||new c.Color(0,0,0);this.outlineWidth=a.width||.1;this.outlinePushback=a.pushback||1;this.setValues(a)};c.SphereImposterOutlineMaterial.prototype=Object.create(c.ImposterMaterial.prototype);c.SphereImposterOutlineMaterial.prototype.clone=function(){var a=new c.SphereImposterOutlineMaterial;return c.ImposterMaterial.prototype.clone.call(this,a),a.outlineColor=
this.outlineColor,a.outlineWidth=this.outlineWidth,a.outlinePushback=this.outlinePushback,a};c.StickImposterMaterial=function(a){c.ImposterMaterial.call(this);this.shaderID="stickimposter";this.setValues(a)};c.StickImposterMaterial.prototype=Object.create(c.ImposterMaterial.prototype);c.StickImposterMaterial.prototype.clone=function(){var a=new c.StickImposterMaterial;return c.ImposterMaterial.prototype.clone.call(this,a),a};c.StickImposterOutlineMaterial=function(a){c.ImposterMaterial.call(this);
a=a||{};this.shaderID="stickimposteroutline";this.outlineColor=a.color||new c.Color(0,0,0);this.outlineWidth=a.width||.1;this.outlinePushback=a.pushback||1;this.setValues(a)};c.StickImposterOutlineMaterial.prototype=Object.create(c.ImposterMaterial.prototype);c.StickImposterOutlineMaterial.prototype.clone=function(){var a=new c.StickImposterOutlineMaterial;return c.ImposterMaterial.prototype.clone.call(this,a),a.outlineColor=this.outlineColor,a.outlineWidth=this.outlineWidth,a.outlinePushback=this.outlinePushback,
a};c.InstancedMaterial=function(a){c.Material.call(this);this.color=new c.Color(16777215);this.ambient=new c.Color(1048575);this.emissive=new c.Color(0);this.wrapAround=!1;this.wrapRGB=new c.Vector3(1,1,1);this.envMap=this.specularMap=this.lightMap=this.map=null;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.shading=c.SmoothShading;this.shaderID="instanced";this.vertexColors=c.NoColors;
this.skinning=!1;this.sphere=null;this.setValues(a)};c.InstancedMaterial.prototype=Object.create(c.Material.prototype);c.InstancedMaterial.prototype.clone=function(){var a=new c.InstancedMaterial;return c.Material.prototype.clone.call(this,a),a.color.copy(this.color),a.ambient.copy(this.ambient),a.emissive.copy(this.emissive),a.wrapAround=this.wrapAround,a.wrapRGB.copy(this.wrapRGB),a.map=this.map,a.lightMap=this.lightMap,a.specularMap=this.specularMap,a.envMap=this.envMap,a.combine=this.combine,
a.reflectivity=this.reflectivity,a.refractionRatio=this.refractionRatio,a.fog=this.fog,a.shading=this.shading,a.shaderID=this.shaderID,a.vertexColors=this.vertexColors,a.skinning=this.skinning,a.morphTargets=this.morphTargets,a.morphNormals=this.morphNormals,a.sphere=this.sphere,a};c.VolumetricMaterial=function(a){c.Material.call(this);this.transparent=!1;this.volumetric=!0;this.color=new c.Color(16777215);this.map=this.transferfn=null;this.volumetric=!0;this.extent=[];this.maxdepth=100;this.unit=
0;this.texmatrix=null;this.transfermin=-1;this.transfermax=1;this.subsamples=5;this.shaderID="volumetric";this.side=c.FrontSide;this.setValues(a)};c.VolumetricMaterial.prototype=Object.create(c.Material.prototype);c.VolumetricMaterial.prototype.clone=function(){var a=Object.assign(new c.VolumetricMaterial,this);return c.Material.prototype.clone.call(this,a),a};c.SpriteMaterial=function(a){c.Material.call(this);this.color=new c.Color(16777215);this.map=new c.Texture;this.useScreenCoordinates=!0;this.depthTest=
!this.useScreenCoordinates;this.sizeAttenuation=!this.useScreenCoordinates;this.screenOffset=this.screenOffset;this.scaleByViewPort=!this.sizeAttenuation;this.alignment=c.SpriteAlignment.center.clone();this.fog=!1;this.uvOffset=new c.Vector2(0,0);this.uvScale=new c.Vector2(1,1);this.setValues(a);void 0===(a=a||{}).depthTest&&(this.depthTest=!this.useScreenCoordinates);void 0===a.sizeAttenuation&&(this.sizeAttenuation=!this.useScreenCoordinates);void 0===a.scaleByViewPort&&(this.scaleByViewPort=!this.sizeAttenuation)};
c.SpriteMaterial.prototype=Object.create(c.Material.prototype);c.SpriteMaterial.prototype.clone=function(){var a=new c.SpriteMaterial;return c.Material.prototype.clone.call(this,a),a.color.copy(this.color),a.map=this.map,a.useScreenCoordinates=this.useScreenCoordinates,a.screenOffset=this.screenOffset,a.sizeAttenuation=this.sizeAttenuation,a.scaleByViewport=this.scaleByViewPort,a.alignment.copy(this.alignment),a.uvOffset.copy(this.uvOffset),a};c.SpriteAlignment={};c.SpriteAlignment.topLeft=new c.Vector2(1,
-1);c.SpriteAlignment.topCenter=new c.Vector2(0,-1);c.SpriteAlignment.topRight=new c.Vector2(-1,-1);c.SpriteAlignment.centerLeft=new c.Vector2(1,0);c.SpriteAlignment.center=new c.Vector2(0,0);c.SpriteAlignment.centerRight=new c.Vector2(-1,0);c.SpriteAlignment.bottomLeft=new c.Vector2(1,1);c.SpriteAlignment.bottomCenter=new c.Vector2(0,1);c.SpriteAlignment.bottomRight=new c.Vector2(-1,1);c.Texture=function(a,d){c.EventDispatcher.call(this);this.id=c.TextureIdCount++;this.name="";this.image=a;this.mapping=
new c.UVMapping;this.wrapT=this.wrapS=c.ClampToEdgeWrapping;this.anisotropy=1;d?(this.format=c.RFormat,this.type=c.FloatType,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=c.NearestFilter,this.minFilter=c.NearestFilter):(this.format=c.RGBAFormat,this.type=c.UnsignedByteType,this.offset=new c.Vector2(0,0),this.repeat=new c.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=c.LinearFilter,this.minFilter=c.LinearMipMapLinearFilter);
this.needsUpdate=!1;this.onUpdate=null};c.Texture.prototype={constructor:c.Texture,clone:function(a){return void 0===a&&(a=new c.Texture),a.image=this.image,a.mapping=this.mapping,a.wrapS=this.wrapS,a.wrapT=this.wrapT,a.magFilter=this.magFilter,a.minFilter=this.minFilter,a.anisotropy=this.anisotropy,a.format=this.format,a.type=this.type,a.offset.copy(this.offset),a.repeat.copy(this.repeat),a.premultiplyAlpha=this.premultiplyAlpha,a.flipY=this.flipY,a.unpackAlignment=this.unpackAlignment,a},dispose:function(){this.dispatchEvent({type:"dispose"})}};
c.TextureIdCount=0;c.FrontSide=0;c.BackSide=1;c.DoubleSide=2;c.NoShading=0;c.FlatShading=1;c.SmoothShading=2;c.NoColors=0;c.FaceColors=1;c.VertexColors=2;c.MultiplyOperation=0;c.MixOperation=1;c.AddOperation=2;c.UVMapping=function(){};c.ClampToEdgeWrapping=1001;c.LinearFilter=1006;c.NearestFilter=1007;c.LinearMipMapLinearFilter=1008;c.UnsignedByteType=1009;c.FloatType=1010;c.RGBAFormat=1021;c.RFormat=1022;c.R32Format=1023;c.Line=function(a,d,p){c.Object3D.call(this);this.geometry=a;this.material=
void 0!==d?d:new c.LineBasicMaterial({color:16777215*Math.random()});this.type=void 0!==p?p:c.LineStrip};c.LineStrip=0;c.LinePieces=1;c.Line.prototype=Object.create(c.Object3D.prototype);c.Line.prototype.clone=function(a){return void 0===a&&(a=new c.Line(this.geometry,this.material,this.type)),c.Object3D.prototype.clone.call(this,a),a};c.Mesh=function(a,d){c.Object3D.call(this);this.geometry=a;this.material=void 0!==d?d:new c.MeshBasicMaterial({color:16777215*Math.random(),wireframe:!0})};c.Mesh.prototype=
Object.create(c.Object3D.prototype);c.Mesh.prototype.clone=function(a){return void 0===a&&(a=new c.Mesh(this.geometry,this.material)),c.Object3D.prototype.clone.call(this,a),a};c.Sprite=function(a){c.Object3D.call(this);this.material=void 0!==a?a:new c.SpriteMaterial;this.rotation3d=this.rotation;this.rotation=0};c.Sprite.prototype=Object.create(c.Object3D.prototype);c.Sprite.prototype.updateMatrix=function(){this.matrix.setPosition(this.position);this.rotation3d.set(0,0,this.rotation);this.matrix.setRotationFromEuler(this.rotation3d);
1===this.scale.x&&1===this.scale.y||this.matrix.scale(this.scale);this.matrixWorldNeedsUpdate=!0};c.Sprite.prototype.clone=function(a){return void 0===a&&(a=new c.Sprite(this.material)),c.Object3D.prototype.clone.call(this,a),a};c.Renderer=function(a){function d(na){fa[na]||(m.enableVertexAttribArray(na),fa[na]=!0)}function p(na,C){var Va;return 1==Z||C.startsWith("#version")||(C=C.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),C="#version 300 es\n"+(C=(C=(C=(C=(C="fragment"==na?C.replace(/varying/g,
"in"):C.replace(/varying/g,"out")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;")).replace(/gl_FragColor/g,"glFragColor"))),"fragment"===na?Va=m.createShader(m.FRAGMENT_SHADER):"vertex"===na&&(Va=m.createShader(m.VERTEX_SHADER)),m.shaderSource(Va,C),m.compileShader(Va),m.getShaderParameter(Va,m.COMPILE_STATUS)?Va:(console.error(m.getShaderInfoLog(Va)),console.error("could not initialize shader"),null)}function e(na,C,Va,Aa){var cb;
var vb=[];for(lb in vb.push(na),vb.push(C),Aa)vb.push(lb),vb.push(Aa[lb]);vb=vb.join();var lb=0;for(cb=L.length;lb<cb;lb++){var zb=L[lb];if(zb.code===vb)return zb.usedTimes++,zb.program}if(1==Z&&Aa.volumetric)throw Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");lb=m.createProgram();zb="precision "+F+" float;";cb=[Aa.volumetric?"#version 300 es":"",zb].join("\n");na=p("fragment",[Aa.volumetric?"#version 300 es":"",Aa.fragdepth&&1==Z?"#extension GL_EXT_frag_depth: enable":
"",Aa.wireframe?"#define WIREFRAME 1":"",zb].join("\n")+na);C=p("vertex",cb+C);for(qb in m.attachShader(lb,C),m.attachShader(lb,na),m.linkProgram(lb),m.getProgramParameter(lb,m.LINK_STATUS)||console.error("Could not initialize shader"),lb.uniforms={},lb.attributes={},C=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix"],Va)C.push(qb);for(Va=0;Va<C.length;Va++){var qb=C[Va];lb.uniforms[qb]=m.getUniformLocation(lb,qb)}C="position normal color lineDistance offset radius".split(" ");for(Va=
0;Va<C.length;Va++)qb=C[Va],lb.attributes[qb]=m.getAttribLocation(lb,qb);return lb.id=O++,L.push({program:lb,code:vb,usedTimes:1}),G.info.memory.programs=L.length,lb}function k(na,C,Va,Aa,cb,vb){Aa.needsUpdate&&(Aa.program&&Fb(Aa),G.initMaterial(Aa,C,Va,cb),Aa.needsUpdate=!1);var lb=!1,zb=Aa.program,qb=zb.uniforms,Ab=Aa.uniforms;if(zb!=W&&(m.useProgram(zb),W=zb,lb=!0),Aa.id!=ha&&(ha=Aa.id,lb=!0),na!=ea&&(ea=na,lb=!0),m.uniformMatrix4fv(qb.projectionMatrix,!1,na.projectionMatrix.elements),m.uniformMatrix4fv(qb.modelViewMatrix,
!1,cb._modelViewMatrix.elements),m.uniformMatrix3fv(qb.normalMatrix,!1,cb._normalMatrix.elements),lb)(Ab.fogColor.value=Va.color,Ab.fogNear.value=Va.near,Ab.fogFar.value=Va.far,Aa.shaderID.startsWith("lambert")||"instanced"===Aa.shaderID||Aa.shaderID.endsWith("imposter"))?(m.uniformMatrix4fv(qb.viewMatrix,!1,na.matrixWorldInverse.elements),Ca&&(!function(Ob,hc){var Bc,Kb,Ib,fc,Hc=Oa,nc=Hc.directional.colors,pb=Hc.directional.positions,kc=0,Nc=0;Ob=0;for(Bc=hc.length;Ob<Bc;Ob++)(Ib=(Kb=hc[Ob]).color,
fc=Kb.intensity,Kb.distance,Kb instanceof c.Light)&&(va.getPositionFromMatrix(Kb.matrixWorld),ma.getPositionFromMatrix(Kb.target.matrixWorld),va.sub(ma),va.normalize(),0!==va.x||0!==va.y||0!==va.z)&&(pb[Nc]=va.x,pb[Nc+1]=va.y,pb[Nc+2]=va.z,nc[Nc]=Ib.r*fc,nc[Nc+1]=Ib.g*fc,nc[Nc+2]=Ib.b*fc,Nc+=3,kc++);Hc.ambient[0]=0;Hc.ambient[1]=0;Hc.ambient[2]=0;Hc.directional.length=kc}(0,C),Ca=!1),Ab.directionalLightColor.value=Oa.directional.colors,Ab.directionalLightDirection.value=Oa.directional.positions):
Aa.shaderID.endsWith("outline")?(Ab.outlineColor.value=Aa.outlineColor,Ab.outlineWidth.value=Aa.outlineWidth,Ab.outlinePushback.value=Aa.outlinePushback):"volumetric"===Aa.shaderID&&(cb._modelViewMatrix.getScale(va),za.getInverse(cb._modelViewMatrix),Ma.getInverse(na.projectionMatrix),Ra.multiplyMatrices(cb.material.texmatrix,za),m.uniformMatrix4fv(qb.textmat,!1,Ra.elements),m.uniformMatrix4fv(qb.projinv,!1,Ma.elements),na=Math.min(Math.min(va.x,va.y),va.z),Ab.step.value=cb.material.unit*na,Ab.maxdepth.value=
cb.material.maxdepth*na,Ab.transfermax.value=cb.material.transfermax,Ab.transfermin.value=cb.material.transfermin,Ab.subsamples.value=cb.material.subsamples,vb.setTexture(cb.material.transferfn,4,!1),vb.setTexture(cb.material.map,3,!0),m.activeTexture(m.TEXTURE5),m.bindTexture(m.TEXTURE_2D,uc)),Ab.opacity.value=Aa.opacity,function(Ob,hc){var Bc,Kb,Ib,fc;for(Bc in hc)Ob[Bc]&&(Kb=hc[Bc].type,Ib=hc[Bc].value,fc=Ob[Bc],"f"===Kb?m.uniform1f(fc,Ib):"i"===Kb?m.uniform1i(fc,Ib):"fv"===Kb?m.uniform3fv(fc,
Ib):"c"===Kb?m.uniform3f(fc,Ib.r,Ib.g,Ib.b):"f4"===Kb&&m.uniform4f(fc,Ib[0],Ib[1],Ib[2],Ib[3]))}(qb,Ab);return zb}function f(na,C,Va,Aa,cb,vb,lb){var zb,qb,Ab,Ob,hc,Bc,Kb;C?(hc=na.length-1,Bc=-1,Kb=-1):(hc=0,Bc=na.length,Kb=1);for(C=hc;C!==Bc;C+=Kb)(zb=na[C]).render&&(qb=zb.object,Ab=zb.buffer,Ob=zb[Va])&&(lb&&G.setBlending(!0),G.setDepthTest(Ob.depthTest),G.setDepthWrite(Ob.depthWrite),hc=Ob.polygonOffset,Ob.polygonOffsetFactor,Ob.polygonOffsetUnits,null!==hc&&(hc?m.enable(m.POLYGON_OFFSET_FILL):
m.disable(m.POLYGON_OFFSET_FILL)),hc=qb._modelViewMatrix.isReflected(),G.setMaterialFaces(Ob,hc),G.renderBuffer(Aa,cb,vb,Ob,Ab,qb),(R||Ob.outline)&&("sphereimposter"==Ob.shaderID?G.renderBuffer(Aa,cb,vb,Q,Ab,qb):"stickimposter"==Ob.shaderID?G.renderBuffer(Aa,cb,vb,N,Ab,qb):Ob.wireframe||"basic"===Ob.shaderID||0===Ob.opacity||G.renderBuffer(Aa,cb,vb,E,Ab,qb)))}function h(na,C,Va){ja=-1;ea=W=null;-1;wa=ha=oa=U=A=-1;Ca=!0;$a.render(na,C,Y,V,Va);ja=-1;ea=W=null;-1;wa=ha=oa=U=A=-1}function r(na,C){na instanceof
c.Mesh||na instanceof c.Line?function(Va,Aa){for(var cb=Va.length-1;0<=cb;--cb)Va[cb].object===Aa&&Va.splice(cb,1)}(C.__webglObjects,na):na instanceof c.Sprite&&function(Va,Aa){for(var cb=Va.length-1;0<=cb;--cb)Va[cb]===Aa&&Va.splice(cb,1)}(C.__webglSprites,na);na.__webglActive=!1}function u(na,C){na==m.TEXTURE_2D?(m.texParameteri(na,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(na,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(na,m.TEXTURE_MAG_FILTER,m.LINEAR),m.texParameteri(na,m.TEXTURE_MIN_FILTER,
m.LINEAR)):(m.texParameteri(na,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(na,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(na,m.TEXTURE_WRAP_R,m.CLAMP_TO_EDGE),pc&&Ec?(m.texParameteri(na,m.TEXTURE_MAG_FILTER,m.LINEAR),m.texParameteri(na,m.TEXTURE_MIN_FILTER,m.LINEAR)):(m.texParameteri(na,m.TEXTURE_MAG_FILTER,m.NEAREST),m.texParameteri(na,m.TEXTURE_MIN_FILTER,m.NEAREST)))}function H(na){return na===c.UnsignedByteType?m.UNSIGNED_BYTE:na===c.RGBAFormat?m.RGBA:na===c.NearestFilter?m.NEAREST:
0}a=a||{};this.row=a.row;this.col=a.col;this.rows=a.rows;this.cols=a.cols;var z=void 0!==a.canvas?a.canvas:document.createElement("canvas"),F=void 0!==a.precision?a.precision:"highp",t=void 0===a.alpha||a.alpha,q=void 0===a.premultipliedAlpha||a.premultipliedAlpha,n=void 0!==a.antialias&&a.antialias,v=void 0===a.stencil||a.stencil,x=void 0!==a.preserveDrawingBuffer&&a.preserveDrawingBuffer,w=void 0!==a.clearColor?new c.Color(a.clearColor):new c.Color(0),D=void 0!==a.clearAlpha?a.clearAlpha:0,E=new c.MeshOutlineMaterial(a.outline),
Q=new c.SphereImposterOutlineMaterial(a.outline),N=new c.StickImposterOutlineMaterial(a.outline),R=!!a.outline;this.domElement=z;this.context=null;this.devicePixelRatio=1;z.id=a.id;this.autoUpdateScene=this.autoUpdateObjects=this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var m,G=this,L=[],O=0,Z=1,W=null,ha=-1,ja=null,ea=null,la=0,oa=-1,wa=-1,U=-1,A=
-1,I=null,P=0,T=0,Y=0,V=0,fa={},ka=new c.Matrix4,ma=new c.Vector3,za=new c.Matrix4,Ma=new c.Matrix4,Ra=new c.Matrix4,va=new c.Vector3,Ca=!0,Oa={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},$a=new c.SpritePlugin,ob=null,Lb=null,Ub=null,lc=null,Pb=null,uc=null;!function(){try{if(!(m=
z.getContext("webgl2",{alpha:t,premultipliedAlpha:q,antialias:!1,stencil:v,preserveDrawingBuffer:x}))&&!(m=z.getContext("experimental-webgl",{alpha:t,premultipliedAlpha:q,antialias:!1,stencil:v,preserveDrawingBuffer:x}))&&!(m=z.getContext("webgl",{alpha:t,premultipliedAlpha:q,antialias:!1,stencil:v,preserveDrawingBuffer:x})))throw"Error creating WebGL context.";var na=m.getParameter(m.VERSION);Z=parseInt(na[6])}catch(C){console.error(C)}}();m.clearColor(0,0,0,1);m.clearDepth(1);m.clearStencil(0);
m.enable(m.DEPTH_TEST);m.depthFunc(m.LEQUAL);m.frontFace(m.CCW);m.cullFace(m.BACK);m.enable(m.CULL_FACE);m.enable(m.BLEND);m.blendEquation(m.FUNC_ADD);m.blendFunc(m.SRC_ALPHA,m.ONE_MINUS_SRC_ALPHA);m.clearColor(w.r,w.g,w.b,D);this.context=m;var Xb=m.getExtension("ANGLE_instanced_arrays"),Dc=m.getExtension("EXT_frag_depth"),Ec=m.getExtension("OES_texture_float_linear"),pc=m.getExtension("EXT_color_buffer_float");this.supportedExtensions=function(){return{supportsAIA:!!Xb,supportsImposters:!!Dc||1!=
Z}};this.getContext=function(){return m};this.isLost=function(){return m.isContextLost()};this.getPrecision=function(){return F};this.setClearColorHex=function(na,C){w.setHex(na);D=C;m.clearColor(w.r,w.g,w.b,D)};this.enableOutline=function(na){E=new c.MeshOutlineMaterial(na);Q=new c.SphereImposterOutlineMaterial(na);N=new c.StickImposterOutlineMaterial(na);R=!0};this.disableOutline=function(){R=!1};this.setViewport=function(){if(null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col){var na=
z.width/this.cols,C=z.height/this.rows;P=na;T=C;m.enable(m.SCISSOR_TEST);m.scissor(na*this.col,C*this.row,na,C);m.viewport(na*this.col,C*this.row,na,C)}};this.setSize=function(na,C){if(this.devicePixelRatio=void 0!==window.devicePixelRatio?window.devicePixelRatio:1,n&&2>this.devicePixelRatio&&(this.devicePixelRatio*=2),null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col){var Va=na/this.cols,Aa=C/this.rows;z.width=na*this.devicePixelRatio;z.height=C*this.devicePixelRatio;P=Va*this.devicePixelRatio;
T=Aa*this.devicePixelRatio;z.style.width=na+"px";z.style.height=C+"px";this.setViewport()}else P=z.width=na*this.devicePixelRatio,T=z.height=C*this.devicePixelRatio,z.style.width=na+"px",z.style.height=C+"px",m.viewport(0,0,m.drawingBufferWidth,m.drawingBufferHeight);this.initFrameBuffer()};this.clear=function(na,C,Va){var Aa=0;(void 0===na||na)&&(Aa|=m.COLOR_BUFFER_BIT);(void 0===C||C)&&(Aa|=m.DEPTH_BUFFER_BIT);(void 0===Va||Va)&&(Aa|=m.STENCIL_BUFFER_BIT);m.clear(Aa)};this.clearTarget=function(na,
C,Va){this.clear(na,C,Va)};this.setMaterialFaces=function(na,C){var Va=na.side===c.DoubleSide,Aa=na.side===c.BackSide;na.imposter||(Aa=C?!Aa:Aa);oa!==Va&&(Va?m.disable(m.CULL_FACE):m.enable(m.CULL_FACE),oa=Va);wa!==Aa&&(Aa?m.frontFace(m.CW):m.frontFace(m.CCW),wa=Aa);m.cullFace(m.BACK)};this.setDepthTest=function(na){U!==na&&(na?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),U=na)};this.setDepthWrite=function(na){A!==na&&(m.depthMask(na),A=na)};this.setBlending=function(na){na?(m.enable(m.BLEND),m.blendEquationSeparate(m.FUNC_ADD,
m.FUNC_ADD),m.blendFuncSeparate(m.SRC_ALPHA,m.ONE_MINUS_SRC_ALPHA,m.ONE,m.ONE_MINUS_SRC_ALPHA)):m.disable(m.BLEND);na};var Fb=function(na){var C=na.program;if(void 0!==C){var Va,Aa;na.program=void 0;var cb=!1;na=0;for(Va=L.length;na<Va;na++)if((Aa=L[na]).program===C){Aa.usedTimes--;0===Aa.usedTimes&&(cb=!0);break}if(!0===cb){cb=[];na=0;for(Va=L.length;na<Va;na++)(Aa=L[na]).program!==C&&cb.push(Aa);L=cb;m.deleteProgram(C);G.info.memory.programs--}}},nb=function(na){na=na.target;na.removeEventListener("dispose",
nb);if(na.__webglInit=void 0,void 0!==na.__webglVertexBuffer&&m.deleteBuffer(na.__webglVertexBuffer),void 0!==na.__webglColorBuffer&&m.deleteBuffer(na.__webglColorBuffer),void 0!==na.geometryGroups)for(var C=0,Va=na.groups;C<Va;C++){var Aa=na.geometryGroups[C];void 0!==Aa.__webglVertexBuffer&&m.deleteBuffer(Aa.__webglVertexBuffer);void 0!==Aa.__webglColorBuffer&&m.deleteBuffer(Aa.__webglColorBuffer);void 0!==Aa.__webglNormalBuffer&&m.deleteBuffer(Aa.__webglNormalBuffer);void 0!==Aa.__webglFaceBuffer&&
m.deleteBuffer(Aa.__webglFaceBuffer);void 0!==Aa.__webglLineBuffer&&m.deleteBuffer(Aa.__webglLineBuffer)}G.info.memory.geometries--},bc=function(na){na=na.target;na.removeEventListener("dispose",bc);na.image&&na.image.__webglTextureCube?m.deleteTexture(na.image.__webglTextureCube):na.__webglInit&&(na.__webglInit=!1,m.deleteTexture(na.__webglTexture));G.info.memory.textures--},wb=function(na){na=na.target;na.removeEventListener("dispose",wb);Fb(na)};this.initMaterial=function(na){var C;if(na.addEventListener("dispose",
wb),C=na.shaderID)C=c.ShaderLib[C],na.vertexShader=C.vertexShader,na.fragmentShader=C.fragmentShader,na.uniforms=c.ShaderUtils.clone(C.uniforms);na.program=e(na.fragmentShader,na.vertexShader,na.uniforms,{wireframe:na.wireframe,fragdepth:na.imposter,volumetric:na.volumetric})};this.renderBuffer=function(na,C,Va,Aa,cb,vb){if(Aa.visible){C=(Va=k(na,C,Va,Aa,vb,this)).attributes;na=!1;Va=16777215*cb.id+2*Va.id+(Aa.wireframe?1:0);Va!==ja&&(ja=Va,na=!0);if(na){for(var lb in fa)fa[lb]&&(m.disableVertexAttribArray(lb),
fa[lb]=!1);!0;0<=C.position&&(m.bindBuffer(m.ARRAY_BUFFER,cb.__webglVertexBuffer),d(C.position),m.vertexAttribPointer(C.position,3,m.FLOAT,!1,0,0));0<=C.color&&(m.bindBuffer(m.ARRAY_BUFFER,cb.__webglColorBuffer),d(C.color),m.vertexAttribPointer(C.color,3,m.FLOAT,!1,0,0));0<=C.normal&&(m.bindBuffer(m.ARRAY_BUFFER,cb.__webglNormalBuffer),d(C.normal),m.vertexAttribPointer(C.normal,3,m.FLOAT,!1,0,0));0<=C.offset&&(m.bindBuffer(m.ARRAY_BUFFER,cb.__webglOffsetBuffer),d(C.offset),m.vertexAttribPointer(C.offset,
3,m.FLOAT,!1,0,0));0<=C.radius&&(m.bindBuffer(m.ARRAY_BUFFER,cb.__webglRadiusBuffer),d(C.radius),m.vertexAttribPointer(C.radius,1,m.FLOAT,!1,0,0))}if(vb instanceof c.Mesh){if("instanced"===Aa.shaderID){var zb=Aa.sphere.geometryGroups[0];na&&(m.bindBuffer(m.ARRAY_BUFFER,cb.__webglVertexBuffer),m.bufferData(m.ARRAY_BUFFER,zb.vertexArray,m.STATIC_DRAW),m.bindBuffer(m.ARRAY_BUFFER,cb.__webglNormalBuffer),m.bufferData(m.ARRAY_BUFFER,zb.normalArray,m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,cb.__webglFaceBuffer),
m.bufferData(m.ELEMENT_ARRAY_BUFFER,zb.faceArray,m.STATIC_DRAW));zb=zb.faceidx;Xb.vertexAttribDivisorANGLE(C.offset,1);Xb.vertexAttribDivisorANGLE(C.radius,1);Xb.vertexAttribDivisorANGLE(C.color,1);Xb.drawElementsInstancedANGLE(m.TRIANGLES,zb,m.UNSIGNED_SHORT,0,cb.radiusArray.length);Xb.vertexAttribDivisorANGLE(C.offset,0);Xb.vertexAttribDivisorANGLE(C.radius,0);Xb.vertexAttribDivisorANGLE(C.color,0)}else Aa.wireframe?(vb=cb.lineidx,Aa=Aa.wireframeLinewidth,Aa!==I&&(m.lineWidth(Aa),I=Aa),na&&m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,
cb.__webglLineBuffer),m.drawElements(m.LINES,vb,m.UNSIGNED_SHORT,0)):(zb=cb.faceidx,na&&m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,cb.__webglFaceBuffer),m.drawElements(m.TRIANGLES,zb,m.UNSIGNED_SHORT,0));G.info.render.calls++;G.info.render.vertices+=zb;G.info.render.faces+=zb/3}else vb instanceof c.Line&&(vb=cb.vertices,cb=Aa.linewidth,cb!==I&&(m.lineWidth(cb),I=cb),m.drawArrays(m.LINES,0,vb),G.info.render.calls++)}};this.render=function(na,C,Va){if(0!=C instanceof c.Camera){var Aa,cb,vb,lb=na.__lights,
zb=na.fog;ha=-1;Ca=!0;this.autoUpdateScene&&na.updateMatrixWorld();void 0===C.parent&&C.updateMatrixWorld();C.matrixWorldInverse.getInverse(C.matrixWorld);ka.multiplyMatrices(C.projectionMatrix,C.matrixWorldInverse);this.autoUpdateObjects&&this.initWebGLObjects(na);G.info.render.calls=0;G.info.render.vertices=0;G.info.render.faces=0;G.info.render.points=0;Y=P;V=T;this.setViewport();this.setFrameBuffer();(this.autoClear||Va)&&(m.clearColor(w.r,w.g,w.b,D),this.clear(this.autoClearColor,this.autoClearDepth,
this.autoClearStencil));var qb=!1;Va=0;for(Aa=(vb=na.__webglObjects).length;Va<Aa;Va++){var Ab=(cb=vb[Va]).object;cb.render=!1;if(Ab.visible){Ab._modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,Ab.matrixWorld);Ab._normalMatrix.getInverse(Ab._modelViewMatrix);Ab._normalMatrix.transpose();Ab=cb;var Ob=Ab.object.material;Ob.volumetric?(Ab.opaque=null,Ab.transparent=null,Ab.volumetric=Ob):Ob.transparent?(Ab.opaque=null,Ab.volumetric=null,Ab.transparent=Ob,Ob.wireframe)||(Ob=Ob.clone(),Ob.opacity=
0,Ab.blank=Ob):(Ab.opaque=Ob,Ab.transparent=null,Ab.volumetric=null);cb.render=!0;cb.volumetric&&(qb=!0)}}this.setBlending(!1);f(na.__webglObjects,!0,"opaque",C,lb,zb,!1);h(na,C,!1);f(na.__webglObjects,!0,"blank",C,lb,zb,!0);f(na.__webglObjects,!1,"transparent",C,lb,zb,!0);qb&&lc&&(this.reinitFrameBuffer(),f(na.__webglObjects,!1,"volumetric",C,lb,zb,!0));this.renderFrameBuffertoScreen();this.setDepthTest(!0);this.setDepthWrite(!0);h(na,C,!0)}else console.error("$3Dmol.Renderer.render: camera is not an instance of $3Dmol.Camera.")};
this.reinitFrameBuffer=function(){1==Z||(lc=m.createFramebuffer(),m.bindFramebuffer(m.FRAMEBUFFER,lc),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,Pb,0))};this.setFrameBuffer=function(){if(1!=Z&&lc){var na=P,C=T;m.enable(m.SCISSOR_TEST);m.scissor(0,0,na,C);m.viewport(0,0,na,C);m.bindTexture(m.TEXTURE_2D,Pb);m.texImage2D(m.TEXTURE_2D,0,m.RGBA,na,C,0,m.RGBA,m.UNSIGNED_BYTE,null);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,
m.LINEAR);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE);m.bindTexture(m.TEXTURE_2D,uc);m.texImage2D(m.TEXTURE_2D,0,m.DEPTH_COMPONENT32F,na,C,0,m.DEPTH_COMPONENT,m.FLOAT,null);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE);
m.bindFramebuffer(m.FRAMEBUFFER,lc);m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,Pb,0);m.framebufferTexture2D(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.TEXTURE_2D,uc,0)}};this.initFrameBuffer=function(){if(1!=Z){var na=P,C=T;m.enable(m.SCISSOR_TEST);m.scissor(0,0,na,C);m.viewport(0,0,na,C);Pb=m.createTexture();uc=m.createTexture();lc=m.createFramebuffer();na=c.ShaderLib.screen;ob=e(na.fragmentShader,na.vertexShader,na.uniforms,{});Lb=m.getAttribLocation(ob,"vertexPosition");Ub=m.createBuffer();
m.bindBuffer(m.ARRAY_BUFFER,Ub);m.bufferData(m.ARRAY_BUFFER,new Float32Array([1,1,-1,1,-1,-1,-1,-1,1,-1,1,1]),m.STATIC_DRAW)}};this.renderFrameBuffertoScreen=function(){1==Z||null===lc||(this.setViewport(),m.bindFramebuffer(m.FRAMEBUFFER,null),m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT),m.frontFace(m.CCW),m.cullFace(m.BACK),m.useProgram(ob),W=ob,this.setDepthTest(-1),this.setDepthWrite(-1),m.bindBuffer(m.ARRAY_BUFFER,Ub),m.enableVertexAttribArray(Lb),m.vertexAttribPointer(Lb,2,m.FLOAT,!1,0,0),
m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,Pb),m.drawArrays(m.TRIANGLES,0,6))};this.initWebGLObjects=function(na){if(na.__webglObjects||(na.__webglObjects=[],na.__webglObjectsImmediate=[],na.__webglSprites=[],na.__webglFlares=[]),na.__objectsAdded.length){for(;na.__objectsAdded.length;){var C,Va,Aa=na.__objectsAdded[0],cb=na;if(!Aa.__webglInit&&(Aa.__webglInit=!0,Aa._modelViewMatrix=new c.Matrix4,Aa._normalMatrix=new c.Matrix3,void 0!==Aa.geometry&&void 0===Aa.geometry.__webglInit&&(Aa.geometry.__webglInit=
!0,Aa.geometry.addEventListener("dispose",nb)),Aa instanceof c.Mesh||Aa instanceof c.Line)){var vb=Aa.geometry;Aa.material;var lb=0;for(Va=vb.geometryGroups.length;lb<Va;lb++)(C=vb.geometryGroups[lb]).id=la++,C.__webglVertexBuffer||(Aa instanceof c.Mesh?(C.radiusArray&&(C.__webglRadiusBuffer=m.createBuffer()),C.useOffset&&(C.__webglOffsetBuffer=m.createBuffer()),C.__webglVertexBuffer=m.createBuffer(),C.__webglNormalBuffer=m.createBuffer(),C.__webglColorBuffer=m.createBuffer(),C.__webglFaceBuffer=
m.createBuffer(),C.__webglLineBuffer=m.createBuffer(),G.info.memory.geometries++,vb.elementsNeedUpdate=!0,vb.normalsNeedUpdate=!0):Aa instanceof c.Line&&(C.__webglVertexBuffer=m.createBuffer(),C.__webglColorBuffer=m.createBuffer(),G.info.memory.geometries++),vb.verticesNeedUpdate=!0,vb.colorsNeedUpdate=!0)}if(!Aa.__webglActive){if(Aa instanceof c.Mesh||Aa instanceof c.Line)for(lb=0,Va=(vb=Aa.geometry).geometryGroups.length;lb<Va;lb++)C=vb.geometryGroups[lb],cb.__webglObjects.push({buffer:C,object:Aa,
opaque:null,transparent:null});else Aa instanceof c.Sprite&&cb.__webglSprites.push(Aa);Aa.__webglActive=!0}na.__objectsAdded.splice(0,1)}ja=-1}for(;na.__objectsRemoved.length;)r(na.__objectsRemoved[0],na),na.__objectsRemoved.splice(0,1);vb=0;for(Va=na.__webglObjects.length;vb<Va;vb++)if(Aa=na.__webglObjects[vb].object,lb=Aa.geometry,Aa instanceof c.Mesh||Aa instanceof c.Line){Aa=0;for(cb=lb.geometryGroups.length;Aa<cb;Aa++)if(C=lb.geometryGroups[Aa],lb.verticesNeedUpdate||lb.elementsNeedUpdate||lb.colorsNeedUpdate||
lb.normalsNeedUpdate){var zb=m.STATIC_DRAW,qb=C.vertexArray,Ab=C.colorArray;if(void 0!==C.__webglOffsetBuffer?(m.bindBuffer(m.ARRAY_BUFFER,C.__webglOffsetBuffer),m.bufferData(m.ARRAY_BUFFER,qb,zb)):(m.bindBuffer(m.ARRAY_BUFFER,C.__webglVertexBuffer),m.bufferData(m.ARRAY_BUFFER,qb,zb)),m.bindBuffer(m.ARRAY_BUFFER,C.__webglColorBuffer),m.bufferData(m.ARRAY_BUFFER,Ab,zb),C.normalArray&&void 0!==C.__webglNormalBuffer)qb=C.normalArray,m.bindBuffer(m.ARRAY_BUFFER,C.__webglNormalBuffer),m.bufferData(m.ARRAY_BUFFER,
qb,zb);if(C.radiusArray&&void 0!==C.__webglRadiusBuffer&&(m.bindBuffer(m.ARRAY_BUFFER,C.__webglRadiusBuffer),m.bufferData(m.ARRAY_BUFFER,C.radiusArray,zb)),C.faceArray&&void 0!==C.__webglFaceBuffer)qb=C.faceArray,m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,C.__webglFaceBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,qb,zb);C.lineArray&&void 0!==C.__webglLineBuffer&&(qb=C.lineArray,m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,C.__webglLineBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,qb,zb))}lb.verticesNeedUpdate=!1;lb.elementsNeedUpdate=
!1;lb.normalsNeedUpdate=!1;lb.colorsNeedUpdate=!1;lb.buffersNeedUpdate=!1}};this.getYRatio=function(){return void 0!==this.rows&&void 0!==this.row?this.rows:1};this.getXRatio=function(){return void 0!==this.cols&&void 0!==this.col?this.cols:1};this.getAspect=function(na,C){null!=na&&null!=C||(na=z.width,C=z.height);var Va=na/C;null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col&&(Va=na/this.cols/(C/this.rows));return Va};this.setTexture=function(na,C,Va){if(na.needsUpdate){na.__webglInit||
(na.__webglInit=!0,na.addEventListener("dispose",bc),na.__webglTexture=m.createTexture(),G.info.memory.textures++);m.activeTexture(m.TEXTURE0+C);m.bindTexture(Va?m.TEXTURE_3D:m.TEXTURE_2D,na.__webglTexture);m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,na.flipY);m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,na.premultiplyAlpha);m.pixelStorei(m.UNPACK_ALIGNMENT,na.unpackAlignment);m.pixelStorei(m.PACK_ALIGNMENT,na.unpackAlignment);C=H(na.format);var Aa=H(na.type);if(Va)u(m.TEXTURE_3D,na),m.texImage3D(m.TEXTURE_3D,
0,m.R32F,na.image.size.z,na.image.size.y,na.image.size.x,0,m.RED,m.FLOAT,na.image.data);else{Va=na.image;var cb=Va.width,vb=Va.height;void 0===cb&&(cb=Va.length,C==m.RGBA&&(cb/=4),vb=1);u(m.TEXTURE_2D,na);1==Z?m.texImage2D(m.TEXTURE_2D,0,C,C,Aa,na.image):m.texImage2D(m.TEXTURE_2D,0,C,cb,vb,0,C,Aa,na.image)}na.needsUpdate=!1;na.onUpdate&&na.onUpdate()}else m.activeTexture(m.TEXTURE0+C),Va?m.bindTexture(m.TEXTURE_3D,na.__webglTexture):m.bindTexture(m.TEXTURE_2D,na.__webglTexture)};this.supportsVolumetric=
function(){return 1!=Z};$a.init(this)};c.Scene=function(){c.Object3D.call(this);this.overrideMaterial=this.fog=null;this.matrixAutoUpdate=!1;this.__objects=[];this.__lights=[];this.__objectsAdded=[];this.__objectsRemoved=[]};c.Scene.prototype=Object.create(c.Object3D.prototype);c.Scene.prototype.__addObject=function(a){if(a instanceof c.Light)-1===this.__lights.indexOf(a)&&this.__lights.push(a),a.target&&void 0===a.target.parent&&this.add(a.target);else if(-1===this.__objects.indexOf(a)){this.__objects.push(a);
this.__objectsAdded.push(a);var d=this.__objectsRemoved.indexOf(a);-1!==d&&this.__objectsRemoved.splice(d,1)}for(d=0;d<a.children.length;d++)this.__addObject(a.children[d])};c.Scene.prototype.__removeObject=function(a){var d;a instanceof c.Light?-1!==(d=this.__lights.indexOf(a))&&this.__lights.splice(d,1):-1!==(d=this.__objects.indexOf(a))&&(this.__objects.splice(d,1),this.__objectsRemoved.push(a),-1!==this.__objectsAdded.indexOf(a)&&this.__objectsAdded.splice(d,1));for(d=0;d<a.children.length;d++)this.__removeObject(a.children[d])};
c.Fog=function(a,d,p){this.name="";this.color=new c.Color(a);this.near=void 0!==d?d:1;this.far=void 0!==p?p:1E3};c.Fog.prototype.clone=function(){return new c.Fog(this.color.getHex(),this.near,this.far)};c.ShaderUtils={clone:function(a){var d,p={};for(d in a){p[d]={};p[d].type=a[d].type;var e=a[d].value;e instanceof c.Color?p[d].value=e.clone():"number"==typeof e?p[d].value=e:e instanceof Array?p[d].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return p},
stickimposterFragmentShader:"uniform float opacity;\nuniform mat4 projectionMatrix;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLight;\nvarying vec3 vColor;\nvarying vec3 cposition;\nvarying vec3 p1;\nvarying vec3 p2;\nvarying float r;\n//DEFINEFRAGCOLOR\nvoid main() {\n    vec3 color = abs(vColor);\n    vec3 pos = cposition;\n    vec3 p = pos;\n    vec3 v = vec3(0.0,0.0,-1.0);\n    if(projectionMatrix[3][3] == 0.0) v = normalize(pos);\n    vec3 pa = p1;\n    vec3 va = normalize(p2-p1);\n    vec3 tmp1 = v-(dot(v,va)*va);\n    vec3 deltap = p-pa;\n    float A = dot(tmp1,tmp1);\n    if(A == 0.0) discard;\n    vec3 tmp2 = deltap-(dot(deltap,va)*va);\n    float B = 2.0*dot(tmp1, tmp2);\n    float C = dot(tmp2,tmp2)-r*r;\n    float det = (B*B) - (4.0*A*C);\n    if(det < 0.0) discard;\n    float sqrtDet = sqrt(det);\n    float posT = (-B+sqrtDet)/(2.0*A);\n    float negT = (-B-sqrtDet)/(2.0*A);\n    float intersectionT = min(posT,negT);\n    vec3 qi = p+v*intersectionT;\n    float dotp1 = dot(va,qi-p1);\n    float dotp2 = dot(va,qi-p2);\n    vec3 norm;\n    if( dotp1 < 0.0 || dotp2 > 0.0) {\n       vec3 cp;\n       if( dotp1 < 0.0) {         cp = p1;\n       } else {\n          cp = p2;\n       }\n       vec3 diff = p-cp;\n       A = dot(v,v);\n       B = dot(diff,v)*2.0;\n       C = dot(diff,diff)-r*r;\n       det = (B*B) - (4.0*C);\n       if(det < 0.0) discard;\n       sqrtDet = sqrt(det);\n       posT = (-B+sqrtDet)/(2.0);\n       negT = (-B-sqrtDet)/(2.0);\n       float t = min(posT,negT);\n       qi = p+v*t; \n       norm = normalize(qi-cp); \n    } else {\n       norm = normalize(qi-(dotp1*va + p1));\n    }\n    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);\n    float ndcDepth = clipPos.z / clipPos.w;\n    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n    gl_FragDepthEXT = depth;"};
c.ShaderLib={basic:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vColor;\n//DEFINEFRAGCOLOR\nvoid main() {\n    gl_FragColor = vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nattribute vec3 position;\nattribute vec3 color;\nvarying vec3 vColor;\nvoid main() {\n    vColor = color;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * mvPosition;\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3}}},sphereimposter:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform mat4 projectionMatrix;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nuniform float uDepth;\nuniform vec3 directionalLightColor[ 1 ];\nvarying vec3 vColor;\nvarying vec2 mapping;\nvarying float rval;\nvarying vec3 vLight;\nvarying vec3 center;\n//DEFINEFRAGCOLOR\nvoid main() {\n    float lensqr = dot(mapping,mapping);\n    float rsqr = rval*rval;\n    if(lensqr > rsqr)\n       discard;\n    float z = sqrt(rsqr-lensqr);\n    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);\n    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);\n    float ndcDepth = clipPos.z / clipPos.w;\n    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));\n    float dotProduct = dot( norm, vLight );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;\n    gl_FragColor = vec4(vLight*vColor, opacity*opacity );\n    float fogFactor = smoothstep( fogNear, fogFar, gl_FragDepthEXT/gl_FragCoord.w );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec2 mapping;\nvarying vec3 vColor;\nvarying float rval;\nvarying vec3 vLight;\nvarying vec3 center;\nvoid main() {\n    vColor = color;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    center = mvPosition.xyz;\n    vec4 projPosition = projectionMatrix * mvPosition;\n    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vLight = normalize( lDirection.xyz );\n    mapping = normal.xy;\n    rval = abs(normal.x);\n    gl_Position = projPosition+adjust;\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},lambert:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLightFront;\nvarying vec3 vColor;\n//DEFINEFRAGCOLOR\nvoid main() {\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\n    #ifndef WIREFRAME\n    gl_FragColor.xyz *= vLightFront;\n    #endif\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec3 vColor;\nvarying vec3 vLightFront;\nvoid main() {\n    vColor = color;\n    vec3 objectNormal = normal;\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    vLightFront = vec3( 0.0 );\n    transformedNormal = normalize( transformedNormal );\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vec3 dirVector = normalize( lDirection.xyz );\n    float dotProduct = dot( transformedNormal, dirVector );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\n    gl_Position = projectionMatrix * mvPosition;\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},instanced:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLightFront;\nvarying vec3 vColor;\n//DEFINEFRAGCOLOR\nvoid main() {\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\n    #ifndef WIREFRAME\n    gl_FragColor.xyz *= vLightFront;\n    #endif\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 offset;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nattribute float radius;\nvarying vec3 vColor;\nvarying vec3 vLightFront;\nvoid main() {\n    vColor = color;\n    vec3 objectNormal = normal;\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );\n    vLightFront = vec3( 0.0 );\n    transformedNormal = normalize( transformedNormal );\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vec3 dirVector = normalize( lDirection.xyz );\n    float dotProduct = dot( transformedNormal, dirVector );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\n    gl_Position = projectionMatrix * mvPosition;\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},outline:{fragmentShader:"uniform float opacity;\nuniform vec3 outlineColor;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\n//DEFINEFRAGCOLOR\nvoid main() {\n    gl_FragColor = vec4( outlineColor, 1 );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float outlineWidth;\nuniform float outlinePushback;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvoid main() {\n    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    mvPosition.xy += norm.xy*outlineWidth;\n    gl_Position = projectionMatrix * mvPosition;\n    mvPosition.z -= outlinePushback;\n    vec4 pushpos = projectionMatrix*mvPosition;\n    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;\n}",
uniforms:{opacity:{type:"f",value:1},outlineColor:{type:"c",value:new c.Color(0,0,0)},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},sphereimposteroutline:{fragmentShader:"uniform float opacity;\nuniform vec3 outlineColor;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nuniform mat4 projectionMatrix;\nvarying vec2 mapping;\nvarying float rval;\nvarying vec3 center;\nuniform float outlinePushback;\n//DEFINEFRAGCOLOR\nvoid main() {\n    float lensqr = dot(mapping,mapping);\n    float rsqr = rval*rval;\n    if(lensqr > rsqr)\n       discard;\n    float z = sqrt(rsqr-lensqr);\n    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);\n    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);\n    float ndcDepth = clipPos.z / clipPos.w;\n    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n    gl_FragColor = vec4(outlineColor, 1 );\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float outlineWidth;\nuniform float outlinePushback;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec2 mapping;\nvarying float rval;\nvarying vec3 center;\nvoid main() {\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    center = mvPosition.xyz;\n    vec4 projPosition = projectionMatrix * mvPosition;\n    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);\n    vec4 adjust = projectionMatrix* vec4(norm,normal.z,0.0); adjust.z = 0.0; adjust.w = 0.0;\n    mapping = norm.xy;\n    rval = abs(norm.x);\n    gl_Position = projPosition+adjust;\n}",
uniforms:{opacity:{type:"f",value:1},outlineColor:{type:"c",value:new c.Color(0,0,0)},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},stickimposter:{fragmentShader:[c.ShaderUtils.stickimposterFragmentShader,"    float dotProduct = dot( norm, vLight );\n    vec3 light = vec3( max( dotProduct, 0.0 ) );\n    gl_FragColor = vec4(light*color, opacity*opacity );\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}"].join("\n"),
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nattribute float radius;\nvarying vec3 vColor;\nvarying vec3 vLight;\nvarying vec3 cposition;\nvarying vec3 p1;\nvarying vec3 p2;\nvarying float r;\nvoid main() {\n    vColor = color; vColor.z = abs(vColor.z);\n    r = abs(radius);\n    vec4 to = modelViewMatrix*vec4(normal, 1.0);\n    vec4 pt = modelViewMatrix*vec4(position, 1.0);\n    vec4 mvPosition = pt;\n    p1 = pt.xyz; p2 = to.xyz;\n    vec3 norm = to.xyz-pt.xyz;\n    float mult = 1.1;\n    if(length(p1) > length(p2)) {\n       mvPosition = to;\n    }\n    vec3 n = normalize(mvPosition.xyz);\n    if(color.z >= 0.0) {\n       if(projectionMatrix[3][3] == 0.0) {\n         vec3 pnorm = normalize(p1);\n         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);\n         mvPosition.xyz = p1+t*pnorm;\n       } else {\n         mvPosition.xyz = p1;\n       }\n    } else {\n      if(projectionMatrix[3][3] == 0.0) {\n         vec3 pnorm = normalize(p2);\n         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);\n         mvPosition.xyz = p2+t*pnorm;\n       } else {\n         mvPosition.xyz = p2;\n       }\n       mult *= -1.0;\n    }\n    vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;\n    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;\n    mvPosition.xyz +=  mult*(cr + doublecr).xyz;\n    cposition = mvPosition.xyz;\n    gl_Position = projectionMatrix * mvPosition;\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vLight = normalize( lDirection.xyz )*directionalLightColor[0];\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},stickimposteroutline:{fragmentShader:c.ShaderUtils.stickimposterFragmentShader+"gl_FragColor = vec4(color,1.0);}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nuniform vec3 outlineColor;\nuniform float outlineWidth;\nuniform float outlinePushback;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nattribute float radius;\nvarying vec3 vColor;\nvarying vec3 vLight;\nvarying vec3 cposition;\nvarying vec3 p1;\nvarying vec3 p2;\nvarying float r;\nvoid main() {\n    vColor = outlineColor;\n    float rad = radius+sign(radius)*outlineWidth;\n    r = abs(rad);\n    vec4 to = modelViewMatrix*vec4(normal, 1.0);\n    vec4 pt = modelViewMatrix*vec4(position, 1.0);\n    to.xyz += normalize(to.xyz)*outlinePushback;\n    pt.xyz += normalize(pt.xyz)*outlinePushback;\n    vec4 mvPosition = pt;\n    p1 = pt.xyz; p2 = to.xyz;\n    vec3 norm = to.xyz-pt.xyz;\n    float mult = 1.1;\n    if(length(p1) > length(p2)) {\n       mvPosition = to;\n    }\n    vec3 n = normalize(mvPosition.xyz);\n    if(color.z >= 0.0) {\n       vec3 pnorm = normalize(p1);\n       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);\n       mvPosition.xyz = p1+t*pnorm;\n    } else {\n       vec3 pnorm = normalize(p2);\n       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);\n       mvPosition.xyz = p2+t*pnorm;\n       mult *= -1.0;\n    }\n    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;\n    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;\n    mvPosition.xy +=  mult*(cr + doublecr).xy;\n    cposition = mvPosition.xyz;\n    gl_Position = projectionMatrix * mvPosition;\n    vLight = vec3(1.0,1.0,1.0);\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},outlineColor:{type:"c",value:new c.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},lambertdouble:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLightFront;\nvarying vec3 vLightBack;\nvarying vec3 vColor;\n//DEFINEFRAGCOLOR\nvoid main() {\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\n    #ifndef WIREFRAME\n    if ( gl_FrontFacing )\n       gl_FragColor.xyz *= vLightFront;\n    else\n       gl_FragColor.xyz *= vLightBack;\n    #endif\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec3 vColor;\nvarying vec3 vLightFront;\nvarying vec3 vLightBack;\nvoid main() {\n    vColor = color;\n    vec3 objectNormal = normal;\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    vLightFront = vec3( 0.0 );\n    vLightBack = vec3( 0.0 );\n    transformedNormal = normalize( transformedNormal );\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vec3 dirVector = normalize( lDirection.xyz );\n    float dotProduct = dot( transformedNormal, dirVector );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\n    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;\n    gl_Position = projectionMatrix * mvPosition;\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},sprite:{fragmentShader:"uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\n//DEFINEFRAGCOLOR\nvoid main() {\n    vec4 texture = texture2D(map, vUV);\n    if (texture.a < alphaTest) discard;\n    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);\n    if (fogType > 0) {\n        float depth = gl_FragCoord.z / gl_FragCoord.w;\n        float fogFactor = 0.0;\n        if (fogType == 1) {\n            fogFactor = smoothstep(fogNear, fogFar, depth);\n        }\n        else {\n            const float LOG2 = 1.442695;\n            float fogFactor = exp2(- fogDensity * fogDensity * depth * depth * LOG2);\n            fogFactor = 1.0 - clamp(fogFactor, 0.0, 1.0);\n        }\n        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);\n    }\n}",
vertexShader:"uniform int useScreenCoordinates;\nuniform vec3 screenPosition;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 alignment;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\n    vUV = uvOffset + uv * uvScale;\n    vec2 alignedPosition = position + alignment;\n    vec2 rotatedPosition;\n    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;\n    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;\n    vec4 finalPosition;\n    if(useScreenCoordinates != 0) {\n        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);\n    }\n    else {\n        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;\n        finalPosition.xy += rotatedPosition; \n    }\n    gl_Position = finalPosition;\n}",
uniforms:{}},volumetric:{fragmentShader:"uniform highp sampler3D data;\nuniform highp sampler2D colormap;\nuniform highp sampler2D depthmap;\nuniform mat4 textmat;\nuniform mat4 projinv;\nuniform mat4 projectionMatrix;\nuniform float step;\nuniform float subsamples;\nuniform float maxdepth;\nuniform float transfermin;\nuniform float transfermax;\nin  vec4 mvPosition;\nout vec4 color;\nvoid main(void) {\n   vec4 pos = mvPosition;\n   bool seengood = false;\n   float i = 0.0;\n   color = vec4(1,1,1,0);\n   float increment = 1.0/subsamples;\n   float maxsteps = (maxdepth*subsamples/step);\n   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);\n   maxpos = projectionMatrix*maxpos;\n   vec4 startp = projectionMatrix*pos;\n   maxpos /= maxpos.w;\n   startp /= startp.w;\n   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);\n   maxpos = projinv*maxpos;\n   maxpos /= maxpos.w;\n   float incr = step/subsamples;\n   vec2 tpos = startp.xy/2.0+0.5;\n   float depth = texture(depthmap, tpos).r;\n   vec4 direction = maxpos-pos;\n   for( i = 0.0; i <= maxsteps; i++) {\n      vec4 pt = (pos+(i/maxsteps)*direction);\n      vec4 ppt = projectionMatrix*pt;\n      float ptdepth = ppt.z/ppt.w;\n      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n      if(ptdepth > depth) break;\n      pt = textmat*pt;\n      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {\n         seengood = true;\n      } else if(seengood) {\n         break;\n      }\n      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){\n          color.a = 0.0;\n          continue;\n      }\n      else {\n         float val = texture(data, pt.zyx).r;\n         if(isinf(val)) continue;\n         float cval = (val-transfermin)/(transfermax-transfermin);\n         vec4 val_color = texture(colormap, vec2(cval,0.5));\n         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;\n         color.a += (1.0 - color.a) * val_color.a; \n         if(color.a > 0.0) color.rgb /= color.a;\n      }\n    }\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nin vec3 position;\nout vec4 mvPosition;\nvoid main() {\n    mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix*mvPosition;\n}",uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",
value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}}},screen:{fragmentShader:"uniform sampler2D colormap;\nvarying highp vec2 vTexCoords;\nuniform vec2 dimensions;\n//DEFINEFRAGCOLOR\nvoid main (void) {\n   gl_FragColor = texture2D(colormap, vTexCoords);\n}",vertexShader:"attribute vec2 vertexPosition;\nvarying highp vec2 vTexCoords;\nconst vec2 scale = vec2(0.5, 0.5);\nvoid main() {\n   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range\n   gl_Position = vec4(vertexPosition, 0.0, 1.0);\n}",
uniforms:{}},screenaa:{fragmentShader:"uniform sampler2D colormap;\nvarying highp vec2 vTexCoords;\nuniform vec2 dimensions;\n// Basic FXAA implementation based on the code on geeks3d.com \n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#define FXAA_SPAN_MAX     8.0\nvec4 applyFXAA(vec2 fragCoord, sampler2D tex)\n{\n    vec4 color;\n    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);\n    vec3 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP).xyz;\n    vec3 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP).xyz;\n    vec3 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP).xyz;\n    vec3 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP).xyz;\n    vec3 rgbM  = texture2D(tex, fragCoord  * inverseVP).xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n            dir * rcpDirMin)) * inverseVP;\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord  + dir * -0.5).xyz +\n        texture2D(tex, fragCoord  + dir * 0.5).xyz);\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, 1.0);\n    else\n        color = vec4(rgbB, 1.0);\n    return color;\n}\n//DEFINEFRAGCOLOR\nvoid main (void) {\n   gl_FragColor = applyFXAA(vTexCoords, colormap);\n}",
vertexShader:"attribute vec2 vertexPosition;\nvarying highp vec2 vTexCoords;\nconst vec2 scale = vec2(0.5, 0.5);\nvoid main() {\n   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range\n   gl_Position = vec4(vertexPosition, 0.0, 1.0);\n}",uniforms:{}}};"undefined"==typeof console&&(console={log:function(){}});c.ProteinSurface=function(){var a,d,p=0,e=0,k=0,f=2,h=0,r=0,u=0,H=0,z=null,F=null,t=null,q=0,n=0,v=0,x=0,w=0,D=0,E={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,
O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},Q={},N={},R=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,
-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])];this.getFacesAndVertices=function(G){for(var L={},O=0,Z=G.length;O<Z;O++)L[G[O]]=!0;G=d;O=0;for(Z=G.length;O<Z;O++)G[O].x=G[O].x/f-p,G[O].y=G[O].y/f-e,G[O].z=G[O].z/f-k;O=[];Z=0;for(var W=a.length;Z<W;Z+=3){var ha=a[Z],ja=a[Z+1],ea=a[Z+2],la=G[ja].atomid,oa=G[ea].atomid,
wa=G[ha].atomid;la<wa&&(wa=la);oa<wa&&(wa=oa);L[wa]&&ha!==ja&&ja!==ea&&ha!==ea&&(O.push(ha),O.push(ja),O.push(ea))}return z=null,F=null,t=null,{vertices:G,faces:O}};this.initparm=function(G,L,O){1E6<O&&(f=1);O=1/f*5.5;q=G[0][0];x=G[1][0];n=G[0][1];w=G[1][1];v=G[0][2];D=G[1][2];L?(q-=1.4+O,n-=1.4+O,v-=1.4+O,x+=1.4+O,w+=1.4+O,D+=1.4+O):(q-=O,n-=O,v-=O,x+=O,w+=O,D+=O);q=Math.floor(q*f)/f;n=Math.floor(n*f)/f;v=Math.floor(v*f)/f;x=Math.ceil(x*f)/f;w=Math.ceil(w*f)/f;D=Math.ceil(D*f)/f;p=-q;e=-n;k=-v;u=
Math.ceil(f*(x-q))+1;r=Math.ceil(f*(w-n))+1;h=Math.ceil(f*(D-v))+1;this.boundingatom(L);H=1.4*f;z=new Uint8Array(u*r*h);F=new Float64Array(u*r*h);t=new Int32Array(u*r*h)};this.boundingatom=function(G){var L,O,Z=[],W;for(W in E)if(E.hasOwnProperty(W)){var ha=E[W];Z[W]=G?(ha+1.4)*f+.5:ha*f+.5;ha=Z[W]*Z[W];N[W]=Math.floor(Z[W])+1;Q[W]=new Int32Array(N[W]*N[W]);for(var ja=0,ea=0;ea<N[W];ea++)for(var la=0;la<N[W];la++)(L=ea*ea+la*la)>ha?Q[W][ja]=-1:(O=Math.sqrt(ha-L),Q[W][ja]=Math.floor(O)),ja++}};this.fillvoxels=
function(G,L){for(var O=0,Z=z.length;O<Z;O++)z[O]=0,F[O]=-1,t[O]=-1;for(var W in L)O=G[L[W]],void 0!==O&&this.fillAtom(O,G);G=0;for(L=z.length;G<L;G++)1&z[G]&&(z[G]|=2)};this.fillAtom=function(G,L){var O,Z,W,ha,ja,ea,la,oa,wa,U,A,I,P;var T=Math.floor(.5+f*(G.x+p));var Y=Math.floor(.5+f*(G.y+e));var V=Math.floor(.5+f*(G.z+k));var fa=G.elem&&void 0!==E[G.elem]?G.elem:"X",ka=0,ma=r*h;var za=0;for(P=N[fa];za<P;za++)for(ja=0;ja<P;ja++){if(-1!=Q[fa][ka])for(U=-1;2>U;U++)for(A=-1;2>A;A++)for(I=-1;2>I;I++)if(0!==
U&&0!==A&&0!==I){var Ma=U*za;var Ra=I*ja;for(ea=0;ea<=Q[fa][ka];ea++)if(oa=Y+(ha=ea*A),wa=V+Ra,!(0>(la=T+Ma)||0>oa||0>wa||la>=u||oa>=r||wa>=h)){var va=la*ma+oa*h+wa;if(1&z[va]){var Ca=L[t[va]];Ca.serial!=G.serial&&Ma*Ma+ha*ha+Ra*Ra<(O=T+Ma-Math.floor(.5+f*(Ca.x+p)))*O+(Z=Y+ha-Math.floor(.5+f*(Ca.y+e)))*Z+(W=V+Ra-Math.floor(.5+f*(Ca.z+k)))*W&&(t[va]=G.serial)}else z[va]|=1,t[va]=G.serial}}ka++}};this.fillvoxelswaals=function(G,L){for(var O=0,Z=z.length;O<Z;O++)z[O]&=-3;for(var W in L)O=G[L[W]],void 0!==
O&&this.fillAtomWaals(O,G)};this.fillAtomWaals=function(G,L){var O,Z,W,ha,ja,ea,la,oa,wa,U,A,I,P,T=0;var Y=Math.floor(.5+f*(G.x+p));var V=Math.floor(.5+f*(G.y+e));var fa=Math.floor(.5+f*(G.z+k));var ka=G.elem&&void 0!==E[G.elem]?G.elem:"X",ma=r*h;var za=0;for(P=N[ka];za<P;za++)for(oa=0;oa<P;oa++){if(-1!=Q[ka][T])for(U=-1;2>U;U++)for(A=-1;2>A;A++)for(I=-1;2>I;I++)if(0!==U&&0!==A&&0!==I){var Ma=U*za;var Ra=I*oa;for(wa=0;wa<=Q[ka][T];wa++)if(ea=V+(ha=wa*A),la=fa+Ra,!(0>(ja=Y+Ma)||0>ea||0>la||ja>=u||
ea>=r||la>=h)){var va=ja*ma+ea*h+la;if(2&z[va]){var Ca=L[t[va]];Ca.serial!=G.serial&&Ma*Ma+ha*ha+Ra*Ra<(O=Y+Ma-Math.floor(.5+f*(Ca.x+p)))*O+(Z=V+ha-Math.floor(.5+f*(Ca.y+e)))*Z+(W=fa+Ra-Math.floor(.5+f*(Ca.z+k)))*W&&(t[va]=G.serial)}else z[va]|=2,t[va]=G.serial}}T++}};this.buildboundary=function(){for(var G=r*h,L=0;L<u;L++)for(var O=0;O<h;O++)for(var Z=0;Z<r;Z++){var W=L*G+Z*h+O;if(1&z[W])for(var ha=0;26>ha;){var ja=L+R[ha][0],ea=O+R[ha][2],la=Z+R[ha][1];if(-1<ja&&ja<u&&-1<la&&la<r&&-1<ea&&ea<h&&
!(1&z[ja*G+la*h+ea])){z[W]|=4;break}ha++}}};var m=function(G,L,O){var Z=new Int32Array(G*L*O*3);this.set=function(W,ha,ja,ea){W=3*((W*L+ha)*O+ja);Z[W]=ea.ix;Z[W+1]=ea.iy;Z[W+2]=ea.iz};this.get=function(W,ha,ja){W=3*((W*L+ha)*O+ja);return{ix:Z[W],iy:Z[W+1],iz:Z[W+2]}}};this.fastdistancemap=function(){var G,L,O,Z,W=new m(u,r,h),ha=r*h,ja=H*H,ea=[];for(G=0;G<u;G++)for(L=0;L<r;L++)for(O=0;O<h;O++)if(z[Z=G*ha+L*h+O]&=-3,1&z[Z]&&4&z[Z]){var la={ix:G,iy:L,iz:O};W.set(G,L,O,la);ea.push(la);F[Z]=0;z[Z]|=2;
z[Z]&=-5}do for(O=this.fastoneshell(ea,W),ea=[],G=0,L=O.length;G<L;G++)Z=ha*O[G].ix+h*O[G].iy+O[G].iz,z[Z]&=-5,F[Z]<=1.0404*ja&&ea.push({ix:O[G].ix,iy:O[G].iy,iz:O[G].iz});while(0!==ea.length);G=f-.5;0>G&&(G=0);ja-=.5/(.1+G);for(G=0;G<u;G++)for(L=0;L<r;L++)for(O=0;O<h;O++)z[Z=G*ha+L*h+O]&=-5,1&z[Z]&&(2&z[Z]&&!(2&z[Z]&&F[Z]>=ja)||(z[Z]|=4))};this.fastoneshell=function(G,L){var O,Z,W,ha,ja,ea,la,oa=[];if(0===G.length)return oa;var wa=r*h;var U=0;for(ja=G.length;U<ja;U++){var A=G[U].ix;var I=G[U].iy;
var P=G[U].iz;var T=L.get(A,I,P);for(ha=0;6>ha;ha++){var Y=A+R[ha][0];var V=I+R[ha][1];var fa=P+R[ha][2];Y<u&&-1<Y&&V<r&&-1<V&&fa<h&&-1<fa&&(la=Y*wa+h*V+fa,1&z[la]&&!(2&z[la])?(L.set(Y,V,P+R[ha][2],T),ea=(O=Y-T.ix)*O+(Z=V-T.iy)*Z+(W=fa-T.iz)*W,F[la]=ea,z[la]|=2,z[la]|=4,oa.push({ix:Y,iy:V,iz:fa})):1&z[la]&&2&z[la]&&(ea=(O=Y-T.ix)*O+(Z=V-T.iy)*Z+(W=fa-T.iz)*W)<F[la]&&(L.set(Y,V,fa,T),F[la]=ea,4&z[la]||(z[la]|=4,oa.push({ix:Y,iy:V,iz:fa}))))}}U=0;for(ja=G.length;U<ja;U++)for(A=G[U].ix,I=G[U].iy,P=G[U].iz,
T=L.get(A,I,P),ha=6;18>ha;ha++)Y=A+R[ha][0],V=I+R[ha][1],fa=P+R[ha][2],Y<u&&-1<Y&&V<r&&-1<V&&fa<h&&-1<fa&&(la=Y*wa+h*V+fa,1&z[la]&&!(2&z[la])?(L.set(Y,V,P+R[ha][2],T),ea=(O=Y-T.ix)*O+(Z=V-T.iy)*Z+(W=fa-T.iz)*W,F[la]=ea,z[la]|=2,z[la]|=4,oa.push({ix:Y,iy:V,iz:fa})):1&z[la]&&2&z[la]&&(ea=(O=Y-T.ix)*O+(Z=V-T.iy)*Z+(W=fa-T.iz)*W)<F[la]&&(L.set(Y,V,fa,T),F[la]=ea,4&z[la]||(z[la]|=4,oa.push({ix:Y,iy:V,iz:fa}))));U=0;for(ja=G.length;U<ja;U++)for(A=G[U].ix,I=G[U].iy,P=G[U].iz,T=L.get(A,I,P),ha=18;26>ha;ha++)Y=
A+R[ha][0],V=I+R[ha][1],fa=P+R[ha][2],Y<u&&-1<Y&&V<r&&-1<V&&fa<h&&-1<fa&&(la=Y*wa+h*V+fa,1&z[la]&&!(2&z[la])?(L.set(Y,V,P+R[ha][2],T),ea=(O=Y-T.ix)*O+(Z=V-T.iy)*Z+(W=fa-T.iz)*W,F[la]=ea,z[la]|=2,z[la]|=4,oa.push({ix:Y,iy:V,iz:fa})):1&z[la]&&2&z[la]&&(ea=(O=Y-T.ix)*O+(Z=V-T.iy)*Z+(W=fa-T.iz)*W)<F[la]&&(L.set(Y,V,fa,T),F[la]=ea,4&z[la]||(z[la]|=4,oa.push({ix:Y,iy:V,iz:fa}))));return oa};this.marchingcubeinit=function(G){for(var L=0,O=z.length;L<O;L++)1==G?z[L]&=-5:4==G?(z[L]&=-3,4&z[L]&&(z[L]|=2),z[L]&=
-5):2==G?4&z[L]&&2&z[L]?z[L]&=-5:4&z[L]&&!(2&z[L])&&(z[L]|=2):3==G&&(z[L]&=-5)};this.marchingcube=function(G){this.marchingcubeinit(G);d=[];a=[];c.MarchingCube.march(z,d,a,{smooth:1,nX:u,nY:r,nZ:h});G=r*h;for(var L=0,O=d.length;L<O;L++)d[L].atomid=t[d[L].x*G+h*d[L].y+d[L].z];c.MarchingCube.laplacianSmooth(1,d,a)}};c.autoload=function(a,d){var p,e,k;if(void 0!==ra(".viewer_3Dmoljs")[0]&&(c.autoinit=!0),c.autoinit){a=null!=a?a:null;c.viewers={};var f=0;ra(".viewer_3Dmoljs").each(function(){var h=ra(this),
r=[],u=[],H="",z=!1;if("static"==h.css("position")&&h.css("position","relative"),h.data("ui")&&(z=!0),k=null,h.data("pdb"))r.push("https://files.rcsb.org/view/"+h.data("pdb")+".pdb"),u.push("pdb");else if(h.data("cid"))u.push("sdf"),r.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+h.data("cid")+"/SDF?record_type=3d");else if(h.data("href")||h.data("url")){H=h.data("href");r.push(H);k=H.substr(H.lastIndexOf(".")+1);u.push(k);var F=H.substring(H.lastIndexOf("/")+1,H.lastIndexOf("."));
"/"==F&&(F=H.substring(H.lastIndexOf("/")+1));h.data(u[u.length-1],F)}F=h.data();for(p in F)"pdb"===p.substring(0,3)&&"pdb"!==p?(r.push("https://files.rcsb.org/view/"+F[p]+".pdb"),u.push("pdb")):"href"===p.substring(0,4)&&"href"!==p?(H=F[p],r.push(H),u.push(H.substr(H.lastIndexOf(".")+1))):"cid"===p.substring(0,3)&&"cid"!==p&&(r.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+F[p]+"/SDF?record_type=3d"),u.push("sdf"));var t={};h.data("options")&&(t=c.specStringToObject(h.data("options")));
F=c.CC.color(h.data("backgroundcolor"));var q=h.data("backgroundalpha");q=null==q?1:parseFloat(q);var n={line:{}};h.data("style")&&(n=c.specStringToObject(h.data("style")));var v={};h.data("select")&&(v=c.specStringToObject(h.data("select")));var x=[],w=[],D=[],E={},Q=null,N=h.data(),R=/style(.+)/,m=/surface(.*)/,G=/labelres(.*)/,L=[];for(e in N)Object.prototype.hasOwnProperty.call(N,e)&&L.push(e);L.sort();for(p=0;p<L.length;p++){e=L[p];var O=R.exec(e),Z,W,ha;O&&(Z="select"+O[1],W=c.specStringToObject(N[Z]),
ha=c.specStringToObject(N[e]),x.push([W,ha]));(O=m.exec(e))&&(Z="select"+O[1],W=c.specStringToObject(N[Z]),ha=c.specStringToObject(N[e]),w.push([W,ha]));(O=G.exec(e))&&(Z="select"+O[1],W=c.specStringToObject(N[Z]),ha=c.specStringToObject(N[e]),D.push([W,ha]));"zoomto"==e&&(E=c.specStringToObject(N[e]));"spin"==e&&(Q=c.specStringToObject(N[e]))}var ja=function(wa){wa.setStyle(v,n);z&&wa.ui.loadSelectionStyle(v,n);for(p=0;p<x.length;p++){var U=x[p][0]||{},A=x[p][1]||{line:{}};wa.setStyle(U,A);z&&wa.ui.loadSelectionStyle(U,
A)}for(p=0;p<w.length;p++){U=w[p][0]||{};A=w[p][1]||{};var I=wa;z?function(P,T,Y,V){T.addSurface(P.SurfaceType.VDW,V,Y,Y).then(function(fa){T.ui.loadSurface("VDW",Y,V,fa)})}(c,I,U,A):wa.addSurface(c.SurfaceType.VDW,A,U,U)}for(p=0;p<D.length;p++)wa.addResLabels(D[p][0]||{},D[p][1]||{});wa.zoomTo(E);Q&&wa.spin(Q.axis,Q.speed);wa.render()},ea=a;try{if(null==ea){var la=h.data("config")||{};la.defaultcolors=la.defaultcolors||c.rasmolElementColors;void 0===la.backgroundColor&&(la.backgroundColor=F);void 0===
la.backgroundAlpha&&(la.backgroundAlpha=q);la.ui=z;ea=c.viewers[this.id||f++]=c.createViewer(h,la)}else ea.setBackgroundColor(F,q),z&&ea.ui.initiateUI()}catch(wa){console.log(wa),h.text("WebGL appears to be disabled.")}if(0!=r.length){p=0;var oa=function(wa){H=r[p];var U=h.data("type")||h.data("datatype")||u[p];if(ea.addModel(wa,U,t),z)wa=h.data(u[p]),ea.ui.setModelTitle(wa);if(p+=1,p<r.length)ra.get(r[p],oa,"text");else{if(ja(ea),h.data("callback"))wa=eval(h.data("callback")),"function"==typeof wa&&
wa(ea);d&&d(ea)}};ra.get(r[0],oa,"text")}else{h.data("element")&&(Z=ra("#"+h.data("element")).val()||"",(k=h.data("type")||h.data("datatype"))||(console.log("Warning: No type specified for embedded viewer with moldata from "+h.data("element")+"\n assuming type 'pdb'"),k="pdb"),ea.addModel(Z,k,t));if(ja(ea),h.data("callback"))Z=eval(h.data("callback")),"function"==typeof Z&&Z(ea);d&&d(ea)}})}};ra(document).ready(function(){c.autoload()});var gb=c.htmlColors={aliceblue:15792383,antiquewhite:16444375,
aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,
darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,
indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,
maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,
papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,
violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};c.CC={rgbRegEx:/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,cache:{0:new c.Color(0)},color:function p(d){if(!d)return this.cache[0];if(void 0!==this.cache[d])return this.cache[d];if(d&&d.constructor===Array)return d.map(p,this);if("number"==typeof(d=this.getHex(d))){var e=new c.Color(d);return this.cache[d]=e,e}return d},getHex:function(d){if(!isNaN(parseInt(d)))return parseInt(d);
if("string"==typeof d){if(4==(d=d.trim()).length&&"#"==d[0]&&(d="#"+d[1]+d[1]+d[2]+d[2]+d[3]+d[3]),7==d.length&&"#"==d[0])return parseInt(d.substring(1),16);var p=this.rgbRegEx.exec(d);if(p){""!=p[1]&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");d=0;for(var e=2;5>e;e++){d*=256;var k=p[e].endsWith("%")?255*parseFloat(p[e])/100:parseFloat(p[e]);d+=Math.round(k)}return d}return gb[d.toLowerCase()]||0}return d}};c.CC=c.CC;c.CC.color=c.CC.color;c.ssColors=
c.ssColors||{};c.ssColors.pyMol={h:16711680,s:16776960,c:65280};c.ssColors.Jmol={h:16711808,s:16762880,c:16777215};c.elementColors=c.elementColors||{};c.elementColors.defaultColor=16716947;c.elementColors.Jmol={H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578E4,SI:1578E4,P:16744448,S:16777008,Cl:2093087,CL:2093087,
Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,
Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366E3,XE:4366E3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,
TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32E3,RA:32E3,Ac:7384058,
AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998};c.elementColors.rasmol={H:16777215,He:16761035,HE:16761035,
Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120};c.elementColors.defaultColors=
c.elementColors.rasmol;c.elementColors.greenCarbon=c.extend({},c.elementColors.defaultColors);c.elementColors.greenCarbon.C=65280;c.elementColors.cyanCarbon=c.extend({},c.elementColors.defaultColors);c.elementColors.cyanCarbon.C=65535;c.elementColors.magentaCarbon=c.extend({},c.elementColors.defaultColors);c.elementColors.magentaCarbon.C=16711935;c.elementColors.yellowCarbon=c.extend({},c.elementColors.defaultColors);c.elementColors.yellowCarbon.C=16776960;c.elementColors.whiteCarbon=c.extend({},
c.elementColors.defaultColors);c.elementColors.whiteCarbon.C=16777215;c.elementColors.orangeCarbon=c.extend({},c.elementColors.defaultColors);c.elementColors.orangeCarbon.C=16753920;c.elementColors.purpleCarbon=c.extend({},c.elementColors.defaultColors);c.elementColors.purpleCarbon.C=8388736;c.elementColors.blueCarbon=c.extend({},c.elementColors.defaultColors);c.elementColors.blueCarbon.C=255;c.residues={};c.residues.amino={ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,
GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740};c.residues.shapely={ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935};c.residues.nucleic={A:10526975,
G:16740464,I:8454143,C:16747595,T:10551200,U:16744576};c.chains={};c.chains.atom={A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146};c.chains.hetatm={A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,
O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834};c.builtinColorSchemes={ssPyMol:{prop:"ss",map:c.ssColors.pyMol},ssJmol:{prop:"ss",map:c.ssColors.Jmol},Jmol:{prop:"elem",map:c.elementColors.Jmol},amino:{prop:"resn",map:c.residues.amino},shapely:{prop:"resn",map:c.residues.shapely},nucleic:{prop:"resn",map:c.residues.nucleic},chain:{prop:"chain",map:c.chains.atom},rasmol:{prop:"elem",map:c.elementColors.rasmol},default:{prop:"elem",
map:c.elementColors.defaultColors},greenCarbon:{prop:"elem",map:c.elementColors.greenCarbon},chainHetatm:{prop:"chain",map:c.chains.hetatm},cyanCarbon:{prop:"elem",map:c.elementColors.cyanCarbon},magentaCarbon:{prop:"elem",map:c.elementColors.magentaCarbon},purpleCarbon:{prop:"elem",map:c.elementColors.purpleCarbon},whiteCarbon:{prop:"elem",map:c.elementColors.whiteCarbon},orangeCarbon:{prop:"elem",map:c.elementColors.orangeCarbon},yellowCarbon:{prop:"elem",map:c.elementColors.yellowCarbon},blueCaron:{prop:"elem",
map:c.elementColors.blueCarbon}};c.getColorFromStyle=function(d,p){var e=p.colorscheme;if(void 0!==c.builtinColorSchemes[e])e=c.builtinColorSchemes[e];else if("string"==typeof e&&e.endsWith("Carbon")){var k=e.substring(0,e.lastIndexOf("Carbon")).toLowerCase();if(void 0!==gb[k]){var f=c.extend({},c.elementColors.defaultColors);f.C=gb[k];c.builtinColorSchemes[e]={prop:"elem",map:f};e=c.builtinColorSchemes[e]}}var h;k=d.color;if(void 0!==p.color&&"spectrum"!=p.color&&(k=p.color),void 0!==e)if(void 0!==
c.elementColors[e])void 0!==(e=c.elementColors[e])[d[e.prop]]&&(k=e.map[d[e.prop]]);else if(void 0!==e[d[e.prop]])k=e.map[d[e.prop]];else if(void 0!==e.prop&&void 0!==e.gradient){var r=e.prop;p=e.gradient;void 0!==c.Gradient.builtinGradients[p]&&(p=new c.Gradient.builtinGradients[p](e.min,e.max,e.mid));e=p.range()||[-1,1];null!=(h=c.getAtomProperty(d,r))&&(k=p.valueToHex(h,e))}else void 0!==e.prop&&void 0!==e.map?(r=e.prop,h=c.getAtomProperty(d,r),void 0!==e.map[h]&&(k=e.map[h])):void 0!==p.colorscheme[d.elem]?
k=p.colorscheme[d.elem]:console.log("Could not interpret colorscheme "+e);else void 0!==p.colorfunc&&(k=p.colorfunc(d));return c.CC.color(k)};c=c||{};c.subdivide_spline=function(d,p){var e,k,f,h,r,u=[],H;(H=[]).push(d[0]);var z=1;for(e=d.length-1;z<e;z++)if(f=d[z],h=d[z+1],f.smoothen){var F=new c.Vector3((f.x+h.x)/2,(f.y+h.y)/2,(f.z+h.z)/2);F.atom=f.atom;H.push(F)}else H.push(f);H.push(d[d.length-1]);z=-1;for(d=H.length;z<=d-3;z++)if(k=H[-1===z?0:z],f=H[z+1],h=H[z+2],r=H[z===d-3?d-1:z+3],e=(new c.Vector3).subVectors(h,
k).multiplyScalar(.5),F=(new c.Vector3).subVectors(r,f).multiplyScalar(.5),!h.skip)for(var t=0;t<p;t++){var q=1/p*t;q=new c.Vector3(f.x+q*e.x+q*q*(-3*f.x+3*h.x-2*e.x-F.x)+q*q*q*(2*f.x-2*h.x+e.x+F.x),f.y+q*e.y+q*q*(-3*f.y+3*h.y-2*e.y-F.y)+q*q*q*(2*f.y-2*h.y+e.y+F.y),f.z+q*e.z+q*q*(-3*f.z+3*h.z-2*e.z-F.z)+q*q*q*(2*f.z-2*h.z+e.z+F.z));q.atom=t<p/2?f.atom:h.atom;u.push(q)}return u.push(H[H.length-1]),u};c.drawCartoon=function(){var d=function(F,t,q,n){for(var v,x,w,D,E=0,Q=t.length;E<Q;E++){D=Math.round(E*
(n.length-1)/Q);w=c.CC.color(n[D]);D=F.updateGeoGroup(2);var N=D.vertexArray,R=D.colorArray,m=D.faceArray;N[x=3*(v=D.vertices)]=t[E].x;N[x+1]=t[E].y;N[x+2]=t[E].z;N[x+3]=q[E].x;N[x+4]=q[E].y;N[x+5]=q[E].z;for(N=0;6>N;++N)R[x+3*N]=w.r,R[x+1+3*N]=w.g,R[x+2+3*N]=w.b;0<E&&(v=[v,v+1,v-1,v-2],x=D.faceidx,m[x]=v[0],m[x+1]=v[1],m[x+2]=v[3],m[x+3]=v[1],m[x+4]=v[2],m[x+5]=v[3],D.faceidx+=6);D.vertices+=2}},p=function(F,t,q,n,v){0!==t.length&&(t=new c.Geometry,q=new c.LineBasicMaterial({linewidth:q}),q.vertexColors=
!0,q=new c.Line(t,q),q.type=c.LineStrip,F.add(q))},e=function(F,t,q,n,v,x,w){w&&"default"!==w||(w="rectangle");"edged"===w?function(D,E,Q,N,R,m){if(!(2>E.length)){var G,L;if(G=E[0],L=E[E.length-1],G=c.subdivide_spline(G,N),L=c.subdivide_spline(L,N),!R)return d(D,G,L,Q);var O,Z,W,ha,ja,ea,la,oa,wa,U,A,I,P,T;N=[];var Y=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]];E=0;for(U=G.length;E<U;E++){if(oa=Math.round(E*(Q.length-1)/U),la=c.CC.color(Q[oa]),N.push(O=G[E]),N.push(O),N.push(Z=L[E]),N.push(Z),
E<U-1){var V=G[E+1].clone().sub(G[E]);V=L[E].clone().sub(G[E]).cross(V).normalize().multiplyScalar(R)}N.push(W=G[E].clone().add(V));N.push(W);N.push(ha=L[E].clone().add(V));N.push(ha);void 0!==O.atom&&(wa=O.atom);var fa=(T=D.updateGeoGroup(8)).vertexArray;var ka=T.colorArray;var ma=T.faceArray;fa[ja=3*(m=T.vertices)]=O.x;fa[ja+1]=O.y;fa[ja+2]=O.z;fa[ja+3]=O.x;fa[ja+4]=O.y;fa[ja+5]=O.z;fa[ja+6]=Z.x;fa[ja+7]=Z.y;fa[ja+8]=Z.z;fa[ja+9]=Z.x;fa[ja+10]=Z.y;fa[ja+11]=Z.z;fa[ja+12]=W.x;fa[ja+13]=W.y;fa[ja+
14]=W.z;fa[ja+15]=W.x;fa[ja+16]=W.y;fa[ja+17]=W.z;fa[ja+18]=ha.x;fa[ja+19]=ha.y;fa[ja+20]=ha.z;fa[ja+21]=ha.x;fa[ja+22]=ha.y;fa[ja+23]=ha.z;for(fa=0;8>fa;++fa)ka[ja+3*fa]=la.r,ka[ja+1+3*fa]=la.g,ka[ja+2+3*fa]=la.b;if(0<E)for(ja=void 0!==Ca&&void 0!==wa&&Ca.serial!==wa.serial,fa=0;4>fa;fa++){var za=[m+Y[fa][0],m+Y[fa][1],m+Y[fa][2],m+Y[fa][3]];if(ma[ea=T.faceidx]=za[0],ma[ea+1]=za[1],ma[ea+2]=za[3],ma[ea+3]=za[1],ma[ea+4]=za[2],ma[ea+5]=za[3],T.faceidx+=6,wa.clickable||Ca.clickable||wa.hoverable||
Ca.hoverable){ka=N[za[3]].clone();W=N[za[0]].clone();ha=N[za[2]].clone();var Ma=N[za[1]].clone();if(ka.atom=N[za[3]].atom||null,ha.atom=N[za[2]].atom||null,W.atom=N[za[0]].atom||null,Ma.atom=N[za[1]].atom||null,ja){za=ka.clone().add(W).multiplyScalar(.5);var Ra=ha.clone().add(Ma).multiplyScalar(.5),va=ka.clone().add(Ma).multiplyScalar(.5);0==fa%2?((Ca.clickable||Ca.hoverable)&&(A=new c.Triangle(za,va,ka),I=new c.Triangle(Ra,ha,va),P=new c.Triangle(va,ha,ka),Ca.intersectionShape.triangle.push(A),Ca.intersectionShape.triangle.push(I),
Ca.intersectionShape.triangle.push(P)),(wa.clickable||wa.hoverable)&&(A=new c.Triangle(W,Ma,va),I=new c.Triangle(Ma,Ra,va),P=new c.Triangle(W,va,za),wa.intersectionShape.triangle.push(A),wa.intersectionShape.triangle.push(I),wa.intersectionShape.triangle.push(P))):((wa.clickable||wa.hoverable)&&(A=new c.Triangle(za,va,ka),I=new c.Triangle(Ra,ha,va),P=new c.Triangle(va,ha,ka),wa.intersectionShape.triangle.push(A),wa.intersectionShape.triangle.push(I),wa.intersectionShape.triangle.push(P)),(Ca.clickable||
Ca.hoverable)&&(A=new c.Triangle(W,Ma,va),I=new c.Triangle(Ma,Ra,va),P=new c.Triangle(W,va,za),Ca.intersectionShape.triangle.push(A),Ca.intersectionShape.triangle.push(I),Ca.intersectionShape.triangle.push(P)))}else(wa.clickable||wa.hoverable)&&(A=new c.Triangle(W,Ma,ka),I=new c.Triangle(Ma,ha,ka),wa.intersectionShape.triangle.push(A),wa.intersectionShape.triangle.push(I))}}T.vertices+=8;var Ca=wa}Q=N.length-8;fa=(T=D.updateGeoGroup(8)).vertexArray;ka=T.colorArray;ma=T.faceArray;ja=3*(m=T.vertices);
ea=T.faceidx;for(E=0;4>E;E++)N.push(N[2*E]),N.push(N[Q+2*E]),D=N[2*E],R=N[Q+2*E],fa[ja+6*E]=D.x,fa[ja+1+6*E]=D.y,fa[ja+2+6*E]=D.z,fa[ja+3+6*E]=R.x,fa[ja+4+6*E]=R.y,fa[ja+5+6*E]=R.z,ka[ja+6*E]=la.r,ka[ja+1+6*E]=la.g,ka[ja+2+6*E]=la.b,ka[ja+3+6*E]=la.r,ka[ja+4+6*E]=la.g,ka[ja+5+6*E]=la.b;A=[m,m+2,m+6,m+4];I=[m+1,m+5,m+7,m+3];ma[ea]=A[0];ma[ea+1]=A[1];ma[ea+2]=A[3];ma[ea+3]=A[1];ma[ea+4]=A[2];ma[ea+5]=A[3];ma[ea+6]=I[0];ma[ea+7]=I[1];ma[ea+8]=I[3];ma[ea+9]=I[1];ma[ea+10]=I[2];ma[ea+11]=I[3];T.faceidx+=
12;T.vertices+=8}}(F,t,q,n,v):"rectangle"!==w&&"oval"!==w&&"parabola"!==w||function(D,E,Q,N,R,m,G){var L,O;if(!(2>(O=E.length)||2>E[0].length)){for(m=0;m<O;m++)E[m]=c.subdivide_spline(E[m],N);if(N=E[0].length,!R)return d(D,E[0],E[O-1],Q);var Z,W=[],ha=[],ja=[];for(L=0;L<O;L++)W.push(.25+1.5*Math.sqrt((O-1)*L-Math.pow(L,2))/(O-1)),ha.push(.5),ja.push(2*(Math.pow(L/O,2)-L/O)+.6);var ea,la=[];for(L=0;L<2*O-1;L++)la[L]=[L,L+1,L+1-2*O,L-2*O];la[2*O-1]=[L,L+1-2*O,L+1-4*O,L-2*O];D=D.updateGeoGroup(2*O*N);
for(m=0;m<N;m++){L=Math.round(m*(Q.length-1)/N);var oa=c.CC.color(Q[L]);var wa=A;var U=I;var A=[];var I=[];var P=[];void 0!==E[0][m].atom&&(ea=E[0][m].atom,"oval"===G?Z=W:"rectangle"===G?Z=ha:"parabola"===G&&(Z=ja));Z||(Z=ha);for(L=0;L<O;L++){var T=m<N-1?E[L][m+1].clone().sub(E[L][m]):E[L][m-1].clone().sub(E[L][m]).negate();var Y=L<O-1?E[L+1][m].clone().sub(E[L][m]):E[L-1][m].clone().sub(E[L][m]).negate();P[L]=Y.cross(T).normalize().multiplyScalar(R*Z[L])}for(L=0;L<O;L++)A[L]=E[L][m].clone().add(P[L].clone().negate());
for(L=0;L<O;L++)I[L]=E[L][m].clone().add(P[L]);var V=D.vertexArray;var fa=D.colorArray;T=D.faceArray;Y=3*(P=D.vertices);for(L=0;L<O;L++)V[Y+3*L+0]=A[L].x,V[Y+3*L+1]=A[L].y,V[Y+3*L+2]=A[L].z;for(L=0;L<O;L++)V[Y+3*L+0+3*O]=I[O-1-L].x,V[Y+3*L+1+3*O]=I[O-1-L].y,V[Y+3*L+2+3*O]=I[O-1-L].z;for(L=0;L<2*O;++L)fa[Y+3*L+0]=oa.r,fa[Y+3*L+1]=oa.g,fa[Y+3*L+2]=oa.b;if(0<m){for(L=0;L<2*O;L++)Y=[P+la[L][0],P+la[L][1],P+la[L][2],P+la[L][3]],T[oa=D.faceidx]=Y[0],T[oa+1]=Y[1],T[oa+2]=Y[3],T[oa+3]=Y[1],T[oa+4]=Y[2],T[oa+
5]=Y[3],D.faceidx+=6;if(ea.clickable||ea.hoverable)for(L in oa=[],oa.push(new c.Triangle(wa[0],A[0],A[O-1])),oa.push(new c.Triangle(wa[0],A[O-1],wa[O-1])),oa.push(new c.Triangle(wa[O-1],A[O-1],I[O-1])),oa.push(new c.Triangle(wa[O-1],I[O-1],U[O-1])),oa.push(new c.Triangle(I[0],U[0],U[O-1])),oa.push(new c.Triangle(I[O-1],I[0],U[O-1])),oa.push(new c.Triangle(A[0],wa[0],U[0])),oa.push(new c.Triangle(I[0],A[0],U[0])),oa)ea.intersectionShape.triangle.push(oa[L])}D.vertices+=2*O}T=D.faceArray;P=D.vertices;
for(m=0;m<O-1;m++)Y=[m,m+1,2*O-2-m,2*O-1-m],T[oa=D.faceidx]=Y[0],T[oa+1]=Y[1],T[oa+2]=Y[3],T[oa+3]=Y[1],T[oa+4]=Y[2],T[oa+5]=Y[3],D.faceidx+=6;for(m=0;m<O-1;m++)Y=[P-1-m,P-2-m,P-2*O+m+1,P-2*O+m],T[oa=D.faceidx]=Y[0],T[oa+1]=Y[1],T[oa+2]=Y[3],T[oa+3]=Y[1],T[oa+4]=Y[2],T[oa+5]=Y[3],D.faceidx+=6}}(F,t,q,n,v,0,w)},k=function(F,t){if(F&&t&&F.chain===t.chain){if(!(F.hetflag||t.hetflag||F.reschain!==t.reschain||F.resi!==t.resi&&F.resi!==t.resi-1))return!0;if(F.resi<t.resi){var q=F.x-t.x,n=F.y-t.y,v=F.z-
t.z;q=q*q+n*n+v*v;if("CA"==F.atom&&"CA"==t.atom&&16>q||("P"==F.atom||"P"==t.atom)&&64>q)return!0}}return!1},f=function(F,t,q,n,v){null!=t&&0!=t.vertices&&(v&&(t.initTypedArrays(),t.setUpNormals()),v=new c.MeshDoubleLambertMaterial,v.vertexColors=c.FaceColors,"number"==typeof q&&0<=q&&1>q&&(v.transparent=!0,v.opacity=q),v.outline=n,t=new c.Mesh(t,v),F.add(t))},h=function(F,t,q,n,v,x,w,D,E){var Q,N,R;if(n&&v&&w){var m=v.sub(n);m.normalize();var G=D[E];for(E+=1;E<D.length&&(G=D[E]).atom!=w.atom;E++);
if((G=G?new c.Vector3(G.x,G.y,G.z):new c.Vector3(0,0,0)).sub(n),"arrow start"===w.ss)E=G.clone().multiplyScalar(.3).cross(v),n.add(E),E=G.clone().cross(m).normalize(),m.rotateAboutVector(E,.43);w.style.cartoon.ribbon?Q=w.style.cartoon.thickness||.4:w.style.cartoon.width?Q=w.style.cartoon.width:"c"===w.ss?Q="P"===w.atom?.8:.5:"arrow start"===w.ss?(Q=1.3,N=!0):Q="arrow end"===w.ss||"h"===w.ss&&w.style.cartoon.tubes||"tube start"===w.ss?.5:1.3;null!=x&&0>m.dot(x)&&m.negate();m.multiplyScalar(Q);for(E=
0;E<t;E++)x=2*E/(t-1)-1,(x=new c.Vector3(n.x+x*m.x,n.y+x*m.y,n.z+x*m.z)).atom=w,q&&"s"===w.ss&&(x.smoothen=!0),F[E].push(x);if(N)for(m.multiplyScalar(2),E=0;E<t;E++)x=2*E/(t-1)-1,(x=new c.Vector3(n.x+x*m.x,n.y+x*m.y,n.z+x*m.z)).atom=w,x.smoothen=!1,x.skip=!0,F[E].push(x);return R=w.style.cartoon.style||"default",F.style?F.style!=R&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),F.style="default"):F.style=R,"arrow start"!==w.ss&&"arrow end"!==w.ss||(w.ss="s"),N}},r={C:!0,CA:!0,
O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},u={DA:!0,DG:!0,A:!0,G:!0},H={DT:!0,DC:!0,U:!0,C:!0,T:!0},z={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};return function(F,t,q,n){!function(v,x,w,D,E,Q,N){var R,m,G,L,O,Z,W,ha,ja,ea,la,oa,wa;Q=Q||5;N=N||5;var U=new c.Geometry(!0),A=new c.Geometry(!0),I=[],P=[],T=1,Y=!1,V={};for(fa in c.Gradient.builtinGradients)c.Gradient.builtinGradients.hasOwnProperty(fa)&&(V[fa]=new c.Gradient.builtinGradients[fa](w[1],
w[0]));var fa=function($a,ob){return w&&"spectrum"===ob.color?ob.colorscheme in V?V[ob.colorscheme].valueToHex($a.resi):V.sinebow.valueToHex($a.resi):c.getColorFromStyle($a,ob).getHex()};for(O=0;O<Q;O++)P[O]=[];var ka=!1,ma=!1,za=[];for(O in x){if("C"===(m=x[O]).elem&&"CA"===m.atom){var Ma=k(va,m);Ma&&"s"===m.ss?ka=!0:ka&&(va&&Ra&&va.style.cartoon.arrows&&Ra.style.cartoon.arrows&&(va.ss="arrow end",Ra.ss="arrow start"),ka=!1);Ma&&("h"===va.ss||"tube start"==va.ss)&&va.style.cartoon.tubes?!ma&&"tube start"!=
va.ss&&m.style.cartoon.tubes&&(m.ss="tube start",ma=!0):ma&&("tube start"===va.ss?va.ss="tube end":Ra&&Ra.style.cartoon.tubes&&(Ra.ss="tube end"),ma=!1);var Ra=va;var va=m}m&&m.atom in r&&za.push(m)}ma&&va.style.cartoon.tubes&&(va.ss="tube end",ma=!1);x=function($a){for(var ob=0;!L&&ob<Q;ob++)p(v,P[ob],1,0,N);D&&0<P[0].length&&e(A,P,I,N,L,0,P.style);var Lb=[],Ub=null;if($a){for(ob=0;ob<Q;ob++)Lb[ob]=P[ob][P[ob].length-1];Ub=I[I.length-1]}P=[];for(ob=0;ob<Q;ob++)P[ob]=[];if(I=[],$a){for(ob=0;ob<Q;ob++)P[ob].push(Lb[ob]);
I.push(Ub)}f(v,A,T,Y,!0);f(v,U,T,Y,!1);A=new c.Geometry(!0);U=new c.Geometry(!0)};va=void 0;for(Ra=0;Ra<za.length;Ra++)if(O=(m=za[Ra]).resn.trim(),ka=O in z,T=1,R=m.style.cartoon,va&&va.style.cartoon&&(T=va.style.cartoon.opacity),va&&va.style.cartoon&&va.style.cartoon.outline&&(Y=va.style.cartoon.outline),!va||!va.style.cartoon||m.style.cartoon&&va.style.cartoon.opacity==m.style.cartoon.opacity||x(va.chain==m.chain),P.length&&P[0].length>3E4/Q/N/2&&x(!0),"trace"===R.style){if(!m.hetflag&&("C"===m.elem&&
"CA"===m.atom||ka&&"P"===m.atom)){if(G=fa(m,R),L=c.isNumeric(R.thickness)?R.thickness:.4,k(va,m))if(G==Ca){var Ca=c.CC.color(G);c.GLDraw.drawCylinder(U,va,m,L,Ca,2,2)}else O=(new c.Vector3).addVectors(va,m).multiplyScalar(.5),Ca=c.CC.color(Ca),ka=c.CC.color(G),c.GLDraw.drawCylinder(U,va,O,L,Ca,2,0),c.GLDraw.drawCylinder(U,O,m,L,ka,0,2);!0!==m.clickable&&!m.hoverable||void 0===m.intersectionShape||(va=new c.Vector3(m.x,m.y,m.z),m.intersectionShape.sphere.push(new c.Sphere(va,L)));va=m;Ca=G}}else{if(m&&
"C"===m.elem&&"CA"===m.atom||ka&&("P"===m.atom||0==m.atom.indexOf("O5"))){if(Oa)if("tube end"===m.ss){var Oa=!1;O=new c.Vector3(m.x,m.y,m.z);c.GLDraw.drawCylinder(U,wa,O,2,c.CC.color(Ca),1,1);m.ss="h"}else{if(va.chain==m.chain&&"tube end"!==va.ss)continue;Oa=!1;va.ss="h";O=new c.Vector3(va.x,va.y,va.z);c.GLDraw.drawCylinder(U,wa,O,2,c.CC.color(Ca),1,1)}if(va&&(!k(va,m)||"tube start"===va.ss)){"tube start"===va.ss&&(Oa=!0,wa=new c.Vector3(va.x,va.y,va.z),va.ss="h");oa&&(la=ja?(new c.Vector3).addVectors(va,
ja).multiplyScalar(.5):new c.Vector3(va.x,va.y,va.z),c.GLDraw.drawCylinder(U,la,oa,.4,c.CC.color(oa.color),0,2),h(P,Q,!E,ja,ea,ha,va,za,Ra),I.push(G),la=null,oa=null);for(O=0;!L&&O<Q;O++)p(v,P[O],1,0,N);D&&0<P[0].length&&e(A,P,I,N,L,0,P.style);P=[];for(O=0;O<Q;O++)P[O]=[];I=[]}if(void 0===va||va.rescode!=m.rescode||va.resi!=m.resi)oa&&(G=(la=(new c.Vector3).addVectors(va,m).multiplyScalar(.5)).clone().sub(oa).multiplyScalar(.02),la.add(G),c.GLDraw.drawCylinder(U,la,oa,.4,c.CC.color(oa.color),0,2),
oa=la=null),G=fa(m,R),I.push(G),L=c.isNumeric(R.thickness)?R.thickness:.4,va=m,(Z=new c.Vector3(va.x,va.y,va.z)).resi=va.resi,Ca=G;!0!==m.clickable&&!0!==m.hoverable||void 0!==m.intersectionShape&&void 0!==m.intersectionShape.triangle||(m.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else va&&"C"===va.elem&&"CA"===va.atom&&"O"===m.atom||ka&&"P"===va.atom&&("OP2"===m.atom||"O2P"===m.atom)||ka&&0==va.atom.indexOf("O5")&&0==m.atom.indexOf("C5")?((W=new c.Vector3(m.x,m.y,m.z)).resi=
m.resi,"OP2"!==m.atom&&"O2P"!==m.atom||(ea=new c.Vector3(m.x,m.y,m.z))):ka&&0==m.atom.indexOf("O3")?ja=new c.Vector3(m.x,m.y,m.z):("N1"===m.atom&&O in u||"N3"===m.atom&&O in H)&&((oa=new c.Vector3(m.x,m.y,m.z)).color=c.getColorFromStyle(m,R).getHex());W&&Z&&W.resi===Z.resi&&(h(P,Q,!E,Z,W,ha,va,za,Ra),ha=W,Z=null,W=null,I.push(G))}oa&&(la=ja?(new c.Vector3).addVectors(va,ja).multiplyScalar(.5):new c.Vector3(va.x,va.y,va.z),c.GLDraw.drawCylinder(U,la,oa,.4,c.CC.color(oa.color),0,2),h(P,Q,!E,ja,ea,ha,
va,za,Ra),I.push(G));x()}(F,t,q,!0,!1,n=n||5,n)}}();c=c||{};c.CAP={NONE:0,FLAT:1,ROUND:2};c.GLDraw=function(){var d,p={},e=(d=new c.Vector3,function(r){d.set(r[0],r[1],r[2]);var u,H,z,F,t;r=d.x;var q=d.y,n=d.z,v=Math.sqrt(r*r+q*q);1E-4>v?(H=0,z=1):(H=-r/v,z=q/v);q=-H*r+z*q;1E-4>(u=Math.sqrt(q*q+n*n))?(F=0,t=1):(F=n/u,t=q/u);u=new Float32Array(9);return u[0]=z,u[1]=H,u[2]=0,u[3]=-H*t,u[4]=z*t,u[5]=F,u[6]=H*F,u[7]=-z*F,u[8]=t,u}),k=function(){var r,u=[],H=Math.pow(2,4),z,F=Math.pow(2,2),t=H/F;u[0]=
new c.Vector3(-1,0,0);u[t]=new c.Vector3(0,0,1);u[2*t]=new c.Vector3(1,0,0);u[3*t]=new c.Vector3(0,0,-1);for(z=3;4>=z;z++){t=H/(F=Math.pow(2,z-1));for(r=0;r<F-1;r++)u[t/2+r*t]=u[r*t].clone().add(u[(r+1)*t]).normalize();u[t/2+(r=F-1)*t]=u[r*t].clone().add(u[0]).normalize()}return u}(),f={cache:{},getVerticesForRadius:function(r,u,H){if(void 0!==this.cache[r]&&void 0!==this.cache[r][u+H])return this.cache[r][u+H];for(var z,F=k.length,t=[],q=[],n=0;n<F;n++)t.push(k[n].clone().multiplyScalar(r)),t.push(k[n].clone().multiplyScalar(r)),
z=k[n].clone().normalize(),q.push(z),q.push(z);n=[];var v,x,w=2*Math.PI,D=Math.PI;for(x=0;10>=x;x++){var E=0===x||10===x;var Q=5===x;var N=[],R=[];for(v=0;v<=F;v++)if(Q){var m=v<F?2*v:0;R.push(m+1);N.push(m)}else{m=v/F;var G=x/10;if(E&&0!==v)E&&N.push(t.length-1);else if(v<F){var L=new c.Vector3;L.x=-r*Math.cos(m*w)*Math.sin(G*D);L.y=1==u?0:r*Math.cos(G*D);L.z=r*Math.sin(m*w)*Math.sin(G*D);1E-5>Math.abs(L.x)&&(L.x=0);1E-5>Math.abs(L.y)&&(L.y=0);1E-5>Math.abs(L.z)&&(L.z=0);u==c.CAP.FLAT?(z=new c.Vector3(0,
Math.cos(G*D),0)).normalize():(z=new c.Vector3(L.x,L.y,L.z)).normalize();t.push(L);q.push(z);N.push(t.length-1)}else N.push(t.length-F)}Q&&n.push(R);n.push(N)}z={vertices:t,normals:q,verticesRows:n,w:F,h:10};return r in this.cache||(this.cache[r]={}),this.cache[r][u+H]=z,z}};p.drawCylinder=function(r,u,H,z,F,t,q){if(u&&H){0;var n=q||t;F=F||{r:0,g:0,b:0};var v=[H.x,H.y,H.z];v[0]-=u.x;v[1]-=u.y;v[2]-=u.z;var x;v=e(v);var w=f.getVerticesForRadius(z,q,"to");var D=w.w,E=w.h,Q=n?E*D+2:2*D;r=r.updateGeoGroup(Q);
var N=w.vertices,R=w.normals,m=w.verticesRows,G=m[E/2],L=m[E/2+1],O=r.vertices,Z=r.vertexArray,W=r.normalArray,ha=r.colorArray,ja=r.faceArray;for(x=0;x<D;++x){var ea=2*x;var la=v[0]*N[ea].x+v[3]*N[ea].y+v[6]*N[ea].z;w=v[1]*N[ea].x+v[4]*N[ea].y+v[7]*N[ea].z;var oa=v[5]*N[ea].y+v[8]*N[ea].z;var wa=3*(O+ea);ea=r.faceidx;Z[wa]=la+u.x;Z[wa+1]=w+u.y;Z[wa+2]=oa+u.z;Z[wa+3]=la+H.x;Z[wa+4]=w+H.y;Z[wa+5]=oa+H.z;W[wa]=la;W[wa+3]=la;W[wa+1]=w;W[wa+4]=w;W[wa+2]=oa;W[wa+5]=oa;ha[wa]=F.r;ha[wa+3]=F.r;ha[wa+1]=F.g;
ha[wa+4]=F.g;ha[wa+2]=F.b;ha[wa+5]=F.b;ja[ea]=L[x]+O;ja[ea+1]=L[x+1]+O;ja[ea+2]=G[x]+O;ja[ea+3]=G[x]+O;ja[ea+4]=L[x+1]+O;ja[ea+5]=G[x+1]+O;r.faceidx+=6}if(n)for(n=t?E+1:E/2+1,w=q?0:E/2;w<n;w++)if(w!==E/2)for(x=w<=E/2?H:u,la=f.getVerticesForRadius(z,q,"to"),ea=f.getVerticesForRadius(z,t,"from"),x===H?(N=la.vertices,R=la.normals,m=la.verticesRows):x==u&&(N=ea.vertices,R=ea.normals,m=ea.verticesRows),la=0;la<D;la++){ea=r.faceidx;var U=3*((oa=m[w][la+1])+O);var A=3*((G=m[w][la])+O);var I=3*((L=m[w+1][la])+
O);var P=3*((wa=m[w+1][la+1])+O);var T=v[0]*N[oa].x+v[3]*N[oa].y+v[6]*N[oa].z;var Y=v[0]*N[G].x+v[3]*N[G].y+v[6]*N[G].z;var V=v[0]*N[L].x+v[3]*N[L].y+v[6]*N[L].z;var fa=v[0]*N[wa].x+v[3]*N[wa].y+v[6]*N[wa].z;var ka=v[1]*N[oa].x+v[4]*N[oa].y+v[7]*N[oa].z;var ma=v[1]*N[G].x+v[4]*N[G].y+v[7]*N[G].z;var za=v[1]*N[L].x+v[4]*N[L].y+v[7]*N[L].z;var Ma=v[1]*N[wa].x+v[4]*N[wa].y+v[7]*N[wa].z;var Ra=v[5]*N[oa].y+v[8]*N[oa].z;var va=v[5]*N[G].y+v[8]*N[G].z;var Ca=v[5]*N[L].y+v[8]*N[L].z;var Oa=v[5]*N[wa].y+
v[8]*N[wa].z;Z[U]=T+x.x;Z[A]=Y+x.x;Z[I]=V+x.x;Z[P]=fa+x.x;Z[U+1]=ka+x.y;Z[A+1]=ma+x.y;Z[I+1]=za+x.y;Z[P+1]=Ma+x.y;Z[U+2]=Ra+x.z;Z[A+2]=va+x.z;Z[I+2]=Ca+x.z;Z[P+2]=Oa+x.z;ha[U]=F.r;ha[A]=F.r;ha[I]=F.r;ha[P]=F.r;ha[U+1]=F.g;ha[A+1]=F.g;ha[I+1]=F.g;ha[P+1]=F.g;ha[U+2]=F.b;ha[A+2]=F.b;ha[I+2]=F.b;ha[P+2]=F.b;T=v[0]*R[oa].x+v[3]*R[oa].y+v[6]*R[oa].z;Y=v[0]*R[G].x+v[3]*R[G].y+v[6]*R[G].z;V=v[0]*R[L].x+v[3]*R[L].y+v[6]*R[L].z;fa=v[0]*R[wa].x+v[3]*R[wa].y+v[6]*R[wa].z;ka=v[1]*R[oa].x+v[4]*R[oa].y+v[7]*R[oa].z;
ma=v[1]*R[G].x+v[4]*R[G].y+v[7]*R[G].z;za=v[1]*R[L].x+v[4]*R[L].y+v[7]*R[L].z;Ma=v[1]*R[wa].x+v[4]*R[wa].y+v[7]*R[wa].z;Ra=v[5]*R[oa].y+v[8]*R[oa].z;va=v[5]*R[G].y+v[8]*R[G].z;Ca=v[5]*R[L].y+v[8]*R[L].z;Oa=v[5]*R[wa].y+v[8]*R[wa].z;0===w?(W[U]=T,W[I]=V,W[P]=fa,W[U+1]=ka,W[I+1]=za,W[P+1]=Ma,W[U+2]=Ra,W[I+2]=Ca,W[P+2]=Oa,ja[ea]=oa+O,ja[ea+1]=L+O,ja[ea+2]=wa+O,r.faceidx+=3):w===n-1?(W[U]=T,W[A]=Y,W[I]=V,W[U+1]=ka,W[A+1]=ma,W[I+1]=za,W[U+2]=Ra,W[A+2]=va,W[I+2]=Ca,ja[ea]=oa+O,ja[ea+1]=G+O,ja[ea+2]=L+O,
r.faceidx+=3):(W[U]=T,W[A]=Y,W[P]=fa,W[U+1]=ka,W[A+1]=ma,W[P+1]=Ma,W[U+2]=Ra,W[A+2]=va,W[P+2]=Oa,W[A]=Y,W[I]=V,W[P]=fa,W[A+1]=ma,W[I+1]=za,W[P+1]=Ma,W[A+2]=va,W[I+2]=Ca,W[P+2]=Oa,ja[ea]=oa+O,ja[ea+1]=G+O,ja[ea+2]=wa+O,ja[ea+3]=G+O,ja[ea+4]=L+O,ja[ea+5]=wa+O,r.faceidx+=6)}r.vertices+=Q}};p.drawCone=function(r,u,H,z,F){if(u&&H){F=F||{r:0,g:0,b:0};var t=[H.x,H.y,H.z];t.x-=u.x;t.y-=u.y;t.z-=u.z;var q=e(t),n=k.length;r=r.updateGeoGroup(n+2);var v=r.vertices,x=r.vertexArray,w=r.normalArray,D=r.colorArray,
E=r.faceArray;var Q=3*v;t=(new c.Vector3(t[0],t[1],t[2])).normalize();x[Q]=u.x;x[Q+1]=u.y;x[Q+2]=u.z;w[Q]=-t.x;w[Q+1]=-t.y;w[Q+2]=-t.z;D[Q]=F.r;D[Q+1]=F.g;D[Q+2]=F.b;x[Q+3]=H.x;x[Q+4]=H.y;x[Q+5]=H.z;w[Q+3]=t.x;w[Q+4]=t.y;w[Q+5]=t.z;D[Q+3]=F.r;D[Q+4]=F.g;D[Q+5]=F.b;Q+=6;for(H=0;H<n;++H){var N=k[H].clone();N.multiplyScalar(z);t=q[0]*N.x+q[3]*N.y+q[6]*N.z;var R=q[1]*N.x+q[4]*N.y+q[7]*N.z;N=q[5]*N.y+q[8]*N.z;x[Q]=t+u.x;x[Q+1]=R+u.y;x[Q+2]=N+u.z;w[Q]=t;w[Q+1]=R;w[Q+2]=N;D[Q]=F.r;D[Q+1]=F.g;D[Q+2]=F.b;
Q+=3}r.vertices+=n+2;u=r.faceidx;for(H=0;H<n;H++)z=v+2+H,F=v+2+(H+1)%n,E[u]=z,E[u+1]=F,E[u+2]=v,E[u+=3]=z,E[u+1]=F,E[u+2]=v+1,u+=3;r.faceidx+=6*n}};var h={cache:{},getVerticesForRadius:function(r){if(void 0!==this.cache[r])return this.cache[r];var u={vertices:[],verticesRows:[],normals:[]},H=16,z=10;1>r&&(H=10,z=8);var F,t,q=2*Math.PI,n=Math.PI;for(t=0;t<=z;t++){var v=[];for(F=0;F<=H;F++){var x=F/H,w=t/z,D={};D.x=-r*Math.cos(x*q)*Math.sin(w*n);D.y=r*Math.cos(w*n);D.z=r*Math.sin(x*q)*Math.sin(w*n);
x=new c.Vector3(D.x,D.y,D.z);x.normalize();u.vertices.push(D);u.normals.push(x);v.push(u.vertices.length-1)}u.verticesRows.push(v)}return this.cache[r]=u,u}};return p.drawSphere=function(r,u,H,z){var F=h.getVerticesForRadius(H),t=F.vertices,q=F.normals;r=r.updateGeoGroup(t.length);for(var n=r.vertices,v=r.vertexArray,x=r.colorArray,w=r.faceArray,D=r.lineArray,E=r.normalArray,Q=0,N=t.length;Q<N;++Q){var R=3*(n+Q),m=t[Q];v[R]=m.x+u.x;v[R+1]=m.y+u.y;v[R+2]=m.z+u.z;x[R]=z.r;x[R+1]=z.g;x[R+2]=z.b}r.vertices+=
t.length;F=F.verticesRows;v=F.length-1;for(z=0;z<v;z++)for(x=F[z].length-1,u=0;u<x;u++){Q=r.faceidx;N=r.lineidx;R=F[z][u+1]+n;m=3*R;var G=F[z][u]+n,L=3*G,O=F[z+1][u]+n,Z=3*O,W=F[z+1][u+1]+n,ha=3*W,ja=q[R-n],ea=q[G-n],la=q[O-n],oa=q[W-n];Math.abs(t[R-n].y)===H?(E[m]=ja.x,E[Z]=la.x,E[ha]=oa.x,E[m+1]=ja.y,E[Z+1]=la.y,E[ha+1]=oa.y,E[m+2]=ja.z,E[Z+2]=la.z,E[ha+2]=oa.z,w[Q]=R,w[Q+1]=O,w[Q+2]=W,D[N]=R,D[N+1]=O,D[N+2]=R,D[N+3]=W,D[N+4]=O,D[N+5]=W,r.faceidx+=3,r.lineidx+=6):Math.abs(t[O-n].y)===H?(E[m]=ja.x,
E[L]=ea.x,E[Z]=la.x,E[m+1]=ja.y,E[L+1]=ea.y,E[Z+1]=la.y,E[m+2]=ja.z,E[L+2]=ea.z,E[Z+2]=la.z,w[Q]=R,w[Q+1]=G,w[Q+2]=O,D[N]=R,D[N+1]=G,D[N+2]=R,D[N+3]=O,D[N+4]=G,D[N+5]=O,r.faceidx+=3,r.lineidx+=6):(E[m]=ja.x,E[L]=ea.x,E[ha]=oa.x,E[m+1]=ja.y,E[L+1]=ea.y,E[ha+1]=oa.y,E[m+2]=ja.z,E[L+2]=ea.z,E[ha+2]=oa.z,E[L]=ea.x,E[Z]=la.x,E[ha]=oa.x,E[L+1]=ea.y,E[Z+1]=la.y,E[ha+1]=oa.y,E[L+2]=ea.z,E[Z+2]=la.z,E[ha+2]=oa.z,w[Q]=R,w[Q+1]=G,w[Q+2]=W,w[Q+3]=G,w[Q+4]=O,w[Q+5]=W,D[N]=R,D[N+1]=G,D[N+2]=R,D[N+3]=W,D[N+4]=G,
D[N+5]=O,D[N+6]=O,D[N+7]=W,r.faceidx+=6,r.lineidx+=8)}},p}();c=c||{};c.GLModel=function(){function d(f,h){var r=[],u=[],H=null,z=null,F=!1,t=null,q=null,n=null,v={},x=null,w=new c.Matrix4,D=!0,E=c.elementColors.defaultColor,Q=(h=h||{}).defaultcolors?h.defaultcolors:c.elementColors.defaultColors,N=h.defaultSphereRadius?h.defaultSphereRadius:1.5,R=h.cartoonQuality?h.cartoonQuality:5,m=function(A,I){var P=N;void 0!==I.radius?P=I.radius:e[A.elem]?P=e[A.elem]:1<A.elem.length&&(A=A.elem,A[1]=A[1].toLowerCase(),
e[A]&&(P=e[A]));return void 0!==I.scale&&(P*=I.scale),P},G=function(A,I,P){var T,Y,V,fa,ka,ma=new c.Vector3(A.x,A.y,A.z),za=(new c.Vector3(I.x,I.y,I.z)).clone(),Ma=null;za.sub(ma);var Ra=function(va,Ca){for(var Oa=null,$a=-1,ob=0,Lb=va.bonds.length;ob<Lb;ob++)if(va.bonds[ob]!=Ca.index){Y=va.bonds[ob];V=r[Y];fa=new c.Vector3(V.x,V.y,V.z);(ka=fa.clone()).sub(ma);(Ma=ka.clone()).cross(za);var Ub=Ma.lengthSq();if(Ub>$a&&(Oa=Ma,.1<($a=Ub)))break}return Oa};1===A.bonds.length?1===I.bonds.length?(Ma=za.clone(),
1E-4<Math.abs(Ma.x)?Ma.y+=1:Ma.x+=1):(T=(P+1)%I.bonds.length,Y=I.bonds[T],V=r[Y],fa=new c.Vector3(V.x,V.y,V.z),(ka=fa.clone()).sub(ma),(Ma=ka.clone()).cross(za)):.01>(Ma=Ra(A,I)).lengthSq()&&(A=Ra(I,A),null!=A&&(Ma=A));return.01>Ma.lengthSq()&&(Ma=za.clone(),1E-4<Math.abs(Ma.x)?Ma.y+=1:Ma.x+=1),Ma.cross(za),Ma.normalize(),Ma},L=function(A,I,P,T,Y,V){A[P]=T.x;A[P+1]=T.y;A[P+2]=T.z;I[P]=V.r;I[P+1]=V.g;I[P+2]=V.b;A[P+3]=Y.x;A[P+4]=Y.y;A[P+5]=Y.z;I[P+3]=V.r;I[P+4]=V.g;I[P+5]=V.b},O=function(A,I){if(A.style.sphere){var P=
A.style.sphere;if(!P.hidden){var T=c.getColorFromStyle(A,P);P=m(A,P);if((!0===A.clickable||A.hoverable)&&void 0!==A.intersectionShape){var Y=new c.Vector3(A.x,A.y,A.z);A.intersectionShape.sphere.push(new c.Sphere(Y,P))}c.GLDraw.drawSphere(I,A,P,T)}}},Z=function(A,I){if(A.style.sphere){var P=A.style.sphere;if(!P.hidden){var T=m(A,P);P=c.getColorFromStyle(A,P);I=I.updateGeoGroup(1);var Y=I.vertices,V=3*Y,fa=I.vertexArray,ka=I.colorArray,ma=I.radiusArray;(fa[V]=A.x,fa[V+1]=A.y,fa[V+2]=A.z,ka[V]=P.r,
ka[V+1]=P.g,ka[V+2]=P.b,ma[Y]=T,!0!==A.clickable&&!A.hoverable||void 0===A.intersectionShape)||(P=new c.Vector3(A.x,A.y,A.z),A.intersectionShape.sphere.push(new c.Sphere(P,T)));I.vertices+=1}}},W=function(A,I,P,T){var Y;A=A.updateGeoGroup(4);var V=A.vertices,fa=3*V,ka=A.vertexArray,ma=A.colorArray;for(Y=0;4>Y;Y++)ka[fa+3*Y]=I.x,ka[fa+3*Y+1]=I.y,ka[fa+3*Y+2]=I.z;I=A.normalArray;for(Y=0;4>Y;Y++)ma[fa+3*Y]=T.r,ma[fa+3*Y+1]=T.g,ma[fa+3*Y+2]=T.b;I[fa+0]=-P;I[fa+1]=P;I[fa+2]=0;I[fa+3]=-P;I[fa+4]=-P;I[fa+
5]=0;I[fa+6]=P;I[fa+7]=-P;I[fa+8]=0;I[fa+9]=P;I[fa+10]=P;I[fa+11]=0;A.vertices+=4;P=A.faceArray;T=A.faceidx;P[T+0]=V;P[T+1]=V+1;P[T+2]=V+2;P[T+3]=V+2;P[T+4]=V+3;P[T+5]=V;A.faceidx+=6},ha=function(A,I){if(A.style.sphere){var P=A.style.sphere;if(!P.hidden){var T=m(A,P);P=c.getColorFromStyle(A,P);if((!0===A.clickable||A.hoverable)&&void 0!==A.intersectionShape){var Y=new c.Vector3(A.x,A.y,A.z);A.intersectionShape.sphere.push(new c.Sphere(Y,T))}W(I,A,T,P)}}},ja=function(A,I,P,T,Y){var V;A=A.updateGeoGroup(4);
var fa=A.vertices,ka=A.vertexArray,ma=A.colorArray,za=A.radiusArray,Ma=A.normalArray,Ra=Y.r,va=Y.g;Y=Y.b;for(var Ca=3*fa,Oa=0;4>Oa;Oa++)ka[Ca]=I.x,Ma[Ca]=P.x,ma[Ca]=Ra,ka[++Ca]=I.y,Ma[Ca]=P.y,ma[Ca]=va,ka[++Ca]=I.z,Ma[Ca]=P.z,ma[Ca]=2>Oa?Y:(V=void 0,0==(V=-Y)&&(V=-1E-4),V),Ca++;A.vertices+=4;za[fa]=-T;za[fa+1]=T;za[fa+2]=-T;za[fa+3]=T;I=A.faceArray;P=A.faceidx;I[P+0]=fa;I[P+1]=fa+1;I[P+2]=fa+2;I[P+3]=fa+2;I[P+4]=fa+3;I[P+5]=fa;A.faceidx+=6},ea=function(A,I){I=I||{};var P,T,Y,V=new c.Object3D,fa=[],
ka={},ma={},za=O,Ma=null,Ra=null;I.supportsImposters?(za=ha,(Ma=new c.Geometry(!0)).imposter=!0,(Ra=new c.Geometry(!0,!0)).imposter=!0,Ra.sphereGeometry=new c.Geometry(!0),Ra.sphereGeometry.imposter=!0,Ra.drawnCaps={}):I.supportsAIA?(za=Z,(Ma=new c.Geometry(!1,!0,!0)).instanced=!0,Ra=new c.Geometry(!0)):(Ma=new c.Geometry(!0),Ra=new c.Geometry(!0));var va={},Ca=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];var Oa=0;for(T=A.length;Oa<T;Oa++){var $a=A[Oa];if($a&&$a.style){for(P in($a.clickable||
$a.hoverable)&&void 0===$a.intersectionShape&&($a.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),Y={line:void 0,cross:void 0,stick:void 0,sphere:void 0})$a.style[P]?$a.style[P].opacity?Y[P]=parseFloat($a.style[P].opacity):Y[P]=1:Y[P]=void 0,va[P]?null!=Y[P]&&va[P]!=Y[P]&&(console.log("Warning: "+P+" opacity is ambiguous"),va[P]=1):va[P]=Y[P];za($a,Ma);var ob=$a;if(ob.style.clicksphere){var Lb=ob.style.clicksphere;if(!Lb.hidden){var Ub=m(ob,Lb);if((!0===ob.clickable||ob.hoverable)&&
void 0!==ob.intersectionShape){var lc=new c.Vector3(ob.x,ob.y,ob.z);ob.intersectionShape.sphere.push(new c.Sphere(lc,Ub))}}}var Pb=$a,uc=ma;if(Pb.style.cross){var Xb=Pb.style.cross;if(!Xb.hidden){var Dc=Xb.linewidth||1;uc[Dc]||(uc[Dc]=new c.Geometry);var Ec=uc[Dc].updateGeoGroup(6),pc=m(Pb,Xb),Fb=[[pc,0,0],[-pc,0,0],[0,pc,0],[0,-pc,0],[0,0,pc],[0,0,-pc]],nb=Pb.clickable||Pb.hoverable;nb&&void 0===Pb.intersectionShape&&(Pb.intersectionShape={sphere:[],cylinder:[],line:[]});for(var bc=c.getColorFromStyle(Pb,
Xb),wb=Ec.vertexArray,na=Ec.colorArray,C=0;6>C;C++){var Va=3*Ec.vertices;if(Ec.vertices++,wb[Va]=Pb.x+Fb[C][0],wb[Va+1]=Pb.y+Fb[C][1],wb[Va+2]=Pb.z+Fb[C][2],na[Va]=bc.r,na[Va+1]=bc.g,na[Va+2]=bc.b,nb){var Aa=new c.Vector3(Fb[C][0],Fb[C][1],Fb[C][2]);Aa.multiplyScalar(.1);Aa.set(Aa.x+Pb.x,Aa.y+Pb.y,Aa.z+Pb.z);Pb.intersectionShape.line.push(Aa)}}}}var cb=void 0,vb=void 0,lb=void 0,zb=void 0,qb=$a,Ab=A,Ob=ka;if(qb.style.line){var hc=qb.style.line;if(!hc.hidden){var Bc=hc.linewidth||1;Ob[Bc]||(Ob[Bc]=
new c.Geometry);for(var Kb=Ob[Bc].updateGeoGroup(6*qb.bonds.length),Ib=Kb.vertexArray,fc=Kb.colorArray,Hc=0;Hc<qb.bonds.length;Hc++){var nc=Ab[qb.bonds[Hc]];if(nc.style.line&&!(qb.index>=nc.index)){var pb=new c.Vector3(qb.x,qb.y,qb.z),kc=new c.Vector3(nc.x,nc.y,nc.z),Nc=pb.clone().add(kc).multiplyScalar(.5),pd=!1,fd=qb.clickable||qb.hoverable,Vc=nc.clickable||nc.hoverable;(fd||Vc)&&(fd&&(void 0===qb.intersectionShape&&(qb.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),qb.intersectionShape.line.push(pb),
qb.intersectionShape.line.push(Nc)),Vc&&(void 0===nc.intersectionShape&&(nc.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),nc.intersectionShape.line.push(Nc),nc.intersectionShape.line.push(kc)));var oc=c.getColorFromStyle(qb,qb.style.line),Sc=c.getColorFromStyle(nc,nc.style.line);if(qb.bondStyles&&qb.bondStyles[Hc]){var Tc=qb.bondStyles[Hc];if(!Tc.iswire)continue;Tc.singleBond&&(pd=!0);void 0!==Tc.color1&&(oc=c.CC.color(Tc.color1));void 0!==Tc.color2&&(Sc=c.CC.color(Tc.color2))}var gd,
bd,y=3*Kb.vertices;if(1<qb.bondOrder[Hc]&&4>qb.bondOrder[Hc]&&!pd){var J=G(qb,nc,Hc),aa=kc.clone();aa.sub(pb);2==qb.bondOrder[Hc]?(J.multiplyScalar(.1),(zb=pb.clone()).add(J),(lb=pb.clone()).sub(J),(vb=zb.clone()).add(aa),(cb=lb.clone()).add(aa),oc==Sc?(Kb.vertices+=4,L(Ib,fc,y,zb,vb,oc),L(Ib,fc,y+6,lb,cb,oc)):(Kb.vertices+=8,aa.multiplyScalar(.5),(gd=zb.clone()).add(aa),(bd=lb.clone()).add(aa),L(Ib,fc,y,zb,gd,oc),L(Ib,fc,y+6,gd,vb,Sc),L(Ib,fc,y+12,lb,bd,oc),L(Ib,fc,y+18,bd,cb,Sc))):3==qb.bondOrder[Hc]&&
(J.multiplyScalar(.1),(zb=pb.clone()).add(J),(lb=pb.clone()).sub(J),(vb=zb.clone()).add(aa),(cb=lb.clone()).add(aa),oc==Sc?(Kb.vertices+=6,L(Ib,fc,y,pb,kc,oc),L(Ib,fc,y+6,zb,vb,oc),L(Ib,fc,y+12,lb,cb,oc)):(Kb.vertices+=12,aa.multiplyScalar(.5),(gd=zb.clone()).add(aa),(bd=lb.clone()).add(aa),L(Ib,fc,y,pb,Nc,oc),L(Ib,fc,y+6,Nc,kc,Sc),L(Ib,fc,y+12,zb,gd,oc),L(Ib,fc,y+18,gd,vb,Sc),L(Ib,fc,y+24,lb,bd,oc),L(Ib,fc,y+30,bd,cb,Sc)))}else oc==Sc?(Kb.vertices+=2,L(Ib,fc,y,pb,kc,oc)):(Kb.vertices+=4,L(Ib,fc,
y,pb,Nc,oc),L(Ib,fc,y+6,Nc,kc,Sc))}}}}var qa=void 0,Ea=void 0,Ga=void 0,Na=void 0,ab=void 0,Ya=void 0,Ka=void 0,eb=void 0,ib=void 0,Gb=void 0,Hb=void 0,Jb=void 0,vc=void 0,Cc=void 0,tb=$a,Oc=A,$b=Ra;if(tb.style.stick){var Zc=tb.style.stick;if(!Zc.hidden){var Lc=Zc.radius||.25,Mc=Lc,cd=Zc.singleBonds||!1,Fc=0,nd=0,zc=c.getColorFromStyle(tb,Zc);!tb.capDrawn&&4>tb.bonds.length&&(Fc=2);var Tb=c.GLDraw.drawCylinder;$b.imposter&&(Tb=ja);for(Jb=0;Jb<tb.bonds.length;Jb++){var Wb=Oc[tb.bonds[Jb]];if(Ga=Ea=
qa=null,tb.index<Wb.index){var ad=Wb.style;if(ad.stick&&!ad.stick.hidden){var tc=c.getColorFromStyle(Wb,ad.stick);if(Mc=Lc,Hb=cd,tb.bondStyles&&tb.bondStyles[Jb]){if((Gb=tb.bondStyles[Jb]).iswire)continue;Gb.radius&&(Mc=Gb.radius);Gb.singleBond&&(Hb=!0);void 0!==Gb.color1&&(zc=c.CC.color(Gb.color1));void 0!==Gb.color2&&(tc=c.CC.color(Gb.color2))}var cc=new c.Vector3(tb.x,tb.y,tb.z),ac=new c.Vector3(Wb.x,Wb.y,Wb.z);if(1===tb.bondOrder[Jb]||Hb||3<tb.bondOrder[Jb]){if(!Wb.capDrawn&&4>Wb.bonds.length&&
(nd=2),zc!=tc?(Tb($b,cc,Ga=(new c.Vector3).addVectors(cc,ac).multiplyScalar(.5),Mc,zc,Fc,0),Tb($b,Ga,ac,Mc,tc,0,nd)):Tb($b,cc,ac,Mc,zc,Fc,nd),Cc=tb.clickable||tb.hoverable,vc=Wb.clickable||Wb.hoverable,Cc||vc){if(Ga||(Ga=(new c.Vector3).addVectors(cc,ac).multiplyScalar(.5)),Cc){var ic=new c.Cylinder(cc,Ga,Mc),dc=new c.Sphere(cc,Mc);tb.intersectionShape.cylinder.push(ic);tb.intersectionShape.sphere.push(dc)}if(vc){var hd=new c.Cylinder(ac,Ga,Mc),Ac=new c.Sphere(ac,Mc);Wb.intersectionShape.cylinder.push(hd);
Wb.intersectionShape.sphere.push(Ac)}}}else if(1<tb.bondOrder[Jb]){var Wc=0,mc=0;Mc!=Lc&&(Wc=2,mc=2);var ec,Nb,jc,l,X,K=ac.clone(),sa=null;K.sub(cc);sa=G(tb,Wb,Jb);2==tb.bondOrder[Jb]?(ec=Mc/2.5,sa.multiplyScalar(1.5*ec),(Nb=cc.clone()).add(sa),(jc=cc.clone()).sub(sa),(l=Nb.clone()).add(K),(X=jc.clone()).add(K),zc!=tc?(Ga=(new c.Vector3).addVectors(Nb,l).multiplyScalar(.5),Ea=(new c.Vector3).addVectors(jc,X).multiplyScalar(.5),Tb($b,Nb,Ga,ec,zc,Wc,0),Tb($b,Ga,l,ec,tc,0,mc),Tb($b,jc,Ea,ec,zc,Wc,0),
Tb($b,Ea,X,ec,tc,0,mc)):(Tb($b,Nb,l,ec,zc,Wc,mc),Tb($b,jc,X,ec,zc,Wc,mc)),Cc=tb.clickable||tb.hoverable,vc=Wb.clickable||Wb.hoverable,(Cc||vc)&&(Ga||(Ga=(new c.Vector3).addVectors(Nb,l).multiplyScalar(.5)),Ea||(Ea=(new c.Vector3).addVectors(jc,X).multiplyScalar(.5)),Cc&&(ib=new c.Cylinder(Nb,Ga,ec),eb=new c.Cylinder(jc,Ea,ec),tb.intersectionShape.cylinder.push(ib),tb.intersectionShape.cylinder.push(eb)),vc&&(Ya=new c.Cylinder(l,Ga,ec),ab=new c.Cylinder(X,Ea,ec),Wb.intersectionShape.cylinder.push(Ya),
Wb.intersectionShape.cylinder.push(ab)))):3==tb.bondOrder[Jb]&&(ec=Mc/4,sa.cross(K),sa.normalize(),sa.multiplyScalar(3*ec),(Nb=cc.clone()).add(sa),(jc=cc.clone()).sub(sa),(l=Nb.clone()).add(K),(X=jc.clone()).add(K),zc!=tc?(Ga=(new c.Vector3).addVectors(Nb,l).multiplyScalar(.5),Ea=(new c.Vector3).addVectors(jc,X).multiplyScalar(.5),qa=(new c.Vector3).addVectors(cc,ac).multiplyScalar(.5),Tb($b,Nb,Ga,ec,zc,Wc,0),Tb($b,Ga,l,ec,tc,0,mc),Tb($b,cc,qa,ec,zc,Fc,0),Tb($b,qa,ac,ec,tc,0,nd),Tb($b,jc,Ea,ec,zc,
Wc,0),Tb($b,Ea,X,ec,tc,0,mc)):(Tb($b,Nb,l,ec,zc,Wc,mc),Tb($b,cc,ac,ec,zc,Fc,nd),Tb($b,jc,X,ec,zc,Wc,mc)),Cc=tb.clickable||tb.hoverable,vc=Wb.clickable||Wb.hoverable,(Cc||vc)&&(Ga||(Ga=(new c.Vector3).addVectors(Nb,l).multiplyScalar(.5)),Ea||(Ea=(new c.Vector3).addVectors(jc,X).multiplyScalar(.5)),qa||(qa=(new c.Vector3).addVectors(cc,ac).multiplyScalar(.5)),Cc&&(ib=new c.Cylinder(Nb.clone(),Ga.clone(),ec),eb=new c.Cylinder(jc.clone(),Ea.clone(),ec),Ka=new c.Cylinder(cc.clone(),qa.clone(),ec),tb.intersectionShape.cylinder.push(ib),
tb.intersectionShape.cylinder.push(eb),tb.intersectionShape.cylinder.push(Ka)),vc&&(Ya=new c.Cylinder(l.clone(),Ga.clone(),ec),ab=new c.Cylinder(X.clone(),Ea.clone(),ec),Na=new c.Cylinder(ac.clone(),qa.clone(),ec),Wb.intersectionShape.cylinder.push(Ya),Wb.intersectionShape.cylinder.push(ab),Wb.intersectionShape.cylinder.push(Na))))}}}}var xa=!1,La=0,Ba=!1;for(Jb=0;Jb<tb.bonds.length;Jb++)Hb=cd,tb.bondStyles&&tb.bondStyles[Jb]&&((Gb=tb.bondStyles[Jb]).singleBond&&(Hb=!0),Gb.radius&&Gb.radius!=Lc&&
(Ba=!0)),(Hb||1==tb.bondOrder[Jb])&&La++;Ba?0<La&&(xa=!0):0==La&&0<tb.bonds.length&&(xa=!0);xa&&(Mc=Lc,$b.imposter?W($b.sphereGeometry,tb,Mc,zc):c.GLDraw.drawSphere($b,tb,Mc,zc))}}void 0===$a.style.cartoon||$a.style.cartoon.hidden||("spectrum"!==$a.style.cartoon.color||"number"!=typeof $a.resi||$a.hetflag||($a.resi<Ca[0]&&(Ca[0]=$a.resi),$a.resi>Ca[1]&&(Ca[1]=$a.resi)),fa.push($a))}}if(0<fa.length&&c.drawCartoon(V,fa,Ca,R),Ma&&0<Ma.vertices){Ma.initTypedArrays();var Ja=null,bb=null;Ma.imposter?Ja=
new c.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):Ma.instanced?(bb=new c.Geometry(!0),c.GLDraw.drawSphere(bb,{x:0,y:0,z:0},1,new c.Color(.5,.5,.5)),bb.initTypedArrays(),Ja=new c.InstancedMaterial({sphereMaterial:new c.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:bb})):Ja=new c.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0});1>va.sphere&&0<=va.sphere&&(Ja.transparent=!0,Ja.opacity=va.sphere);bb=new c.Mesh(Ma,Ja);V.add(bb)}if(0<Ra.vertices){var Ta=
null,Bb=null,da=Ra.sphereGeometry;da&&void 0!==da.vertices&&0!=da.vertices||(da=null);Ra.initTypedArrays();da&&da.initTypedArrays();var db={ambient:0,vertexColors:!0,reflectivity:0};Ra.imposter?(Ta=new c.StickImposterMaterial(db),Bb=new c.SphereImposterMaterial(db)):(Ta=new c.MeshLambertMaterial(db),Bb=new c.MeshLambertMaterial(db),Ta.wireframe&&(Ra.setUpWireframe(),da&&da.setUpWireframe()));1>va.stick&&0<=va.stick&&(Ta.transparent=!0,Ta.opacity=va.stick,Bb.transparent=!0,Bb.opacity=va.stick);var yb=
new c.Mesh(Ra,Ta);if(V.add(yb),da){var xb=new c.Mesh(da,Bb);V.add(xb)}}for(Oa in ka)if(ka.hasOwnProperty(Oa)){var kb=Oa;var rb=new c.LineBasicMaterial({linewidth:kb,vertexColors:!0});1>va.line&&0<=va.line&&(rb.transparent=!0,rb.opacity=va.line);ka[Oa].initTypedArrays();var b=new c.Line(ka[Oa],rb,c.LinePieces);V.add(b)}for(Oa in ma)if(ma.hasOwnProperty(Oa)){kb=Oa;var g=new c.LineBasicMaterial({linewidth:kb,vertexColors:!0});1>va.cross&&0<=va.cross&&(g.transparent=!0,g.opacity=va.cross);ma[Oa].initTypedArrays();
var B=new c.Line(ma[Oa],g,c.LinePieces);V.add(B)}if(D&&v.symmetries&&0<v.symmetries.length){var M,S=new c.Object3D;for(M=0;M<v.symmetries.length;M++){var ba=new c.Object3D;(ba=V.clone()).matrix.copy(v.symmetries[M]);ba.matrixAutoUpdate=!1;S.add(ba)}return S}return V};this.getInternalState=function(){return{atoms:r,frames:u}};this.setInternalState=function(A){r=A.atoms;u=A.frames;t=null};this.getCrystData=function(){if(v.cryst){if(!v.cryst.matrix){var A=v.cryst;v.cryst.matrix=c.conversionMatrix3(A.a,
A.b,A.c,A.alpha,A.beta,A.gamma)}return v.cryst}return null};this.setCrystData=function(A,I,P,T,Y,V){A=A||1;I=I||1;P=P||1;T=T||90;Y=Y||90;V=V||90;var fa=c.conversionMatrix3(A,I,P,T,Y,V);v.cryst={a:A,b:I,c:P,alpha:T,beta:Y,gamma:V,matrix:fa}};this.setCrystMatrix=function(A){A=A||new c.Matrix3(1,0,0,0,1,0,0,0,1);v.cryst={matrix:A}};this.getSymmetries=function(){return void 0===v.symmetries&&(v.symmetries=[w]),v.symmetries};this.setSymmetries=function(A){v.symmetries=void 0===A?[w]:A};this.getID=function(){return f};
this.getNumFrames=function(){return null!=u.numFrames?u.numFrames:u.length};var la=function(A,I,P,T){A=I-A;return A<-P?I+T:A>P?I-T:I};this.setFrame=function(A,I){var P=this.getNumFrames(),T=this;return new Promise(function(Y,V){(0==P&&Y(),(0>A||A>=P)&&(A=P-1),null!=u.url)?c.getbin(u.url+"/traj/frame/"+A+"/"+u.path,null,"POST").then(function(fa){fa=new Float32Array(fa,44);for(var ka=0,ma=0;ma<r.length;ma++)r[ma].x=fa[ka++],r[ma].y=fa[ka++],r[ma].z=fa[ka++];if(H&&z&&H&&z){fa=H[0];ka=H[1];ma=H[2];for(var za=
.9*fa,Ma=.9*ka,Ra=.9*ma,va=0;va<z.length;va++)for(var Ca=z[va],Oa=1;Oa<Ca.length;Oa++){var $a=r[Ca[Oa][0]],ob=r[Ca[Oa][1]];$a.x=la(ob.x,$a.x,za,fa);$a.y=la(ob.y,$a.y,Ma,ka);$a.z=la(ob.z,$a.z,Ra,ma)}}Y()}).catch(V):(r=u[A],Y());t=null;x&&A<x.length&&(v=x[A],T.unitCellObjects&&I&&(I.removeUnitCell(T),I.addUnitCell(T)))})};this.addFrame=function(A){u.push(A)};this.vibrate=function(A,I,P,T,Y){I=I||1;var V=0,fa=A=A||10;P&&(V=-A,fa=A);void 0!==u&&void 0!==u.origIndex?this.setFrame(u.origIndex):this.setFrame(0);
V<fa&&(u=[]);P&&(u.origIndex=A);for(P=V;P<fa;P++){V=[];var ka=u.length;if(0!=P||Y){for(var ma=0;ma<r.length;ma++){var za=c.getAtomProperty(r[ma],"dx"),Ma=c.getAtomProperty(r[ma],"dy"),Ra=c.getAtomProperty(r[ma],"dz"),va=new c.Vector3(za,Ma,Ra),Ca=new c.Vector3(r[ma].x,r[ma].y,r[ma].z);va.multiplyScalar(P*I/A);Ca.add(va);va={};for(var Oa in r[ma])va[Oa]=r[ma][Oa];if(va.x=Ca.x,va.y=Ca.y,va.z=Ca.z,V.push(va),T&&Y){var $a=c.extend({},Y);za=new c.Vector3(za,Ma,Ra);(za.multiplyScalar(I),za.add(Ca),$a.start=
Ca,$a.end=za,$a.frame=ka,$a.color)||((Ca=va.style.sphere)||(Ca=va.style.stick),Ca||(Ca=va.style.line),$a.color=c.getColorFromStyle(va,Ca));T.addArrow($a)}}u.push(V)}else u.push(r)}};this.setAtomDefaults=function(A){for(var I=0;I<A.length;I++){var P=A[I];P&&(P.style=P.style||c.deepCopy(p),P.color=P.color||Q[P.elem]||E,P.model=f,(P.clickable||P.hoverable)&&(P.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}};this.addMolData=function(A,I,P){P=P||{};A=c.GLModel.parseMolData(A,I,P);D=!P.duplicateAssemblyAtoms;
I=A.modelData;if(I&&(Array.isArray(I)?(v=I[0],P.frames&&(x=I)):v=I),H=A.box?A.box:null,0==u.length){for(I=0;I<A.length;I++)0!=A[I].length&&u.push(A[I]);u[0]&&(r=u[0])}else if(P.frames)for(I=0;I<A.length;I++)u.push(A[I]);else for(I=0;I<A.length;I++)this.addAtoms(A[I]);for(A=0;A<u.length;A++)this.setAtomDefaults(u[A],f);P.vibrate&&P.vibrate.frames&&P.vibrate.amplitude&&this.vibrate(P.vibrate.frames,P.vibrate.amplitude);P.style&&this.setStyle({},P.style)};this.setDontDuplicateAtoms=function(A){D=A};
this.setModelData=function(A){v=A};var oa=function(A,I){if(A==I)return!0;if("string"==typeof I&&"number"==typeof A&&(I=I.match(/(-?\d+)\s*-\s*(-?\d+)/))){var P=parseInt(I[1]),T=parseInt(I[2]);if(I&&A>=P&&A<=T)return!0}return!1},wa=function(A,I){if("object"!=typeof A||A.__cache_created)return A;var P={},T;for(T in A){var Y=A[T];if(Array.isArray(Y)){P[T]=[];for(var V=0;V<Y.length;V++)P[T].push(wa(Y[V],I))}else P[T]="object"==typeof Y&&"properties"!=T?wa(Y,I):Y;if("and"==T||"or"==T){Y=[];var fa=$jscomp.makeIterator(P[T]);
for(V=fa.next();!V.done;V=fa.next()){V=V.value;var ka=new Set,ma=$jscomp.makeIterator(I.selectedAtoms(V));for(V=ma.next();!V.done;V=ma.next())ka.add(V.value.index);Y.push(ka)}if("and"==T){V=new Set(Y[0]);Y=$jscomp.makeIterator(Y.splice(1));for(ka=Y.next();!ka.done;ka=Y.next()){ka=ka.value;fa=new Set;ka=$jscomp.makeIterator(ka);for(ma=ka.next();!ma.done;ma=ka.next())ma=ma.value,V.has(ma)&&fa.add(ma);V=fa}P[T].__cached_results=V}else if("or"==T){fa=new Set;Y=$jscomp.makeIterator(Y);for(ka=Y.next();!ka.done;ka=
Y.next())for(ka=$jscomp.makeIterator(ka.value),V=ka.next();!V.done;V=ka.next())fa.add(V.value);P[T].__cached_results=fa}}}return P.__cache_created=!0,P};this.atomIsSelected=function(A,I){if(void 0===I)return!0;var P=!!I.invert,T=!0,Y;for(Y in I)if("and"==Y||"or"==Y||"not"==Y)if("not"==Y){if(this.atomIsSelected(A,I[Y])){T=!1;break}}else{if(void 0===I[Y].__cached_results&&(I=wa(I,this)),!(T=I[Y].__cached_results.has(A.index)))break}else if("predicate"===Y){if(!I.predicate(A)){T=!1;break}}else if("properties"==
Y&&A[Y])for(var V in I.properties){if(!V.startsWith("__cache")){if(void 0===A.properties[V]){T=!1;break}if(A.properties[V]!=I.properties[V]){T=!1;break}}}else if(I.hasOwnProperty(Y)&&"props"!=Y&&"invert"!=Y&&"model"!=Y&&"byres"!=Y&&"expand"!=Y&&"within"!=Y&&"and"!=Y&&"or"!=Y&&"not"!=Y&&!Y.startsWith("__cache")){if(void 0===A[Y]){T=!1;break}var fa=!1;if("bonds"===Y){if(I[Y]!=A.bonds.length){T=!1;break}}else if(Array.isArray(I[Y])){for(var ka=I[Y],ma=A[Y],za=0;za<ka.length;za++)if(oa(ma,ka[za])){fa=
!0;break}if(!fa){T=!1;break}}else if(!oa(A[Y],I[Y])){T=!1;break}}return P?!T:T};var U=function(A,I){var P=I.x-A.x,T=I.y-A.y;A=I.z-A.z;return P*P+T*T+A*A};this.selectedAtoms=function(A,I){var P=[];A=wa(A||{},this);I||(I=r);for(var T=I.length,Y=0;Y<T;Y++){var V=I[Y];V&&this.atomIsSelected(V,A)&&P.push(V)}if(A.hasOwnProperty("expand")){I=parseFloat(A.expand);if(0>=I)T=P;else{T=c.getExtent(P);Y=[[],[],[]];for(V=0;3>V;V++)Y[0][V]=T[0][V]-I,Y[1][V]=T[1][V]+I,Y[2][V]=T[2][V];V=[];for(var fa=0;fa<r.length;fa++){var ka=
r[fa].x,ma=r[fa].y,za=r[fa].z;ka>=Y[0][0]&&ka<=Y[1][0]&&ma>=Y[0][1]&&ma<=Y[1][1]&&za>=Y[0][2]&&za<=Y[1][2]&&(ka>=T[0][0]&&ka<=T[1][0]&&ma>=T[0][1]&&ma<=T[1][1]&&za>=T[0][2]&&za<=T[1][2]||V.push(r[fa]))}T=V}Y=P.length;I*=I;for(V=0;V<T.length;V++)for(fa=0;fa<Y;fa++)ka=U(T[V],P[fa]),ka<I&&0<ka&&P.push(T[V])}if(A.hasOwnProperty("within")&&A.within.hasOwnProperty("sel")&&A.within.hasOwnProperty("distance")){T=this.selectedAtoms(A.within.sel,r);I={};Y=parseFloat(A.within.distance);Y*=Y;for(V=0;V<T.length;V++)for(fa=
0;fa<P.length;fa++)ka=U(T[V],P[fa]),ka<Y&&0<ka&&(I[fa]=1);T=[];if(A.within.invert)for(var Ma=0;Ma<P.length;Ma++)I[Ma]||T.push(P[Ma]);else for(Ma in I)T.push(P[Ma]);P=T}if(A.hasOwnProperty("byres"))for(A={},Ma=[],I=[],T=0;T<P.length;T++)if(Y=P[T],V=Y.chain,fa=Y.resi,void 0===A[V]&&(A[V]={}),Y.hasOwnProperty("resi")&&void 0===A[V][fa])for(A[V][fa]=!0,I.push(Y);0<I.length;)if(Y=I.pop(),V=Y.chain,fa=Y.resi,void 0===Ma[Y.index])for(Ma[Y.index]=!0,ka=0;ka<Y.bonds.length;ka++)ma=r[Y.bonds[ka]],void 0===
Ma[ma.index]&&ma.hasOwnProperty("resi")&&ma.chain==V&&ma.resi==fa&&(I.push(ma),P.push(ma));return P};this.addAtoms=function(A){t=null;var I,P=r.length,T=[];for(I=0;I<A.length;I++)void 0===A[I].index&&(A[I].index=I),void 0===A[I].serial&&(A[I].serial=I),T[A[I].index]=P+I;for(I=0;I<A.length;I++){P=A[I];var Y=T[P.index],V=c.extend({},P);V.index=Y;V.bonds=[];V.bondOrder=[];V.model=f;V.style=V.style||c.deepCopy(p);void 0===V.color&&(V.color=Q[V.elem]||E);Y=P.bonds?P.bonds.length:0;for(var fa=0;fa<Y;fa++){var ka=
T[P.bonds[fa]];void 0!==ka&&(V.bonds.push(ka),V.bondOrder.push(P.bondOrder?P.bondOrder[fa]:1))}r.push(V)}};this.removeAtoms=function(A){t=null;var I,P=[];for(I=0;I<A.length;I++)P[A[I].index]=!0;A=[];for(I=0;I<r.length;I++){var T=r[I];P[T.index]||A.push(T)}r=[];this.addAtoms(A)};this.setStyle=function(A,I,P){for(var T in void 0===I&&void 0===P&&(I=A,A={}),"string"==typeof I&&(I=c.specStringToObject(I)),A)d.validAtomSelectionSpecs.hasOwnProperty(T)||console.log("Unknown selector "+T);for(T in I)d.validAtomStyleSpecs.hasOwnProperty(T)||
console.log("Unknown style "+T);var Y=!1,V=this;T=function(ka){for(var ma=V.selectedAtoms(A,ka),za=0;za<ka.length;za++)ka[za]&&(ka[za].capDrawn=!1);for(ka=0;ka<ma.length;ka++){Y=!0;(ma[ka].clickable||ma[ka].hoverable)&&(ma[ka].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]});P||(ma[ka].style={});for(var Ma in I)I.hasOwnProperty(Ma)&&(ma[ka].style[Ma]=ma[ka].style[Ma]||{},Object.assign(ma[ka].style[Ma],I[Ma]))}};T(r);for(var fa=0;fa<u.length;fa++)u[fa]!==r&&T(u[fa]);Y&&(t=null)};this.setClickable=
function(A,I,P){for(var T in A)d.validAtomSelectionSpecs.hasOwnProperty(T)||console.log("Unknown selector "+T);if(I=!!I,null!==(P=c.makeFunction(P))){T=this.selectedAtoms(A,r);var Y=T.length;for(A=0;A<Y;A++)T[A].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},T[A].clickable=I,P&&(T[A].callback=P);0<Y&&(t=null)}else console.log("Callback is not a function")};this.setHoverable=function(A,I,P,T){for(var Y in A)d.validAtomSelectionSpecs.hasOwnProperty(Y)||console.log("Unknown selector "+
Y);if(I=!!I,P=c.makeFunction(P),T=c.makeFunction(T),null!==P)if(null!==T){Y=this.selectedAtoms(A,r);var V=Y.length;for(A=0;A<V;A++)Y[A].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},Y[A].hoverable=I,P&&(Y[A].hover_callback=P),T&&(Y[A].unhover_callback=T);0<V&&(t=null)}else console.log("Unhover_callback is not a function");else console.log("Hover_callback is not a function")};this.enableContextMenu=function(A,I){for(var P in A)d.validAtomSelectionSpecs.hasOwnProperty(P)||console.log("Unknown selector "+
P);I=!!I;P=this.selectedAtoms(A,r);var T=P.length;for(A=0;A<T;A++)P[A].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},P[A].contextMenuEnabled=I;0<T&&(t=null)};this.setColorByElement=function(A,I){var P;(P=null===t)||(P=n,P=!(I&&P?JSON.stringify(I)==JSON.stringify(P):I==P));if(P){n=I;var T=this.selectedAtoms(A,T);0<T.length&&(t=null);for(A=0;A<T.length;A++)P=T[A],void 0!==I[P.elem]&&(P.color=I[P.elem])}};this.setColorByProperty=function(A,I,P,T){var Y=this.selectedAtoms(A,Y);n=null;
0<Y.length&&(t=null);void 0!==c.Gradient.builtinGradients[P]&&(P=new c.Gradient.builtinGradients[P]);T||(T=P.range());T||(T=c.getPropertyRange(Y,I));for(A=0;A<Y.length;A++){var V=Y[A];null!=c.getAtomProperty(V,I)&&(V.color=P.valueToHex(parseFloat(V.properties[I]),T))}};this.setColorByFunction=function(A,I){var P=this.selectedAtoms(A,P);if("function"==typeof I)for(n=null,0<P.length&&(t=null),A=0;A<P.length;A++){var T=P[A];T.color=I(T)}};this.toCDObject=function(A){var I={a:[],b:[]};A&&(I.s=[]);for(var P=
0;P<r.length;P++){var T={},Y=r[P];if(T.x=Y.x,T.y=Y.y,T.z=Y.z,"C"!=Y.elem&&(T.l=Y.elem),A){for(var V=0;V<I.s.length&&JSON.stringify(Y.style)!==JSON.stringify(I.s[V]);)V++;V===I.s.length&&I.s.push(Y.style);0!==V&&(T.s=V)}I.a.push(T);for(T=0;T<Y.bonds.length;T++){V=P;var fa=Y.bonds[T];V>=fa||(V={b:V,e:fa},fa=Y.bondOrder[T],1!=fa&&(V.o=fa),I.b.push(V))}}return I};this.globj=function(A,I){(null===t||I.regen)&&(t=ea(r,I),q&&(A.remove(q),q=null),q=t.clone(),F&&(q.setVisible(!1),t.setVisible(!1)),A.add(q))};
this.exportVRML=function(){return ea(r,{supportsImposters:!1,supportsAIA:!1}).vrml()};this.removegl=function(A){q&&(void 0!==q.geometry&&q.geometry.dispose(),void 0!==q.material&&q.material.dispose(),A.remove(q),q=null);t=null};this.hide=function(){F=!0;q&&q.setVisible(!1);t&&t.setVisible(!1)};this.show=function(){F=!1;q&&q.setVisible(!0);t&&t.setVisible(!0)};this.addPropertyLabels=function(A,I,P,T){var Y=this.selectedAtoms(I,Y);I=c.deepCopy(T);for(T=0;T<Y.length;T++){var V=Y[T],fa=null;void 0!==
V[A]?fa=String(V[A]):(V.properties[A],fa=String(V.properties[A]));null!=fa&&(I.position=V,P.addLabel(fa,I))}};this.addResLabels=function(A,I,P,T){var Y=[],V=function(ma,za){var Ma=ma.selectedAtoms(A,Ma);ma={};for(var Ra=0;Ra<Ma.length;Ra++){var va=Ma[Ra],Ca=va.chain,Oa=va.resn+""+va.resi;ma[Ca]||(ma[Ca]={});ma[Ca][Oa]||(ma[Ca][Oa]=[]);ma[Ca][Oa].push(va)}Ma=c.deepCopy(P);for(var $a in ma)if(ma.hasOwnProperty($a)){Ra=ma[$a];for(var ob in Ra)if(Ra.hasOwnProperty(ob)){va=Ra[ob];Ca=new c.Vector3(0,0,
0);for(Oa=0;Oa<va.length;Oa++){var Lb=va[Oa];Ca.x+=Lb.x;Ca.y+=Lb.y;Ca.z+=Lb.z}Ca.divideScalar(va.length);Ma.position=Ca;Ma.frame=za;va=I.addLabel(ob,Ma,void 0,!0);Y.push(va)}}};if(T){T=this.getNumFrames();for(var fa=r,ka=0;ka<T;ka++)u[ka]&&(r=u[ka],V(this,ka));r=fa}else V(this);return Y};this.setCoordinatesFromURL=function(A,I){u=[];var P=this;return H&&function(){z=[];var T=new Int8Array(r.length);T.fill(0);for(var Y=function(ka,ma,za){za.push([ka,ma]);ma=r[ka];T[ka]=1;for(var Ma=0;Ma<ma.bonds.length;Ma++){var Ra=
ma.bonds[Ma];r[Ra]&&!T[Ra]&&Y(Ra,ka,za)}},V=0;V<r.length;V++)if(r[V]&&!T[V]){var fa=[];Y(V,-1,fa);z.push(fa)}}(),new Promise(function(T,Y){A.startsWith("http")||(A="http://"+A);ra.get(A+"/traj/numframes/"+I,function(V){isNaN(parseInt(V))||(u.push(r),u.numFrames=V,u.url=A,u.path=I,P.setFrame(0).then(function(){T()}).catch(Y))})})};this.setCoordinates=function(A,I){if(!A)return[];if(/\.gz$/.test(I=I||"")){I=I.replace(/\.gz$/,"");try{A=pako.inflate(A,{to:"string"})}catch(ka){console.log(ka)}}if({mdcrd:"",
inpcrd:"",pdb:"",netcdf:"",array:""}.hasOwnProperty(I)){u=[];var P=r.length;A=d.parseCrd(A,I);for(I=0;I<A.length;){for(var T=[],Y=0;Y<P;Y++){var V={},fa;for(fa in r[Y])V[fa]=r[Y][fa];T[Y]=V;T[Y].x=A[I++];T[Y].y=A[I++];T[Y].z=A[I++]}u.push(T)}return r=u[0],u}return[]};this.addAtomSpecs=function(A){for(var I=0;I<A.length;I++)d.validAtomSelectionSpecs.hasOwnProperty(A[I])||(d.validAtomSelectionSpecs[A[I]]={})}}var p={line:{}},e={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,
Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86};d.validElements="H Li LI Na NA K C N O F P S CL Cl BR Br SE Se ZN Zn CU Cu NI Ni".split(" ");d.validAtomSpecs={resn:{type:"string",valid:!0,prop:!0,gui:!0},x:{type:"number",
floatType:!0,valid:!1,step:.1,prop:!0},y:{type:"number",floatType:!0,valid:!1,step:.1,prop:!0},z:{type:"number",floatType:!0,valid:!1,step:.1,prop:!0},color:{type:"color",gui:!1},surfaceColor:{type:"color",gui:!1},elem:{type:"element",gui:!0,prop:!0},hetflag:{type:"boolean",valid:!1,gui:!0},chain:{type:"string",gui:!0,prop:!0},resi:{type:"array_range",gui:!0},icode:{type:"number",valid:!1,step:.1},rescode:{type:"number",valid:!1,step:.1,prop:!0},serial:{type:"number",valid:!1,step:.1},atom:{type:"string",
valid:!1,gui:!0,prop:!0},bonds:{type:"array",valid:!1},ss:{type:"string",valid:!1},singleBonds:{type:"boolean",valid:!1},bondOrder:{type:"array",valid:!1},properties:{type:"properties",valid:!1},b:{type:"number",floatType:!0,valid:!1,step:.1,prop:!0},pdbline:{type:"string",valid:!1},clickable:{type:"boolean",valid:!1,gui:!1},contextMenuEnabled:{type:"boolean",valid:!1,gui:!1},callback:{type:"function",valid:!1},invert:{type:"boolean",valid:!1},reflectivity:{type:"number",floatType:!0,gui:!1,step:.1},
altLoc:{type:"invalid",valid:!1},sym:{type:"number",gui:!1}};d.validAtomSelectionSpecs=c.extend(d.validAtomSpecs,{model:{type:"string",valid:!1},bonds:{type:"number",valid:!1,gui:!0},predicate:{type:"string",valid:!1},invert:{type:"boolean",valid:!1,gui:!0},byres:{type:"boolean",valid:!1,gui:!0},expand:{type:"number",valid:!1,gui:!1},within:{type:"string",valid:!1},and:{type:"string",valid:!1},or:{type:"string",valid:!1},not:{type:"string",valid:!1}});var k={hidden:{type:"boolean",gui:!1},singleBonds:{type:"boolean",
gui:!0},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},radius:{type:"number",floatType:!0,gui:!0,step:.1,default:1.5,min:0},scale:{type:"number",floatType:!0,gui:!0,step:.1,default:1,min:.1},opacity:{type:"number",floatType:!0,gui:!0,step:.1,default:1,min:0,max:1}};d.validAtomStyleSpecs={line:{validItems:{hidden:{type:"boolean",gui:!0},linewidth:{type:"number",floatType:!0,gui:!0,step:.1,default:1},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},opacity:{type:"number",
floatType:!0,gui:!0,step:.1,default:1,min:0,max:1}},type:"form",gui:!0},cross:{validItems:{hidden:{type:"boolean",gui:!0},linewidth:{type:"number",floatType:!0,gui:!1,step:.1,default:1,min:0},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},radius:{type:"number",floatType:!0,gui:!0,step:.1,default:1,min:.1},scale:{type:"number",floatType:!0,gui:!0,step:.1,default:1,min:0},opacity:{type:"number",floatType:!0,gui:!0,step:.1,default:1,min:0,max:1}},type:"form",gui:!0},stick:{validItems:{hidden:{type:"boolean",
gui:!0},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},radius:{type:"number",floatType:!0,gui:!0,step:.1,default:.25,min:.1},singleBonds:{type:"boolean",gui:!0},opacity:{type:"number",floatType:!0,gui:!0,step:.1,default:1,min:0,max:1}},type:"form",gui:!0},sphere:{validItems:k,type:"form",gui:!0},cartoon:{validItems:{style:{validItems:["trace","oval","rectangle","parabola","edged"],gui:!0},color:{type:"color",gui:!0,spectrum:!0},arrows:{type:"boolean",gui:!0},ribbon:{type:"boolean",
gui:!0},hidden:{type:"boolean",gui:!0},tubes:{type:"boolean",gui:!0},thickness:{type:"number",floatType:!0,gui:!0,step:.1,default:1,min:0},width:{type:"number",floatType:!0,gui:!0,step:.1,default:1,min:0},opacity:{type:"number",floatType:!0,gui:!0,step:.1,default:1,min:0,max:1}},type:"form",gui:!0},colorfunc:{validItems:null,type:"js",valid:!1},clicksphere:{validItems:k,type:"form"}};d.validSurfaceSpecs={opacity:{type:"number",floatType:!0,gui:!0,step:.01,default:1,min:0,max:1},colorscheme:{type:"colorscheme",
gui:!0},color:{type:"color",gui:!0},voldata:{type:"number",floatType:!0,gui:!1},volscheme:{type:"number",floatType:!0,gui:!1},map:{type:"number",gui:!1}};d.validLabelResSpecs={font:{type:"string",gui:!0},fontSize:{type:"number",floatType:!0,gui:!0,step:1,default:12,min:1},fontColor:{type:"color",gui:!0},fontOpacity:{type:"number",floatType:!0,gui:!0,step:.1,default:1,min:0,max:1},borderThickness:{type:"number",floatType:!0,gui:!0,step:.1,default:1,min:0},borderColor:{type:"color",gui:!0},borderOpacity:{type:"number",
floatType:!0,gui:!0,step:.1,default:1,min:0,max:1},backgroundColor:{type:"color",gui:!0},backgroundOpacity:{type:"number",floatType:!0,gui:!0,step:.1,default:1,min:0,max:1},position:{type:"array",valid:!1},inFront:{type:"boolean",gui:!0},showBackground:{type:"boolean",gui:!0},fixed:{type:"boolean",gui:!0},alignment:{validItems:"topLeft topCenter topRight centerLeft center centerRight bottomLeft bottomCenter bottomRight".split(" "),gui:!0},scale:{type:"boolean",gui:!1}};return d.parseCrd=function(f,
h){var r=[],u=0;if("pdb"==h)for(h=f.indexOf("\nATOM");-1!=h;){for(;"\nATOM"==f.slice(h,h+5)||"\nHETATM"==f.slice(h,h+7);)r[u++]=parseFloat(f.slice(h+31,h+39)),r[u++]=parseFloat(f.slice(h+39,h+47)),r[u++]=parseFloat(f.slice(h+47,h+55)),h=f.indexOf("\n",h+54),"\nTER"==f.slice(h,h+4)&&(h=f.indexOf("\n",h+5));h=f.indexOf("\nATOM",h)}else if("netcdf"==h)f=new netcdfjs(f),r=[].concat.apply([],f.getDataVariable("coordinates"));else{if("array"==h||Array.isArray(f))return f.flat(2);r=f.indexOf("\n");"inpcrd"==
h&&(r=f.indexOf("\n",r+1));r=f.slice(r+1).match(/\S+/g).map(parseFloat)}return r},d.parseMolData=function(f,h,r){if(!f)return[];if(/\.gz$/.test(h=h||"")){h=h.replace(/\.gz$/,"");try{f=pako.inflate(f,{to:"string"})}catch(u){console.log(u)}}return void 0===c.Parsers[h]&&(h=h.split(".").pop(),void 0===c.Parsers[h]&&(console.log("Unknown format: "+h),h=f instanceof Uint8Array?"mmtf":f.match(/^@<TRIPOS>MOLECULE/gm)?"mol2":f.match(/^data_/gm)&&f.match(/^loop_/gm)?"cif":f.match(/^HETATM/gm)||f.match(/^ATOM/gm)?
"pdb":f.match(/ITEM: TIMESTEP/gm)?"lammpstrj":f.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?"sdf":f.match(/^%VERSION\s+VERSION_STAMP/gm)?"prmtop":"xyz",console.log("Best guess: "+h))),(0,c.Parsers[h])(f,r)},d}();c.GLShape=function(){function d(h){h=h||{};c.ShapeIDCount++;this.boundingSphere=new c.Sphere;this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]};f(this,h);var r=[],u=null,H=null,z=new c.Geometry(!0),F=new c.Geometry(!0);this.updateStyle=function(t){for(var q in t)h[q]=t[q];if(f(this,
h),t.voldata&&t.volscheme){c.adjustVolumeStyle(t);var n=t.volscheme,v=t.voldata,x=c.CC,w=n.range()||[-1,1];z.setColors(function(D,E,Q){D=v.getVal(D,E,Q);return x.color(n.valueToHex(D,w))});delete this.color}};this.addCustom=function(t){t.vertexArr=t.vertexArr||[];t.faceArr=t.faceArr||[];t.normalArr=t.normalArr||[];k(this,z,t)};this.addSphere=function(t){t.center=t.center||{x:0,y:0,z:0};t.radius=t.radius?c.Math.clamp(t.radius,0,1/0):1.5;t.color=c.CC.color(t.color);this.intersectionShape.sphere.push(new c.Sphere(t.center,
t.radius));c.GLDraw.drawSphere(z,t.center,t.radius,t.color);r.push({centroid:new c.Vector3(t.center.x,t.center.y,t.center.z)});t=z.updateGeoGroup(0);e(this.boundingSphere,0,t.vertexArray,t.vertices)};this.addBox=function(t){var q=t.dimensions||{w:1,h:1,d:1},n=q.w;"number"==typeof q.w&&(n={x:q.w,y:0,z:0});var v=q.h;"number"==typeof q.h&&(v={x:0,y:q.h,z:0});var x=q.d;"number"==typeof q.d&&(x={x:0,y:0,z:q.d});q=t.corner;null==q&&(q=void 0!==t.center?{x:t.center.x-.5*(n.x+v.x+x.x),y:t.center.y-.5*(n.y+
v.y+x.y),z:t.center.z-.5*(n.z+v.z+x.z)}:{x:0,y:0,z:0});n=[{x:q.x,y:q.y,z:q.z},{x:q.x+n.x,y:q.y+n.y,z:q.z+n.z},{x:q.x+v.x,y:q.y+v.y,z:q.z+v.z},{x:q.x+n.x+v.x,y:q.y+n.y+v.y,z:q.z+n.z+v.z},{x:q.x+x.x,y:q.y+x.y,z:q.z+x.z},{x:q.x+n.x+x.x,y:q.y+n.y+x.y,z:q.z+n.z+x.z},{x:q.x+v.x+x.x,y:q.y+v.y+x.y,z:q.z+v.z+x.z},{x:q.x+n.x+v.x+x.x,y:q.y+n.y+v.y+x.y,z:q.z+n.z+v.z+x.z}];v=[];x=[];v.splice(v.length,0,n[0],n[1],n[2],n[3]);x.splice(x.length,0,0,2,1,1,2,3);q=4;v.splice(v.length,0,n[2],n[3],n[6],n[7]);x.splice(x.length,
0,q+0,q+2,q+1,q+1,q+2,q+3);q+=4;v.splice(v.length,0,n[4],n[5],n[0],n[1]);x.splice(x.length,0,q+0,q+2,q+1,q+1,q+2,q+3);q+=4;v.splice(v.length,0,n[6],n[7],n[4],n[5]);x.splice(x.length,0,q+0,q+2,q+1,q+1,q+2,q+3);q+=4;v.splice(v.length,0,n[3],n[1],n[7],n[5]);x.splice(x.length,0,q+0,q+2,q+1,q+1,q+2,q+3);q+=4;v.splice(v.length,0,n[2],n[6],n[0],n[4]);x.splice(x.length,0,q+0,q+2,q+1,q+1,q+2,q+3);t=c.extend({},t);t.vertexArr=v;t.faceArr=x;t.normalArr=[];k(this,z,t);t=new c.Vector3;r.push({centroid:t.addVectors(n[0],
n[7]).multiplyScalar(.5)});t=z.updateGeoGroup(0);e(this.boundingSphere,0,t.vertexArray,t.vertices)};this.addCylinder=function(t){t.start=t.start||{};t.end=t.end||{};var q=new c.Vector3(t.start.x||0,t.start.y||0,t.start.z||0),n=new c.Vector3(t.end.x,t.end.y||0,t.end.z||0);void 0===n.x&&(n.x=3);var v=t.radius||.1,x=c.CC.color(t.color);this.intersectionShape.cylinder.push(new c.Cylinder(q,n,v));c.GLDraw.drawCylinder(z,q,n,v,x,t.fromCap,t.toCap);t=new c.Vector3;r.push({centroid:t.addVectors(q,n).multiplyScalar(.5)});
q=z.updateGeoGroup(0);e(this.boundingSphere,0,q.vertexArray,q.vertices)};this.addDashedCylinder=function(t){t.start=t.start||{};t.end=t.end||{};t.dashLength=t.dashLength||.25;t.gapLength=t.gapLength||.25;var q=new c.Vector3(t.start.x||0,t.start.y||0,t.start.z||0),n=new c.Vector3(t.end.x,t.end.y||0,t.end.z||0);void 0===n.x&&(n.x=3);var v=t.radius||.1,x=c.CC.color(t.color),w=Math.sqrt(Math.pow(q.x-n.x,2)+Math.pow(q.y-n.y,2)+Math.pow(q.z-n.z,2)),D=w/(t.gapLength+t.dashLength),E=new c.Vector3(t.start.x||
0,t.start.y||0,t.start.z||0);new c.Vector3(t.end.x,t.end.y||0,t.end.z||0);for(var Q=new c.Vector3((n.x-q.x)/(w/t.gapLength),(n.y-q.y)/(w/t.gapLength),(n.z-q.z)/(w/t.gapLength)),N=new c.Vector3((n.x-q.x)/(w/t.dashLength),(n.y-q.y)/(w/t.dashLength),(n.z-q.z)/(w/t.dashLength)),R=0;R<D;R++)w=new c.Vector3(E.x+N.x,E.y+N.y,E.z+N.z),this.intersectionShape.cylinder.push(new c.Cylinder(E,w,v)),c.GLDraw.drawCylinder(z,E,w,v,x,t.fromCap,t.toCap),E=new c.Vector3(w.x+Q.x,w.y+Q.y,w.z+Q.z);t=new c.Vector3;r.push({centroid:t.addVectors(q,
n).multiplyScalar(.5)});q=z.updateGeoGroup(0);e(this.boundingSphere,0,q.vertexArray,q.vertices)};this.addCurve=function(t){t.points=t.points||[];t.smooth=t.smooth||10;void 0===t.fromCap&&(t.fromCap=2);void 0===t.toCap&&(t.toCap=2);var q=c.subdivide_spline(t.points,t.smooth);if(3>q.length)console.log("Too few points in addCurve");else{var n=t.radius||.1,v=c.CC.color(t.color),x=0,w=q.length-1,D=q[0].distanceTo(q[1]);D=Math.ceil(2*n/D);if(t.toArrow){var E={start:q[w-=D],end:q[q.length-1],radius:n,color:v,
mid:1E-4};this.addArrow(E)}t.fromArrow&&(t={start:q[x+=D],end:q[0],radius:n,color:v,mid:1E-4},this.addArrow(t));t=Math.ceil(q.length/2);for(n={radius:n,color:v,fromCap:2,toCap:2};x<w;x++)n.start=q[x],n.end=q[x+1],n.fromCap=2,n.toCap=2,x<t?(n.fromCap=2,n.toCap=0):x>t?(n.fromCap=0,n.toCap=2):(n.fromCap=2,n.toCap=2),this.addCylinder(n)}};this.addLine=function(t){t.start=t.start||{};t.end=t.end||{};var q=new c.Vector3(t.start.x||0,t.start.y||0,t.start.z||0);t=new c.Vector3(t.end.x,t.end.y||0,t.end.z||
0);void 0===t.x&&(t.x=3);var n=z.updateGeoGroup(2),v=n.vertices,x=3*v,w=n.vertexArray;w[x]=q.x;w[x+1]=q.y;w[x+2]=q.z;w[x+3]=t.x;w[x+4]=t.y;w[x+5]=t.z;n.vertices+=2;x=n.lineArray;w=n.lineidx;x[w]=v;x[w+1]=v+1;n.lineidx+=2;n=new c.Vector3;r.push({centroid:n.addVectors(q,t).multiplyScalar(.5)});n=z.updateGeoGroup(0);e(this.boundingSphere,0,n.vertexArray,n.vertices)};this.addArrow=function(t){if(t.start=t.start||{},t.end=t.end||{},t.start=new c.Vector3(t.start.x||0,t.start.y||0,t.start.z||0),t.dir instanceof
c.Vector3&&"number"==typeof t.length){var q=t.dir.clone().multiplyScalar(t.length).add(t.start);t.end=q}else t.end=new c.Vector3(t.end.x,t.end.y||0,t.end.z||0),void 0===t.end.x&&(t.end.x=3);t.radius=t.radius||.1;t.radiusRatio=t.radiusRatio||1.618034;t.mid=0<t.mid&&1>t.mid?t.mid:.618034;var n=t.start,v=t.end,x=t.radius,w=t.radiusRatio,D=t.mid,E=t.midpos;if(n&&v){q=z.updateGeoGroup(51);var Q=v.clone().sub(n);E&&(D=Q.length(),D=0<E?E/D:(D+E)/D);Q.multiplyScalar(D);var N=n.clone().add(Q);E=Q.clone().negate();
this.intersectionShape.cylinder.push(new c.Cylinder(n.clone(),N.clone(),x));this.intersectionShape.sphere.push(new c.Sphere(n.clone(),x));D=[];D[0]=Q.clone();1E-4<Math.abs(D[0].x)?D[0].y+=1:D[0].x+=1;D[0].cross(Q);D[0].normalize();D[0]=D[0];D[4]=D[0].clone();D[4].crossVectors(D[0],Q);D[4].normalize();D[8]=D[0].clone().negate();D[12]=D[4].clone().negate();D[2]=D[0].clone().add(D[4]).normalize();D[6]=D[4].clone().add(D[8]).normalize();D[10]=D[8].clone().add(D[12]).normalize();D[14]=D[12].clone().add(D[0]).normalize();
D[1]=D[0].clone().add(D[2]).normalize();D[3]=D[2].clone().add(D[4]).normalize();D[5]=D[4].clone().add(D[6]).normalize();D[7]=D[6].clone().add(D[8]).normalize();D[9]=D[8].clone().add(D[10]).normalize();D[11]=D[10].clone().add(D[12]).normalize();D[13]=D[12].clone().add(D[14]).normalize();D[15]=D[14].clone().add(D[0]).normalize();var R,m,G,L=q.vertices;var O=q.vertexArray;var Z=q.faceArray,W=q.normalArray,ha=q.lineArray;var ja=0;for(R=D.length;ja<R;++ja){var ea=3*(L+3*ja);var la=D[ja].clone().multiplyScalar(x).add(n);
var oa=D[ja].clone().multiplyScalar(x).add(N);var wa=D[ja].clone().multiplyScalar(x*w).add(N);if(O[ea]=la.x,O[ea+1]=la.y,O[ea+2]=la.z,O[ea+3]=oa.x,O[ea+4]=oa.y,O[ea+5]=oa.z,O[ea+6]=wa.x,O[ea+7]=wa.y,O[ea+8]=wa.z,0<ja)ea=new c.Vector3(O[ea-3],O[ea-2],O[ea-1]),la=v.clone(),oa=N.clone(),wa=new c.Vector3(wa.x,wa.y,wa.z),this.intersectionShape.triangle.push(new c.Triangle(wa,la,ea)),this.intersectionShape.triangle.push(new c.Triangle(ea.clone(),oa,wa.clone()))}q.vertices+=48;O[ea=3*q.vertices]=n.x;O[ea+
1]=n.y;O[ea+2]=n.z;O[ea+3]=N.x;O[ea+4]=N.y;O[ea+5]=N.z;O[ea+6]=v.x;O[ea+7]=v.y;O[ea+8]=v.z;q.vertices+=3;var U=q.vertices-3,A=q.vertices-2,I=q.vertices-1,P=3*U,T=3*A,Y=3*I;ja=0;for(R=D.length-1;ja<R;++ja){var V=L+3*ja;n=q.faceidx;v=q.lineidx;ea=3*(x=V);la=3*(w=V+1);oa=3*(N=V+2);var fa=3*(O=V+4);var ka=3*(wa=V+5);var ma=3*(V+=3);D[ja];D[ja];D[ja+1];D[ja+1];var za=m=D[ja];var Ma=G=D[ja+1];W[ea]=za.x;W[la]=m.x;W[ma]=G.x;W[ea+1]=za.y;W[la+1]=m.y;W[ma+1]=G.y;W[ea+2]=za.z;W[la+2]=m.z;W[ma+2]=G.z;W[la]=
m.x;W[fa]=Ma.x;W[ma]=G.x;W[la+1]=m.y;W[fa+1]=Ma.y;W[ma+1]=G.y;W[la+2]=m.z;W[fa+2]=Ma.z;W[ma+2]=G.z;W[oa]=m.x;W[ka]=Ma.x;W[oa+1]=m.y;W[ka+1]=Ma.y;W[oa+2]=m.z;W[ka+2]=Ma.z;Z[n]=x;Z[n+1]=w;Z[n+2]=V;Z[n+3]=w;Z[n+4]=O;Z[n+5]=V;Z[n+6]=x;Z[n+7]=V;Z[n+8]=U;Z[n+9]=N;Z[n+10]=A;Z[n+11]=wa;Z[n+12]=N;Z[n+13]=I;Z[n+14]=wa;ha[v]=x;ha[v+1]=w;ha[v+2]=x;ha[v+3]=V;ha[v+4]=O;ha[v+5]=V;ha[v+6]=x;ha[v+7]=V;ha[v+8]=N;ha[v+9]=w;ha[v+10]=N;ha[v+11]=wa;ha[v+12]=O;ha[v+13]=wa;ha[v+14]=N;ha[v+15]=I;ha[v+16]=N;ha[v+17]=wa;ha[v+
18]=I;ha[v+19]=wa;q.faceidx+=15;q.lineidx+=20}ja=[L+45,L+46,L+1,L,L+47,L+2];D[15];D[15];D[0];D[0];n=q.faceidx;v=q.lineidx;ea=3*(x=ja[0]);la=3*(w=ja[1]);oa=3*(N=ja[4]);fa=3*(O=ja[2]);ka=3*(wa=ja[5]);ma=3*(V=ja[3]);za=m=D[15];Ma=G=D[0];W[ea]=za.x;W[la]=m.x;W[ma]=G.x;W[ea+1]=za.y;W[la+1]=m.y;W[ma+1]=G.y;W[ea+2]=za.z;W[la+2]=m.z;W[ma+2]=G.z;W[la]=m.x;W[fa]=Ma.x;W[ma]=G.x;W[la+1]=m.y;W[fa+1]=Ma.y;W[ma+1]=G.y;W[la+2]=m.z;W[fa+2]=Ma.z;W[ma+2]=G.z;W[oa]=m.x;W[ka]=Ma.x;W[oa+1]=m.y;W[ka+1]=Ma.y;W[oa+2]=m.z;
W[ka+2]=Ma.z;Q.normalize();E.normalize();W[P]=E.x;W[T]=W[Y]=Q.x;W[P+1]=E.y;W[T+1]=W[Y+1]=Q.y;W[P+2]=E.z;W[T+2]=W[Y+2]=Q.z;Z[n]=x;Z[n+1]=w;Z[n+2]=V;Z[n+3]=w;Z[n+4]=O;Z[n+5]=V;Z[n+6]=x;Z[n+7]=V;Z[n+8]=U;Z[n+9]=N;Z[n+10]=A;Z[n+11]=wa;Z[n+12]=N;Z[n+13]=I;Z[n+14]=wa;ha[v]=x;ha[v+1]=w;ha[v+2]=x;ha[v+3]=V;ha[v+4]=O;ha[v+5]=V;ha[v+6]=x;ha[v+7]=V;ha[v+8]=N;ha[v+9]=w;ha[v+10]=N;ha[v+11]=wa;ha[v+12]=O;ha[v+13]=wa;ha[v+14]=N;ha[v+15]=I;ha[v+16]=N;ha[v+17]=wa;ha[v+18]=I;ha[v+19]=wa;q.faceidx+=15;q.lineidx+=20}q=
new c.Vector3;r.push({centroid:q.addVectors(t.start,t.end).multiplyScalar(.5)});t=z.updateGeoGroup(0);e(this.boundingSphere,0,t.vertexArray,t.vertices)};this.addIsosurface=function(t,q,n){var v,x=void 0!==q.isoval&&"number"==typeof q.isoval?q.isoval:0,w=!!q.voxel,D=void 0===q.smoothness?1:q.smoothness,E=t.size.x,Q=t.size.y,N=t.size.z,R=new Int16Array(E*Q*N),m=t.data;var G=0;for(v=R.length;G<v;++G)R[G]=-1;R=new Uint8Array(E*Q*N);G=0;for(v=m.length;G<v;++G)0<(0<=x?m[G]-x:x-m[G])&&(R[G]|=2);G=[];v=[];
c.MarchingCube.march(R,G,v,{fulltable:!0,voxel:w,unitCube:t.unit,origin:t.origin,matrix:t.matrix,nX:E,nY:Q,nZ:N});!w&&0<D&&c.MarchingCube.laplacianSmooth(D,G,v);w=[];D=[];E=[];if(q.selectedRegion&&void 0===q.coords&&(q.coords=q.selectedRegion),void 0!==q.coords){Q=q.coords[0].x;N=q.coords[0].y;R=q.coords[0].z;x=q.coords[0].x;m=q.coords[0].y;for(var L=q.coords[0].z,O=0;O<q.coords.length;O++)q.coords[O].x>Q?Q=q.coords[O].x:q.coords[O].x<x&&(x=q.coords[O].x),q.coords[O].y>N?N=q.coords[O].y:q.coords[O].y<
m&&(m=q.coords[O].y),q.coords[O].z>R?R=q.coords[O].z:q.coords[O].z<L&&(L=q.coords[O].z);O=2;void 0!==q.radius&&(O=q.radius);void 0!==q.selectedOffset&&(O=q.selectedOffset);void 0!==q.seldist&&(O=q.seldist);x-=O;Q+=O;m-=O;N+=O;L-=O;R+=O;for(var Z=0;Z<G.length;Z++){var W;if(W=G[Z].x>x&&G[Z].x<Q&&G[Z].y>m&&G[Z].y<N&&G[Z].z>L&&G[Z].z<R)a:{for(var ha=W=void 0,ja=q.coords,ea=0;ea<ja.length;ea++)if(ha=ja[ea],W=G[Z],Math.sqrt(Math.pow(ha.x-W.x,2)+Math.pow(ha.y-W.y,2)+Math.pow(ha.z-W.z,2))<=O){W=!0;break a}W=
!1}W?(w.push(D.length),D.push(G[Z])):w.push(-1)}for(G=0;G+2<v.length;G+=3)-1!==w[v[G]]&&-1!==w[v[G+1]]&&-1!==w[v[G+2]]&&(E.push(v[G]-(v[G]-w[v[G]])),E.push(v[G+1]-(v[G+1]-w[v[G+1]])),E.push(v[G+2]-(v[G+2]-w[v[G+2]])));G=D;v=E}k(this,z,{vertexArr:G,faceArr:v,normalArr:[],clickable:q.clickable,hoverable:q.hoverable});this.updateStyle(q);v=new c.Vector3(t.origin.x,t.origin.y,t.origin.z);w=new c.Vector3(t.size.x*t.unit.x,t.size.y*t.unit.y,t.size.z*t.unit.z);t=new c.Vector3(0,0,0);q=v.clone();v=v.clone().add(w);
for(w=0;w<G.length;w++)t.add(G[w]),q.max(G[w]),v.min(G[w]);t.divideScalar(G.length);G=t.distanceTo(v);q=t.distanceTo(q);this.boundingSphere.center=t;this.boundingSphere.radius=Math.max(G,q);"function"==typeof n&&n()};this.addVolumetricData=function(t,q,n){t=new c.VolumeData(t,q);this.addIsosurface(t,n)};this.finalize=function(){return p(z),z.initTypedArrays(),z};this.globj=function(t){if(H&&(t.remove(H),H=null),!this.hidden){p(z);z.initTypedArrays();this.wireframe&&z.setUpWireframe();if(void 0!==
this.color){var q=this.color,n,v,x,w;for(w in q=q||c.CC.color(q),z.colorsNeedUpdate=!0,q.constructor!==Array&&(n=q.r,v=q.g,x=q.b),z.geometryGroups){var D=z.geometryGroups[w],E=D.colorArray,Q=0;for(D=D.vertices;Q<D;++Q)q.constructor===Array&&(x=q[Q],n=x.r,v=x.g,x=x.b),E[3*Q]=n,E[3*Q+1]=v,E[3*Q+2]=x}}u=new c.Object3D;q=this.side==c.DoubleSide?new c.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:1>this.opacity,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:c.VertexColors}):
new c.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:1>this.opacity,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:c.VertexColors});q=new c.Mesh(z,q);u.add(q);q=new c.LineBasicMaterial({linewidth:this.linewidth,color:this.color});q=new c.Line(F,q,c.LinePieces);u.add(q);H=u.clone();t.add(H)}};this.removegl=function(t){H&&(void 0!==H.geometry&&H.geometry.dispose(),void 0!==H.material&&H.material.dispose(),t.remove(H),H=null);u=null}}var p=function(h){h=
h.updateGeoGroup(0);0<h.vertices&&h.truncateArrayBuffers(!0,!0)},e=function(h,r,u,H){h.center.set(0,0,0);r=1/0;var z=1/0,F=1/0,t=-1/0,q=-1/0,n=-1/0;h.box&&(r=h.box.min.x,t=h.box.max.x,z=h.box.min.y,q=h.box.max.y,F=h.box.min.z,n=h.box.max.z);for(var v=0;v<H;v++){var x=u[3*v],w=u[3*v+1],D=u[3*v+2];x<r&&(r=x);w<z&&(z=w);D<F&&(F=D);x>t&&(t=x);w>q&&(q=w);D>n&&(n=D)}h.center.set((t+r)/2,(q+z)/2,(n+F)/2);h.radius=h.center.distanceTo({x:t,y:q,z:n});h.box={min:{x:r,y:z,z:F},max:{x:t,y:q,z:n}}},k=function(h,
r,u){var H=u.faceArr;0!==u.vertexArr.length&&0!==H.length||console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");H=u.color;void 0===H&&(H=h.color);H=c.CC.color(H);for(var z=c.splitMesh(u),F=0,t=z.length;F<t;F++){var q=void 0,n=void 0,v,x=void 0,w=void 0;var D=h;var E=r,Q=z[F],N=z[F].colorArr?z[F].colorArr:H,R=u.clickable,m=E.addGeoGroup(),G=Q.vertexArr,L=Q.normalArr;Q=Q.faceArr;m.vertices=G.length;m.faceidx=Q.length;var O=m.vertexArray,Z=m.colorArray;N.constructor!==
Array&&(n=N.r,q=N.g,w=N.b);var W=0;for(v=m.vertices;W<v;++W){var ha=3*W;var ja=G[W];O[ha]=ja.x;O[ha+1]=ja.y;O[ha+2]=ja.z;N.constructor===Array&&(n=(x=N[W]).r,q=x.g,w=x.b);Z[ha]=n;Z[ha+1]=q;Z[ha+2]=w}if(R)for(W=0,v=m.faceidx/3;W<v;++W)q=Q[ha=3*W],w=Q[ha+1],x=Q[ha+2],ha=new c.Vector3,n=new c.Vector3,N=new c.Vector3,D.intersectionShape.triangle.push(new c.Triangle(ha.copy(G[q]),n.copy(G[w]),N.copy(G[x])));if(R){v=new c.Vector3(0,0,0);for(x=W=0;x<E.geometryGroups.length;x++)v.add(E.geometryGroups[x].getCentroid()),
W++;v.divideScalar(W);e(D.boundingSphere,0,O,m.vertices)}if(m.faceArray=new Uint16Array(Q),m.truncateArrayBuffers(!0,!0),L.length<m.vertices)m.setNormals();else for(E=m.normalArray=new Float32Array(3*m.vertices),W=0,v=m.vertices;W<v;++W)ha=3*W,D=L[W],E[ha]=D.x,E[ha+1]=D.y,E[ha+2]=D.z;m.setLineIndices();m.lineidx=m.lineArray.length}},f=function(h,r){void 0!==r.color?(h.color=r.color||new c.Color,r.color instanceof c.Color||(h.color=c.CC.color(r.color))):h.color=c.CC.color(0);h.wireframe=!!r.wireframe;
h.opacity=r.alpha?c.Math.clamp(r.alpha,0,1):1;void 0!==r.opacity&&(h.opacity=c.Math.clamp(r.opacity,0,1));h.side=void 0!==r.side?r.side:c.DoubleSide;h.linewidth=void 0===r.linewidth?1:r.linewidth;h.clickable=!!r.clickable;h.callback=c.makeFunction(r.callback);h.hoverable=!!r.hoverable;h.hover_callback=c.makeFunction(r.hover_callback);h.unhover_callback=c.makeFunction(r.unhover_callback);h.hidden=r.hidden;h.frame=r.frame};return Object.defineProperty(d.prototype,"position",{get:function(){return this.boundingSphere.center}}),
Object.defineProperty(d.prototype,"x",{get:function(){return this.boundingSphere.center.x}}),Object.defineProperty(d.prototype,"y",{get:function(){return this.boundingSphere.center.y}}),Object.defineProperty(d.prototype,"z",{get:function(){return this.boundingSphere.center.z}}),d}();c.ShapeIDCount=0;c.splitMesh=function(d){if(64E3>d.vertexArr.length)return[d];var p=[{vertexArr:[],normalArr:[],faceArr:[]}];d.colorArr&&(p.colorArr=[]);for(var e=[],k=[],f=0,h=d.faceArr,r=0,u=h.length;r<u;r+=3){for(var H=
p[f],z=0;3>z;z++){var F=h[r+z];e[F]!==f&&(e[F]=f,k[F]=H.vertexArr.length,H.vertexArr.push(d.vertexArr[F]),d.normalArr&&d.normalArr[F]&&H.normalArr.push(d.normalArr[F]),d.colorArr&&d.colorArr[F]&&H.colorArr.push(d.colorArr[F]));H.faceArr.push(k[F])}64E3<=H.vertexArr.length&&(p.push({vertexArr:[],normalArr:[],faceArr:[]}),d.colorArr&&(p.colorArr=[]),f++)}return p};c.GLViewer=function(d,p){function e(){(A=new c.Renderer({antialias:p.antialias,preserveDrawingBuffer:!0,premultipliedAlpha:!1,id:p.id,row:p.row,
col:p.col,rows:p.rows,cols:p.cols,canvas:p.canvas,containerWidth:ha||1,containerHeight:ja||1})).domElement.style.width="100%";A.domElement.style.height="100%";A.domElement.style.padding="0";A.domElement.style.position="absolute";A.domElement.style.top="0px";A.domElement.style.left="0px";A.domElement.style.zIndex="0"}function k(y){var J=[];if(void 0===y||void 0===y.model)for(y=0;y<w.length;y++)w[y]&&J.push(w[y]);else for(J=y.model,Array.isArray(J)||(J=[J]),y=0;y<J.length;y++)if("number"==typeof J[y]){var aa=
J[y];0>aa&&(aa+=w.length);J[y]=w[aa]}return J}function f(y){var J=[];void 0===y&&(y={});for(var aa=k(y),qa=0;qa<aa.length;qa++)J=J.concat(aa[qa].selectedAtoms(y));return J}function h(y,J,aa,qa,Ea,Ga,Na){for(var ab=k(J),Ya=0;Ya<ab.length;Ya++)ab[Ya][y](J,aa,qa,Ea,Ga,Na)}function r(y){var J=new c.MeshLambertMaterial,aa;for(aa in J.vertexColors=c.VertexColors,y)"color"===aa||"map"===aa||y.hasOwnProperty(aa)&&(J[aa]=y[aa]);return void 0!==y.opacity&&(1===y.opacity?J.transparent=!1:J.transparent=!0),J}
var u=(p=p||{}).callback,H=p.defaultcolors;H||(H=c.elementColors.defaultColors);var z=p.nomouse,F=0;p.backgroundColor=p.backgroundColor||"#ffffff";F=c.CC.color(p.backgroundColor).getHex();p.backgroundAlpha=null==p.backgroundAlpha?1:p.backgroundAlpha;var t=0;t=parseFloat(p.camerax);var q=this,n=this.container=ra(d),v=null,x=null,w=[],D={},E=[],Q=[],N=[],R=[],m=[],G=[],L=null,O=500,Z=0;null!=p.hoverDuration&&(O=p.hoverDuration);void 0===p.antialias&&(p.antialias=!0);void 0===p.cartoonQuality&&(p.cartoonQuality=
5);var W=function(){var y=n[0],J=y.getBoundingClientRect();if(0==J.width&&0==J.height&&"none"===y.style.display){var aa=y.style.position,qa=y.style.visibility;y.style.display="block";y.style.visibility="hidden";y.style.position="absolute";J=y.getBoundingClientRect();y.style.display="none";y.style.visibility=qa;y.style.position=aa}return J},ha=W().width,ja=W().height,ea=null,la=null,oa=150,wa=20,U=[],A=null;e();var I=p.row,P=p.col,T=p.cols,Y=p.rows,V=p.viewers,fa=p.control_all,ka=A.getAspect(ha,ja),
ma=new c.Camera(wa,ka,1,800,p.orthographic);ma.position=new c.Vector3(t,0,oa);var za=new c.Vector3;ma.lookAt(za);var Ma=new c.Raycaster(new c.Vector3(0,0,0),new c.Vector3(0,0,0)),Ra=new c.Projector,va=null,Ca=null,Oa=null,$a=-50,ob=50,Lb=new c.Quaternion(0,0,0,1),Ub=new c.Quaternion(0,0,0,1),lc=0,Pb=new Set,uc=!1,Xb=0,Dc=0,Ec=0,pc=!1,Fb=0,nb=0,bc=0,wb=0,na=function(){0>--lc&&(lc=0)},C=function(){var y=0,J;for(J in D)if(D.hasOwnProperty(J)){var aa=parseInt(J);isNaN(aa)||(J=aa);J>y&&(y=J)}return y+
1},Va=function(){var y=ma.position.z-Ca.position.z;1>y&&(y=1);ma.near=y+$a;1>ma.near&&(ma.near=1);ma.far=y+ob;ma.near+1>ma.far&&(ma.far=ma.near+1);ma.fov=wa;ma.right=y*Math.tan(Math.PI/180*wa);ma.left=-ma.right;ma.top=ma.right/ka;ma.bottom=-ma.top;ma.updateProjectionMatrix();va.fog.near=ma.near+.4*(ma.far-ma.near);va.fog.far=ma.far;p.disableFog&&(va.fog.near=va.fog.far)},Aa=function(y){if(A.setViewport(),va&&(Va(),A.render(va,ma),ea&&ea(q.getView()),!y&&0<U.length)){y=q.getView();for(var J=0;J<U.length;J++)U[J].setView(y,
!0)}};!function(){(va=new c.Scene).fog=new c.Fog(F,100,200);Oa=new c.Object3D;(Ca=new c.Object3D).useQuaternion=!0;Ca.quaternion=new c.Quaternion(0,0,0,1);Ca.add(Oa);va.add(Ca);var y=new c.Light(16777215);y.position=(new c.Vector3(.2,.2,1)).normalize();y.intensity=1;va.add(y)}();A.setClearColorHex(F,p.backgroundAlpha);va.fog.color=c.CC.color(F);var cb=this.targetedObjects=function(y,J,aa){y={x:y,y:J,z:-1};return Array.isArray(aa)||(aa=this.selectedAtoms(aa)),0==aa.length?[]:(Ma.setFromCamera(y,ma),
Ma.intersectObjects(Oa,aa))},vb=function(){var y=v.get(0),J=y.getBoundingClientRect(),aa=y.ownerDocument;y=aa.documentElement;aa=aa.defaultView;return{top:J.top+aa.pageYOffset-y.clientTop,left:J.left+aa.pageXOffset-y.clientLeft}};this.modelToScreen=function(y){var J=!1;Array.isArray(y)||(y=[y],J=!0);var aa=[],qa=vb();return y.forEach(function(Ea){Ea=new c.Vector3(Ea.x,Ea.y,Ea.z);Ea.applyMatrix4(Oa.matrixWorld);Ra.projectVector(Ea,ma);aa.push({x:ha*(Ea.x+1)/2+qa.left,y:-ja*(Ea.y-1)/2+qa.top})}),J&&
(aa=aa[0]),aa};var lb=function(y,J){L!=y&&(L&&("function"!=typeof L.unhover_callback&&(L.unhover_callback=c.makeFunction(L.unhover_callback)),L.unhover_callback(L,q,J,n)),L=y,y&&void 0!==y.hover_callback&&("function"!=typeof y.hover_callback&&(y.hover_callback=c.makeFunction(y.hover_callback)),"function"==typeof y.hover_callback&&y.hover_callback(y,q,J,n)))},zb=function(y){var J=y.originalEvent.targetTouches[0].pageX-y.originalEvent.targetTouches[1].pageX;y=y.originalEvent.targetTouches[0].pageY-
y.originalEvent.targetTouches[1].pageY;return Math.sqrt(J*J+y*y)},qb=function(y){var J=y.pageX;return null==J&&(J=y.originalEvent.pageX),y.originalEvent.targetTouches&&y.originalEvent.targetTouches[0]?J=y.originalEvent.targetTouches[0].pageX:y.originalEvent.changedTouches&&y.originalEvent.changedTouches[0]&&(J=y.originalEvent.changedTouches[0].pageX),J},Ab=function(y){var J=y.pageY;return null==J&&(J=y.originalEvent.pageY),y.originalEvent.targetTouches&&y.originalEvent.targetTouches[0]?J=y.originalEvent.targetTouches[0].pageY:
y.originalEvent.changedTouches&&y.originalEvent.changedTouches[0]&&(J=y.originalEvent.changedTouches[0].pageY),J},Ob=this.screenOffsetToModel=function(y,J,aa){y/=ha;J/=ja;var qa=Ca.quaternion;aa=new c.Vector3(0,0,void 0===aa?Ca.position.z:aa);return Ra.projectVector(aa,ma),aa.x+=2*y,aa.y-=2*J,Ra.unprojectVector(aa,ma),aa.z=0,aa.applyQuaternion(qa),aa};this.screenToModelDistance=function(y,J){var aa=vb(),qa=new c.Vector3(J.x,J.y,J.z);qa.applyMatrix4(Oa.matrixWorld);J=qa.clone();Ra.projectVector(qa,
ma);y=new c.Vector3(2*(y.x-aa.left)/ha-1,2*(y.y-aa.top)/-ja+1,qa.z);return Ra.unprojectVector(y,ma),y.distanceTo(J)};var hc=function(y,J){if(null!=V&&!fa){var aa=ha/T,qa=ja/Y,Ea=vb();y=Math.floor((y-Ea.left)/aa);if(Y-Math.floor((J-Ea.top)/qa)-1!=I||y!=P)return!1}return!0};ra("body").on("mouseup touchend",function(y){if(pc=!1,uc&&va){var J=qb(y),aa=Ab(y);if(J==Xb&&aa==Dc){var qa=vb();J=cb((J-qa.left)/ha*2-1,-(aa-qa.top)/ja*2+1,R);J.length&&(J=J[0].clickable,void 0!==J.callback&&("function"!=typeof J.callback&&
(J.callback=c.makeFunction(J.callback)),"function"==typeof J.callback&&J.callback(J,q,y,n)));!0}}uc=!1});var Bc,Kb=function(y){if(p.lowerZoomLimit&&0<p.lowerZoomLimit){var J=oa-p.lowerZoomLimit;y>J&&(y=J)}p.upperZoomLimit&&0<p.upperZoomLimit&&(J=oa-p.upperZoomLimit,y<J&&(y=J));return y>oa&&(y=.999*oa),y};this.setViewChangeCallback=function(y){"function"!=typeof y&&null!=y||(ea=y)};this.setStateChangeCallback=function(y){"function"!=typeof y&&null!=y||(la=y)};this.getInternalState=function(){for(var y=
{models:[],surfaces:[],shapes:[],labels:[]},J=0;J<w.length;J++)w[J]&&(y.models[J]=w[J].getInternalState());return y};this.setInternalState=function(y){this.clear();y=y.models;for(var J=0;J<y.length;J++)y[J]&&(w[J]=new c.GLModel(J),w[J].setInternalState(y[J]));this.render()};this.setZoomLimits=function(y,J){void 0!==y&&(p.lowerZoomLimit=y);J&&(p.upperZoomLimit=J);Ca.position.z=Kb(Ca.position.z);Aa()};this.setCameraParameters=function(y){void 0!==y.fov&&(wa=y.fov,ma.fov=wa);void 0!==y.z&&(oa=y.z,ma.z=
oa);void 0!==y.orthographic&&(ma.ortho=y.orthographic)};var Ib,fc=this._handleMouseDown=function(y){if(y.preventDefault(),va){var J=qb(y),aa=Ab(y);void 0!==J&&(uc=!0,Bc=y.which,Xb=J,Dc=aa,pc=!0,Ec=0,y.originalEvent.targetTouches&&2==y.originalEvent.targetTouches.length&&(Ec=zb(y)),Lb=Ca.quaternion.clone(),nb=Ca.position.z,Fb=Oa.position.clone(),bc=$a,wb=ob,setTimeout(function(){y.originalEvent.targetTouches&&1==pc&&(v=ra(A.domElement)).trigger("contextmenu")},1E3),x.exitContextMenu())}},Hc=this._handleMouseScroll=
function(y){if(y.preventDefault(),va){var J=qb(y),aa=Ab(y);void 0!==J&&hc(J,aa)&&(J=.85*(oa-Ca.position.z),aa=1,y.originalEvent.ctrlKey&&(aa=-1),y.originalEvent.detail?Ca.position.z+=aa*J*y.originalEvent.detail/10:y.originalEvent.wheelDelta&&(Ca.position.z-=aa*J*y.originalEvent.wheelDelta/400),Ca.position.z=Kb(Ca.position.z),Aa(),x.exitContextMenu())}};this.pngURI=function(){return this.getCanvas().toDataURL("image/png")};this.apngURI=function(y){var J=this;return y=y||1,new Promise(function(aa){var qa=
0,Ea=ea,Ga=[],Na=[],ab=Date.now();ea=function(){Na.push(Date.now()-ab);ab=Date.now();Ga.push(new Promise(function(Ya){J.getCanvas().toBlob(function(Ka){Ka.arrayBuffer().then(Ya)},"image/png")}));qa+=1;qa==y&&(ea=Ea,Promise.all(Ga).then(function(Ya){for(var Ka=[],eb=0;eb<Ya.length;eb++){var ib=UPNG.decode(Ya[eb]);Ka.push(UPNG.toRGBA8(ib)[0])}Ya=J.getCanvas().width;eb=J.getCanvas().height;Ka=UPNG.encode(Ka,Ya,eb,0,Na);Ka=new Blob([Ka],{type:"image/png"});Ya=new FileReader;Ya.onload=function(Gb){aa(Gb.target.result)};
Ya.readAsDataURL(Ka)}))}})};this.getCanvas=function(){return v.get(0)};this.getRenderer=function(){return A};x=new c.StateManager(q,p);this.setHoverDuration=function(y){O=y};var nc=this._handleMouseMove=function(y){clearTimeout(Ib);var J=vb(),aa=(qb(y)-J.left)/ha*2-1,qa=-(Ab(y)-J.top)/ja*2+1;if(null!==L&&function(ib,Gb){ib=cb(ib,Gb,m);0!=ib.length&&void 0!==ib[0]||lb(null);void 0!==ib[0]&&ib[0].clickable!==L&&lb(null)}(aa,qa),0<m.length&&(Ib=setTimeout(function(){if(0!=m.length){var ib=cb(aa,qa,m);
ib.length?(ib=ib[0].clickable,lb(ib),L=ib):lb(null)}!0},O)),y.preventDefault(),va&&uc){var Ea=0,Ga=qb(y),Na=Ab(y);if(void 0!==Ga&&hc(Ga,Na)){var ab=(Ga-Xb)/ha;J=(Na-Dc)/ja;0!=Ec&&y.originalEvent.targetTouches&&2==y.originalEvent.targetTouches.length?(Ea=2,J=2*(zb(y)-Ec)/(ha+ja)):y.originalEvent.targetTouches&&3==y.originalEvent.targetTouches.length&&(Ea=1);var Ya=A.getXRatio(),Ka=A.getYRatio();ab*=Ya;J*=Ka;var eb=Math.sqrt(ab*ab+J*J);3==Ea||3==Bc&&y.ctrlKey?($a=bc+100*ab,ob=wb-100*J):2==Ea||3==Bc||
y.shiftKey?(80>(y=.85*(oa-Ca.position.z))&&(y=80),Ca.position.z=nb+J*y,Ca.position.z=Kb(Ca.position.z)):1==Ea||2==Bc||y.ctrlKey?(J=Ob(Ya*(Ga-Xb),Ka*(Na-Dc)),Oa.position.addVectors(Fb,J)):0!==Ea&&1!=Bc||0===eb||(y=Math.sin(eb*Math.PI)/eb,Ub.x=Math.cos(eb*Math.PI),Ub.y=0,Ub.z=y*ab,Ub.w=-y*J,Ca.quaternion.set(1,0,0,0),Ca.quaternion.multiply(Ub),Ca.quaternion.multiply(Lb));Aa()}}},pb=this._handleContextMenu=function(y){y.preventDefault();var J=qb(y);y=Ab(y);if(J==Xb&&y==Dc){J=Xb;y=Dc;var aa=vb();y=cb((J-
aa.left)/ha*2-1,-(y-aa.top)/ja*2+1,G);J=null;y.length&&(J=y[0].clickable);y=vb();x.openContextMenu(J,Xb-y.left,Dc-y.top);!0}},kc=function(y){n=y;ha=W().width;ja=W().height;ka=A.getAspect(ha,ja);A.setSize(ha,ja);n.append(A.domElement);v=ra(A.domElement);z||(v.on("mousedown touchstart",fc),v.on("wheel",Hc),v.on("mousemove touchmove",nc),v.on("contextmenu",pb))};kc(n);this.setContainer=function(y){return"string"==typeof y&&(y=ra("#"+y)),y||(y=n),kc(y),this};this.setBackgroundColor=function(y,J){(void 0===
J||0>J||1<J)&&(J=1);y=c.CC.color(y);return va.fog.color=y,F=y.getHex(),A.setClearColorHex(y.getHex(),J),Aa(),this};this.setProjection=function(y){ma.ortho="orthographic"===y;Va()};this.setViewStyle=function(y){if("outline"===y.style){var J={};y.color&&(J.color=c.CC.color(y.color));y.width&&(J.width=y.width);A.enableOutline(J)}else A.disableOutline();return this};p.style&&this.setViewStyle(p);this.setWidth=function(y){return ha=y||ha,A.setSize(ha,ja),this};this.setHeight=function(y){return ja=y||ja,
A.setSize(ha,ja),this};this.resize=function(){ha=W().width;ja=W().height;var y=!1;(A.isLost()&&0<ha&&0<ja&&(n.children("canvas").remove(),e(),kc(n),y=!0),ka=A.getAspect(ha,ja),A.setSize(ha,ja),ma.aspect=ka,ma.updateProjectionMatrix(),y)?(y=A.supportedExtensions(),y.regen=!0,q.render(null,y)):Aa();return x.updateUI(),this};ra(window).resize(this.resize);(new window.ResizeObserver(this.resize)).observe(n[0]);this.getModel=function(y){return void 0===y?0==w.length?null:w[w.length-1]:y instanceof c.GLModel?
y:y in w?w[y]:0==w.length?null:w[w.length-1]};var Nc,pd=function(y,J,aa){if(1==aa)return J;if(0==aa)return y;var qa=y.x*J.x+y.y*J.y+y.z*J.z+y.w*J.w;if(.9995<qa)return y=new c.Quaternion(y.x+aa*(J.x-y.x),y.y+aa*(J.y-y.y),y.z+aa*(J.z-y.z),y.w+aa*(J.w-y.w)),y.normalize(),y;0>qa&&(J=J.clone().multiplyScalar(-1),qa=-qa);1<qa?qa=1:-1>qa&&(qa=-1);aa*=Math.acos(qa);J=J.clone();J.sub(y.clone().multiplyScalar(qa));J.normalize();qa=Math.cos(aa);aa=Math.sin(aa);y=new c.Quaternion(y.x*qa+J.x*aa,y.y*qa+J.y*aa,
y.z*qa+J.z*aa,y.w*qa+J.w*aa);return y.normalize(),y};this.spin=function(y,J){if(clearInterval(Nc),void 0===y&&(y="y"),"boolean"==typeof y){if(!y)return;y="y"}"number"!=typeof J&&(J=1);Array.isArray(y)&&(y={x:y[0],y:y[1],z:y[2]});var aa=this;Nc=setInterval(function(){!aa.getCanvas().isConnected&&A.isLost()&&clearInterval(Nc);aa.rotate(1*J,y)},25)};var fd=function(y,J,aa,qa,Ea,Ga){var Na=Math.ceil(y/20);1>Na&&(Na=1);lc++;var ab=Oa.position.clone(),Ya=Ca.position.z;y=Ca.quaternion.clone();var Ka=za.clone();
if(J){J=(Na=Array(Na)).length;for(var eb=0;eb<J;eb++){var ib=(eb+1)/J,Gb={mpos:ab,rz:Ya,rot:y};aa&&(Gb.mpos=aa.clone().sub(ab).multiplyScalar(ib).add(ab));void 0!==qa&&null!=qa&&(Gb.rz=Ya+ib*(qa-Ya));Ea&&(Gb.rot=pd(y,Ea,ib));Ga&&(Gb.cam=Ga.clone().sub(Ka).multiplyScalar(ib).add(Ka));Na[eb]=Gb}var Hb=0,Jb=function(){var Lc=Na[Hb];Hb+=1;Lc.mpos&&(Oa.position=Lc.mpos);Lc.rz&&(Ca.position.z=Lc.rz);Lc.rot&&(Ca.quaternion=Lc.rot);Lc.cam&&ma.lookAt(Lc.cam);Hb<Na.length?setTimeout(Jb,20):na();Aa()};setTimeout(Jb,
20)}else{var vc,Cc,tb;J=1/Na;if(aa&&(vc=aa.clone().sub(ab).multiplyScalar(J)),void 0!==qa&&null!=qa&&(Cc=J*(qa-Ya)),Ea){aa=pd(y,Ea,J);var Oc=y.clone().inverse().multiply(aa)}Ga&&(tb=Ga.clone().sub(Ka).multiplyScalar(J));var $b=0,Zc=function(){$b+=1;vc&&Oa.position.add(vc);Cc&&(Ca.position.z+=Cc);Oc&&Ca.quaternion.multiply(Oc);tb&&(za.add(tb),ma.lookAt(za));$b<Na?setTimeout(Zc,20):na();Aa()};setTimeout(Zc,20)}};this.rotate=function(y,J,aa,qa){if(aa=void 0!==aa?aa:0,void 0===J&&(J="y"),"x"==J?J={x:1,
y:0,z:0}:"y"==J?J={x:0,y:1,z:0}:"z"==J&&(J={x:0,y:0,z:1}),"vx"==J?J={vx:1,vy:0,vz:0}:"vy"==J?J={vx:0,vy:1,vz:0}:"vz"==J&&(J={vx:0,vy:0,vz:1}),void 0!==J.vx)J=new c.Vector3(J.vx,J.vy,J.vz),J.applyQuaternion(Ca.quaternion),J={x:J.x,y:J.y,z:J.z};var Ea=Math.PI*y/180,Ga,Na,ab;y=Math.sin(Ea/2);Ea=Math.cos(Ea/2);J=(Ga=J.x*y,Na=J.y*y,ab=J.z*y,(new c.Quaternion(Ga,Na,ab,Ea)).normalize());aa?(Ga=(new c.Quaternion).copy(Ca.quaternion).multiply(J),fd(aa,qa,Oa.position,Ca.position.z,Ga,za)):(Ca.quaternion.multiply(J),
Aa());return this};this.surfacesFinished=function(){for(var y in D)if(!D[y][0].done)return!1;return!0};this.getView=function(){if(!Oa)return[0,0,0,0,0,0,0,1];var y=Oa.position,J=Ca.quaternion;return[y.x,y.y,y.z,Ca.position.z,J.x,J.y,J.z,J.w]};this.setView=function(y,J){return void 0!==y&&(y instanceof Array||8!==y.length)&&Oa&&Ca?(Oa.position.x=y[0],Oa.position.y=y[1],Oa.position.z=y[2],Ca.position.z=y[3],Ca.quaternion.x=y[4],Ca.quaternion.y=y[5],Ca.quaternion.z=y[6],Ca.quaternion.w=y[7],void 0!==
y[8]&&(Ca.position.x=y[8],Ca.position.y=y[9]),Aa(J),this):this};this.render=function(y,J){A.setViewport();R.splice(0,R.length);m.splice(0,m.length);G.splice(0,G.length);for(var aa=0,qa=w.length;aa<qa;aa++){var Ea=w[aa];if(Ea){var Ga=Ea.selectedAtoms({clickable:!0}),Na=Ea.selectedAtoms({hoverable:!0});Ea=Ea.selectedAtoms({contextMenuEnabled:!0});for(var ab=0;ab<Na.length;ab++)m.push(Na[ab]);for(Na=0;Na<Ga.length;Na++)R.push(Ga[Na]);for(Ga=0;Ga<Ea.length;Ga++)G.push(Ea[Ga])}}aa=0;for(qa=E.length;aa<
qa;aa++)(Ga=E[aa])&&Ga.clickable&&R.push(Ga),Ga&&Ga.hoverable&&m.push(Ga);Ga=this.getView();la&&la(this.getInternalState());J||(J=A.supportedExtensions());for(aa=0;aa<w.length;aa++)w[aa]&&w[aa].globj(Oa,J);for(aa=0;aa<E.length;aa++)E[aa]&&(void 0===E[aa].frame||0>Z||0>E[aa].frame||E[aa].frame==Z?E[aa].globj(Oa,J):E[aa].removegl(Oa));for(aa=0;aa<Q.length;aa++)Q[aa]&&void 0!==Q[aa].frame&&0<=Q[aa].frame&&(Oa.remove(Q[aa].sprite),(0>Z||Q[aa].frame==Z)&&Oa.add(Q[aa].sprite));for(aa in D)if(D.hasOwnProperty(aa))for(Ea=
D[aa],qa=0;qa<Ea.length;qa++)if(Ea.hasOwnProperty(qa)&&(ab=Ea[qa].geo,!Ea[qa].finished||J.regen))if(ab.verticesNeedUpdate=!0,ab.elementsNeedUpdate=!0,ab.normalsNeedUpdate=!0,ab.colorsNeedUpdate=!0,ab.buffersNeedUpdate=!0,ab.boundingSphere=null,Ea[qa].done&&(Ea[qa].finished=!0),Ea[qa].lastGL&&Oa.remove(Ea[qa].lastGL),Na=null,Na=Ea[qa].mat instanceof c.LineBasicMaterial?new c.Line(ab,Ea[qa].mat):new c.Mesh(ab,Ea[qa].mat),Ea[qa].mat.transparent&&0==Ea[qa].mat.opacity?Na.visible=!1:Na.visible=!0,1<Ea[qa].symmetries.length||
1==Ea[qa].symmetries.length&&!Ea[qa].symmetries[qa].isIdentity()){var Ya=new c.Object3D;for(ab=0;ab<Ea[qa].symmetries.length;ab++){var Ka=Na.clone();Ka.matrix=Ea[qa].symmetries[ab];Ka.matrixAutoUpdate=!1;Ya.add(Ka)}Ea[qa].lastGL=Ya;Oa.add(Ya)}else Ea[qa].lastGL=Na,Oa.add(Na);return this.setView(Ga),"function"==typeof y&&y(this),this};this.selectedAtoms=function(y){return f(y)};this.getUniqueValues=function(y,J){void 0===J&&(J={});J=f(J);var aa={},qa;for(qa in J)J[qa].hasOwnProperty(y)&&(aa[J[qa][y]]=
!0);return Object.keys(aa)};this.pdbData=function(y){y=f(y);for(var J="",aa=0,qa=y.length;aa<qa;++aa)J+=y[aa].pdbline+"\n";return J};this.zoom=function(y,J,aa){J=void 0!==J?J:0;y=oa-(oa-Ca.position.z)/(y||2);return 0<J?fd(J,aa,Oa.position,Kb(y),Ca.quaternion,za):(Ca.position.z=Kb(y),Aa()),this};this.translate=function(y,J,aa,qa){aa=void 0!==aa?aa:0;y/=ha;J/=ja;var Ea=new c.Vector3(0,0,-oa);Ra.projectVector(Ea,ma);Ea.x-=y;Ea.y-=J;Ra.unprojectVector(Ea,ma);Ea.z=0;y=za.clone().add(Ea);return 0<aa?fd(aa,
qa,Oa.position,Ca.position.z,Ca.quaternion,y):(za=y,ma.lookAt(za),Aa()),this};this.translateScene=function(y,J,aa,qa){aa=void 0!==aa?aa:0;y=Ob(y,J);y=Oa.position.clone().add(y);return 0<aa?fd(aa,qa,Oa.position,Ca.position.z,Ca.quaternion,za):(Oa.position=y,Aa()),this};this.fitSlab=function(y){y=f(y||{});var J=c.getExtent(y);y=J[1][0]-J[0][0];var aa=J[1][1]-J[0][1];J=J[1][2]-J[0][2];y=Math.sqrt(y*y+aa*aa+J*J);return 5>y&&(y=5),$a=-y/1.9,ob=y/2,this};this.center=function(y,J,aa){var qa,Ea;J=void 0!==
J?J:0;var Ga=f(y=y||{}),Na=c.getExtent(Ga);c.isEmptyObject(y)?(E.forEach(function(Ya){if(Ya&&Ya.boundingSphere&&Ya.boundingSphere.center){var Ka=Ya.boundingSphere.center;Ya=Ya.boundingSphere.radius;0<Ya?(Ga.push(new c.Vector3(Ka.x+Ya,Ka.y,Ka.z)),Ga.push(new c.Vector3(Ka.x-Ya,Ka.y,Ka.z)),Ga.push(new c.Vector3(Ka.x,Ka.y+Ya,Ka.z)),Ga.push(new c.Vector3(Ka.x,Ka.y-Ya,Ka.z)),Ga.push(new c.Vector3(Ka.x,Ka.y,Ka.z+Ya)),Ga.push(new c.Vector3(Ka.x,Ka.y,Ka.z-Ya))):Ga.push(Ka)}}),Na=c.getExtent(Ga),qa=Ga,Ea=Na):
(qa=f({}),Ea=c.getExtent(qa));y=new c.Vector3(Na[2][0],Na[2][1],Na[2][2]);qa=Ea[1][0]-Ea[0][0];var ab=Ea[1][1]-Ea[0][1];Ea=Ea[1][2]-Ea[0][2];Ea=Math.sqrt(qa*qa+ab*ab+Ea*Ea);5>Ea&&(Ea=5);$a=-Ea/1.9;ob=Ea/2;qa=Na[1][0]-Na[0][0];ab=Na[1][1]-Na[0][1];Ea=Na[1][2]-Na[0][2];5>(Ea=Math.sqrt(qa*qa+ab*ab+Ea*Ea))&&(Ea=5);Na=25;for(Ea=0;Ea<Ga.length;Ea++)Ga[Ea]&&(qa=y.distanceToSquared(Ga[Ea]),qa>Na&&(Na=qa));Ea=2*Math.sqrt(Na);y=y.clone().multiplyScalar(-1);return 0<J?fd(J,aa,y,Ca.position.z,Ca.quaternion,za):
(Oa.position=y,Aa()),this};this.zoomTo=function(y,J,aa){J=void 0!==J?J:0;var qa=f(y=y||{}),Ea=c.getExtent(qa),Ga=Ea;if(c.isEmptyObject(y)){var Na=qa&&qa.length;if(E.forEach(function(Ka){if(Ka&&Ka.boundingSphere)if(Ka.boundingSphere.box){var eb=Ka.boundingSphere.box;qa.push(new c.Vector3(eb.min.x,eb.min.y,eb.min.z));qa.push(new c.Vector3(eb.max.x,eb.max.y,eb.max.z))}else Ka.boundingSphere.center&&(eb=Ka.boundingSphere.center,Ka=Ka.boundingSphere.radius,0<Ka?(qa.push(new c.Vector3(eb.x+Ka,eb.y,eb.z)),
qa.push(new c.Vector3(eb.x-Ka,eb.y,eb.z)),qa.push(new c.Vector3(eb.x,eb.y+Ka,eb.z)),qa.push(new c.Vector3(eb.x,eb.y-Ka,eb.z)),qa.push(new c.Vector3(eb.x,eb.y,eb.z+Ka)),qa.push(new c.Vector3(eb.x,eb.y,eb.z-Ka))):qa.push(eb))}),Ga=c.getExtent(qa),!Na)for(Na=0;3>Na;Na++)Ea[2][Na]=(Ga[0][Na]+Ga[1][Na])/2}else Na=f({}),Ga=c.getExtent(Na);Na=new c.Vector3(Ea[2][0],Ea[2][1],Ea[2][2]);var ab=Ga[1][0]-Ga[0][0],Ya=Ga[1][1]-Ga[0][1];Ga=Ga[1][2]-Ga[0][2];Ga=Math.sqrt(ab*ab+Ya*Ya+Ga*Ga);5>Ga&&(Ga=5);$a=-Ga/1.9;
ob=Ga/2;0===Object.keys(y).length&&($a=Math.min(2*-Ga,-50),ob=Math.max(2*Ga,50));y=p.minimumZoomToDistance||5;ab=Ea[1][0]-Ea[0][0];Ya=Ea[1][1]-Ea[0][1];Ga=Ea[1][2]-Ea[0][2];(Ga=Math.sqrt(ab*ab+Ya*Ya+Ga*Ga))<y&&(Ga=y);Ea=y*y;for(y=0;y<qa.length;y++)qa[y]&&(Ga=Na.distanceToSquared(qa[y]),Ga>Ea&&(Ea=Ga));Ga=2*Math.sqrt(Ea);Ea=Na.clone().multiplyScalar(-1);Na=-(.5*Ga/Math.tan(Math.PI/180*ma.fov/2)-oa);return Na=Kb(Na),0<J?fd(J,aa,Ea,Na,Ca.quaternion,za):(Oa.position=Ea,Ca.position.z=Na,Aa()),this};this.setSlab=
function(y,J){$a=y;ob=J};this.getSlab=function(){return{near:$a,far:ob}};this.addLabel=function(y,J,aa,qa){if(J=J||{},aa)aa=c.getExtent(f(aa)),J.position={x:aa[2][0],y:aa[2][1],z:aa[2][2]};y=new c.Label(y,J);return y.setContext(),Oa.add(y.sprite),J.fixed&&N.push(Q.length),Q.push(y),qa||Aa(),y};this.addResLabels=function(y,J,aa){var qa=Q.length;return h("addResLabels",y,this,J,aa),Aa(),Q.slice(qa)};this.addPropertyLabels=function(y,J,aa){return h("addPropertyLabels",y,J,this,aa),Aa(),this};this.removeLabel=
function(y){for(var J=0;J<Q.length;J++)if(Q[J]==y){Q.splice(J,1);y.dispose();Oa.remove(y.sprite);break}return Aa(),this};this.removeAllLabels=function(){for(var y=0;y<Q.length;y++)Q[y]&&Q[y].sprite&&Oa.remove(Q[y].sprite);return Q.splice(0,Q.length),Aa(),this};this.setLabelStyle=function(y,J){return Oa.remove(y.sprite),y.dispose(),y.stylespec=J,y.setContext(),Oa.add(y.sprite),Aa(),y};this.setLabelText=function(y,J){return Oa.remove(y.sprite),y.dispose(),y.text=J,y.setContext(),Oa.add(y.sprite),Aa(),
y};this.addShape=function(y){y=y||{};y=new c.GLShape(y);return y.shapePosition=E.length,E.push(y),y};this.removeShape=function(y){if(!y)return this;y.removegl(Oa);for(delete E[y.shapePosition];0<E.length&&void 0===E[E.length-1];)E.pop();return this};this.removeAllShapes=function(){for(var y=0;y<E.length;y++){var J=E[y];J&&J.removegl(Oa)}return E.splice(0,E.length),this};var Vc=function(y){if(y.hasOwnProperty("x")&&y.hasOwnProperty("y")&&y.hasOwnProperty("z"))return y;y=f(y);if(0==y.length)return{x:0,
y:0,z:0};y=c.getExtent(y);return{x:y[0][0]+(y[1][0]-y[0][0])/2,y:y[0][1]+(y[1][1]-y[0][1])/2,z:y[0][2]+(y[1][2]-y[0][2])/2}};this.addSphere=function(y){(y=y||{}).center=Vc(y.center);var J=new c.GLShape(y);return J.shapePosition=E.length,J.addSphere(y),E.push(J),J.finalize(),J};this.addBox=function(y){null!=(y=y||{}).corner&&(y.corner=Vc(y.corner));null!=y.center&&(y.center=Vc(y.center));var J=new c.GLShape(y);return J.shapePosition=E.length,J.addBox(y),E.push(J),J.finalize(),J};this.addArrow=function(y){(y=
y||{}).start=Vc(y.start);y.end=Vc(y.end);var J=new c.GLShape(y);return J.shapePosition=E.length,J.addArrow(y),E.push(J),J.finalize(),J};this.addCylinder=function(y){(y=y||{}).start=Vc(y.start);y.end=Vc(y.end);var J=new c.GLShape(y);return J.shapePosition=E.length,y.dashed?J.addDashedCylinder(y):J.addCylinder(y),E.push(J),J.finalize(),J};this.addCurve=function(y){y=y||{};var J=new c.GLShape(y);return J.shapePosition=E.length,J.addCurve(y),E.push(J),J.finalize(),J};this.addLine=function(y){(y=y||{}).start=
Vc(y.start);y.end=Vc(y.end);y.wireframe=!0;var J=new c.GLShape(y);J.shapePosition=E.length;if(y.dashed){y.dashLength=y.dashLength||.5;y.gapLength=y.gapLength||.5;y.start=y.start||{};y.end=y.end||{};var aa,qa=new c.Vector3(y.start.x||0,y.start.y||0,y.start.z||0),Ea=new c.Vector3(y.end.x,y.end.y||0,y.end.z||0);var Ga=new c.Vector3;new c.Vector3;new c.Vector3;var Na=qa.clone(),ab=0;Ga.subVectors(Ea,qa);var Ya=Ga.length();Ga.normalize();var Ka=Ga.clone();var eb=Ga.clone();Ka.multiplyScalar(y.dashLength);
eb.multiplyScalar(y.gapLength);Ga=Ka.length();for(aa=eb.length();ab<Ya;){if(ab+Ga>Ya){y.start=qa;y.end=Ea;J.addLine(y);break}Na.addVectors(qa,Ka);y.start=qa;y.end=Na;J.addLine(y);qa=Na.clone();ab+=Ga;Na.addVectors(qa,eb);qa=Na.clone();ab+=aa}J=(J.finalize(),J)}else J.addLine(y);return E.push(J),J.finalize(),J};this.addUnitCell=function(y,J){y=this.getModel(y);(J=J||{alabel:"a",blabel:"b",clabel:"c"}).box=J.box||{};J.astyle=J.astyle||{color:"red",radius:.1,midpos:-1};J.bstyle=J.bstyle||{color:"green",
radius:.1,midpos:-1};J.cstyle=J.cstyle||{color:"blue",radius:.1,midpos:-1};J.alabelstyle=J.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1};J.blabelstyle=J.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1};J.clabelstyle=J.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1};y.unitCellObjects&&this.removeUnitCell(y);y.unitCellObjects={shapes:[],labels:[]};var aa=y.getCrystData();if(aa){if(aa.matrix)var qa=aa.matrix;
else{qa=aa.a;var Ea=aa.b,Ga=aa.c;var Na=aa.alpha;var ab=aa.beta,Ya=aa.gamma;Na=Na*Math.PI/180;ab=ab*Math.PI/180;Ya=Ya*Math.PI/180;var Ka=Math.cos(ab);Na=(Math.cos(Na)-Math.cos(ab)*Math.cos(Ya))/Math.sin(Ya);qa=new c.Matrix3(qa,Ea*Math.cos(Ya),Ga*Ka,0,Ea*Math.sin(Ya),Ga*Na,0,0,Ga*Math.sqrt(Math.max(0,1-Ka*Ka-Na*Na)))}Ka=[new c.Vector3(0,0,0),new c.Vector3(1,0,0),new c.Vector3(0,1,0),new c.Vector3(0,0,1),new c.Vector3(1,1,0),new c.Vector3(0,1,1),new c.Vector3(1,0,1),new c.Vector3(1,1,1)];if(aa.matrix4)for(qa=
0;qa<Ka.length;qa++)aa.size&&Ka[qa].multiplyVectors(Ka[qa],aa.size),Ka[qa]=Ka[qa].applyMatrix4(aa.matrix4);else for(aa=0;aa<Ka.length;aa++)Ka[aa]=Ka[aa].applyMatrix3(qa);J.box&&!J.box.hidden&&(J.box.wireframe=!0,aa=new c.GLShape(J.box),aa.shapePosition=E.length,aa.addLine({start:Ka[0],end:Ka[1]}),aa.addLine({start:Ka[0],end:Ka[2]}),aa.addLine({start:Ka[1],end:Ka[4]}),aa.addLine({start:Ka[2],end:Ka[4]}),aa.addLine({start:Ka[0],end:Ka[3]}),aa.addLine({start:Ka[3],end:Ka[5]}),aa.addLine({start:Ka[2],
end:Ka[5]}),aa.addLine({start:Ka[1],end:Ka[6]}),aa.addLine({start:Ka[4],end:Ka[7]}),aa.addLine({start:Ka[6],end:Ka[7]}),aa.addLine({start:Ka[3],end:Ka[6]}),aa.addLine({start:Ka[5],end:Ka[7]}),E.push(aa),y.unitCellObjects.shapes.push(aa),aa.finalize());J.astyle.hidden||(J.astyle.start=Ka[0],J.astyle.end=Ka[1],aa=this.addArrow(J.astyle),y.unitCellObjects.shapes.push(aa));J.bstyle.hidden||(J.bstyle.start=Ka[0],J.bstyle.end=Ka[2],aa=this.addArrow(J.bstyle),y.unitCellObjects.shapes.push(aa));J.cstyle.hidden||
(J.cstyle.start=Ka[0],J.cstyle.end=Ka[3],aa=this.addArrow(J.cstyle),y.unitCellObjects.shapes.push(aa));J.alabel&&(J.alabelstyle.position=Ka[1],aa=this.addLabel(J.alabel,J.alabelstyle),y.unitCellObjects.labels.push(aa));J.blabel&&(J.blabelstyle.position=Ka[2],aa=this.addLabel(J.blabel,J.blabelstyle),y.unitCellObjects.labels.push(aa));J.clabel&&(J.clabelstyle.position=Ka[3],J=this.addLabel(J.clabel,J.clabelstyle),y.unitCellObjects.labels.push(J))}};this.removeUnitCell=function(y){if((y=this.getModel(y)).unitCellObjects){var J=
this;y.unitCellObjects.shapes.forEach(function(aa){J.removeShape(aa)});y.unitCellObjects.labels.forEach(function(aa){J.removeLabel(aa)})}delete y.unitCellObjects};this.replicateUnitCell=function(y,J,aa,qa){y=y||3;J=J||y;aa=aa||J;var Ea=(qa=this.getModel(qa)).getCrystData();if(Ea){var Ga=qa.selectedAtoms({});Ea=Ea.matrix;for(var Na=function(vc){return 0==vc%2?-vc/2:Math.ceil(vc/2)},ab=0;ab<y;ab++)for(var Ya=0;Ya<J;Ya++)for(var Ka=0;Ka<aa;Ka++)if(0!=ab||0!=Ya||0!=Ka){var eb=new c.Vector3(Na(ab),Na(Ya),
Na(Ka));eb.applyMatrix3(Ea);for(var ib=[],Gb=0;Gb<Ga.length;Gb++){var Hb={},Jb;for(Jb in Ga[Gb])Hb[Jb]=Ga[Gb][Jb];Hb.x+=eb.x;Hb.y+=eb.y;Hb.z+=eb.z;ib.push(Hb)}qa.addAtoms(ib)}}};this.addCustom=function(y){y=y||{};var J=new c.GLShape(y);return J.shapePosition=E.length,J.addCustom(y),E.push(J),J.finalize(),J};this.addVolumetricData=function(y,J,aa){aa=aa||{};y=new c.VolumeData(y,J);return aa.transferfn?this.addVolumetricRender(y,aa):this.addIsosurface(y,aa)};this.addIsosurface=function(y,J,aa){J=J||
{};var qa=new c.GLShape(J);return qa.shapePosition=E.length,qa.addIsosurface(y,J,aa),E.push(qa),qa};this.addVolumetricRender=function(y,J){J=J||{};y=new c.GLVolumetricRender(y,J);return y.shapePosition=E.length,E.push(y),y};this.hasVolumetricRender=function(){return A.supportsVolumetric()};this.enableFog=function(y){y?va.fog=new c.Fog(F,100,200):(p.disableFog=!0,Aa())};this.setFrame=function(y){Z=y;var J=this;return new Promise(function(aa){var qa=w.map(function(Ea){return Ea.setFrame(y,J)});Promise.all(qa).then(function(){aa()})})};
this.getFrame=function(){return Z};this.getNumFrames=function(){for(var y=0,J=0;J<w.length;J++)w[J].getNumFrames()>y&&(y=w[J].getNumFrames());for(J=0;J<E.length;J++)E[J].frame&&E[J].frame>=y&&(y=E[J].frame+1);for(J=0;J<Q.length;J++)Q[J].frame&&Q[J].frame>=y&&(y=Q[J].frame+1);return y};this.animate=function(y){lc++;var J=100,aa="forward",qa=0;(y=y||{}).interval&&(J=y.interval);y.loop&&(aa=y.loop);y.reps&&(qa=y.reps);var Ea=this.getNumFrames(),Ga=this,Na=0,ab=1;y.step&&(qa/=ab=y.step);var Ya,Ka,eb=
0,ib=Ea*qa,Gb=new Date,Hb=function(Jb){Gb=new Date;"forward"==Jb?Ga.setFrame(Na).then(function(){Na=(Na+ab)%Ea;Ya()}):"backward"==Jb?Ga.setFrame(Ea-1-Na).then(function(){Na=(Na+ab)%Ea;Ya()}):Ga.setFrame(Na).then(function(){ab*=0==(Na+=ab)%(Ea-1)?-1:1;Ya()})};return Ya=function(){if(Ga.render(),!Ga.getCanvas().isConnected&&A.isLost())Ga.stopAnimate();else if(++eb!=ib&&Ga.isAnimated()){var Jb=J-(new Date-Gb);Jb=0<Jb?Jb:0;Pb.delete(Ka);Ka=setTimeout(Hb,Jb,aa);Pb.add(Ka)}else clearTimeout(Ka),Pb.delete(Ka),
na()},Ka=setTimeout(Hb,0,aa),Pb.add(Ka),this};this.stopAnimate=function(){return lc=0,Pb.forEach(function(y){clearTimeout(y)}),Pb=new Set,this};this.isAnimated=function(){return 0<lc};this.addModel=function(y,J,aa){aa&&!aa.defaultcolors?(aa.defaultcolors=H,aa.cartoonQuality=p.cartoonQuality):void 0===aa&&(aa={defaultcolors:H,cartoonQuality:p.cartoonQuality});var qa=new c.GLModel(w.length,aa);return qa.addMolData(y,J,aa),w.push(qa),qa};this.addModels=function(y,J,aa){(aa=aa||{}).multimodel=!0;aa.frames=
!0;y=c.GLModel.parseMolData(y,J,aa);for(J=0;J<y.length;J++){var qa=new c.GLModel(w.length,H);qa.setAtomDefaults(y[J]);qa.addFrame(y[J]);qa.setFrame(0);y.modelData&&qa.setModelData(y.modelData[J]);qa.setDontDuplicateAtoms(!aa.duplicateAssemblyAtoms);w.push(qa)}return w};this.addModelsAsFrames=function(y,J,aa){(aa=aa||{}).multimodel=!0;aa.frames=!0;var qa=new c.GLModel(w.length,H);return qa.addMolData(y,J,aa),w.push(qa),qa};this.addAsOneMolecule=function(y,J,aa){(aa=aa||{}).multimodel=!0;aa.onemol=
!0;var qa=new c.GLModel(w.length,H);return qa.addMolData(y,J,aa),w.push(qa),qa};this.removeModel=function(y){if(y=this.getModel(y)){y.removegl(Oa);for(delete w[y.getID()];0<w.length&&void 0===w[w.length-1];)w.pop();return this}};this.removeAllModels=function(){for(var y=0;y<w.length;y++){var J=w[y];J&&J.removegl(Oa)}return w.splice(0,w.length),this};this.exportJSON=function(y,J){var aa={};return aa.m=void 0===J?w.map(function(qa){return qa.toCDObject(y)}):[w[J].toCDObject()],JSON.stringify(aa)};this.exportVRML=
function(){var y=Oa;h("removegl",Oa);Oa=new c.Object3D;this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var J="#VRML V2.0 utf8\n"+Oa.vrml()+"\n";return h("removegl",Oa),Oa=y,J};this.createModelFrom=function(y,J){for(var aa=new c.GLModel(w.length,H),qa=0;qa<w.length;qa++)if(w[qa]){var Ea=w[qa].selectedAtoms(y);aa.addAtoms(Ea);J&&w[qa].removeAtoms(Ea)}return w.push(aa),aa};this.setStyle=function(y,J){return void 0===J&&(J=y,y={}),h("setStyle",y,J,!1),this};this.addStyle=function(y,J){return void 0===
J&&(J=y,y={}),h("setStyle",y,J,!0),this};this.setClickable=function(y,J,aa){return h("setClickable",y,J,aa),this};this.setHoverable=function(y,J,aa,qa){return h("setHoverable",y,J,aa,qa),this};this.enableContextMenu=function(y,J){return h("enableContextMenu",y,J),this};this.vibrate=function(y,J,aa,qa){return h("vibrate",y,J,aa,this,qa),this};this.setColorByProperty=function(y,J,aa,qa){return h("setColorByProperty",y,J,aa,qa),this};this.setColorByElement=function(y,J){return h("setColorByElement",
y,J),this};var oc=function(y,J){for(var aa=[],qa=0;qa<y.length;qa++){var Ea=y[qa];void 0!==Ea&&(Ea.x<J[0][0]||Ea.x>J[1][0]||Ea.y<J[0][1]||Ea.y>J[1][1]||Ea.z<J[0][2]||Ea.z>J[1][2]||aa.push(Ea))}return aa},Sc=function(y){return(y[1][0]-y[0][0])*(y[1][1]-y[0][1])*(y[1][2]-y[0][2])},Tc=function(y,J,aa){for(var qa=new c.Geometry(!0),Ea=qa.updateGeoGroup(0),Ga=[],Na=0,ab=y.length;Na<ab;Na++){var Ya=y[Na];Ya&&(void 0!==Ya.surfaceColor?Ga[Na]=Ya.surfaceColor:Ya.color&&(Ga[Na]=c.CC.color(Ya.color)))}Na=Ea.vertexArray;
y=J.vertices;ab=0;for(Ya=y.length;ab<Ya;ab++){var Ka=3*Ea.vertices;Na[Ka]=y[ab].x;Na[Ka+1]=y[ab].y;Na[Ka+2]=y[ab].z;Ea.vertices++}Na=Ea.colorArray;if(aa.voldata&&aa.volscheme){Ga=aa.volscheme;ab=aa.voldata;Ya=Ga.range()||[-1,1];Ka=0;for(var eb=y.length;Ka<eb;Ka++){var ib=ab.getVal(y[Ka].x,y[Ka].y,y[Ka].z);ib=c.CC.color(Ga.valueToHex(ib,Ya));var Gb=3*Ka;Na[Gb]=ib.r;Na[Gb+1]=ib.g;Na[Gb+2]=ib.b}}else if(0<Ga.length)for(ab=0,Ya=y.length;ab<Ya;ab++)Ka=y[ab].atomid,eb=3*ab,Na[eb]=Ga[Ka].r,Na[eb+1]=Ga[Ka].g,
Na[eb+2]=Ga[Ka].b;J=J.faces;Ea.faceidx=J.length;qa.initTypedArrays();var Hb;y=Ea.vertexArray;Ga=Ea.normalArray;Na=0;for(ab=J.length;Na<ab;Na+=3)Ya=3*J[Na],Ka=3*J[Na+1],eb=3*J[Na+2],ib=new c.Vector3(y[Ya],y[Ya+1],y[Ya+2]),Gb=new c.Vector3(y[Ka],y[Ka+1],y[Ka+2]),(Hb=new c.Vector3(y[eb],y[eb+1],y[eb+2])).subVectors(Hb,Gb),ib.subVectors(ib,Gb),Hb.cross(ib),(ib=Hb).normalize(),Ga[Ya]+=ib.x,Ga[Ka]+=ib.x,Ga[eb]+=ib.x,Ga[Ya+1]+=ib.y,Ga[Ka+1]+=ib.y,Ga[eb+1]+=ib.y,Ga[Ya+2]+=ib.z,Ga[Ka+2]+=ib.z,Ga[eb+2]+=ib.z;
Ea.faceArray=new Uint16Array(J);aa=new c.Mesh(qa,aa);return aa.doubleSided=!0,aa};this.addMesh=function(y){y={geo:y.geometry,mat:y.material,done:!0,finished:!1};var J=C();return D[J]=y,J};var gd=function(y){for(var J=[],aa=y.length,qa=0;qa<aa;qa++)J[qa]=c.extend({},y[qa]);return J},bd={VDW:c.SurfaceType.VDW,MS:c.SurfaceType.MS,SAS:c.SurfaceType.SAS,SES:c.SurfaceType.SES};this.addSurface=function(y,J,aa,qa,Ea,Ga){var Na=C(),ab=null;"string"==typeof y?void 0!==bd[y]?y=bd[y]:console.log("Surface type : "+
y+" is not recognized"):void 0===y&&(y=c.SurfaceType.VDW);var Ya=null,Ka=null,eb=gd(f(aa));Ya=qa?gd(f(qa)):eb;c.adjustVolumeStyle(J);var ib,Gb=!1;for(ib=0;ib<w.length;ib++)if(w[ib]){var Hb=w[ib].getSymmetries();if(1<Hb.length||1==Hb.length&&!Hb[0].isIdentity()){Gb=!0;break}}Hb=function(vc,Cc,tb){var Oc;Ka=Ea?gd(f(Ea)):tb;var $b=c.getExtent(tb,!0);if(J.map&&J.map.prop){var Zc=J.map.prop,Lc=J.map.scheme||J.map.gradient||new c.Gradient.RWB,Mc=Lc.range();Mc||(Mc=c.getPropertyRange(tb,Zc));J.colorscheme=
{prop:Zc,gradient:Lc}}Zc=0;for(Lc=Cc.length;Zc<Lc;Zc++)(Oc=Cc[Zc]).surfaceColor=c.getColorFromStyle(Oc,J);var cd=Sc($b),Fc=function(Wb,ad,tc){for(var cc=[],ac={},ic=0,dc=ad.length;ic<dc;ic++)ac[ad[ic].index]=ic;ic=function(Nb){for(var jc=[],l=0,X=Nb.length;l<X;l++)Nb[l].index in ac&&jc.push(ac[Nb[l].index]);return jc};var hd=function(Nb){var jc=[];return jc[0]=[Nb[0][0],Nb[0][1],Nb[0][2]],jc[1]=[Nb[1][0],Nb[1][1],Nb[1][2]],jc},Ac=function(Nb){if(64E3>Sc(Nb))return[Nb];var jc=Nb[1][0]-Nb[0][0];var l=
Nb[1][1]-Nb[0][1];var X=Nb[1][2]-Nb[0][2];l=jc>l&&jc>X?0:l>jc&&l>X?1:2;X=hd(Nb);jc=hd(Nb);Nb=(Nb[1][l]-Nb[0][l])/2+Nb[0][l];X[1][l]=Nb;jc[0][l]=Nb;Nb=Ac(X);jc=Ac(jc);return Nb.concat(jc)};Wb=Ac(Wb);dc=0;for(var Wc=Wb.length;dc<Wc;dc++){var mc=hd(Wb[dc]);mc[0][0]-=6;mc[0][1]-=6;mc[0][2]-=6;mc[1][0]+=6;mc[1][1]+=6;mc[1][2]+=6;mc=oc(ad,mc);var ec=oc(tc,Wb[dc]);cc.push({extent:Wb[dc],atoms:ic(mc),toshow:ic(ec)})}return cc}($b,Cc,tb);if(Ka&&Ka.length&&0<Ka.length){var nd=c.getExtent(Ka,!0);Fc.sort(function(Wb,
ad){var tc=function(cc,ac){var ic=cc.extent;cc=ic[1][0]-ic[0][0]-ac[2][0];var dc=ic[1][1]-ic[0][1]-ac[2][1];ac=ic[1][2]-ic[0][2]-ac[2][2];return cc*cc+dc*dc+ac*ac};return tc(Wb,nd)-tc(ad,nd)})}var zc=[];tb=0;for($b=Cc.length;tb<$b;tb++)Oc=Cc[tb],zc[tb]={x:Oc.x,y:Oc.y,z:Oc.z,serial:tb,elem:Oc.elem};if(c.syncSurface){Oc=function(Wb){return new Promise(function(ad){var tc=y,cc=Fc[Wb].extent,ac=Fc[Wb].atoms;var ic=Fc[Wb].toshow;var dc=new c.ProteinSurface;ic=(dc.initparm(cc,1!==tc,cd),dc.fillvoxels(zc,
ac),dc.buildboundary(),tc!=c.SurfaceType.SES&&tc!=c.SurfaceType.MS||(dc.fastdistancemap(),dc.boundingatom(!1),dc.fillvoxelswaals(zc,ac)),dc.marchingcube(tc),dc.getFacesAndVertices(ic));tc=c.splitMesh({vertexArr:ic.vertices,faceArr:ic.faces});cc=0;for(ac=tc.length;cc<ac;cc++)ic={vertices:tc[cc].vertexArr,faces:tc[cc].faceArr},ic=Tc(Cc,ic,ab),c.mergeGeos(vc.geo,ic);q.render();ad()})};tb=[];for($b=0;$b<Fc.length;$b++)tb.push(Oc($b));return Promise.all(tb).then(function(){return vc.done=!0,Promise.resolve(Na)})}var Tb=
[];0>y&&(y=0);for(Oc=0;4>Oc;Oc++)tb=new Worker(c.SurfaceWorker),Tb.push(tb),tb.postMessage({type:-1,atoms:zc,volume:cd});return new Promise(function(Wb,ad){for(var tc=0,cc=function(){Tb&&Tb.length&&Tb.forEach(function(Ac){Ac&&Ac.terminate&&Ac.terminate()})},ac=function(Ac){Ac=c.splitMesh({vertexArr:Ac.data.vertices,faceArr:Ac.data.faces});for(var Wc=0,mc=Ac.length;Wc<mc;Wc++){var ec=Tc(Cc,{vertices:Ac[Wc].vertexArr,faces:Ac[Wc].faceArr},ab);c.mergeGeos(vc.geo,ec)}q.render();++tc==Fc.length&&(vc.done=
!0,cc(),Wb(Na))},ic=function(Ac){cc();console.log(Ac.message+" ("+Ac.filename+":"+Ac.lineno+")");ad(Ac)},dc=0;dc<Fc.length;dc++){var hd=Tb[dc%Tb.length];hd.onmessage=ac;hd.onerror=ic;hd.postMessage({type:y,expandedExtent:Fc[dc].extent,extendedAtoms:Fc[dc].atoms,atomsToShow:Fc[dc].toshow})}})};ab=r(J=J||{});var Jb=[];Jb.style=J;Jb.atomsel=aa;Jb.allsel=qa;Jb.focus=Ea;ib=null;if(Gb){Gb={};aa={};for(ib=0;ib<w.length;ib++)Gb[ib]=[],aa[ib]=[];for(ib=0;ib<Ya.length;ib++)Gb[Ya[ib].model].push(Ya[ib]);for(ib=
0;ib<eb.length;ib++)aa[eb[ib].model].push(eb[ib]);Ya=[];for(ib=0;ib<w.length;ib++)0<aa[ib].length&&(Jb.push({geo:new c.Geometry(!0),mat:ab,done:!1,finished:!1,symmetries:w[ib].getSymmetries()}),Ya.push(Hb(Jb[Jb.length-1],Gb[ib],aa[ib])));ib=Promise.all(Ya)}else Jb.push({geo:new c.Geometry(!0),mat:ab,done:!1,finished:!1,symmetries:[new c.Matrix4]}),ib=Hb(Jb[Jb.length-1],Ya,eb);return D[Na]=Jb,ib.surfid=Na,Ga&&"function"==typeof Ga?(ib.then(function(vc){Ga(vc)}),Na):ib};this.setSurfaceMaterialStyle=
function(y,J){if(c.adjustVolumeStyle(J),D[y]){y=D[y];y.style=J;for(var aa={},qa=0;qa<y.length;aa={$jscomp$loop$prop$e$267$432:aa.$jscomp$loop$prop$e$267$432,$jscomp$loop$prop$t$269$433:aa.$jscomp$loop$prop$t$269$433,$jscomp$loop$prop$o$270$434:aa.$jscomp$loop$prop$o$270$434,$jscomp$loop$prop$e$268$435:aa.$jscomp$loop$prop$e$268$435,$jscomp$loop$prop$a$271$436:aa.$jscomp$loop$prop$a$271$436},qa++){var Ea=y[qa].mat=r(J);(y[qa].mat.side=c.FrontSide,J.color)?(y[qa].mat.color=J.color,y[qa].geo.colorsNeedUpdate=
!0,aa.$jscomp$loop$prop$e$267$432=c.CC.color(J.color),y[qa].geo.setColors(function(Ga){return function(){return Ga.$jscomp$loop$prop$e$267$432}}(aa))):Ea.voldata&&Ea.volscheme&&(aa.$jscomp$loop$prop$e$268$435=Ea.volscheme,aa.$jscomp$loop$prop$t$269$433=Ea.voldata,aa.$jscomp$loop$prop$o$270$434=c.CC,aa.$jscomp$loop$prop$a$271$436=aa.$jscomp$loop$prop$e$268$435.range()||[-1,1],y[qa].geo.setColors(function(Ga){return function(Na,ab,Ya){Na=Ga.$jscomp$loop$prop$t$269$433.getVal(Na,ab,Ya);return Ga.$jscomp$loop$prop$o$270$434.color(Ga.$jscomp$loop$prop$e$268$435.valueToHex(Na,
Ga.$jscomp$loop$prop$a$271$436))}}(aa)));y[qa].finished=!1}}return this};this.getSurface=function(y){return D[y]};this.removeSurface=function(y){for(var J=D[y],aa=0;aa<J.length;aa++)J[aa]&&J[aa].lastGL&&(void 0!==J[aa].geo&&J[aa].geo.dispose(),void 0!==J[aa].mat&&J[aa].mat.dispose(),Oa.remove(J[aa].lastGL));return delete D[y],Aa(),this};this.removeAllSurfaces=function(){for(var y in D)if(D.hasOwnProperty(y)){for(var J=D[y],aa=0;aa<J.length;aa++)J[aa]&&J[aa].lastGL&&(void 0!==J[aa].geo&&J[aa].geo.dispose(),
void 0!==J[aa].mat&&J[aa].mat.dispose(),Oa.remove(J[aa].lastGL));delete D[y]}return Aa(),this};this.jmolMoveTo=function(){var y=Oa.position,J=Ca.quaternion;return"center { "+-y.x+" "+-y.y+" "+-y.z+" }; moveto .5 quaternion { "+(J.x+" "+J.y+" "+J.z+" "+J.w+" };")};this.clear=function(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),Aa(),this};this.mapAtomProperties=function(y,J){J=f(J||{});if("function"==typeof y)for(var aa=0,qa=J.length;aa<qa;aa++)y(J[aa]);
else{qa=0;for(var Ea=J.length;qa<Ea;qa++)for(var Ga=J[qa],Na=0,ab=y.length;Na<ab;Na++){var Ya=y[Na];if(Ya.props)for(aa in Ya.props){var Ka;if(Ka=Ya.props.hasOwnProperty(aa))a:{Ka=Ga;var eb=Ya;void 0===eb&&(eb={});for(var ib=k(eb),Gb=0;Gb<ib.length;Gb++)if(ib[Gb].atomIsSelected(Ka,eb)){Ka=!0;break a}Ka=!1}Ka&&(Ga.properties||(Ga.properties={}),Ga.properties[aa]=Ya.props[aa])}}}return this};this.linkViewer=function(y){return U.push(y),this};try{"function"==typeof u&&u(this)}catch(y){console.log("error with glviewer callback: "+
y)}this.getPerceivedDistance=function(){return oa-Ca.position.z};this.setPerceivedDistance=function(y){Ca.position.z=oa-y};this.setAutoEyeSeparation=function(y,J){var aa=this.getPerceivedDistance();return J||(J=5),y||0<ma.position.x?ma.position.x=aa*Math.tan(Math.PI/180*J):ma.position.x=-aa*Math.tan(Math.PI/180*J),ma.lookAt(new c.Vector3(0,0,Ca.position.z)),ma.position.x};this.setDefaultCartoonQuality=function(y){p.cartoonQuality=y};this.ui={};this.ui.loadSelectionStyle=function(y,J){x.createSelectionAndStyle(y,
J)};this.ui.loadSurface=function(y,J,aa,qa){x.createSurface(y,J,aa,qa)};this.ui.setModelTitle=function(y){x.setModelTitle(y)};this.ui.initiateUI=function(){x.initiateUI()}};c.glmolViewer=c.GLViewer;c=c||{};c.Gradient=function(){};c.Gradient.valueToHex=function(){};c.Gradient.range=function(){};c.Gradient.normalizeValue=function(d,p,e){return p>=d?(e<d&&(e=d),e>p&&(e=p),{lo:d,hi:p,val:e}):(e>d&&(e=d),e<p&&(e=p),{lo:p,hi:d,val:d-e+p})};c.Gradient.getGradient=function(d){if(d instanceof c.Gradient)return d;
if(void 0!==d.gradient&&c.Gradient.builtinGradients[d.gradient]){var p=void 0===d.min?-1:d.min,e=void 0===d.max?1:d.max;return void 0===d.mid?new c.Gradient.builtinGradients[d.gradient](p,e):new c.Gradient.builtinGradients[d.gradient](p,e,d.mid)}return d};c.Gradient.RWB=function(d,p,e){void 0===p&&Array.isArray(d)&&2<=d.length&&(p=d[1],d=d[0]);this.valueToHex=function(k,f){var h,r;if(k*=1,f?(h=f[0],r=f[1]):(h=d,r=p),void 0===k)return 16777215;var u=c.Gradient.normalizeValue(h,r,k);h=u.lo;var H,z=
((r=u.hi)+h)/2;return(k=u.val)<(z=f&&void 0!==f[2]?f[2]:void 0!==e?e:(h+r)/2)?16711680+256*(H=Math.floor(255*Math.sqrt((k-h)/(z-h))))+H:k>z?65536*(H=Math.floor(255*Math.sqrt(1-(k-z)/(r-z))))+256*H+255:16777215};this.range=function(){return void 0!==d&&void 0!==p?[d,p]:null}};c.Gradient.ROYGB=function(d,p){void 0===p&&Array.isArray(d)&&2<=d.length&&(p=d[1],d=d[0]);this.valueToHex=function(e,k){var f,h;if(e*=1,k?(f=k[0],h=k[1]):(f=d,h=p),void 0===e)return 16777215;k=c.Gradient.normalizeValue(f,h,e);
var r=((f=k.lo)+(h=k.hi))/2,u=(f+r)/2,H=(r+h)/2;return(e=k.val)<u?16711680+256*Math.floor(255*Math.sqrt((e-f)/(u-f))):e<r?65536*Math.floor(255*Math.sqrt(1-(e-u)/(r-u)))+65280:e<H?65280+1*Math.floor(255*Math.sqrt((e-r)/(H-r))):256*Math.floor(255*Math.sqrt(1-(e-H)/(h-H)))+255};this.range=function(){return void 0!==d&&void 0!==p?[d,p]:null}};c.Gradient.Sinebow=function(d,p){var e=1;void 0===p&&Array.isArray(d)&&2<=d.length&&(p=d[1],d=d[0]);p<d&&(e=-1,d*=-1,p*=-1);this.valueToHex=function(k,f){var h,
r;if(k*=e,f?(h=f[0],r=f[1]):(h=d,r=p),void 0===k)return 16777215;k=c.Gradient.normalizeValue(h,r,k);h=k.lo;r=k.hi;k=(k.val-h)/(r-h)*5/6+.5;h=Math.sin(Math.PI*k);r=Math.sin(Math.PI*(k+1/3));k=Math.sin(Math.PI*(k+2/3));return k*=255*k,65536*Math.floor(255*h*h)+256*Math.floor(k)+1*Math.floor(255*r*r)};this.range=function(){return void 0!==d&&void 0!==p?[d,p]:null}};c.Gradient.builtinGradients={rwb:c.Gradient.RWB,RWB:c.Gradient.RWB,roygb:c.Gradient.ROYGB,ROYGB:c.Gradient.ROYGB,sinebow:c.Gradient.Sinebow};
c.LabelCount=0;c.Label=function(d,p){this.id=c.LabelCount++;this.stylespec=p||{};this.canvas=document.createElement("canvas");this.canvas.width=134;this.canvas.height=35;this.context=this.canvas.getContext("2d");this.sprite=new c.Sprite;this.text=d;this.frame=this.stylespec.frame};c.Label.prototype={constructor:c.Label,getStyle:function(){return this.stylespec},setContext:function(){var d=function(p,e,k){return void 0!==p&&(p instanceof c.Color?k=p.scaled():void 0!==(k=c.CC.color(p)).scaled&&(k=k.scaled())),
void 0!==e&&(k.a=parseFloat(e)),k};return function(){var p=this.stylespec,e=void 0!==p.useScreen&&p.useScreen,k=p.showBackground;"0"!==k&&"false"!==k||(k=!1);void 0===k&&(k=!0);var f=p.font?p.font:"sans-serif",h=parseInt(p.fontSize)?parseInt(p.fontSize):18,r=d(p.fontColor,p.fontOpacity,{r:255,g:255,b:255,a:1}),u=p.padding?p.padding:4,H=p.borderThickness?p.borderThickness:0,z=d(p.backgroundColor,p.backgroundOpacity,{r:0,g:0,b:0,a:1}),F=d(p.borderColor,p.borderOpacity,z),t=p.position?p.position:{x:-10,
y:1,z:1},q=void 0===p.inFront||p.inFront;"false"!==q&&"0"!==q||(q=!1);var n=p.alignment||c.SpriteAlignment.topLeft;"string"==typeof n&&n in c.SpriteAlignment&&(n=c.SpriteAlignment[n]);var v="";p.bold&&(v="bold ");this.context.font=v+h+"px  "+f;var x=this.context.measureText(this.text).width;k||(H=0);var w=x+2.5*H+2*u,D=1.25*h+2*H+2*u;if(p.backgroundImage){var E=p.backgroundImage,Q=p.backgroundWidth?p.backgroundWidth:E.width;E=p.backgroundHeight?p.backgroundHeight:E.height;Q>w&&(w=Q);E>D&&(D=E)}if(this.canvas.width=
w,this.canvas.height=D,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),v="",p.bold&&(v="bold "),this.context.font=v+h+"px  "+f,this.context.fillStyle="rgba("+z.r+","+z.g+","+z.b+","+z.a+")",this.context.strokeStyle="rgba("+F.r+","+F.g+","+F.b+","+F.a+")",p.backgroundGradient){f=this.context.createLinearGradient(0,D/2,w,D/2);z=c.Gradient.getGradient(p.backgroundGradient);v=z.range();F=-1;Q=1;v&&(F=v[0],Q=v[1]);v=Q-F;for(Q=0;1.01>Q;Q+=.1)E=d(z.valueToHex(F+v*Q)),f.addColorStop(Q,"rgba("+
E.r+","+E.g+","+E.b+","+E.a+")");this.context.fillStyle=f}this.context.lineWidth=H;k&&(k=this.context,z=f=H,w-=2*H,D-=2*H,F=0<H,k.beginPath(),k.moveTo(f+6,z),k.lineTo(f+w-6,z),k.quadraticCurveTo(f+w,z,f+w,z+6),k.lineTo(f+w,z+D-6),k.quadraticCurveTo(f+w,z+D,f+w-6,z+D),k.lineTo(f+6,z+D),k.quadraticCurveTo(f,z+D,f,z+D-6),k.lineTo(f,z+6),k.quadraticCurveTo(f,z,f+6,z),k.closePath(),k.fill(),F&&k.stroke());p.backgroundImage&&(D=p.backgroundImage,this.context.drawImage(D,0,0,p.backgroundWidth?p.backgroundWidth:
D.width,p.backgroundHeight?p.backgroundHeight:D.height));this.context.fillStyle="rgba("+r.r+","+r.g+","+r.b+","+r.a+")";this.context.fillText(this.text,H+u,h+H+u,x);h=new c.Texture(this.canvas);h.needsUpdate=!0;this.sprite.material=new c.SpriteMaterial({map:h,useScreenCoordinates:e,alignment:n,depthTest:!q,screenOffset:p.screenOffset||null});this.sprite.scale.set(1,1,1);this.sprite.position.set(t.x,t.y,t.z)}}(),dispose:function(){void 0!==this.sprite.material.map&&this.sprite.material.map.dispose();
void 0!==this.sprite.material&&this.sprite.material.dispose()}};c=c||{};c.MarchingCubeInitializer=function(){var d,p,e,k,f={};return f.march=function(h,r,u,H){var z=!!H.fulltable,F=H.hasOwnProperty("origin")&&H.origin.hasOwnProperty("x")?H.origin:{x:0,y:0,z:0},t=!!H.voxel,q=H.matrix,n=H.nX||0,v=H.nY||0,x=H.nZ||0,w=H.scale||1,D=null;D=H.unitCube?H.unitCube:{x:w,y:w,z:w};var E=new Int32Array(n*v*x);H=0;for(w=E.length;H<w;++H)E[H]=-1;w=function(ha,ja,ea,la,oa,wa){var U={x:0,y:0,z:0},A=oa;!(la&1<<oa)&&
la&1<<wa&&(A=wa);1&A&&ea++;2&A&&ja++;4&A&&ha++;q?U={x:(U=(U=new c.Vector3(ha,ja,ea)).applyMatrix4(q)).x,y:U.y,z:U.z}:(U.x=F.x+D.x*ha,U.y=F.y+D.y*ja,U.z=F.z+D.z*ea);ha=(v*ha+ja)*x+ea;return t?(r.push(U),r.length-1):(0>E[ha]&&(E[ha]=r.length,r.push(U)),E[ha])};var Q=new Int32Array(12),N=z?p:d;z=z?k:e;for(H=0;H<n-1;++H)for(var R=0;R<v-1;++R)for(var m=0;m<x-1;++m){for(var G=0,L=0;8>L;++L)G|=!!(2&h[(v*(H+((4&L)>>2))+R+((2&L)>>1))*x+m+(1&L)])<<L;if(0!==G&&255!==G){var O=N[G];if(0!==O)for(L=z[G],1&O&&(Q[0]=
w(H,R,m,G,0,1)),2&O&&(Q[1]=w(H,R,m,G,1,3)),4&O&&(Q[2]=w(H,R,m,G,3,2)),8&O&&(Q[3]=w(H,R,m,G,2,0)),16&O&&(Q[4]=w(H,R,m,G,4,5)),32&O&&(Q[5]=w(H,R,m,G,5,7)),64&O&&(Q[6]=w(H,R,m,G,7,6)),128&O&&(Q[7]=w(H,R,m,G,6,4)),256&O&&(Q[8]=w(H,R,m,G,0,4)),512&O&&(Q[9]=w(H,R,m,G,1,5)),1024&O&&(Q[10]=w(H,R,m,G,3,7)),2048&O&&(Q[11]=w(H,R,m,G,2,6)),G=0;G<L.length;G+=3){O=Q[L[G]];var Z=Q[L[G+1]],W=Q[L[G+2]];t&&3<=G&&(r.push(r[O]),O=r.length-1,r.push(r[Z]),Z=r.length-1,r.push(r[W]),W=r.length-1);u.push(O);u.push(Z);u.push(W)}}}},
f.laplacianSmooth=function(h,r,u){var H,z,F=Array(r.length);var t=0;for(H=r.length;t<H;t++)F[t]={x:0,y:0,z:0};var q=Array(20);for(t=0;20>t;t++)q[t]=Array(r.length);t=0;for(H=r.length;t<H;t++)q[0][t]=0;t=0;for(H=u.length/3;t<H;t++){var n=3*t,v=3*t+1,x=3*t+2;var w=!0;var D=0;for(z=q[0][u[n]];D<z;D++)if(u[v]==q[D+1][u[n]]){w=!1;break}w&&(q[0][u[n]]++,q[q[0][u[n]]][u[n]]=u[v]);w=!0;D=0;for(z=q[0][u[n]];D<z;D++)if(u[x]==q[D+1][u[n]]){w=!1;break}w&&(q[0][u[n]]++,q[q[0][u[n]]][u[n]]=u[x]);w=!0;D=0;for(z=
q[0][u[v]];D<z;D++)if(u[n]==q[D+1][u[v]]){w=!1;break}w&&(q[0][u[v]]++,q[q[0][u[v]]][u[v]]=u[n]);w=!0;D=0;for(z=q[0][u[v]];D<z;D++)if(u[x]==q[D+1][u[v]]){w=!1;break}w&&(q[0][u[v]]++,q[q[0][u[v]]][u[v]]=u[x]);w=!0;for(D=0;D<q[0][u[x]];D++)if(u[n]==q[D+1][u[x]]){w=!1;break}w&&(q[0][u[x]]++,q[q[0][u[x]]][u[x]]=u[n]);w=!0;D=0;for(z=q[0][u[x]];D<z;D++)if(u[v]==q[D+1][u[x]]){w=!1;break}w&&(q[0][u[x]]++,q[q[0][u[x]]][u[x]]=u[v])}for(u=0;u<h;u++){t=0;for(H=r.length;t<H;t++)if(3>q[0][t])F[t].x=r[t].x,F[t].y=
r[t].y,F[t].z=r[t].z;else if(3==q[0][t]||4==q[0][t]){F[t].x=0;F[t].y=0;D=F[t].z=0;for(z=q[0][t];D<z;D++)F[t].x+=r[q[D+1][t]].x,F[t].y+=r[q[D+1][t]].y,F[t].z+=r[q[D+1][t]].z;F[t].x+=.5*r[t].x;F[t].y+=.5*r[t].y;F[t].z+=.5*r[t].z;F[t].x/=.5+q[0][t];F[t].y/=.5+q[0][t];F[t].z/=.5+q[0][t]}else{F[t].x=0;F[t].y=0;D=F[t].z=0;for(z=q[0][t];D<z;D++)F[t].x+=r[q[D+1][t]].x,F[t].y+=r[q[D+1][t]].y,F[t].z+=r[q[D+1][t]].z;F[t].x+=1*r[t].x;F[t].y+=1*r[t].y;F[t].z+=1*r[t].z;F[t].x/=1+q[0][t];F[t].y/=1+q[0][t];F[t].z/=
1+q[0][t]}t=0;for(H=r.length;t<H;t++)r[t].x=F[t].x,r[t].y=F[t].y,r[t].z=F[t].z}},f.edgeTable=[0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,
3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,
1295,1030,2818,2575,2309,2060,778,515,265,0],d=new Uint32Array(f.edgeTable),e=f.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,
7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,
11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,
3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,
0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,
8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,
9,1],[9,1,0],[8,0,3],[]],p=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,
1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,
681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],k=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,
0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],
[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,
11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],
[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,
0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],
[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,
1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,
3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,
8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,
11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],f};c.MarchingCube=c.MarchingCubeInitializer();
c.Parsers=function(){var d={},p={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,
Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45},e={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",
75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"},k=function(n,v){var x=(p[n.elem]||
1.6)+(p[v.elem]||1.6);x+=.25;x*=x;var w=n.x-v.x;if((w*=w)>x)return!1;var D=n.y-v.y;if((D*=D)>x)return!1;var E=n.z-v.z;if((E*=E)>x)return!1;w=w+D+E;return!isNaN(w)&&!(.5>w)&&!(w>x)&&(n.altLoc==v.altLoc||" "==n.altLoc||" "==v.altLoc)},f=function(n){for(var v=0,x=n.length;v<x;v++)n[v].index||(n[v].index=v);v={};for(x=0;x<n.length;x++){var w=n[x],D=Math.floor(w.x/4.95),E=Math.floor(w.y/4.95),Q=Math.floor(w.z/4.95);v[D]||(v[D]={});v[D][E]||(v[D][E]={});v[D][E][Q]||(v[D][E][Q]=[]);v[D][E][Q].push(w)}n=
[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}];for(var N in v){N=parseInt(N);for(var R in v[N]){R=parseInt(R);for(var m in v[N][R]){m=parseInt(m);x=v[N][R][m];for(w=0;w<x.length;w++)for(D=x[w],E=w+1;E<x.length;E++)Q=x[E],k(D,Q)&&-1==D.bonds.indexOf(Q.index)&&(D.bonds.push(Q.index),D.bondOrder.push(1),Q.bonds.push(D.index),Q.bondOrder.push(1));for(w=0;w<n.length;w++)if(E=
n[w],v[N+E.x]&&v[N+E.x][R+E.y]&&v[N+E.x][R+E.y][m+E.z])for(D=x,E=v[N+E.x][R+E.y][m+E.z],Q=0;Q<D.length;Q++)for(var G=D[Q],L=0;L<E.length;L++){var O=E[L];if(k(G,O)){var Z=G.bonds.indexOf(O.index),W=O.bonds.indexOf(G.index);-1==Z&&-1==W?(G.bonds.push(O.index),G.bondOrder.push(1),O.bonds.push(G.index),O.bondOrder.push(1)):-1==Z?(G.bonds.push(O.index),G.bondOrder.push(O.bondOrder[W])):-1==W&&(O.bonds.push(G.index),O.bondOrder.push(G.bondOrder[Z]))}}}}}},h=new Set("ABU ACD ALA ALB ALI ARG AR0 ASN ASP ASX BAS CYS CYH CYX CSS CSH GLN GLU GLX GLY HIS HIE HID HIP HYP ILE ILU LEU LYS MET PCA PGA PHE PR0 PRO PRZ SER THR TYR VAL A 1MA C 5MC OMC G 1MG 2MG M2G 7MG OMG YG I T U +U H2U 5MU PSU ACE F0R H2O HOH WAT".split(" ")),
r=function(n){var v,x=[],w=[];var D=0;for(v=n.length;D<v;D++){var E=n[D];E.index=D;E.hetflag||!h.has(E.resn)?w.push(E):x.push(E)}f(w);x.sort(function(m,G){return m.chain!=G.chain?m.chain<G.chain?-1:1:m.resi-G.resi});var Q;w=n=-1;D=0;for(v=x.length;D<v;D++){E=x[D];E.resi!==n&&(n=E.resi,Q||w++,Q=!1);E.reschain=w;for(var N=D+1;N<x.length;N++){var R=x[N];if(R.chain!=E.chain)break;if(1<R.resi-E.resi)break;k(E,R)&&(-1===E.bonds.indexOf(R.index)&&(E.bonds.push(R.index),E.bondOrder.push(1),R.bonds.push(E.index),
R.bondOrder.push(1)),E.resi!==R.resi&&(Q=!0))}}},u=function(n){!function(m){var G,L=[];var O=0;for(G=m.length;O<G;O++){m[O].index=O;var Z=m[O];Z.hetflag||"N"!==Z.atom&&"O"!==Z.atom||(L.push(Z),Z.hbondOther=null,Z.hbondDistanceSq=Number.POSITIVE_INFINITY)}L.sort(function(la,oa){return la.z-oa.z});O=0;for(G=L.length;O<G;O++)for(Z=L[O],m=O+1;m<G;m++){var W=L[m],ha=W.z-Z.z;if(3.2<ha)break;if(W.atom!=Z.atom){var ja=Math.abs(W.y-Z.y);if(!(3.2<ja)){var ea=Math.abs(W.x-Z.x);3.2<ea||(ha=ea*ea+ja*ja+ha*ha,
10.24<ha||W.chain==Z.chain&&4>Math.abs(W.resi-Z.resi)||(ha<Z.hbondDistanceSq&&(Z.hbondOther=W,Z.hbondDistanceSq=ha),ha<W.hbondDistanceSq&&(W.hbondOther=Z,W.hbondDistanceSq=ha)))}}}}(n);var v,x,w,D={};var E=0;for(v=n.length;E<v;E++)if(void 0===D[(w=n[E]).chain]&&(D[w.chain]=[]),isFinite(w.hbondDistanceSq)){var Q=w.hbondOther;void 0===D[Q.chain]&&(D[Q.chain]=[]);4===Math.abs(Q.resi-w.resi)&&(D[w.chain][w.resi]="h")}for(x in D)for(E=1;E<D[x].length-1;E++){v=D[x][E-1];var N=D[x][E+1];Q=D[x][E];"h"==v&&
v==N&&Q!=v&&(D[x][E]=v)}E=0;for(v=n.length;E<v;E++)w=n[E],isFinite(w.hbondDistanceSq)&&"h"!=D[w.chain][w.resi]&&"h"!=w.ss&&(D[w.chain][w.resi]="maybesheet");Q=0;for(x=n.length;Q<x;Q++)if(w=n[Q],isFinite(w.hbondDistanceSq)&&"maybesheet"==D[w.chain][w.resi])E=w.hbondOther,v=D[E.chain][E.resi],"maybesheet"!=v&&"s"!=v||(D[w.chain][w.resi]="s",D[E.chain][E.resi]="s");for(var R in D){for(x=1;x<D[R].length-1;x++)E=D[R][x-1],v=D[R][x+1],Q=D[R][x],"s"==E&&E==v&&Q!=E&&(D[R][x]=E);for(Q=0;Q<D[R].length;Q++)x=
D[R][Q],"h"!=x&&"s"!=x||D[R][Q-1]!=x&&D[R][Q+1]!=x&&delete D[R][Q]}E=0;for(v=n.length;E<v;E++)Q=D[(w=n[E]).chain][w.resi],delete w.hbondOther,delete w.hbondDistanceSq,void 0!==Q&&"maybesheet"!=Q&&(w.ss=Q,D[w.chain][w.resi-1]!=Q&&(w.ssbegin=!0),D[w.chain][w.resi+1]!=Q&&(w.ssend=!0))},H=function(n,v,x,w){var D=!x.duplicateAssemblyAtoms;var E=v.length,Q=E,N=-1;if(x.normalizeAssembly&&w){var R=c.conversionMatrix3(w.a,w.b,w.c,w.alpha,w.beta,w.gamma),m=new c.Matrix3;m.getInverse3(R);for(x=0;x<n.length;x++){var G=
new c.Vector3(0,0,0);for(w=0;w<E;w++){var L=new c.Vector3(v[w].x,v[w].y,v[w].z);L.applyMatrix4(n[x]);L.applyMatrix3(m);G.add(L)}G.divideScalar(E);G=[G.x,G.y,G.z];w=[0,0,0];for(L=0;3>L;L++){for(;-.001>G[L];)G[L]+=1,w[L]+=1;for(;1.001<G[L];)--G[L],--w[L]}w=new c.Vector3(w[0],w[1],w[2]);w.applyMatrix3(R);n[x].isNearlyIdentity()&&.001<w.lengthSq()&&(N=x);n[x].translate(w)}}if(D){if(1<n.length)for(x=0;x<v.length;x++){E=[];for(D=0;D<n.length;D++)n[D].isNearlyIdentity()||(N=new c.Vector3,N.set(v[x].x,v[x].y,
v[x].z),N.applyMatrix4(n[D]),E.push(N));v[x].symmetries=E}}else{for(w=0;w<E;w++)v[w].sym=-1;for(x=0;x<n.length;x++)if(n[x].isNearlyIdentity()||N==x)for(w=0;w<E;w++)v[w].sym=x;else{R=new c.Vector3;for(w=0;w<E;w++){m=[];for(D=0;D<v[w].bonds.length;D++)m.push(v[w].bonds[D]+Q);R.set(v[w].x,v[w].y,v[w].z);R.applyMatrix4(n[x]);D={};for(var O in v[w])D[O]=v[w][O];D.x=R.x;D.y=R.y;D.z=R.z;D.bonds=m;D.sym=x;D.index=v.length;v.push(D)}Q=v.length}if(0<=N)for(x=new c.Vector3,w=0;w<E;w++)x.set(v[w].x,v[w].y,v[w].z),
x.applyMatrix4(n[N]),v[w].x=x.x,v[w].y=x.y,v[w].z=x.z;n.length=0}};d.vasp=d.VASP=function(n){var v=[[]],x,w=n.replace(/^\s+/,"").split(/\r?\n/);if(3>w.length)return v;if(!w[1].match(/\d+/))return console.log("Warning: second line of the vasp structure file must be a number"),v;if(x=parseFloat(w[1]),0>x)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),v;n=new Float32Array(w[2].replace(/^\s+/,"").split(/\s+/));var D=new Float32Array(w[3].replace(/^\s+/,
"").split(/\s+/));var E=new Float32Array(w[4].replace(/^\s+/,"").split(/\s+/));var Q=new c.Matrix3(n[0],n[1],n[2],D[0],D[1],D[2],E[0],E[1],E[2]);Q.multiplyScalar(x);v.modelData=[{symmetries:[],cryst:{matrix:Q}}];Q=w[5].replace(/\s+/,"").replace(/\s+$/,"").split(/\s+/);var N=new Int16Array(w[6].replace(/^\s+/,"").split(/\s+/)),R=w[7].replace(/\s+/,"");if(R.match(/C/))R="cartesian";else{if(!R.match(/D/))return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),
v;R="direct"}if(Q.length!=N.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(Q),console.log(N),v;w.splice(0,8);for(var m=0,G=0,L=Q.length;G<L;G++){for(var O=Q[G],Z=0,W=N[G];Z<W;Z++){var ha=new Float32Array(w[m+Z].replace(/^\s+/,"").split(/\s+/)),ja={};ja.elem=O;"cartesian"==R?(ja.x=x*ha[0],ja.y=x*ha[1],ja.z=x*ha[2]):(ja.x=x*(ha[0]*n[0]+ha[1]*D[0]+ha[2]*E[0]),ja.y=x*(ha[0]*n[1]+ha[1]*D[1]+ha[2]*E[1]),ja.z=x*(ha[0]*n[2]+ha[1]*D[2]+ha[2]*E[2]));ja.bonds=[];v[0].push(ja)}m+=
N[G]}return v};d.cube=d.CUBE=function(n,v){v=v||{};var x=[[]];n=n.split(/\r?\n/);v=void 0===v.assignBonds||v.assignBonds;if(6>n.length)return x;var w=n[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),D=Math.abs(parseFloat(w[0])),E={},Q=E.origin=new c.Vector3(parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3]));n[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var N=0<(w=n[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "))[0]?.529177:1;Q.multiplyScalar(N);var R=Math.abs(w[0]),m=(new c.Vector3(parseFloat(w[1]),
parseFloat(w[2]),parseFloat(w[3]))).multiplyScalar(N);w=n[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var G=Math.abs(w[0]),L=(new c.Vector3(parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3]))).multiplyScalar(N);w=n[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var O=Math.abs(w[0]);w=(new c.Vector3(parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3]))).multiplyScalar(N);if(E.size={x:R,y:G,z:O},E.unit=new c.Vector3(m.x,L.y,w.z),0!=m.y||0!=m.z||0!=L.x||0!=L.z||0!=w.x||0!=w.y)E.matrix4=
new c.Matrix4(m.x,L.x,w.x,0,m.y,L.y,w.y,0,m.z,L.z,w.z,0,0,0,0,1),Q=(new c.Matrix4).makeTranslation(Q.x,Q.y,Q.z),E.matrix4=E.matrix4.multiplyMatrices(Q,E.matrix4),E.matrix=E.matrix4.matrix3FromTopLeft(),E.origin=new c.Vector3(0,0,0),E.unit=new c.Vector3(1,1,1);x.modelData=[{cryst:E}];n=n.splice(6,D);D=x[x.length-1].length;E=D+n.length;for(Q=D;Q<E;++Q)R={},R.serial=Q,m=n[Q-D].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),R.elem=e[m[0]],R.x=parseFloat(m[2])*N,R.y=parseFloat(m[3])*N,R.z=parseFloat(m[4])*
N,R.hetflag=!0,R.bonds=[],R.bondOrder=[],R.properties={},x[x.length-1].push(R);if(v)for(n=0;n<x.length;n++)f(x[n]);return x};d.xyz=d.XYZ=function(n,v){var x=[[]],w=void 0===(v=v||{}).assignBonds||v.assignBonds;for(n=n.split(/\r?\n|\r/);0<n.length&&!(3>n.length);){var D=parseInt(n[0]);if(isNaN(D)||0>=D)break;if(n.length<D+2)break;var E=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi.exec(n[1]);null!=E&&1<E.length&&(E=new Float32Array(E[1].split(/\s+/)),E=new c.Matrix3(E[0],E[3],E[6],E[1],E[4],E[7],
E[2],E[5],E[8]),x.modelData=[{cryst:{matrix:E}}]);E=2;var Q=x[x.length-1].length;for(D=Q+D;Q<D;Q++){var N=n[E++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),R={};R.serial=Q;var m=N[0];R.atom=R.elem=m[0].toUpperCase()+m.substr(1,1).toLowerCase();R.x=parseFloat(N[1]);R.y=parseFloat(N[2]);R.z=parseFloat(N[3]);R.hetflag=!0;R.bonds=[];R.bondOrder=[];R.properties={};x[x.length-1][Q]=R;7<=N.length&&(R.dx=parseFloat(N[4]),R.dy=parseFloat(N[5]),R.dz=parseFloat(N[6]))}if(!v.multimodel)break;x.push([]);
n.splice(0,E)}if(w)for(w=0;w<x.length;w++)f(x[w]);if(v.onemol)for(v=x,(x=[]).push(v[0]),w=1;w<v.length;w++)for(n=x[0].length,E=0;E<v[w].length;E++){D=v[w][E];for(Q=0;Q<D.bonds.length;Q++)D.bonds[Q]+=n;D.index=x[0].length;D.serial=x[0].length;x[0].push(D)}return x};d.sdf=d.SDF=function(n,v){var x="V2000";n=n.split(/\r?\n|\r/);return 3<n.length&&38<n[3].length&&(x=n[3].substr(34,5)),"V2000"===x?function(w,D){var E=[[]],Q=!1;for(void 0!==D.keepH&&(Q=!D.keepH);0<w.length&&!(4>w.length);){var N=parseInt(w[3].substr(0,
3));if(isNaN(N)||0>=N)break;var R=parseInt(w[3].substr(3,3)),m=4;if(w.length<4+N+R)break;var G,L=[],O=E[E.length-1].length,Z=O+N;for(N=O;N<Z;N++,m++){var W={},ha=(G=w[m]).substr(31,3).replace(/ /g,"");W.atom=W.elem=ha[0].toUpperCase()+ha.substr(1).toLowerCase();"H"===W.elem&&Q||(W.serial=N,L[N]=E[E.length-1].length,W.x=parseFloat(G.substr(0,10)),W.y=parseFloat(G.substr(10,10)),W.z=parseFloat(G.substr(20,10)),W.hetflag=!0,W.bonds=[],W.bondOrder=[],W.properties={},W.index=E[E.length-1].length,E[E.length-
1].push(W))}for(N=0;N<R;N++,m++)G=w[m],Z=L[parseInt(G.substr(0,3))-1+O],W=L[parseInt(G.substr(3,3))-1+O],G=parseInt(G.substr(6,3)),void 0!==Z&&void 0!==W&&(E[E.length-1][Z].bonds.push(W),E[E.length-1][Z].bondOrder.push(G),E[E.length-1][W].bonds.push(Z),E[E.length-1][W].bondOrder.push(G));if(!D.multimodel)break;for(D.onemol||E.push([]);"$$$$"!==w[m];)m++;w.splice(0,++m)}return E}(n,v):"V3000"===x?function(w,D){var E=[[]],Q=!1;for(void 0!==D.keepH&&(Q=!D.keepH);0<w.length&&!(8>w.length)&&w[4].startsWith("M  V30 BEGIN CTAB")&&
w[5].startsWith("M  V30 COUNTS")&&!(14>w[5].length);){var N=w[5].substr(13).match(/\S+/g);if(2>N.length)break;var R=parseInt(N[0]);if(isNaN(R)||0>=R)break;N=parseInt(N[1]);var m=7;if(w.length<8+R+N)break;var G=[],L=E[E.length-1].length,O=L+R;for(R=L;R<O;R++,m++){var Z=w[m].substr(6).match(/\S+/g);if(4<Z.length){var W={},ha=Z[1].replace(/ /g,"");W.atom=W.elem=ha[0].toUpperCase()+ha.substr(1).toLowerCase();"H"===W.elem&&Q||(W.serial=R,G[R]=E[E.length-1].length,W.x=parseFloat(Z[2]),W.y=parseFloat(Z[3]),
W.z=parseFloat(Z[4]),W.hetflag=!0,W.bonds=[],W.bondOrder=[],W.properties={},W.index=E[E.length-1].length,E[E.length-1].push(W))}}if("M  V30 END ATOM"!==w[m])break;if(m++,0===N||"M  V30 BEGIN BOND"!==w[m])break;m++;for(R=0;R<N;R++,m++)W=w[m].substr(6).match(/\S+/g),3<W.length&&(O=G[parseInt(W[2])-1+L],Z=G[parseInt(W[3])-1+L],W=parseInt(W[1]),void 0!==O&&void 0!==Z&&(E[E.length-1][O].bonds.push(Z),E[E.length-1][O].bondOrder.push(W),E[E.length-1][Z].bonds.push(O),E[E.length-1][Z].bondOrder.push(W)));
if(!D.multimodel)break;for(D.onemol||E.push([]);"$$$$"!==w[m];)m++;w.splice(0,++m)}return E}(n,v):[[]]};d.cdjson=d.json=function(n,v){var x=[[]];"string"==typeof n&&(n=JSON.parse(n));var w=n.m,D=w[0].a;n=w[0].b;w=w[0].s;var E=void 0!==v&&void 0!==v.parseStyle?v.parseStyle:void 0!==w;v=x[x.length-1].length;for(var Q=0;Q<D.length;Q++){var N=D[Q],R={};R.id=N.i;R.x=N.x;R.y=N.y;R.z=N.z||0;R.bonds=[];R.bondOrder=[];var m=N.l||"C";R.elem=m[0].toUpperCase()+m.substr(1).toLowerCase();R.serial=x[x.length-1].length;
E&&(R.style=w[N.s||0]);x[x.length-1].push(R)}for(D=0;D<n.length;D++)Q=n[D],w=Q.b+v,E=Q.e+v,Q=Q.o||1,N=x[x.length-1][w],R=x[x.length-1][E],N.bonds.push(E),N.bondOrder.push(Q),R.bonds.push(w),R.bondOrder.push(Q);return x};d.mcif=d.cif=function(n,v){function x(V,fa){for(var ka=[],ma=0,za=0;za<V.length;){for(;V.substr(za,fa.length)!==fa&&za<V.length;){if("'"===V[za])for(za++;za<V.length&&"'"!==V[za];)za++;else if('"'===V[za])for(za++;za<V.length&&'"'!==V[za];)za++;za++}ka.push(V.substr(ma,za-ma));ma=
za+=fa.length}return ka}var w=[],D=!(v=v||{}).doAssembly,E=w.modelData=[],Q=void 0===v.assignBonds||v.assignBonds,N=n.split(/\r?\n|\r/);n=[];for(var R=!1,m=0;m<N.length;m++){var G=N[m].split("#")[0];if(R?";"===G[0]&&(R=!1):";"===G[0]&&(R=!0),R||""!==G){if(!R&&"_"===(G=G.trim())[0]){var L=G.split(/\s/)[0].indexOf(".");-1<L&&(G[L]="_",G=G.substr(0,L)+"_"+G.substr(L+1))}n.push(G)}}var O,Z,W,ha;for(N=0;N<n.length;){for(;!n[N].startsWith("data_")||"data_global"===n[N];)N++;N++;for(R={};N<n.length&&!n[N].startsWith("data_");)if(void 0===
n[N][0])N++;else if("_"===n[N][0]){G=n[N].split(/\s/)[0].toLowerCase();m=R[G]=R[G]||[];G=n[N].substr(n[N].indexOf(G)+G.length);if(""===G)if(";"===n[++N][0]){G=n[N].substr(1);for(N++;";"!==n[N];)G=G+"\n"+n[N],N++;m.push(G)}else m.push(n[N]);else m.push(G.trim());N++}else if("loop_"===n[N].substr(0,5)){N++;for(m=[];""===n[N]||"_"===n[N][0];)""!==n[N]&&(G=n[N].split(/\s/)[0].toLowerCase(),G=R[G]=R[G]||[],m.push(G)),N++;for(G=0;N<n.length&&"_"!==n[N][0]&&!n[N].startsWith("loop_")&&!n[N].startsWith("data_");){L=
x(n[N]," ");for(var ja=0;ja<L.length;ja++)""!==L[ja]&&(m[G].push(L[ja]),G=(G+1)%m.length);N++}}else N++;E.push({symmetries:[]});w.push([]);m=void 0!==R._atom_site_id?R._atom_site_id.length:R._atom_site_label.length;if(void 0!==R._cell_length_a){G=parseFloat(R._cell_length_a);L=parseFloat(R._cell_length_b);ja=parseFloat(R._cell_length_c);var ea=parseFloat(R._cell_angle_alpha)||90,la=parseFloat(R._cell_angle_beta)||90,oa=parseFloat(R._cell_angle_gamma)||90;var wa=c.conversionMatrix3(G,L,ja,ea,la,oa);
E[E.length-1].cryst={a:G,b:L,c:ja,alpha:ea,beta:la,gamma:oa}}for(G=0;G<m;G++)if(void 0===R._atom_site_group_pdb||"TER"!==R._atom_site_group_pdb[G])L={},void 0!==R._atom_site_cartn_x?(L.x=parseFloat(R._atom_site_cartn_x[G]),L.y=parseFloat(R._atom_site_cartn_y[G]),L.z=parseFloat(R._atom_site_cartn_z[G])):(ja=(O=wa,Z=parseFloat(R._atom_site_fract_x[G]),W=parseFloat(R._atom_site_fract_y[G]),ha=parseFloat(R._atom_site_fract_z[G]),(new c.Vector3(Z,W,ha)).applyMatrix3(O)),L.x=ja.x,L.y=ja.y,L.z=ja.z),L.chain=
R._atom_site_auth_asym_id?R._atom_site_auth_asym_id[G]:void 0,L.resi=R._atom_site_auth_seq_id?parseInt(R._atom_site_auth_seq_id[G]):void 0,L.resn=R._atom_site_auth_comp_id?R._atom_site_auth_comp_id[G].trim():void 0,L.atom=R._atom_site_auth_atom_id?R._atom_site_auth_atom_id[G].replace(/"/gm,""):void 0,L.hetflag=!R._atom_site_group_pdb||"HETA"===R._atom_site_group_pdb[G]||"HETATM"===R._atom_site_group_pdb[G],ja="X",R._atom_site_type_symbol?ja=R._atom_site_type_symbol[G].replace(/\(?\+?\d+.*/,""):R._atom_site_label&&
(ja=R._atom_site_label[G].split("_")[0].replace(/\(?\d+.*/,"")),L.elem=ja[0].toUpperCase()+ja.substr(1,1).toLowerCase(),L.bonds=[],L.ss="c",L.serial=G,L.bondOrder=[],L.properties={},w[w.length-1].push(L);if(void 0!==R._pdbx_struct_oper_list_id&&!D)for(m=0;m<R._pdbx_struct_oper_list_id.length;m++){G=parseFloat(R["_pdbx_struct_oper_list_matrix[1][1]"][m]);L=parseFloat(R["_pdbx_struct_oper_list_matrix[1][2]"][m]);ja=parseFloat(R["_pdbx_struct_oper_list_matrix[1][3]"][m]);ea=parseFloat(R["_pdbx_struct_oper_list_vector[1]"][m]);
la=parseFloat(R["_pdbx_struct_oper_list_matrix[2][1]"][m]);oa=parseFloat(R["_pdbx_struct_oper_list_matrix[2][2]"][m]);var U=parseFloat(R["_pdbx_struct_oper_list_matrix[2][3]"][m]),A=parseFloat(R["_pdbx_struct_oper_list_vector[2]"][m]),I=parseFloat(R["_pdbx_struct_oper_list_matrix[3][1]"][m]),P=parseFloat(R["_pdbx_struct_oper_list_matrix[3][2]"][m]),T=parseFloat(R["_pdbx_struct_oper_list_matrix[3][3]"][m]),Y=parseFloat(R["_pdbx_struct_oper_list_vector[3]"][m]);G=new c.Matrix4(G,L,ja,ea,la,oa,U,A,I,
P,T,Y);E[E.length-1].symmetries.push(G)}m=function(V){var fa,ka=V.match("-");V=V.replace(/[-xyz]/g,"").split("/");return fa=void 0===V[1]?1:parseInt(V[1]),(""===V[0]?1:parseInt(V[0]))/fa*(ka?-1:1)};if(void 0!==R._symmetry_equiv_pos_as_xyz&&!D)for(G=0;G<R._symmetry_equiv_pos_as_xyz.length;G++){ja=R._symmetry_equiv_pos_as_xyz[G].replace(/["' ]/g,"").split(",").map(function(V){return V.replace(/-/g,"+-")});L=new c.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(ea=0;3>ea;ea++)for(la=ja[ea].split("+"),oa=
0;oa<la.length;oa++)U=la[oa],""!==U&&(A=m(U),U.match("x")?L.elements[ea+0]=A:U.match("y")?L.elements[ea+4]=A:U.match("z")?L.elements[ea+8]=A:L.elements[ea+12]=A);ja=wa.getMatrix4();ea=(new c.Matrix4).getInverse(ja,!0);L=(new c.Matrix4).multiplyMatrices(L,ea);L=(new c.Matrix4).multiplyMatrices(ja,L);E[E.length-1].symmetries.push(L)}}for(D=0;D<w.length;D++)Q&&f(w[D]),u(w[D]),H(E[D].symmetries,w[D],v,E[D].cryst),v.duplicateAssemblyAtoms&&!v.dontConnectDuplicatedAtoms&&Q&&f(w[D]);return w};d.mol2=d.MOL2=
function(n,v){var x=[[]],w=!1;void 0!==v.keepH&&(w=!v.keepH);var D=n.search(/@<TRIPOS>MOLECULE/),E=n.search(/@<TRIPOS>ATOM/);if(-1==D||-1==E)return x;for(n=n.substr(D,n.length).split(/\r?\n|\r/);0<n.length;){D=[];var Q=n[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),N=parseInt(Q[0]);E=0;1<Q.length&&(E=parseInt(Q[1]));var R,m=4;for(R=3;R<n.length;R++)if("@<TRIPOS>ATOM"==n[R]){m=R+1;break}R=x[x.length-1].length;for(N=R+N;R<N;R++){var G={},L=(Q=n[m++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "))[5].split(".")[0];
if(G.atom=G.elem=L[0].toUpperCase()+L.substr(1).toLowerCase(),"H"!=G.elem||!w){L=x[x.length-1].length;var O=parseInt(Q[0]);G.serial=O;G.x=parseFloat(Q[2]);G.y=parseFloat(Q[3]);G.z=parseFloat(Q[4]);G.atom=Q[5];Q=parseFloat(Q[8]);G.index=L;G.bonds=[];G.bondOrder=[];G.properties={charge:Q,partialCharge:Q};D[O]=L;x[x.length-1].push(G)}}for(R=!1;m<n.length;)if("@<TRIPOS>BOND"==n[m++]){R=!0;break}if(R&&E)for(R=0;R<E;R++)Q=n[m++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),N=parseInt(Q[1]),G=x[x.length-
1][D[N]],L=parseInt(Q[2]),O=x[x.length-1][D[L]],Q=parseInt(Q[3]),isNaN(Q)&&(Q=1),void 0!==G&&void 0!==O&&(G.bonds.push(D[L]),G.bondOrder.push(Q),O.bonds.push(D[N]),O.bondOrder.push(Q));if(!v.multimodel)break;v.onemol||x.push([]);n.splice(0,m);n.join("\n")}return x};var z=function(n,v){n=n.replace(/ /g,"");return 0<n.length&&"H"==n[0]&&"Hg"!=n&&"He"!=n&&"Hf"!=n&&"Hs"!=n&&"Ho"!=n&&(n="H"),1<n.length&&(n=n[0].toUpperCase()+n.substr(1).toLowerCase(),void 0===p[n]?n=n[0]:v&&("Ca"==n||"Cd"==n)&&(n="C")),
n},F=function(n,v,x){for(var w,D,E=[],Q=void 0===v.assignBonds||v.assignBonds,N=!v.keepH,R=!!v.noSecondaryStructure,m=!v.noComputeSecondaryStructure,G=!v.doAssembly,L=v.altLoc?v.altLoc:"A",O={symmetries:[]},Z=[],W=[],ha={},ja=0;ja<n.length;ja++){var ea,la,oa=(D=n[ja].replace(/^\s*/,"")).substr(0,6);if(0==oa.indexOf("END")){if(Z=n.slice(ja+1),"END"==oa)for(var wa in x)x.hasOwnProperty(wa)&&delete x[wa];break}if("ATOM  "==oa||"HETATM"==oa){var U,A,I,P,T,Y,V,fa,ka;if(" "==(fa=D.substr(16,1))||fa==L||
"*"==L)(V=parseInt(D.substr(6,5)),w=D.substr(12,4).replace(/ /g,""),ea=D.substr(17,3).replace(/ /g,""),la=D.substr(21,1),U=parseInt(D.substr(22,4)),A=D.substr(26,1),I=parseFloat(D.substr(30,8)),P=parseFloat(D.substr(38,8)),T=parseFloat(D.substr(46,8)),ka=parseFloat(D.substr(60,8)),"H"==(Y=""===(Y=D.substr(76,2).replace(/ /g,""))||void 0===p[Y]?z(D.substr(12,2),"A"==D[0]):Y[0].toUpperCase()+Y.substr(1).toLowerCase())&&N)||(oa="H"==oa[0],W[V]=E.length,E.push({resn:ea,x:I,y:P,z:T,elem:Y,hetflag:oa,altLoc:fa,
chain:la,resi:U,icode:A,rescode:U+(" "!=A?"^"+A:""),serial:V,atom:w,bonds:[],ss:"c",bondOrder:[],properties:{},b:ka,pdbline:D}))}else if("SHEET "==oa){!0;ea=D.substr(21,1);la=parseInt(D.substr(22,4));D.substr(32,1);D=parseInt(D.substr(33,4));ea in x||(x[ea]={});x[ea][la]="s1";for(la+=1;la<D;la++)x[ea][la]="s";x[ea][D]="s2"}else if("CONECT"==oa)for(ea=W[parseInt(D.substr(6,5))],la=E[ea],U=[11,16,21,26],A=0;4>A;A++){if(I=W[parseInt(D.substr(U[A],5))],P=E[I],void 0!==la&&void 0!==P)if(ha[[ea,I]])for(ha[[ea,
I]]+=1,P=0;P<la.bonds.length;P++)la.bonds[P]==I&&(T=ha[[ea,I]],la.bondOrder[P]=4<=T?1:T);else ha[[ea,I]]=1,0!=la.bonds.length&&la.bonds[la.bonds.length-1]==I||(la.bonds.push(I),la.bondOrder.push(1))}else if("HELIX "==oa){!0;ea=D.substr(19,1);la=parseInt(D.substr(21,4));D.substr(31,1);D=parseInt(D.substr(33,4));ea in x||(x[ea]={});x[ea][la]="h1";for(la+=1;la<D;la++)x[ea][la]="h";x[ea][D]="h2"}else if(G||"REMARK"!=oa||"BIOMT"!=D.substr(13,5))"CRYST1"==oa?(P=I=A=U=la=ea=void 0,ea=parseFloat(D.substr(7,
8)),la=parseFloat(D.substr(16,8)),U=parseFloat(D.substr(25,8)),A=parseFloat(D.substr(34,6)),I=parseFloat(D.substr(41,6)),P=parseFloat(D.substr(48,6)),O.cryst={a:ea,b:la,c:U,alpha:A,beta:I,gamma:P}):"ANISOU"==oa&&(ea=E[W[parseInt(D.substr(6,5))]])&&(D=D.substr(30).trim().split(/\s+/),D={u11:parseInt(D[0]),u22:parseInt(D[1]),u33:parseInt(D[2]),u12:parseInt(D[3]),u13:parseInt(D[4]),u23:parseInt(D[5])},ea.uMat=D);else{la=new c.Matrix4;for(ea=1;3>=ea;ea++)if(D=n[ja].replace(/^\s*/,""),parseInt(D.substr(18,
1))==ea)la.elements[ea-1]=parseFloat(D.substr(23,10)),la.elements[ea-1+4]=parseFloat(D.substr(33,10)),la.elements[ea-1+8]=parseFloat(D.substr(43,10)),la.elements[ea-1+12]=parseFloat(D.substr(53)),ja++;else for(;"BIOMT"==D.substr(13,5);)ja++,D=n[ja].replace(/^\s*/,"");la.elements[3]=0;la.elements[7]=0;la.elements[11]=0;la.elements[15]=1;O.symmetries.push(la);ja--}}if(function(ma,za){for(var Ma=0,Ra=ma.length;Ma<Ra;Ma++)for(var va=ma[Ma],Ca=0;Ca<va.bonds.length;Ca++){var Oa=ma[va.bonds[Ca]],$a=za[va.serial];
Oa&&$a&&0>Oa.bonds.indexOf($a)&&(Oa.bonds.push($a),Oa.bondOrder.push(va.bondOrder[Ca]))}}(E,W),Q&&r(E),G||H(O.symmetries,E,v,O.cryst),m&&!R&&u(E),!function(ma){for(var za in ma)return!1;return!0}(x))for(n=0;n<E.length;n++)void 0!==(w=E[n])&&w.chain in x&&w.resi in x[w.chain]&&(v=x[w.chain][w.resi],w.ss=v[0],1<v.length&&("1"==v[1]?w.ssbegin=!0:"2"==v[1]&&(w.ssend=!0)));return[E,O,Z]};d.pdb=d.PDB=d.pdbqt=d.PDBQT=function(n,v){v=v||{};var x=[],w={};x.modelData=[];for(var D=n.split(/\r?\n|\r/);0<D.length;){D=
F(D,v,w);n=D[0];var E=D[1];if(D=D[2],0!=n.length){if(v.multimodel&&v.onemol&&0<x.length){E=x[0].length;for(var Q=0;Q<n.length;Q++){var N=n[Q];N.index=Q;for(var R=0;R<N.bonds.length;R++)N.bonds[R]+=E;x[0].push(N)}}else x.modelData.push(E),x.push(n);if(!v.multimodel)break}}return x};d.pqr=d.PQR=function(n,v){var x=[[]],w=!v.noSecondaryStructure;x.modelData=[{symmetries:[]}];for(var D=[],E=n.split(/\r?\n|\r/),Q=0;Q<E.length;Q++){var N=(n=E[Q].replace(/^\s*/,"")).substr(0,6);if(0==N.indexOf("END")){if(v.multimodel){v.onemol||
x.push([]);continue}break}if("ATOM  "==N||"HETATM"==N){N=parseInt(n.substr(6,5));var R=n.substr(12,4).replace(/ /g,""),m=n.substr(17,3).trim(),G=n.substr(21,1),L=parseInt(n.substr(22,4));var O=n.substr(30).trim().split(/\s+/);var Z=parseFloat(O[0]),W=parseFloat(O[1]),ha=parseFloat(O[2]),ja=parseFloat(O[3]),ea=parseFloat(O[4]),la=R[0];1<R.length&&R[1].toUpperCase()!=R[1]&&(la=R.substr(0,2));O="H"==n[0];D[N]=x[x.length-1].length;x[x.length-1].push({resn:m,x:Z,y:W,z:ha,elem:la,hetflag:O,chain:G,resi:L,
serial:N,atom:R,bonds:[],ss:"c",bondOrder:[],properties:{charge:ja,partialCharge:ja,radius:ea},pdbline:n})}else if("CONECT"==N)for(N=parseInt(n.substr(6,5)),N=x[x.length-1][D[N]],R=0;4>R;R++)m=parseInt(n.substr([11,16,21,26][R],5)),G=x[x.length-1][D[m]],void 0!==N&&void 0!==G&&(N.bonds.push(D[m]),N.bondOrder.push(1))}for(v=0;v<x.length;v++)r(x[v]),w&&u(x[v]);return x};var t=function(n){return 0==n||2==n||4==n?"h":3==n?"s":"c"},q=new Set("D-SACCHARIDE;D-SACCHARIDE 1,4 AND 1,4 LINKING;D-SACCHARIDE 1,4 AND 1,6 LINKING;L-SACCHARIDE;L-SACCHARIDE 1,4 AND 1,4 LINKING;L-SACCHARIDE 1,4 AND 1,6 LINKING;NON-POLYMER;OTHER;PEPTIDE-LIKE;SACCHARIDE".split(";"));
return d.mmtf=d.MMTF=function(n,v){var x=!v.keepH,w=v.altLoc?v.altLoc:"A",D=!!v.noSecondaryStructure,E=!v.noComputeSecondaryStructure,Q=!v.doAssembly,N=v.assemblyIndex?v.assemblyIndex:0;"string"==typeof n&&(n=c.base64ToArray(n));var R,m=MMTF.decode(n);n=[[]];var G=n.modelData=[],L=0,O=0,Z=0,W=m.secStructList,ha=m.insCodeList,ja=m.sequenceIndexList,ea=m.bFactorList,la=m.altLocList,oa=m.occupancyList,wa=m.bondAtomList,U=m.bondOrderList,A=m.numModels;if(0==A)return n;v.multimodel||(A=1);var I=[];if(!Q&&
m.bioAssemblyList&&0<m.bioAssemblyList.length){var P=m.bioAssemblyList[N].transformList;var T=0;for(N=P.length;T<N;T++){var Y=new c.Matrix4(P[T].matrix);Y.transpose();I.push(Y)}}P=null;m.unitCell&&(N=m.unitCell,P={a:N[0],b:N[1],c:N[2],alpha:N[3],beta:N[4],gamma:N[5]});var V=[];m.entityList.forEach(function(Aa){Aa.chainIndexList.forEach(function(cb){V[cb]="polymer"==Aa.type})});for(N=Y=0;N<A;N++){var fa=m.chainsPerModel[N],ka=n[n.length-1],ma=[];G.push({symmetries:I,cryst:P});for(T=0;T<fa;++T){var za=
m.groupsPerChain[L],Ma=String.fromCharCode.apply(null,m.chainIdList.subarray(4*L,4*L+4)).replace(/\0/g,"");m.chainNameList&&(Ma=String.fromCharCode.apply(null,m.chainNameList.subarray(4*L,4*L+4)).replace(/\0/g,""));var Ra=O,va="";for(R=0;R<za;++R){var Ca=m.groupList[m.groupTypeList[O]];var Oa=Ca.atomNameList.length;var $a=0,ob=!1,Lb=!1;if(W){$a=W[O];var Ub=t($a);0!=O&&Ub==va||(ob=!0);va=Ub;var lc=O+1;(lc>=W.length||t(W[lc]!=Ub))&&(Lb=!0)}m.insCodeList&&String.fromCharCode(ha[O]);ja&&ja[O];var Pb=
m.groupIdList[O],uc=Ca.groupName;lc=Z;var Xb=q.has(Ca.chemCompType)||!V[L];for(Ub=0;Ub<Oa;++Ub){var Dc=Ca.elementList[Ub];if(!x||"H"!=Dc){var Ec="";ea&&(Ec=ea[Z]);var pc="";la&&la[Z]&&(pc=String.fromCharCode(la[Z]));var Fb="";if(oa&&(Fb=oa[Z]),""==pc||pc==w||"*"==w){var nb=m.atomIdList[Z],bc=Ca.atomNameList[Ub],wb=0;Ca.atomChargeList&&(wb=Ca.atomChargeList[Ub]);var na=m.xCoordList[Z],C=m.yCoordList[Z],Va=m.zCoordList[Z];ma[Z]=ka.length;ka.push({resn:uc,x:na,y:C,z:Va,elem:Dc,hetflag:Xb,chain:Ma,resi:Pb,
icode:pc,rescode:Pb+(" "!=pc?"^"+pc:""),serial:nb,altLoc:pc,index:Z,atom:bc,bonds:[],ss:t($a),ssbegin:ob,ssend:Lb,bondOrder:[],properties:{charge:wb,occupancy:Fb},b:Ec})}}Z+=1}$a=Ca.bondAtomList;Ub=0;for(Oa=Ca.bondOrderList.length;Ub<Oa;++Ub)ob=Ca.bondOrderList[Ub],Lb=ma[lc+$a[2*Ub]],Pb=ma[lc+$a[2*Ub+1]],uc=ka[Lb],Xb=ka[Pb],uc&&Xb&&(uc.bonds.push(Pb),uc.bondOrder.push(ob),Xb.bonds.push(Lb),Xb.bondOrder.push(ob));O+=1}O=Ra;for(R=0;R<za;++R)O+=1;L+=1}if(wa)for(T=Y,R=wa.length;T<R;T+=2){za=wa[T];Ma=
wa[T+1];fa=U?U[T/2]:1;if(za>=Z){Y=T;break}za=ma[za];Ma=ma[Ma];Ra=ka[za];va=ka[Ma];Ra&&va&&(Ra.bonds.push(Ma),Ra.bondOrder.push(fa),va.bonds.push(za),va.bondOrder.push(fa))}v.multimodel&&(v.onemol||n.push([]));1}if(!Q)for(x=0;x<n.length;x++)H(G[x].symmetries,n[x],v,G[x].cryst);return E&&!D&&u(n),n},d.prmtop=d.PRMTOP=function(n){function v(W){var ha=Q.indexOf(N.filter(function(ja){return ja.includes(W)})[0]);if(Number.isInteger(ha)&&0<ha){for(;!Q[ha].includes("FORMAT");)ha++;return ha}return-1}function x(W){var ha=
Q[W].match(/\((\d*)\S*/),ja=Q[W].match(/[a-zA-Z](\d*)\)\s*/);return null==ja&&(ja=Q[W].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[ha[1],ja[1]]}var w,D=[],E=0,Q=n.split(/\r?\n|\r/);if(!(0<Q.length&&Q[0].includes("VERSION")))return[];var N=Q.filter(function(W){return W.includes("POINTERS")||W.includes("ATOM_NAME")||W.includes("CHARGE")||W.includes("RADII")||W.includes("BONDS_INC_HYDROGEN")||W.includes("BONDS_WITHOUT_HYDROGEN")});n=v("POINTERS");if(-1==n)return[];var R=x(n),m=parseInt(Q[n+1].slice(0,R[1]));
if(isNaN(m)||0>=m||-1==(n=v("ATOM_NAME")))return[];for(var G=(R=x(n))[0],L=0;L<m/R[0];L++){L==parseInt(m/R[0])&&(G=m%R[0]);for(var O=0;O<G;O++){var Z={};Z.serial=E;Z.x=0;Z.y=0;Z.z=0;Z.atom=Q[n+1].slice(R[1]*O,R[1]*(O+1));Z.elem=Q[n+1].slice(R[1]*O,R[1]*O+1);Z.properties={charge:"",radii:""};Z.bonds=[];Z.bondOrder=[];D.push(Z);E++}n++}if(-1!=(n=v("CHARGE")))for(E=0,G=(R=x(n))[0],L=0;L<m/R[0];L++){L==parseInt(m/R[0])&&(G=m%R[0]);for(O=0;O<G;O++)D[E].properties.charge=parseFloat(Q[n+1].slice(R[1]*O,
R[1]*(O+1))),E++;n++}if(-1!=(n=v("RADII")))for(E=0,G=(R=x(n))[0],L=0;L<m/R[0];L++){L==parseInt(m/R[0])&&(G=m%R[0]);for(O=0;O<G;O++)D[E].properties.radii=parseFloat(Q[n+1].slice(R[1]*O,R[1]*(O+1))),E++;n++}if(-1!=(n=v("BONDS_WITHOUT_HYDROGEN")))for(E=0,G=(R=x(n))[0],n+=1;!Q[n].match(/^%FLAG/);){Q[n+1].match(/^%FLAG/)&&(G=m%R[0]);for(L=0;L<G;L++)0==E%3?w=parseInt(Q[n].slice(R[1]*L,R[1]*(L+1))/3):1==E%3&&D[w].bonds.push(parseInt(Q[n].slice(R[1]*L,R[1]*(L+1))/3)),E++;n++}if(-1!=(n=v("BONDS_INC_HYDROGEN")))for(E=
0,G=(R=x(n))[0],n+=1;!Q[n].match(/^%FLAG/);){Q[n+1].match(/^%FLAG/)&&(G=m%R[0]);for(L=0;L<G;L++)0==E%3?w=parseInt(Q[n].slice(R[1]*L,R[1]*(L+1))/3):1==E%3&&D[w].bonds.push(parseInt(Q[n].slice(R[1]*L,R[1]*(L+1))/3)),E++;n++}return[D]},d.gro=d.GRO=function(n){var v=[];for(n=n.split(/\r?\n|\r/);0<n.length&&!(3>n.length);){var x=parseInt(n[1]);if(isNaN(x)||0>=x)break;if(n.length<x+3)break;var w=[];v.push(w);var D=2,E=w.length;for(x=E+x;E<x;E++){var Q=n[D++],N={};N.serial=E;N.atom=Q.slice(10,15).trim();
N.elem=z(N.atom,!0);N.x=10*parseFloat(Q.slice(20,28));N.y=10*parseFloat(Q.slice(28,36));N.z=10*parseFloat(Q.slice(36,44));N.resi=parseInt(Q.slice(0,5));N.resn=Q.slice(5,10).trim();N.bonds=[];N.bondOrder=[];N.properties={};44<Q.length&&(N.dx=10*parseFloat(Q.slice(44,52)),N.dy=10*parseFloat(Q.slice(52,60)),N.dz=10*parseFloat(Q.slice(60,68)));w[E]=N}if(n.length<=D+3&&(w=n[D++].trim().split(/\s+/),3==w.length)){for(x=0;3>x;x++)w[x]=10*parseFloat(w[x]);v.box=w}n.splice(0,++D)}for(n=0;n<v.length;n++)r(v[n]);
return v},d.lammpstrj=d.LAMMPSTRJ=function(n,v){var x=[],w={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};n=n.split(/\r?\n|\r/);for(var D=0,E=0,Q=0;Q<n.length-9;){for(;Q<n.length;Q++)if(n[Q].match(/ITEM: NUMBER OF ATOMS/)&&(E=parseInt(n[Q+1])),n[Q].match(/ITEM: ATOMS/)){D=Q+1;break}Q=n[D-1].replace("ITEM: ATOMS ","").split(" ");x.push([]);for(var N=D;N<D+E;N++){for(var R={},m={},G=n[N].split(" "),
L=0;L<G.length;L++){var O=w[Q[L]];null!=O&&("serial"==O?R[O]=parseInt(G[L]):"x"==O||"y"==O||"z"===O?R[O]=parseFloat(G[L]):"charge"==O||"radius"==O?m[O]=parseFloat(G[L]):R[O]=G[L]);R.properties=m;R.bonds=[];R.bondOrder=[]}x[x.length-1][N-D]=R}Q=D+E-1}if(v.assignBonds)for(v=0;v<x.length;v++)f(x[v]);return x},d}();c=c||{};c.partialCharges={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,
"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,
"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,
"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,
"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};c.applyPartialCharges=function(d,p){p&&void 0!==d.partialCharge||!d.resn||!d.atom||(d.properties.partialCharge=c.partialCharges[d.resn+
":"+d.atom])};c.VolumeData=function(d,p,e){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,p=p.toLowerCase(),/\.gz$/.test(p)){p=p.replace(/\.gz$/,"");try{this[p]&&this[p].isbinary?("string"==typeof d&&(d=c.base64ToArray(d)),d=pako.inflate(d)):d=(new TextDecoder("utf-8")).decode(pako.inflate(d))}catch(h){console.log(h)}}if(this[p]&&(this[p].isbinary&&"string"==typeof d&&(d=c.base64ToArray(d)),this[p](d)),e){if(e.negate)for(d=
0,p=this.data.length;d<p;d++)this.data[d]=-this.data[d];if(e.normalize){e=d=0;for(p=this.data.length;e<p;e++)d+=this.data[e];e=d/this.data.length;console.log("computed mean: "+e);p=d=0;for(var k=this.data.length;p<k;p++){var f=this.data[p]-e;d+=f*f}d/=this.data.length;p=0;for(k=this.data.length;p<k;p++)this.data[p]=(this.data[p]-e)/d}}};c.VolumeData.prototype.getIndex=function(d,p,e){this.matrix?(this.inversematrix||(this.inversematrix=(new c.Matrix4).getInverse(this.matrix)),e=new c.Vector3(d,p,
e),d=(e=e.applyMatrix4(this.inversematrix)).x,p=e.y,e=e.z):(d-=this.origin.x,p-=this.origin.y,e-=this.origin.z,d/=this.unit.x,p/=this.unit.y,e/=this.unit.z);return d=Math.round(d),p=Math.round(p),e=Math.round(e),0>d||d>=this.size.x||0>p||p>=this.size.y||0>e||e>=this.size.z?-1:d*this.size.y*this.size.z+p*this.size.z+e};c.VolumeData.prototype.getVal=function(d,p,e){d=this.getIndex(d,p,e);return 0>d?0:this.data[d]};c.VolumeData.prototype.getCoordinates=function(d){var p=d/(this.size.y*this.size.z),e=
d%(this.size.y*this.size.z);d%=this.size.z;return p*=this.unit.x,e*=this.unit.y,d*=this.unit.z,{x:p+this.origin.x,y:e+this.origin.y,z:d+this.origin.z}};c.VolumeData.prototype.vasp=function(d){var p=d.replace(/^\s+/,"").split(/[\n\r]/),e=c.Parsers.vasp(d)[0].length;if(0==e)return console.log("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),void(this.data=[]);var k=parseFloat(p[1]);d=p[2].replace(/^\s+/,"").split(/\s+/);var f=(new c.Vector3(parseFloat(d[0]),parseFloat(d[1]),
parseFloat(d[2]))).multiplyScalar(1.889725992*k);d=p[3].replace(/^\s+/,"").split(/\s+/);var h=(new c.Vector3(parseFloat(d[0]),parseFloat(d[1]),parseFloat(d[2]))).multiplyScalar(1.889725992*k);d=p[4].replace(/^\s+/,"").split(/\s+/);k=(new c.Vector3(parseFloat(d[0]),parseFloat(d[1]),parseFloat(d[2]))).multiplyScalar(1.889725992*k);d=1/(Math.abs(f.x*(h.y*k.z-k.y*h.z)-h.x*(f.y*k.z-k.y*f.z)+k.x*(f.y*h.z-h.y*f.z))/Math.pow(1.889725992,3));p.splice(0,8+e+1);var r=p[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");
e=Math.abs(r[0]);var u=Math.abs(r[1]);r=Math.abs(r[2]);var H=this.origin=new c.Vector3(0,0,0);this.size={x:e,y:u,z:r};this.unit=new c.Vector3(f.x,h.y,k.z);f=f.multiplyScalar(1/(1.889725992*e));h=h.multiplyScalar(1/(1.889725992*u));k=k.multiplyScalar(1/(1.889725992*r));0==f.y&&0==f.z&&0==h.x&&0==h.z&&0==k.x&&0==k.y||(this.matrix=new c.Matrix4(f.x,h.x,k.x,0,f.y,h.y,k.y,0,f.z,h.z,k.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new c.Matrix4).makeTranslation(H.x,H.y,H.z)),this.origin=
new c.Vector3(0,0,0),this.unit=new c.Vector3(1,1,1));p.splice(0,1);p=p.join(" ");(p=(p=p.replace(/^\s+/,"")).split(/[\s\r]+/)).splice(e*u*r+1);p=new Float32Array(p);for(f=0;f<p.length;f++)p[f]=p[f]*d*.036749309;this.data=p};c.VolumeData.prototype.dx=function(d){var p,e=d.split(/[\n\r]+/),k=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,f=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,h=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,r=/data follows/;for(d=0;d<e.length;d++){var u=e[d];if(p=k.exec(u)){var H=parseInt(p[1]),z=
parseInt(p[2]);p=parseInt(p[3]);this.size={x:H,y:z,z:p}}else if(p=h.exec(u)){H=parseFloat(p[1]);if(0==parseFloat(p[2])&&0==parseFloat(p[3])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),u=e[d+=1],null==(p=h.exec(u)))return void console.log("Parse error in dx delta matrix");z=parseFloat(p[2]);if(0==parseFloat(p[1])&&0==parseFloat(p[3])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),u=e[d+=1],null==(p=h.exec(u)))return void console.log("Parse error in dx delta matrix");
u=parseFloat(p[3]);0==parseFloat(p[1])&&0==parseFloat(p[2])||console.log("Non-orthogonal delta matrix not currently supported in dx format");this.unit=new c.Vector3(H,z,u)}else if(p=f.exec(u))H=parseFloat(p[1]),z=parseFloat(p[2]),p=parseFloat(p[3]),this.origin=new c.Vector3(H,z,p);else if(r.exec(u))break}(d+=1,this.size&&this.origin&&this.unit&&this.size)?(d=e.splice(d).join(" "),d=d.split(/[\s\r]+/),this.data=new Float32Array(d)):console.log("Error parsing dx format")};c.VolumeData.prototype.cube=
function(d){var p=d.split(/\r?\n/);if(!(6>p.length)){d=c.Parsers.cube(d).modelData[0].cryst;var e=p[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");e=parseFloat(e[0]);var k=Math.abs(e);this.origin=d.origin;this.size=d.size;this.unit=d.unit;this.matrix=d.matrix4;d=6;0>e&&d++;p=p.splice(k+d).join(" ");p=(p=p.replace(/^\s+/,"")).split(/[\s\r]+/);this.data=new Float32Array(p)}};c.VolumeData.prototype.ccp4=function(d){var p,e;d=new Int8Array(d);var k=new Int32Array(d.buffer,0,56);var f=new Float32Array(d.buffer,
0,56);var h=new DataView(d.buffer);if(String.fromCharCode(h.getUint8(208),h.getUint8(209),h.getUint8(210),h.getUint8(211)),p=[h.getUint8(212),h.getUint8(213)],17===p[0]&&17===p[1])for(p=d.byteLength,e=0;e<p;e+=4)h.setFloat32(e,h.getFloat32(e),!0);h=k[0];p=k[1];e=k[2];var r=k[4];var u=k[5];var H=k[6];var z=k[7];var F=k[8];var t=k[9];var q=f[10];var n=f[11];var v=f[12];var x=f[13];var w=f[14];var D=f[15];var E=k[16];var Q=k[17];var N=k[18];k=k[23];var R=f[49];var m=f[50];f=f[51];q=[q,0,0];n=[n*Math.cos(Math.PI/
180*D),n*Math.sin(Math.PI/180*D),0];x=[v*Math.cos(Math.PI/180*w),v*(Math.cos(Math.PI/180*x)-Math.cos(Math.PI/180*D)*Math.cos(Math.PI/180*w))/Math.sin(Math.PI/180*D),0];x[2]=Math.sqrt(v*v*Math.sin(Math.PI/180*w)*Math.sin(Math.PI/180*w)-x[1]*x[1]);v=[0,q,n,x];z=[0,z,F,t];F=[0,E,Q,N];this.matrix=new c.Matrix4;this.matrix.set(v[F[1]][0]/z[F[1]],v[F[2]][0]/z[F[2]],v[F[3]][0]/z[F[3]],0,v[F[1]][1]/z[F[1]],v[F[2]][1]/z[F[2]],v[F[3]][1]/z[F[3]],0,v[F[1]][2]/z[F[1]],v[F[2]][2]/z[F[2]],v[F[3]][2]/z[F[3]],0,
0,0,0,1);this.matrix=this.matrix.multiplyMatrices(this.matrix,(new c.Matrix4).makeTranslation(r+R,u+m,H+f));this.origin=new c.Vector3(0,0,0);this.unit=new c.Vector3(1,1,1);this.size={x:h,y:p,z:e};this.dimensionorder=[E,Q,N];d=new Float32Array(d.buffer,1024+k);this.data=new Float32Array(h*p*e);for(r=0;r<h;r++)for(u=0;u<p;u++)for(H=0;H<e;H++)this.data[(r*p+u)*e+H]=d[(H*p+u)*h+r]};c.VolumeData.prototype.ccp4.isbinary=!0;c.GLVolumetricRender=function(){function d(e,k){var f=[],h=(e.length-1)/(k-1);f[0]=
e[0];for(var r=1;r<k-1;r++){var u=r*h,H=Math.floor(u).toFixed(),z=Math.ceil(u).toFixed(),F=e[H];f[r]=F+(e[z]-F)*(u-H)}return f[k-1]=e[e.length-1],f}function p(e,k){k=k||{};var f=Object.assign([],k.transferfn),h=null,r=null,u=k.subsamples||5,H=[];f.forEach(function(ea){ea.value=parseFloat(ea.value)});f.sort(function(ea,la){return ea.value-la.value});var z=f[0].value;0==f.length&&f.push(f[0]);for(var F=f[f.length-1].value,t,q,n,v,x,w,D,E,Q,N,R,m,G=0;G<f.length-1;G++)if(n=c.CC.color(f[G].color),v=c.CC.color(f[G+
1].color),D=f[G].opacity,E=f[G+1].opacity,(t=Math.floor(256*(f[G].value-z)/(F-z)))!=(q=Math.floor(256*(f[G+1].value-z)/(F-z))))for(x=d([255*n.r,255*v.r],q-t),w=d([255*n.g,255*v.g],q-t),n=d([255*n.b,255*v.b],q-t),t=d([255*D,255*E],q-t),q=0;q<x.length;q++)H.push(x[q]),H.push(w[q]),H.push(n[q]),H.push(t[q]);if(H=new Uint8ClampedArray(H),e.matrix){x=new c.Vector3(0,0,0);w=new c.Vector3(e.size.x,e.size.y,e.size.z);f=new c.Vector3(1,1,1);x.applyMatrix4(e.matrix);w.applyMatrix4(e.matrix);f.applyMatrix4(e.matrix).sub(x);
N=[[x.x,x.y,x.z],[w.x,w.y,w.z]];for(G=1;7>G;G++)w.x=1&G?e.size.x:0,w.y=2&G?e.size.y:0,w.z=4&G?e.size.z:0,w.applyMatrix4(e.matrix),N[0][0]=Math.min(N[0][0],w.x),N[0][1]=Math.min(N[0][1],w.y),N[0][2]=Math.min(N[0][2],w.z),N[1][0]=Math.max(N[1][0],w.x),N[1][1]=Math.max(N[1][1],w.y),N[1][2]=Math.max(N[1][2],w.z);G=w.x-x.x;t=w.y-x.y;x=w.z-x.z;R=Math.sqrt(G*G+t*t+x*x);m=Math.min(Math.min(f.x,f.y),f.z);Q=(Q=(Q=(new c.Matrix4).identity().scale({x:e.size.x,y:e.size.y,z:e.size.z})).multiplyMatrices(e.matrix,
Q)).getInverse(Q)}else Q=(new c.Matrix4).identity(),f=e.unit.x*e.size.x,x=e.unit.y*e.size.y,w=e.unit.z*e.size.z,Q.makeTranslation(-e.origin.x/f,-e.origin.y/x,-e.origin.z/w),Q.scale({x:1/f,y:1/x,z:1/w}),m=Math.min(Math.min(e.unit.x,e.unit.y),e.unit.z),N=[[e.origin.x,e.origin.y,e.origin.z],[e.origin.x+f,e.origin.y+x,e.origin.z+w]],R=Math.sqrt(f*f+x*x+w*w);f=new c.GLShape;f.addBox({corner:{x:N[0][0],y:N[0][1],z:N[0][2]},dimensions:{w:N[1][0]-N[0][0],h:N[1][1]-N[0][1],d:N[1][2]-N[0][2]}});var L=f.finalize();
if(this.boundingSphere=new c.Sphere,this.boundingSphere.center={x:(N[0][0]+N[1][0])/2,y:(N[0][1]+N[1][1])/2,z:(N[0][2]+N[1][2])/2},this.boundingSphere.radius=R/2,void 0!==k.coords&&void 0!==k.seldist){f=new Uint8Array(e.data.length);x=k.seldist;w=x*x;G=0;for(t=k.coords.length;G<t;G++){q=k.coords[G];var O=q.x-x;n=q.y-x;D=q.z-x;E=q.x+x;v=q.y+x;var Z=q.z+x;if(0<=e.getIndex(O,n,D)||0<=e.getIndex(E,v,Z))for(;O<E;O+=m)for(var W=n;W<v;W+=m)for(var ha=D;ha<Z;ha+=m){var ja=e.getIndex(O,W,ha);0<=ja&&!f[ja]&&
(O-q.x)*(O-q.x)+(W-q.y)*(W-q.y)+(ha-q.z)*(ha-q.z)<w&&(f[ja]=1)}}k=0;for(x=e.data.length;k<x;k++)0==f[k]&&(e.data[k]=1/0)}this.globj=function(ea){if(r&&(ea.remove(r),r=null),!this.hidden){h=new c.Object3D;var la=new c.Texture(e,!0);var oa=new c.Texture(H,!1);la.needsUpdate=!0;oa.needsUpdate=!0;oa.flipY=!1;la=new c.VolumetricMaterial({transferfn:oa,transfermin:z,transfermax:F,map:la,extent:N,maxdepth:R,texmatrix:Q,unit:m,subsamples:u});la=new c.Mesh(L,la);h.add(la);r=h.clone();ea.add(r)}};this.removegl=
function(ea){r&&(void 0!==r.geometry&&r.geometry.dispose(),void 0!==r.material&&r.material.dispose(),ea.remove(r),r=null);h=null}}return Object.defineProperty(p.prototype,"position",{get:function(){return this.boundingSphere.center}}),Object.defineProperty(p.prototype,"x",{get:function(){return this.boundingSphere.center.x}}),Object.defineProperty(p.prototype,"y",{get:function(){return this.boundingSphere.center.y}}),Object.defineProperty(p.prototype,"z",{get:function(){return this.boundingSphere.center.z}}),
p}();c.workerString=function(){self.onmessage=function(d){d=d.data;var p=d.type;if(0>p)self.atomData=d.atoms,self.volume=d.volume,self.ps=new ProteinSurface;else{var e=self.ps;e.initparm(d.expandedExtent,1!=p,self.volume);e.fillvoxels(self.atomData,d.extendedAtoms);e.buildboundary();4!==p&&2!==p||(e.fastdistancemap(),e.boundingatom(!1),e.fillvoxelswaals(self.atomData,d.extendedAtoms));e.marchingcube(p);d=e.getFacesAndVertices(d.atomsToShow);self.postMessage(d)}}}.toString().replace(/(^.*?\{|\}$)/g,
"");c.workerString+="; var ProteinSurface="+c.ProteinSurface.toString().replace(/[a-zA-Z_$]{1}[0-9a-zA-Z_$]*.MarchingCube./g,"MarchingCube.");c.workerString+=",MarchingCube=("+c.MarchingCubeInitializer.toString()+")();";c.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([c.workerString],{type:"text/javascript"})):{postMessage:function(){}};c.workerString=c.workerString;c.SurfaceWorker=c.SurfaceWorker;c.UI=function(d,p,e){function k(){var w=this.ui=ra("<div></div>");w.css({position:"relative",
"min-width":"150px"});var D=new q(n.molecule,20,{tooltip:"Toggle Model Selection Bar"});w.append(D.ui);D.ui.css({display:"inline-block",top:"3px"});var E={urlType:{active:!0,value:null,key:"Model type"},url:{active:!0,value:null,key:"Url"}},Q=ra("<div></div>");Q.css({display:"inline-block",background:"#e4e4e4",padding:"2px","border-radius":"3px"});w.append(Q);var N=ra("<div></div>");N.css({});var R=ra("<div></div>");R.css({display:"inline-block","font-family":"Arial","font-size":"12px","font-weight":"bold"});
N.append(R);var m=new q(n.change,16,{tooltip:"Change Model",backgroundColor:"white",bfr:.5});m.ui.css({display:"inline-block","margin-left":"4px"});N.append(m.ui);N.hide();Q.append(N);var G=ra("<div></div>");Q.append(G);var L=this.list=new c.UI.Form.ListInput(E.urlType,["pdb","mmtf","cid"]);L.showAlertBox=!1;L.ui.css({display:"inline-block"});G.append(L.ui);var O=this.url=new c.UI.Form.Input(E.url);G.append(O.ui);O.ui.css({display:"inline-block",width:"125px"});var Z=new q(n.tick,16,{bfr:.5,backgroundColor:"lightgreen",
tooltip:"Add Model"});Z.ui.css({margin:"0px"});G.append(Z.ui);this.updateInputLength=function(){};D.ui.on("click",function(){Q.toggle()});Z.ui.on("click",function(){var W=L.validate();O.validate()&&W&&d.addModel(E)});this.setModel=function(W){R.text(W);N.show();G.hide()};m.ui.on("click",function(){N.hide();G.show();O.setValue("")});w.on("keypress",function(W){"Enter"!=W.key&&"Return"!=W.key||Z.ui.trigger("click")})}function f(w,D){function E(){function ha(Oa){oa.show();U.editMode=!0;la=this.id=Oa;
wa.text("Sel#"+Oa);ea.attr("data-id",Oa);T.hide();fa.setSid(Oa);fa.ui.show()}function ja(Oa){Oa=void 0===Oa?null:Oa;if(Ma.validate()){Ma.getValue();var $a=d.checkAtoms(za.value);0==Object.keys(za.value).length?va.error("Please enter some input"):$a?(ha(d.addSelection(za.value,Oa)),null==Oa&&(_editingForm=!1)):va.error("No atom selected")}else va.error("Invalid Input")}var ea=this.ui=ra("<div></div>"),la=this.id=null;N.push(this);ea.css({background:"#e8e8e8",padding:"4px 4px 2px 4px","border-radius":"6px",
"margin-bottom":"3px",position:"relative",width:"156px"});var oa=ra("<div></div>");ea.append(oa);var wa=ra("<div></div>"),U=ra("<div></div>");oa.append(wa,U);wa.css({"font-family":"Arial","font-weight":"bold","font-size":"12px",display:"inline-block",width:"60px"});U.css({display:"inline-block"});oa.hide();U.editMode=!1;var A=new q(n.minus,16,{bfr:.5,backgroundColor:"#f06f6f",tooltip:"Remove Selection"}),I=new q(n.pencil,16,{tooltip:"Edit Selection"}),P=new q(n.visible,16,{tooltip:"Show / Hide Selection"});
U.append(A.ui);U.append(I.ui);U.append(P.ui);var T=ra("<div></div>");ea.append(T);var Y=ra("<div></div>");A.ui.on("click",function(){d.removeSelection(la);ea.detach()});I.ui.on("click",function(){T.toggle()});var V=!1;P.ui.on("click",function(){d.toggleHide(la);V?(V=!1,P.setSVG(n.visible)):(V=!0,P.setSVG(n.invisible))});var fa=new h;Y.append(fa.ui);fa.ui.css({position:"static",width:"px","border-radius":"4px"});fa.ui.hide();var ka=this.allSelector={key:"Select All Atom",value:null,active:!0},ma=new c.UI.Form.Checkbox(ka);
T.append(ma.ui);var za=this.selectionValue={key:"Selection Spec",value:null,active:!0},Ma=new c.UI.Form(c.GLModel.validAtomSelectionSpecs,za);T.append(Ma.ui);A=ra("<div></div>");var Ra=new q(n.tick,16,{backgroundColor:"lightgreen",tooltip:"Submit"});I=new q(n.cross,16,{backgroundColor:"lightcoral",tooltip:"Cancel"});A.append(Ra.ui,I.ui);var va=new r;T.append(va.ui);T.append(A);ea.append(Y);ma.update=function(){Ma.ui.toggle()};Ra.ui.on("click",function(){if(0==U.editMode)ka.value?(ha(d.addSelection({})),
_editingForm=!1):ja();else if(ka.value){var Oa=la;d.addSelection({},Oa);ha(Oa)}else ja(la)});var Ca=this;I.ui.on("click",function(){U.editMode?T.hide():(ea.detach(),function(Oa){N.find(function($a){if(Oa==$a)return console.log("Selection found",Oa),!0})}(Ca),_editingForm=!1)});ea.on("keyup",function(Oa){"Enter"==Oa.key&&Ra.ui.trigger("click")});this.setProperty=function(Oa,$a){0==Object.keys($a).length?ma.setValue(!0):Ma.setValue($a);ha(Oa)};this.addStyle=function(Oa,$a,ob){fa.addStyle(Oa,$a,ob)}}
D=void 0===D?"left":D;var Q=this.ui=ra("<div></div>");_editingForm=!1;var N=[],R=ra("<div></div>"),m=ra("<div></div>");R.css("opacity","0.9");var G=ra("<div></div>"),L=ra("<div></div>"),O=new q(n.plus,20,{tooltip:"Add New Selection"});O.ui.css("margin","0px");w=new q(w,20,{tooltip:"Toggle Selection Menu"});this.selectionObjects=[];Q.append(w.ui);Q.append(G);Q.css("position","absolute");m.append(R);G.append(m);L.append(O.ui);var Z=new r;G.append(Z.ui);G.append(L);Z.ui.css("width",162);"left"==D?Q.css("text-align",
"left"):Q.css("text-align","right");G.css("box-sizing","border-box");G.css("padding","3px");m.css("max-height",.8*x);m.css("overflow-y","auto");m.css("overflow-x","visible");R.css("box-sizing","content-box");this.updateScrollBox=function(ha){m.css("max-height",.8*ha)};var W=!0;G.hide();w.ui.click(function(){W?G.show(100):G.hide(100);W=!W});O.ui.on("click",function(){if(_editingForm)Z.warning("Please complete the previous form");else{var ha=new E;R.append(ha.ui);_editingForm=!0}});this.empty=function(){R.empty();
_editingForm=!1};this.editSelection=function(ha,ja,ea,la){0!=R.children("[data-id="+ha+"]").length||(selection=new E,selection.setProperty(ha,ja),R.append(selection.ui));null!=ea&&selection.addStyle(ha,ea,la)}}function h(w,D){function E(Z){function W(ma){la.show();wa.editMode=!0;ea=ma;oa.text("Sty#"+ma);P.hide()}function ha(ma){ma=void 0===ma?null:ma;V.validate()?(V.getValue(),0==Object.keys(Y.value).length?ka.error("Please enter some value"):(W(d.addStyle(Y.value,Z,ma)),null==ma&&(_editingForm=!1))):
ka.error("Invalid Input")}var ja=this.ui=ra("<div></div>"),ea=this.id=null;ja.css({background:"#e8e8e8",padding:"4px 4px 2px 4px","border-radius":"6px","margin-bottom":"3px",position:"relative"});var la=ra("<div></div>");ja.append(la);var oa=ra("<div></div>"),wa=ra("<div></div>");la.append(oa,wa);oa.css({"font-family":"Arial","font-weight":"bold","font-size":"12px",display:"inline-block",width:"60px"});wa.css({display:"inline-block"});la.hide();wa.editMode=!1;var U=new q(n.minus,16,{bfr:.5,backgroundColor:"#f06f6f",
tooltip:"Remove Style"}),A=new q(n.pencil,16,{tooltip:"Edit Style"}),I=new q(n.visible,16,{tooltip:"Show / Hide Style"});wa.append(U.ui);wa.append(A.ui);wa.append(I.ui);var P=ra("<div></div>");ja.append(P);U.ui.on("click",{parent:this,stid:ea},function(ma){d.removeStyle(Z,ea);ja.detach()});A.ui.on("click",function(){P.toggle()});var T=!1;I.ui.on("click",function(){d.toggleHideStyle(Z,ea);T?(T=!1,I.setSVG(n.visible)):(T=!0,I.setSVG(n.invisible))});var Y=this.selectionValue={key:"Style Spec",value:null,
active:!0},V=new c.UI.Form(c.GLModel.validAtomStyleSpecs,Y);P.append(V.ui);U=ra("<div></div>");var fa=new q(n.tick,16,{backgroundColor:"lightgreen",tooltip:"Submit"});A=new q(n.cross,16,{backgroundColor:"lightcoral",tooltip:"Cancel"});U.append(fa.ui,A.ui);var ka=new r;P.append(ka.ui);P.append(U);fa.ui.on("click",function(){if(0==wa.editMode)ha();else{var ma=ea;V.getValue();0==Object.keys(Y.value).length?ka.error("Please enter some value"):ha(ma)}});A.ui.on("click",function(){wa.editMode?P.hide():
ja.detach()});ja.on("keyup",function(ma){"Enter"==ma.key&&fa.ui.trigger("click")});this.updateStyle=function(ma,za){V.setValue(za);W(ma)}}D=void 0===D?"left":D;var Q=this.ui=ra("<div></div>");_editingForm=!1;var N=this.sid=w;this.setSid=function(Z){N=this.sid=Z};var R=ra("<div></div>");w=ra("<div></div>");R.css("opacity","0.9");var m=ra("<div></div>"),G=ra("<div></div>");G.css("text-align","center");var L=new q(n.plus,20,{tooltip:"Add New Style"});L.ui.css("margin","0px");this.selectionObjects=[];
Q.append(m);Q.css("position","absolute");w.append(R);m.append(w);var O=new r;m.append(O.ui);G.append(L.ui);m.append(G);"left"==D?Q.css("text-align","left"):Q.css("text-align","right");m.css("box-sizing","border-box");m.css("padding","3px");m.css("background-color","#a4a4a4");m.css("border-radius","4px");w.css("overflow","hidden");R.css("box-sizing","content-box");L.ui.on("click",function(){if(_editingForm)O.warning("Please complete editing the current form");else{var Z=new E(N);R.append(Z.ui);_editingForm=
!0}});this.addStyle=function(Z,W,ha){Z=new E(Z);R.append(Z.ui);Z.updateStyle(W,ha)}}function r(w){function D(){N&&setTimeout(function(){E.hide()},Q)}var E=this.ui=ra("<div></div>"),Q=(w=w||{}).delay||5E3,N=null==w.autohide||w.autohide;E.css({"font-family":"Arial","font-size":"14px",padding:"3px","border-radius":"4px","margin-top":"2px","margin-bottm":"2px","font-weight":"bold","text-align":"center"});E.hide();this.error=function(R){E.css({background:"lightcoral",color:"darkred",border:"1px solid darkred"});
E.text(R);E.show();D()};this.warning=function(R){E.css({background:"#fff3cd",color:"#856409",border:"1px solid #856409"});E.text(R);E.show();D()};this.message=function(R){E.css({background:"lightgreen",color:"green",border:"1px solid green"});E.text(R);E.show();D()}}function u(){function w(ja,ea){this.row=ra("<tr></tr>");var la=this.control={key:"",value:null,active:!0,name:ja};this.key=ja;this.value=ea;var oa=new c.UI.Form.Checkbox(la);la=ra("<td></td>");la.append(oa.ui);oa=ra("<td></td>");var wa=
ra("<td></td>").text(":"),U=ra("<td></td>");this.row.append(la,oa,wa,U);oa.text(ja);"number"==typeof ea?U.text(ea.toFixed(2)):U.text(ea.replace(/\^/g,""));console.log("Type of value",typeof ea,ea)}function D(){var ja={};return G.forEach(function(ea){!0===ea.control.value&&(ja[ea.key]=ea.value)}),0!=Object.keys(ja).length?ja:null}var E=this.ui=ra("<div></div>");E.css("position","absolute");E.css("border-radius","3px");E.css("background","#f1f1f1");E.css("z-index",99);var Q=ra("<div></div>");Q.css("position",
"relative");E.css("opacity","0.85");E.append(Q);Q.css({background:"#f1f1f1","border-radius":"4px",padding:"4px",width:"140px"});var N={background:"#d3e2ee",padding:"2px","font-family":"Arial","font-weight":"bold","font-size":"12px","border-radius":"2px"},R=ra("<div></div>");R.text("Remove Label");R.css(N);R.css("margin-bottom","3px");Q.append(R);R.hide();var m=[],G=[];Object.keys(c.GLModel.validAtomSpecs).forEach(function(ja){!0===c.GLModel.validAtomSpecs[ja].prop&&m.push(ja)});var L=ra("<div></div>");
Q.append(L);var O=ra("<div></div>");Q.append(O);O=ra("<div></div>");Q.append(O);O.css("width","100%");var Z=ra("<div></div>");O.append(Z);Z.text("Add Label");Z.css(N);Z.css("margin-bottom","3px");Z.hide();var W=ra("<div></div>");Q.append(W);Q.css({position:"relative"});W.css({background:"#dfdfdf","border-radius":"3px","font-family":"Arial","font-weight":"bold","font-size":"12px","box-sizing":"border-box",width:"100%"});W.hide();var ha=new r({autohide:!1});Q.append(ha.ui);E.hide();this.hidden=!0;this.atom=
null;R.on("click",{atom:this.atom},function(ja){d.removeAtomLabel(R.atom)});this.show=function(ja,ea,la,oa){oa?(R.show(),R.atom=la):(R.hide(),R.atom=null);ha.ui.hide();Z.hide();0==d.getSelectionList().length?ha.message("Please create selections before adding label"):Z.show();W.children().detach();W.hide();z(E,ja,ea);E.show();this.hidden=!1;la?(function(wa){L.empty();G=[];var U=ra("<table></table>");m.forEach(function(V){V=new w(V,wa[V]);U.append(V.row);G.push(V)});L.append(U);var A={value:null,key:"Atom Label Style"},
I=ra("<div><div>");(A=ra("<div><div>")).text("Style");A.css({display:"inline-block","font-family":"Arial","font-size":"14px","margin-right":"6px","margin-left":"6px"});var P=new c.UI.Form.ListInput(A,Object.keys(c.labelStyles));P.ui.css({display:"inline-block"});P.setValue("milk");I.append(A,P.ui);L.append(I);A=new q(n.tick,18,{backgroundColor:"lightgreen",tooltip:"Submit"});I=new q(n.cross,18,{backgroundColor:"lightcoral",tooltip:"Cancel"});var T=ra("<div></div>");T.append(A.ui,I.ui);var Y=new r;
L.append(Y.ui);L.append(T);A.ui.on("click",function(){var V=D(),fa=P.validate();null!=V?fa?(d.addAtomLabel(V,wa,P.getValue().value),d.exitContextMenu(!1)):Y.error("Select style for label"):Y.error("No value selected for label")});I.ui.on("click",function(){d.exitContextMenu()})}(la),this.atom=la):L.empty()};this.hide=function(ja){ja&&(ja=D(),null!=ja&&d.addAtomLabel(ja,this.atom));E.hide();this.hidden=!0;W.children().detach();W.hide()};Z.on("click",function(){var ja=function(){var ea=ra("<div></div>"),
la={text:{key:"Label Text",value:null,active:!0},style:{key:"Style",value:null,active:!0},sel:{key:"Selection",value:null,active:!0}},oa=ra("<div></div>"),wa=new q(n.minus,16),U=new q(n.tick,16,{backgroundColor:"lightgreen",tooltip:"Submit"}),A=new q(n.cross,16,{backgroundColor:"lightcoral",tooltip:"Cancel"});oa.append(wa.ui,U.ui,A.ui);wa.ui.hide();ea.append(oa);oa=ra("<div></div>");var I=ra("<div></div>").text("Label Text"),P=new c.UI.Form.Input(la.text);oa.append(I,P.ui);P.setWidth(126);ea.append(oa);
oa=ra("<div></div>");I=ra("<div></div>").text("Label Style");var T=new c.UI.Form.ListInput(la.style,Object.keys(c.labelStyles));T.setValue("milk");oa.append(I,T.ui);ea.append(oa);oa=d.getSelectionList();I=ra("<div></div>");var Y=ra("<div></div>").text("Label Selection"),V=new c.UI.Form.ListInput(la.sel,oa);return I.append(Y,V.ui),ea.append(I),ea.css({padding:"2px"}),U.ui.on("click",function(){var fa=!0;T.validate()||(fa=!1);P.validate()||(fa=!1);V.validate()||(fa=!1);fa&&d.addLabel(la)}),A.ui.on("click",
function(){d.exitContextMenu()}),wa.ui.on("click",function(){d.removeLabel()}),ea.on("keyup",function(fa){"Enter"==fa.key&&U.ui.trigger("click")}),{boundingBox:ea,text:P,style:T,selection:V,editMode:function(){wa.ui.show()}}}();W.children().detach();W.append(ja.boundingBox);W.show()})}function H(){function w(){function O(Ra){W.data("surf-id",Ra);ha.text("surf#"+Ra);ja.show();ea.editMode=!0;U.hide()}var Z={surfaceType:{key:"Surface Type",value:null},surfaceStyle:{key:"Surface Style",value:null},surfaceFor:{key:"Selection Atoms",
value:null},surfaceOf:{key:"Surface Generating Atoms",value:null}},W=this.ui=ra("<div></div>");W.css({"margin-top":"3px",padding:"6px","border-radius":"3px","background-color":"#e8e8e8",width:"100%","box-sizing":"border-box",opacity:.9,"text-align":"left"});var ha=this.heading=ra("<div></div>"),ja=ra("<div></div>");ja.css({"text-align":"right"});var ea=ra("<div></div>"),la=new q(n.pencil,16,{tooltip:"Edit Surface"}),oa=new q(n.minus,16,{bfr:.5,backgroundColor:"#f06f6f"});ea.append(oa.ui);ea.append(la.ui);
ea.editButton=la;ea.removeButton=oa;ea.editMode=!1;var wa={"font-weight":"bold","font-family":"Arial","font-size":"12px"};ha.css("display","inline-block");ha.css(wa);ea.css("display","inline-block");ja.hide();ja.append(ha,ea);W.append(ja);var U=ra("<div></div>");W.append(U);var A=ra("<div></div>"),I=ra("<div></div>");I.text("Surface Type");I.css(wa);var P=new c.UI.Form.ListInput(Z.surfaceType,Object.keys(c.SurfaceType));A.append(I,P.ui);U.append(A);P.setValue(Object.keys(c.SurfaceType)[0]);A=ra("<div></div>");
I=ra("<div></div>");var T=new c.UI.Form(c.GLModel.validSurfaceSpecs,Z.surfaceStyle);A.append(I,T.ui);U.append(A);A=ra("<div></div>");I=ra("<div></div>");I.text("Surface Atoms");I.css(wa);var Y=new c.UI.Form.ListInput(Z.surfaceOf,["self","all"]),V=ra("<div></div>");V.css({"background-color":"#e4e4e4",border:"1px solid grey",color:"grey",padding:"2px","border-radius":"3px","font-family":"Arial","font-size":"12px","font-weight":"bold","margin-top":"3px"});V.hide();Y.update=function(Ra){"self"==Ra.value?
(V.show(),V.text("Atoms in the selections will be used to generate the surface")):"all"==Ra.value?(V.show(),V.text("All the atoms will be used to generate the surface")):V.hide()};Y.setValue("all");A.append(I,Y.ui,V);U.append(A);A=["all"].concat(d.getSelectionList());I=ra("<div></div>");var fa=ra("<div></div>");fa.text("Show Atoms");fa.css(wa);var ka=new c.UI.Form.ListInput(Z.surfaceFor,A);ka.setValue("all");I.append(fa,ka.ui);U.append(I);var ma=new r;U.append(ma.ui);wa=ra("<div></div>");var za=new q(n.tick,
16,{backgroundColor:"lightgreen",tooltip:"Submit"});A=new q(n.cross,16,{backgroundColor:"lightcoral",tooltip:"Cancel"});wa.append(za.ui);wa.append(A.ui);U.append(wa);oa.ui.on("click",{surfaceBox:W},function(Ra){Ra=Ra.data.surfaceBox.data("surf-id");W.remove();d.removeSurface(Ra)});la.ui.on("click",function(){U.toggle()});var Ma=this.validateInput=function(){var Ra=!0;return ka.validate()||(Ra=!1),Y.validate()||(Ra=!1),P.validate()||(Ra=!1),T.validate()||(Ra=!1),Ra};za.ui.on("click",{},function(){if(ka.getValue(),
Y.getValue(),P.getValue(),T.getValue(),Ma())if(!1===ea.editMode){var Ra=d.addSurface(Z);Z.id=Ra;O(Ra);L.push(this);E=!1}else T.getValue(),Z.id=W.data("surf-id"),console.log("Edit surface called"),d.editSurface(Z),U.hide();else ma.error("Invalid Input")});A.ui.on("click",{},function(){0==ea.editMode?(W.detach(),W.remove(),E=!1):(U.hide(),ea.editMode=!1)});W.on("keyup",function(Ra){"Enter"==Ra.key&&za.ui.trigger("click")});this.editSurface=function(Ra,va){O(Ra);P.setValue(va.surfaceType.value);T.setValue(va.surfaceStyle.value);
Y.setValue(va.surfaceOf.value);ka.setValue(va.surfaceFor.value);ka.getValue();Y.getValue();P.getValue();T.getValue()}}var D=this.ui=ra("<div></div>"),E=!1;D.css({position:"absolute",width:"140px","text-align":"right"});var Q=new q(n.surface,20,{tooltip:"Toggle Surface Menu"});D.append(Q.ui);var N=ra("<div></div>");D.append(N);D.css({overflow:"visible"});var R=ra("<div></div>");R.css({"max-height":.8*x,"overflow-y":"auto","overflow-x":"hidden"});this.updateScrollBox=function(O){R.css("max-height",
.8*O)};N.append(R);var m=new r;N.append(m.ui);D=ra("<div></div>");var G=new q(n.plus,20,{tooltip:"Add New Surface"});D.append(G.ui);N.append(D);N.hide();var L=this.surfaces=[];G.ui.on("click",{surfaces:this},function(O){E?m.warning("Please complete the previous form first"):(O=new w,R.append(O.ui),E=!0)});Q.ui.on("click",function(){N.toggle()});this.empty=function(){R.empty();E=!1};this.addSurface=function(O,Z){var W=new w;R.append(W.ui);W.editSurface(O,Z)}}function z(w,D,E){w.css("left",D);w.css("top",
E)}function F(w,D,E,Q,N,R){E=void 0===E?"left":E;Q=void 0===Q?"top":Q;N=void 0===N?0:N;R=void 0===R?0:R;D.css("z-index",99);w.position();var m=t(w).width,G=t(w).height,L=D.outerWidth(),O=D.outerHeight(),Z=parseInt(w.css("padding").replace("px",""));Z=Z||0;w.offset().top;parseInt(w.css("margin-top").replace("px",""));w.offset().left;parseInt(w.css("margin-left").replace("px",""));z(D,"left"==E?Z+N:"center"==E?m/2-L/2+N:"right"==E?m-L-Z+N:N+Z,"top"==Q?R+Z:"center"==Q?G/2-O/2+R:"bottom"==Q?G-O-R-Z:R+
Z)}function t(w){w=w[0];var D=w.getBoundingClientRect();if(0==D.width&&0==D.height&&"none"===w.style.display){var E=w.style.position,Q=w.style.visibility;w.style.display="block";w.style.visibility="hidden";w.style.position="absolute";D=w.getBoundingClientRect();w.style.display="none";w.style.visibility=Q;w.style.position=E}return D}function q(w,D,E){var Q=(E=E||{}).bfr*D||D/4,N=E.backgroundColor||"rgb(177, 194, 203)",R=E.color||"black",m=E.hoverable||"true";E=E.tooltip||null;var G=this.ui=ra("<div></div>"),
L=ra("<div></div>");G.append(L);G.css("box-sizing","border-box");G.css("display","inline-block");G.css("margin","3px");G.css("height",D);G.css("width",D);G.css("border-radius",Q+"px");G.css("color",R);G.css("background",N);L.css("display","flex");L.css("justify-content","center");L.css("align-items","center");L.css("padding","2px");this.setSVG=function(O){L.empty();O=ra(O);L.append(O)};this.setSVG(w);G.css({position:"relative"});null!=E&&G.attr("title",E);"true"==m&&(G.on("mouseenter",function(){G.css("box-shadow",
"0px 0px 3px black")}).on("mouseleave",function(){G.css("box-shadow","none")}),G.on("mousedown",function(O){G.css("box-shadow","0px 0px 1px black")}),G.on("mouseup",function(){G.css("box-shadow","0px 0px 3px black")}),G.on("mousemove",function(O){}))}p=p||{};var n=new c.UI.Icons,v=(ra("body"),ra(e[0])),x=p.height;p.width;this.tools=function(w){w=new k;v.append(w.ui);F(v,w.ui,"left","top");var D=new u;v.append(D.ui);z(D.ui,100,100);var E=new H;v.append(E.ui);F(v,E.ui,"right","top",0,w.ui.height()+
5);var Q=new f(n.select);return v.append(Q.ui),F(v,Q.ui,"left","top",0,w.ui.height()+5),Q.ui.on("mousedown",function(){d.exitContextMenu()}),E.ui.on("mousedown",function(){d.exitContextMenu()}),{modelToolBar:w,selectionBox:Q,contextMenu:D,surfaceMenu:E}}();this.resize=function(){var w=this.tools.selectionBox,D=this.tools.surfaceMenu,E=this.tools.modelToolBar,Q=v.height();F(v,E.ui,"left","top");F(v,w.ui,"left","top",0,E.ui.height()+5);w.updateScrollBox(Q);F(v,D.ui,"right","top",0,E.ui.height()+5);
D.updateScrollBox(Q)}};c.StateManager=function(d,p){function e(n){for(var v=Object.keys(z),x=null,w=0;w<v.length;w++){var D=z[v[w]].spec,E=!0,Q=Object.keys(n);if(Object.keys(D).length==Q.length)for(var N=0;N<Q.length;N++){if(D[Q[N]]!=n[Q[N]]){E=!1;break}}else E=!1;if(E){x=v[w];break}}return x}function k(){d.setStyle({});Object.keys(z).forEach(function(n){var v=z[n];v.hidden?(d.setClickable(v.spec,!1,function(){}),d.enableContextMenu(v.spec,!1)):(Object.keys(v.styles).forEach(function(x){x=v.styles[x];
x.hidden||d.addStyle(v.spec,x.spec)}),d.setClickable(v.spec,!0,function(){}),d.enableContextMenu(v.spec,!0))});d.render()}function f(n){for(var v="",x=0;x<n;x++)v+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return v}var h=this;(p=p||{}).ui=p.ui||!1;var r=ra(d.getRenderer().domElement),u=d.container,H={height:u.height(),width:u.width(),offset:r.offset(),ui:p.ui||void 0},z={},F={},t={},q={};this.addSelection=function(n,v){var x=(v=void 0===
v?null:v)||f(4);n={spec:n,styles:{},hidden:!1};return null==v?z[x]=n:z[x].spec=n.spec,k(),x};this.checkAtoms=function(n){return 0<d.selectedAtoms(n).length};this.toggleHide=function(n){z[n].hidden=!z[n].hidden;k()};this.removeSelection=function(n){delete z[n];k()};this.addStyle=function(n,v,x){x=void 0===x?null:x;v=z[v];var w={spec:n,hidden:!1},D=null;return null==x?(D=f(4),v.styles[D]=w):(D=x,v.styles[D].spec=n),k(),D};this.removeStyle=function(n,v){delete z[n].styles[v];k()};this.toggleHideStyle=
function(n,v){z[n].styles[v].hidden=!z[n].styles[v].hidden;k()};this.addSurface=function(n,v){var x=f(4);n.id=x;var w=n.surfaceStyle.value;null==w&&(w={});var D="all"==n.surfaceFor.value?{spec:{}}:z[n.surfaceFor.value];return d.addSurface(c.SurfaceType[n.surfaceType.value],w,D.spec,"self"==n.surfaceOf.value?D.spec:{}).then(function(E){F[x]=E[0];null!=v&&v(x,E[0])},function(E){}),x};this.removeSurface=function(n){d.removeSurface(F[n]);delete F[n]};this.editSurface=function(n){var v=n.surfaceStyle.value||
{},x="all"==n.surfaceFor.value?{spec:{}}:z[n.surfaceFor.value],w="self"==n.surfaceOf.value?x.spec:{};d.removeSurface(F[n.id]);console.log(n);d.addSurface(c.SurfaceType[n.surfaceType.value],v,x.spec,w).then(function(D){F[n.id]=D[0]})};this.getSelectionList=function(){return Object.keys(z)};this.openContextMenu=function(n,v,x){var w=!1;n&&(w=null!=(w=Object.keys(q).find(function(D){return D==n.index})));this.ui&&this.ui.tools.contextMenu.show(v,x,n,w)};this.addLabel=function(n){t[n.sel.value]=t[n.sel.value]||
[];var v=c.labelStyles[n.style.value],x=z[n.sel.value];v.screenOffset=new c.Vector2(0,-35*t[n.sel.value].length);t[n.sel.value].push(d.addLabel(n.text.value,v,x.spec));this.ui.tools.contextMenu.hide()};this.addAtomLabel=function(n,v,x){x=void 0===x?"milk":x;var w=Object.keys(q).find(function(D){return D==v.index});(w=null!=w)&&this.removeAtomLabel(v);q[v.index]=q[v.index]||null;x=c.deepCopy(c.labelStyles[x]);x.position={x:v.x,y:v.y,z:v.z};w=[];for(key in n)w.push(key+" : "+n[key]);w=w.join("\n");
q[v.index]=d.addLabel(w,x)};this.exitContextMenu=function(n){this.ui&&this.ui.tools.contextMenu.hide(void 0===n?!1:n)};this.removeLabel=function(){this.ui.tools.contextMenu.hide()};this.removeAtomLabel=function(n){d.removeLabel(q[n.index]);delete q[n.index];this.ui.tools.contextMenu.hide()};this.addModel=function(n){var v=this;d.removeAllModels();d.removeAllSurfaces();d.removeAllLabels();d.removeAllShapes();c.download(n.urlType.value+":"+n.url.value,d,{},function(){v.ui.tools.modelToolBar.setModel(n.url.value.toUpperCase())});
z={};F={};q={};t={};this.ui.tools.selectionBox.empty();this.ui.tools.surfaceMenu.empty()};this.createSelectionAndStyle=function(n,v){var x=e(n);null==x&&(x=this.addSelection(n));var w=null;0!=Object.keys(v).length&&(w=this.addStyle(v,x));this.ui.tools.selectionBox.editSelection(x,n,w,v)};this.createSurface=function(n,v,x,w){var D=e(v);null==D&&(D=this.addSelection(selSpec));this.ui.tools.selectionBox.editSelection(D,v,null);v={surfaceType:{value:n=Object.keys(x)[0]},surfaceStyle:{value:x[n]},surfaceOf:{value:"self"},
surfaceFor:{value:D}};n=f(4);F[n]=w;this.ui.tools.surfaceMenu.addSurface(n,v)};this.setModelTitle=function(n){this.ui.tools.modelToolBar.setModel(n)};r.on("click",function(){h.ui&&0==h.ui.tools.contextMenu.hidden&&h.ui.tools.contextMenu.hide()});this.showUI=function(){return new c.UI(this,H,u)};1==p.ui&&(this.ui=this.showUI());this.initiateUI=function(){this.ui=new c.UI(this,H,u);k()};this.updateUI=function(){this.ui&&this.ui.resize()}};c.UI.Icons=function(){this.move='<svg  id="Layer_1" style="enable-background:new 0 0 32 32;" version="1.1" viewBox="0 0 32 32"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <path d="M31.338,14.538L27.38,10.58C26.994,10.193,26.531,10,26,10c-1.188,0-2,1.016-2,2c0,0.516,0.186,0.986,0.58,1.38L25.2,14H18  V6.8l0.62,0.62C19.014,7.814,19.484,8,20,8c0.984,0,2-0.813,2-2c0-0.531-0.193-0.994-0.58-1.38l-3.973-3.974  C17.08,0.279,16.729,0,16,0s-1.135,0.334-1.463,0.662L10.58,4.62C10.193,5.006,10,5.469,10,6c0,1.188,1.016,2,2,2  c0.516,0,0.986-0.186,1.38-0.58L14,6.8V14H6.8l0.62-0.62C7.814,12.986,8,12.516,8,12c0-0.984-0.813-2-2-2  c-0.531,0-0.994,0.193-1.38,0.58l-3.958,3.958C0.334,14.866,0,15.271,0,16s0.279,1.08,0.646,1.447L4.62,21.42  C5.006,21.807,5.469,22,6,22c1.188,0,2-1.016,2-2c0-0.516-0.186-0.986-0.58-1.38L6.8,18H14v7.2l-0.62-0.62  C12.986,24.186,12.516,24,12,24c-0.984,0-2,0.813-2,2c0,0.531,0.193,0.994,0.58,1.38l3.957,3.958C14.865,31.666,15.271,32,16,32  s1.08-0.279,1.447-0.646l3.973-3.974C21.807,26.994,22,26.531,22,26c0-1.188-1.016-2-2-2c-0.516,0-0.986,0.186-1.38,0.58L18,25.2V18  h7.2l-0.62,0.62C24.186,19.014,24,19.484,24,20c0,0.984,0.813,2,2,2c0.531,0,0.994-0.193,1.38-0.58l3.974-3.973  C31.721,17.08,32,16.729,32,16S31.666,14.866,31.338,14.538z"/>\n    </svg>\n    ';
this.rotate='<svg version="1.1" id="Icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;" xml:space="preserve">\n    <style type="text/css">\n    .st0{fill:none;stroke:#000000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}\n    </style>\n    <polyline class="st0" points="19,19 24,19 24,24 "/>\n    <polyline class="st0" points="6,23 11,23 11,18 "/>\n    <path class="st0" d="M24,19.4c-0.7,0.8-1.4,1.6-2.2,2.4c-7,7-15.3,10.2-18.5,7s-0.1-11.5,7-18.5s15.3-10.2,18.5-7\n    c1.4,1.4,1.6,3.6,0.8,6.3"/>\n    <path class="st0" d="M11,22.5c-0.3-0.2-0.5-0.5-0.8-0.8c-7-7-10.2-15.3-7-18.5s11.5-0.1,18.5,7s10.2,15.3,7,18.5\n    c-1.7,1.7-4.8,1.6-8.4,0.1"/>\n    </svg>';
this.pencil='\n    <svg\n   viewBox="0 0 7.4083332 7.4083335"\n   version="1.1"\n   id="svg46458"\n   inkscape:version="1.1 (c68e22c387, 2021-05-23)"\n   sodipodi:docname="pencil.svg"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:svg="http://www.w3.org/2000/svg">\n  <sodipodi:namedview\n     id="namedview46460"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     inkscape:pageshadow="2"\n     inkscape:pageopacity="0.0"\n     inkscape:pagecheckerboard="0"\n     inkscape:document-units="mm"\n     showgrid="false"\n     units="px"\n     inkscape:zoom="11.859035"\n     inkscape:cx="39.252773"\n     inkscape:cy="-0.54810532"\n     inkscape:window-width="1920"\n     inkscape:window-height="1017"\n     inkscape:window-x="-8"\n     inkscape:window-y="-8"\n     inkscape:window-maximized="1"\n     inkscape:current-layer="layer1" />\n  <defs\n     id="defs46455" />\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       id="g46369"\n       style="opacity:0.883991"\n       transform="matrix(1.4892662,-0.15686655,0.15686655,1.4892662,-53.265394,-119.92352)">\n      <g\n         id="g49150"\n         transform="matrix(0.91743541,0,0,0.91743541,23.648257,-4.2024208)"\n         style="opacity:0.883991">\n        <path\n           style="fill:none;stroke:#000000;stroke-width:0.264583px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n           d="m 3.8020268,100.20944 0.4890573,-1.325191 3.1552092,-2.461061 0.8203543,1.009666 -3.2340893,2.476838 z"\n           id="path47163"\n           sodipodi:nodetypes="cccccc" />\n        <path\n           style="fill:none;stroke:#000000;stroke-width:0.264583px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n           d="m 4.7012611,98.537178 -0.2738716,0.535677 0.5184006,-0.125499 -0.1893126,0.512722 0.5048334,-0.102546 -0.2287526,0.55216"\n           id="path47167"\n           sodipodi:nodetypes="cccccc" />\n        <path\n           style="fill:none;stroke:#000000;stroke-width:0.288395px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n           d="m 4.0143928,99.803763 0.189158,0.257937 -0.4015317,0.14774 z"\n           id="path46061" />\n      </g>\n      <path\n         style="fill:none;stroke:#000000;stroke-width:0.264583px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n         d="m 29.910684,84.806844 0.691621,0.847804"\n         id="path46176" />\n    </g>\n  </g>\n</svg>\n\n    ';
this.listArrow='\n    <svg\n    viewBox="0 0 7.4083332 7.4083335"\n    version="1.1"\n    id="svg41603"\n    inkscape:version="1.1 (c68e22c387, 2021-05-23)"\n    sodipodi:docname="listArrow.svg"\n    xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n    xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n    xmlns="http://www.w3.org/2000/svg"\n    xmlns:svg="http://www.w3.org/2000/svg">\n   <sodipodi:namedview\n      id="namedview41605"\n      pagecolor="#ffffff"\n      bordercolor="#666666"\n      borderopacity="1.0"\n      inkscape:pageshadow="2"\n      inkscape:pageopacity="0.0"\n      inkscape:pagecheckerboard="0"\n      inkscape:document-units="mm"\n      showgrid="false"\n      units="px"\n      inkscape:zoom="16.771208"\n      inkscape:cx="16.635653"\n      inkscape:cy="11.120248"\n      inkscape:window-width="1920"\n      inkscape:window-height="1017"\n      inkscape:window-x="-8"\n      inkscape:window-y="-8"\n      inkscape:window-maximized="1"\n      inkscape:current-layer="layer1" />\n   <defs\n      id="defs41600" />\n   <g\n      inkscape:label="Layer 1"\n      inkscape:groupmode="layer"\n      id="layer1">\n     <path\n        style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.264583;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n        d="M 1.991198,0.89301893 5.7166459,3.7041667 1.991198,6.5153145 Z"\n        id="path42297"\n        sodipodi:nodetypes="cccc" />\n   </g>\n </svg>\n \n    ';
this.option=' <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24"><defs><style>.cls-1{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;}</style></defs><title>69.option</title><g id="_69.option" data-name="69.option"><rect class="cls-1" x="1" y="1" width="9" height="9" rx="2" ry="2"/><rect class="cls-1" x="14" y="1" width="9" height="9" rx="2" ry="2"/><rect class="cls-1" x="14" y="14" width="9" height="9" rx="2" ry="2"/><rect class="cls-1" x="1" y="14" width="9" height="9" rx="2" ry="2"/></g></svg>';
this.minus='<svg xmlns="http://www.w3.org/2000/svg"   viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minus"><line x1="5" y1="12" x2="19" y2="12"></line></svg>';this.plus='<svg xmlns="http://www.w3.org/2000/svg"   viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>';
this.paintbrush='<?xml version="1.0" encoding="iso-8859-1"?>\n    \x3c!-- Generator: Adobe Illustrator 18.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n    <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    viewBox="0 0 444.892 444.892" style="enable-background:new 0 0 444.892 444.892;" xml:space="preserve">\n    <g id="XMLID_476_">\n    <path id="XMLID_503_" d="M440.498,173.103c5.858-5.857,5.858-15.355,0-21.213l-22.511-22.511c-5.091-5.091-13.084-5.846-19.038-1.8\n    l-47.332,32.17l31.975-47.652c3.993-5.951,3.219-13.897-1.85-18.964l-48.83-48.83c-4.508-4.508-11.372-5.675-17.114-2.908\n    l-8.443,4.065l4.043-8.97c2.563-5.685,1.341-12.361-3.068-16.771L293.002,4.393c-5.857-5.857-15.355-5.857-21.213,0\n    l-119.06,119.059l168.71,168.71L440.498,173.103z"/>\n    <path id="XMLID_1199_" d="M130.56,145.622l-34.466,34.466c-2.813,2.813-4.394,6.628-4.394,10.606s1.58,7.794,4.394,10.606\n    l32.694,32.694c6.299,6.299,9.354,14.992,8.382,23.849c-0.971,8.851-5.843,16.677-13.366,21.473\n    C27.736,340.554,18.781,349.51,15.839,352.453c-21.119,21.118-21.119,55.48,0,76.6c21.14,21.14,55.504,21.098,76.6,0\n    c2.944-2.943,11.902-11.902,73.136-107.965c4.784-7.505,12.607-12.366,21.462-13.339c8.883-0.969,17.575,2.071,23.859,8.354\n    l32.694,32.694c5.857,5.857,15.356,5.857,21.213,0l34.467-34.467L130.56,145.622z M70.05,404.825c-8.28,8.28-21.704,8.28-29.983,0\n    c-8.28-8.28-8.28-21.704,0-29.983c8.28-8.28,21.704-8.28,29.983,0C78.33,383.121,78.33,396.545,70.05,404.825z"/>\n    </g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>\n    ';
this.select='\n    <?xml version="1.0" encoding="iso-8859-1"?>\n    \x3c!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">\n    <g>\n    <g>\n    <path d="M416,149.333c-8.768,0-16.939,2.667-23.723,7.211C386.432,139.947,370.581,128,352,128\n    c-8.768,0-16.939,2.667-23.723,7.211c-5.845-16.597-21.696-28.544-40.277-28.544c-7.765,0-15.061,2.091-21.333,5.739V42.667\n    C266.667,19.136,247.531,0,224,0s-42.667,19.136-42.667,42.667v249.408l-58.645-29.333C113.856,258.325,103.957,256,94.08,256\n    c-22.485,0-40.747,18.283-40.747,40.875c0,10.901,4.245,21.12,11.947,28.821l137.941,137.941C234.389,494.827,275.883,512,320,512\n    c76.459,0,138.667-62.208,138.667-138.667V192C458.667,168.469,439.531,149.333,416,149.333z M437.333,373.333\n    c0,64.704-52.651,117.333-117.355,117.333c-38.421,0-74.517-14.955-101.653-42.133L80.363,310.592\n    c-3.669-3.648-5.696-8.533-5.696-13.845c0-10.709,8.704-19.413,19.413-19.413c6.592,0,13.163,1.557,19.072,4.501l74.091,37.035\n    c3.307,1.643,7.253,1.472,10.368-0.469c3.136-1.941,5.056-5.376,5.056-9.067V42.667c0-11.755,9.557-21.333,21.333-21.333\n    s21.333,9.579,21.333,21.333v202.667c0,5.888,4.779,10.667,10.667,10.667c5.888,0,10.667-4.779,10.667-10.667v-96\n    c0-11.755,9.557-21.333,21.333-21.333s21.333,9.579,21.333,21.333v96c0,5.888,4.779,10.667,10.667,10.667\n    s10.667-4.779,10.667-10.667v-74.667c0-11.755,9.557-21.333,21.333-21.333s21.333,9.579,21.333,21.333v74.667\n    c0,5.888,4.779,10.667,10.667,10.667c5.888,0,10.667-4.779,10.667-10.667V192c0-11.755,9.557-21.333,21.333-21.333\n    s21.333,9.579,21.333,21.333V373.333z"/>\n    </g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>';
this.movie={};this.movie.play='\n    <?xml version="1.0" encoding="iso-8859-1"?>\n    \x3c!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    viewBox="0 0 330 330" style="enable-background:new 0 0 330 330;" xml:space="preserve">\n    <g id="XMLID_228_">\n    <path id="XMLID_229_" d="M236.95,152.281l-108-67.501c-4.624-2.89-10.453-3.044-15.222-0.4C108.959,87.024,106,92.047,106,97.5v135\n    c0,5.453,2.959,10.476,7.728,13.12c2.266,1.256,4.77,1.88,7.271,1.88c2.763,0,5.523-0.763,7.95-2.28l108-67.499\n    c4.386-2.741,7.05-7.548,7.05-12.72C244,159.829,241.336,155.022,236.95,152.281z"/>\n    <path id="XMLID_230_" d="M165,0C74.019,0,0,74.019,0,165s74.019,165,165,165s165-74.019,165-165S255.981,0,165,0z M165,300\n    c-74.44,0-135-60.561-135-135S90.56,30,165,30s135,60.561,135,135S239.439,300,165,300z"/>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    </svg>\n    ';
this.movie.stop='\n    <?xml version="1.0" encoding="iso-8859-1"?>\n    \x3c!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    viewBox="0 0 330 330" style="enable-background:new 0 0 330 330;" xml:space="preserve">\n    <g id="XMLID_223_">\n    <path id="XMLID_224_" d="M225.75,89.25h-121.5c-8.284,0-15,6.716-15,15v121.5c0,8.284,6.716,15,15,15h121.5c8.284,0,15-6.716,15-15\n    v-121.5C240.75,95.966,234.034,89.25,225.75,89.25z"/>\n    <path id="XMLID_225_" d="M165,0C74.019,0,0,74.019,0,165s74.019,165,165,165s165-74.019,165-165S255.981,0,165,0z M165,300\n    c-74.439,0-135-60.561-135-135S90.561,30,165,30s135,60.561,135,135S239.439,300,165,300z"/>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    </svg>\n    ';
this.movie.pause='\n    <?xml version="1.0" encoding="iso-8859-1"?>\n    \x3c!-- Generator: Adobe Illustrator 18.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    viewBox="0 0 271.953 271.953" style="enable-background:new 0 0 271.953 271.953;" xml:space="preserve">\n    <g>\n    <g>\n    <path style="fill:#010002;" d="M135.977,271.953c75.097,0,135.977-60.879,135.977-135.977S211.074,0,135.977,0S0,60.879,0,135.977\n    S60.879,271.953,135.977,271.953z M135.977,21.756c62.979,0,114.22,51.241,114.22,114.22s-51.241,114.22-114.22,114.22\n    s-114.22-51.241-114.22-114.22S72.992,21.756,135.977,21.756z"/>\n    <path style="fill:#010002;" d="M110.707,200.114c7.511,0,13.598-6.086,13.598-13.598V83.174c0-7.511-6.086-13.598-13.598-13.598\n    c-7.511,0-13.598,6.086-13.598,13.598v103.342C97.109,194.028,103.195,200.114,110.707,200.114z"/>\n    <path style="fill:#010002;" d="M165.097,200.114c7.511,0,13.598-6.086,13.598-13.598V83.174c0-7.511-6.086-13.598-13.598-13.598\n    S151.5,75.663,151.5,83.174v103.342C151.5,194.028,157.586,200.114,165.097,200.114z"/>\n    </g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    </svg>\n    ';
this.movie.next='\n    <?xml version="1.0" encoding="UTF-8" standalone="no"?>\n    \x3c!-- Generator: Adobe Illustrator 18.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n\n    <svg\n    version="1.1"\n    id="Capa_1"\n    x="0px"\n    y="0px"\n    viewBox="0 0 30.05 30.05"\n    style="enable-background:new 0 0 30.05 30.05;"\n    xml:space="preserve"\n    sodipodi:docname="next.svg"\n    inkscape:version="1.1 (c68e22c387, 2021-05-23)"\n    xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n    xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n    xmlns="http://www.w3.org/2000/svg"\n    xmlns:svg="http://www.w3.org/2000/svg"><defs\n    id="defs73" /><sodipodi:namedview\n    id="namedview71"\n    pagecolor="#ffffff"\n    bordercolor="#666666"\n    borderopacity="1.0"\n    inkscape:pageshadow="2"\n    inkscape:pageopacity="0.0"\n    inkscape:pagecheckerboard="0"\n    showgrid="false"\n    inkscape:zoom="19.851347"\n    inkscape:cx="11.938737"\n    inkscape:cy="15.79238"\n    inkscape:window-width="1920"\n    inkscape:window-height="1017"\n    inkscape:window-x="-8"\n    inkscape:window-y="-8"\n    inkscape:window-maximized="1"\n    inkscape:current-layer="Capa_1" />\n    <g\n    id="g38"\n    transform="rotate(180,15.025,15.025)">\n    <path\n    d="m 20.814,11 c -0.193,-0.102 -0.43,-0.086 -0.604,0.041 l -2.383,1.73 v -1.258 c 0,-0.217 -0.121,-0.42 -0.32,-0.514 -0.191,-0.102 -0.424,-0.086 -0.602,0.041 l -4.834,3.512 c -0.15,0.109 -0.242,0.287 -0.242,0.473 0,0.184 0.092,0.357 0.242,0.471 l 4.834,3.508 c 0.102,0.076 0.221,0.111 0.342,0.111 0.088,0 0.18,-0.018 0.26,-0.066 0.199,-0.1 0.32,-0.295 0.32,-0.516 v -1.26 l 2.383,1.73 c 0.098,0.076 0.221,0.111 0.34,0.111 0.094,0 0.182,-0.018 0.264,-0.066 0.197,-0.1 0.318,-0.295 0.318,-0.516 v -7.02 C 21.133,11.297 21.012,11.094 20.814,11 Z"\n    id="path2" />\n    <path\n    d="M 15.027,0 C 6.729,0 0,6.729 0,15.025 0,23.326 6.729,30.05 15.027,30.05 23.325,30.05 30.05,23.325 30.05,15.025 30.051,6.729 23.326,0 15.027,0 Z m 0,27.539 C 8.115,27.539 2.509,21.935 2.509,15.025 2.509,8.115 8.115,2.51 15.027,2.51 c 6.914,0 12.516,5.605 12.516,12.516 0,6.911 -5.602,12.513 -12.516,12.513 z"\n    id="path4" />\n    <path\n    d="M 10.617,11.146 H 9.225 c -0.168,0 -0.305,0.137 -0.305,0.305 v 7.146 c 0,0.168 0.137,0.309 0.305,0.309 h 1.393 c 0.17,0 0.307,-0.141 0.307,-0.309 v -7.146 c -0.001,-0.168 -0.138,-0.305 -0.308,-0.305 z"\n    id="path6" />\n    <g\n    id="g8">\n    </g>\n    <g\n    id="g10">\n    </g>\n    <g\n    id="g12">\n    </g>\n    <g\n    id="g14">\n    </g>\n    <g\n    id="g16">\n    </g>\n    <g\n    id="g18">\n    </g>\n    <g\n    id="g20">\n    </g>\n    <g\n    id="g22">\n    </g>\n    <g\n    id="g24">\n    </g>\n    <g\n    id="g26">\n    </g>\n    <g\n    id="g28">\n    </g>\n    <g\n    id="g30">\n    </g>\n    <g\n    id="g32">\n    </g>\n    <g\n    id="g34">\n    </g>\n    <g\n    id="g36">\n    </g>\n    </g>\n    <g\n    id="g40"\n    transform="rotate(180,15.025,15.025)">\n    </g>\n    <g\n    id="g42"\n    transform="rotate(180,15.025,15.025)">\n    </g>\n    <g\n    id="g44"\n    transform="rotate(180,15.025,15.025)">\n    </g>\n    <g\n    id="g46"\n    transform="rotate(180,15.025,15.025)">\n    </g>\n    <g\n    id="g48"\n    transform="rotate(180,15.025,15.025)">\n    </g>\n    <g\n    id="g50"\n    transform="rotate(180,15.025,15.025)">\n    </g>\n    <g\n    id="g52"\n    transform="rotate(180,15.025,15.025)">\n    </g>\n    <g\n    id="g54"\n    transform="rotate(180,15.025,15.025)">\n    </g>\n    <g\n    id="g56"\n    transform="rotate(180,15.025,15.025)">\n    </g>\n    <g\n    id="g58"\n    transform="rotate(180,15.025,15.025)">\n    </g>\n    <g\n    id="g60"\n    transform="rotate(180,15.025,15.025)">\n    </g>\n    <g\n    id="g62"\n    transform="rotate(180,15.025,15.025)">\n    </g>\n    <g\n    id="g64"\n    transform="rotate(180,15.025,15.025)">\n    </g>\n    <g\n    id="g66"\n    transform="rotate(180,15.025,15.025)">\n    </g>\n    <g\n    id="g68"\n    transform="rotate(180,15.025,15.025)">\n    </g>\n    </svg>\n    ';
this.movie.previous='\n    <?xml version="1.0" encoding="iso-8859-1"?>\n    \x3c!-- Generator: Adobe Illustrator 18.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    viewBox="0 0 30.05 30.05" style="enable-background:new 0 0 30.05 30.05;" xml:space="preserve">\n    <g>\n    <path d="M20.814,11c-0.193-0.102-0.43-0.086-0.604,0.041l-2.383,1.73v-1.258c0-0.217-0.121-0.42-0.32-0.514\n    c-0.191-0.102-0.424-0.086-0.602,0.041l-4.834,3.512c-0.15,0.109-0.242,0.287-0.242,0.473c0,0.184,0.092,0.357,0.242,0.471\n    l4.834,3.508c0.102,0.076,0.221,0.111,0.342,0.111c0.088,0,0.18-0.018,0.26-0.066c0.199-0.1,0.32-0.295,0.32-0.516v-1.26\n    l2.383,1.73c0.098,0.076,0.221,0.111,0.34,0.111c0.094,0,0.182-0.018,0.264-0.066c0.197-0.1,0.318-0.295,0.318-0.516v-7.02\n    C21.133,11.297,21.012,11.094,20.814,11z"/>\n    <path d="M15.027,0C6.729,0,0,6.729,0,15.025C0,23.326,6.729,30.05,15.027,30.05S30.05,23.325,30.05,15.025\n    C30.051,6.729,23.326,0,15.027,0z M15.027,27.539c-6.912,0-12.518-5.604-12.518-12.514S8.115,2.51,15.027,2.51\n    c6.914,0,12.516,5.605,12.516,12.516S21.941,27.539,15.027,27.539z"/>\n    <path d="M10.617,11.146H9.225c-0.168,0-0.305,0.137-0.305,0.305v7.146c0,0.168,0.137,0.309,0.305,0.309h1.393\n    c0.17,0,0.307-0.141,0.307-0.309v-7.146C10.924,11.283,10.787,11.146,10.617,11.146z"/>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    </svg>\n    ';
this.tick='\n    <?xml version="1.0" encoding="iso-8859-1"?>\n    \x3c!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n       viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">\n    <g>\n      <g>\n        <path d="M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M386.594,226.664\n          L252.747,360.511c-7.551,7.551-17.795,11.794-28.475,11.794s-20.923-4.243-28.475-11.795l-70.388-70.389\n          c-15.726-15.726-15.726-41.223,0.001-56.95c15.727-15.725,41.224-15.726,56.95,0.001l41.913,41.915l105.371-105.371\n          c15.727-15.726,41.223-15.726,56.951,0.001C402.319,185.44,402.319,210.938,386.594,226.664z"/>\n      </g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    </svg>\n    ';
this.cross='\n    <?xml version="1.0" encoding="iso-8859-1"?>\n    \x3c!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n       viewBox="0 0 455 455" style="enable-background:new 0 0 455 455;" xml:space="preserve">\n    <g>\n      <g>\n        <path d="M227.5,0C101.761,0,0,101.75,0,227.5C0,353.239,101.75,455,227.5,455C353.239,455,455,353.25,455,227.5\n          C455.001,101.761,353.251,0,227.5,0z M310.759,268.333c11.715,11.716,11.715,30.711,0,42.427\n          c-5.858,5.858-13.536,8.787-21.213,8.787s-15.355-2.929-21.213-8.787L227.5,269.927l-40.832,40.832\n          c-5.858,5.858-13.536,8.787-21.213,8.787s-15.355-2.929-21.213-8.787c-11.715-11.716-11.715-30.711,0-42.427l40.832-40.832\n          l-40.832-40.832c-11.715-11.716-11.715-30.711,0-42.427c11.716-11.716,30.711-11.716,42.427,0l40.832,40.832l40.832-40.832\n          c11.716-11.716,30.711-11.716,42.427,0c11.715,11.716,11.715,30.711,0,42.427L269.927,227.5L310.759,268.333z"/>\n      </g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    </svg>\n    ';
this.edit='\n    <?xml version="1.0" encoding="iso-8859-1"?>\n    \x3c!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n       viewBox="0 0 490.008 490.008" style="enable-background:new 0 0 490.008 490.008;" xml:space="preserve">\n    <g>\n      <g>\n        <g>\n          <path d="M156.7,142.865h88.6c11.5,0,20.8-9.4,20.8-20.9s-9.4-20.9-20.8-20.9h-88.6c-11.5,0-20.8,9.4-20.8,20.9\n            C135.9,133.465,145.3,142.865,156.7,142.865z"/>\n          <path d="M266.1,223.165c0-11.5-9.4-20.9-20.8-20.9h-88.6c-11.5,0-20.8,9.4-20.8,20.9s9.4,20.9,20.8,20.9h88.6\n            C256.8,244.065,266.1,234.665,266.1,223.165z"/>\n          <ellipse cx="94.2" cy="122.065" rx="20.5" ry="20.5"/>\n          <ellipse cx="94.2" cy="223.165" rx="20.5" ry="20.5"/>\n        </g>\n        <path d="M483.7,258.965l-81.3-81.3c-8.3-8.3-20.8-8.3-29.2,0l-24.3,24.2v-168.5c0-18.4-14.9-33.3-33.3-33.3H33.3\n          c-18.4,0-33.3,15-33.3,33.3v281c0,18.4,14.9,33.3,33.3,33.3h169l-4.1,4c-2.1,3.1-4.2,6.3-5.2,10.4l-20.8,102.2\n          c-3.9,20.1,10.4,28.2,24,25l102.1-20.9c4.2,0,7.3-2.1,10.4-5.2l175-175.1C487.9,284.065,495.5,272.165,483.7,258.965z M40,307.765\n          v-267.7h269v201.5l-66.5,66.1H40V307.765z M283.7,428.965l-65.6,13.6l13.5-65.7l155.2-155.3l53.1,52.1L283.7,428.965z"/>\n      </g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    <g>\n    </g>\n    </svg>\n    ';
this.remove='\n    \n<?xml version="1.0" encoding="iso-8859-1"?>\n\x3c!-- Generator: Adobe Illustrator 17.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 310.285 310.285" style="enable-background:new 0 0 310.285 310.285;" xml:space="preserve">\n<path d="M155.143,0.001C69.597,0.001,0,69.597,0,155.143c0,85.545,69.597,155.142,155.143,155.142s155.143-69.597,155.143-155.142\n\tC310.285,69.597,240.689,0.001,155.143,0.001z M244.143,171.498c0,4.411-3.589,8-8,8h-163c-4.411,0-8-3.589-8-8v-32\n\tc0-4.411,3.589-8,8-8h163c4.411,0,8,3.589,8,8V171.498z"/>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n</svg>\n\n    ';
this.list='\n   <?xml version="1.0" encoding="iso-8859-1"?>\n   \x3c!-- Generator: Adobe Illustrator 18.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n   <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n   <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 458.18 458.18" style="enable-background:new 0 0 458.18 458.18;" xml:space="preserve">\n   <g>\n     <path d="M36.09,5.948c-18.803,0-34.052,15.248-34.052,34.051c0,18.803,15.249,34.052,34.052,34.052\n       c18.803,0,34.052-15.25,34.052-34.052C70.142,21.196,54.893,5.948,36.09,5.948z"/>\n     <path d="M147.537,80h268.604c22.092,0,40-17.908,40-40s-17.908-40-40-40H147.537c-22.092,0-40,17.908-40,40S125.445,80,147.537,80z\n       "/>\n     <path d="M36.09,132.008c-18.803,0-34.052,15.248-34.052,34.051s15.249,34.052,34.052,34.052c18.803,0,34.052-15.249,34.052-34.052\n       S54.893,132.008,36.09,132.008z"/>\n     <path d="M416.142,126.06H147.537c-22.092,0-40,17.908-40,40s17.908,40,40,40h268.604c22.092,0,40-17.908,40-40\n       S438.233,126.06,416.142,126.06z"/>\n     <path d="M36.09,258.068c-18.803,0-34.052,15.248-34.052,34.051c0,18.803,15.249,34.052,34.052,34.052\n       c18.803,0,34.052-15.249,34.052-34.052C70.142,273.316,54.893,258.068,36.09,258.068z"/>\n     <path d="M416.142,252.119H147.537c-22.092,0-40,17.908-40,40s17.908,40,40,40h268.604c22.092,0,40-17.908,40-40\n       S438.233,252.119,416.142,252.119z"/>\n     <path d="M36.09,384.128c-18.803,0-34.052,15.248-34.052,34.051s15.249,34.053,34.052,34.053c18.803,0,34.052-15.25,34.052-34.053\n       S54.893,384.128,36.09,384.128z"/>\n     <path d="M416.142,378.18H147.537c-22.092,0-40,17.908-40,40s17.908,40,40,40h268.604c22.092,0,40-17.908,40-40\n       S438.233,378.18,416.142,378.18z"/>\n   </g>\n   <g>\n   </g>\n   <g>\n   </g>\n   <g>\n   </g>\n   <g>\n   </g>\n   <g>\n   </g>\n   <g>\n   </g>\n   <g>\n   </g>\n   <g>\n   </g>\n   <g>\n   </g>\n   <g>\n   </g>\n   <g>\n   </g>\n   <g>\n   </g>\n   <g>\n   </g>\n   <g>\n   </g>\n   <g>\n   </g>\n   </svg>\n   ';
this.style='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n   <path fill-rule="evenodd" clip-rule="evenodd" d="M13 21V13H21V21H13ZM15 15H19L19 19H15V15Z" fill="black"/>\n   <path fill-rule="evenodd" clip-rule="evenodd" d="M3 11L3 3L11 3V11H3ZM5 5L9 5V9L5 9L5 5Z" fill="black"/>\n   <path d="M18 6V12H16V8L12 8V6L18 6Z" fill="black"/>\n   <path d="M12 18H6L6 12H8L8 16H12V18Z" fill="black"/>\n   </svg>\n   ';this.visible='<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  viewBox="0 0 98.48 98.48" style="enable-background:new 0 0 98.48 98.48;" xml:space="preserve"\n >\n<g>\n <path d="M97.204,45.788c-0.865-1.02-21.537-24.945-47.963-24.945c-26.427,0-47.098,23.925-47.965,24.946\n   c-1.701,2-1.701,4.902,0.001,6.904c0.866,1.02,21.537,24.944,47.964,24.944c26.426,0,47.098-23.926,47.964-24.946\n   C98.906,50.691,98.906,47.789,97.204,45.788z M57.313,35.215c1.777-0.97,4.255,0.143,5.534,2.485\n   c1.279,2.343,0.875,5.029-0.902,5.999c-1.776,0.971-4.255-0.143-5.535-2.485C55.132,38.871,55.535,36.185,57.313,35.215z\n    M49.241,68.969c-18.46,0-33.995-14.177-39.372-19.729c3.631-3.75,11.898-11.429,22.567-16.021\n   c-2.081,3.166-3.301,6.949-3.301,11.021c0,11.104,9.001,20.105,20.105,20.105s20.106-9.001,20.106-20.105\n   c0-4.072-1.219-7.855-3.3-11.021C76.715,37.812,84.981,45.49,88.612,49.24C83.235,54.795,67.7,68.969,49.241,68.969z"/>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g></svg>';
this.invisible='<svg\nversion="1.1"\nid="Capa_1"\nx="0px"\ny="0px"\nviewBox="0 0 98.48 98.481"\nstyle="enable-background:new 0 0 98.48 98.481;"\nxml:space="preserve"\nsodipodi:docname="invisible.svg"\ninkscape:version="1.1 (c68e22c387, 2021-05-23)"\nxmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\nxmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\nxmlns="http://www.w3.org/2000/svg"\nxmlns:svg="http://www.w3.org/2000/svg"><defs\nid="defs45" /><sodipodi:namedview\nid="namedview43"\npagecolor="#ffffff"\nbordercolor="#666666"\nborderopacity="1.0"\ninkscape:pageshadow="2"\ninkscape:pageopacity="0.0"\ninkscape:pagecheckerboard="0"\nshowgrid="false"\ninkscape:zoom="2.9869357"\ninkscape:cx="4.8544735"\ninkscape:cy="41.346722"\ninkscape:window-width="1920"\ninkscape:window-height="1017"\ninkscape:window-x="-8"\ninkscape:window-y="-8"\ninkscape:window-maximized="1"\ninkscape:current-layer="g8" />\n<g\nid="g10">\n<g\nid="g8">\n \n \n <g\nid="g843"><path\n  d="M69.322,44.716L49.715,64.323C60.438,64.072,69.071,55.438,69.322,44.716z"\n  id="path2" /><path\n  d="M97.204,45.789c-0.449-0.529-6.245-7.23-15.402-13.554l-6.2,6.2c5.99,3.954,10.559,8.275,13.011,10.806    C83.235,54.795,67.7,68.969,49.241,68.969c-1.334,0-2.651-0.082-3.952-0.222l-7.439,7.438c3.639,0.91,7.449,1.451,11.391,1.451    c26.426,0,47.098-23.927,47.964-24.946C98.906,50.692,98.906,47.79,97.204,45.789z"\n  id="path4" /><path\n  d="M90.651,15.901c0-0.266-0.104-0.52-0.293-0.707l-7.071-7.07c-0.391-0.391-1.022-0.391-1.414,0L66.045,23.952    c-5.202-1.893-10.855-3.108-16.804-3.108c-26.427,0-47.098,23.926-47.965,24.946c-1.701,2-1.701,4.902,0.001,6.903    c0.517,0.606,8.083,9.354,19.707,16.319l-12.86,12.86c-0.188,0.188-0.293,0.441-0.293,0.707c0,0.267,0.105,0.521,0.293,0.707    l7.071,7.07c0.195,0.194,0.451,0.293,0.707,0.293c0.256,0,0.512-0.099,0.707-0.293l73.75-73.75    C90.546,16.421,90.651,16.167,90.651,15.901z M9.869,49.241C13.5,45.49,21.767,37.812,32.436,33.22    c-2.081,3.166-3.301,6.949-3.301,11.021c0,4.665,1.601,8.945,4.27,12.352l-6.124,6.123C19.129,58.196,12.89,52.361,9.869,49.241z"\n  id="path6" /></g>\n</g>\n</g>\n<g\nid="g12">\n</g>\n<g\nid="g14">\n</g>\n<g\nid="g16">\n</g>\n<g\nid="g18">\n</g>\n<g\nid="g20">\n</g>\n<g\nid="g22">\n</g>\n<g\nid="g24">\n</g>\n<g\nid="g26">\n</g>\n<g\nid="g28">\n</g>\n<g\nid="g30">\n</g>\n<g\nid="g32">\n</g>\n<g\nid="g34">\n</g>\n<g\nid="g36">\n</g>\n<g\nid="g38">\n</g>\n<g\nid="g40">\n</g></svg>';
this.mouse='<svg\n  version="1.1"\n  id="Capa_1"\n  x="0px"\n  y="0px"\n  viewBox="0 0 260.366 260.366"\n  style="enable-background:new 0 0 260.366 260.366;"\n  xml:space="preserve"\n  sodipodi:docname="arrow-svgrepo-com.svg"\n  inkscape:version="1.1 (c68e22c387, 2021-05-23)"\n  xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n  xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n  xmlns="http://www.w3.org/2000/svg"\n  xmlns:svg="http://www.w3.org/2000/svg"><defs\n  id="defs37" /><sodipodi:namedview\n  id="namedview35"\n  pagecolor="#ffffff"\n  bordercolor="#666666"\n  borderopacity="1.0"\n  inkscape:pageshadow="2"\n  inkscape:pageopacity="0.0"\n  inkscape:pagecheckerboard="0"\n  showgrid="false"\n  inkscape:zoom="3.2339092"\n  inkscape:cx="130.183"\n  inkscape:cy="130.33761"\n  inkscape:window-width="1920"\n  inkscape:window-height="1027"\n  inkscape:window-x="-8"\n  inkscape:window-y="-8"\n  inkscape:window-maximized="1"\n  inkscape:current-layer="Capa_1" />\n  <path\n  d="M255.972,189.463l-47.347-47.348l41.082-41.082c3.675-3.675,5.186-8.989,3.993-14.047c-1.191-5.059-4.917-9.14-9.846-10.786  L19.754,1.316c-5.393-1.804-11.341-0.401-15.36,3.62c-4.021,4.021-5.422,9.968-3.62,15.36l74.885,224.101  c1.646,4.929,5.728,8.654,10.786,9.846c5.053,1.193,10.371-0.317,14.047-3.993l42.165-42.165l47.348,47.347  c2.929,2.929,6.768,4.394,10.606,4.394s7.678-1.465,10.606-4.394l44.755-44.755C261.83,204.819,261.83,195.321,255.972,189.463z   M200.611,223.612l-47.348-47.347c-2.929-2.929-6.768-4.394-10.606-4.394s-7.678,1.465-10.606,4.394l-35.624,35.624L38.752,39.294  l172.595,57.674l-34.541,34.541c-5.858,5.857-5.858,15.355,0,21.213l47.347,47.348L200.611,223.612z"\n  id="path2"\n  style="fill:#000000;fill-opacity:1" />\n  <g\n  id="g4">\n  </g>\n  <g\n  id="g6">\n  </g>\n  <g\n  id="g8">\n  </g>\n  <g\n  id="g10">\n  </g>\n  <g\n  id="g12">\n  </g>\n  <g\n  id="g14">\n  </g>\n  <g\n  id="g16">\n  </g>\n  <g\n  id="g18">\n  </g>\n  <g\n  id="g20">\n  </g>\n  <g\n  id="g22">\n  </g>\n  <g\n  id="g24">\n  </g>\n  <g\n  id="g26">\n  </g>\n  <g\n  id="g28">\n  </g>\n  <g\n  id="g30">\n  </g>\n  <g\n  id="g32">\n  </g>\n  <path\n  style="fill:#000000;fill-opacity:1;stroke-width:38.318;stroke-linecap:round;stroke:#000000;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"\n  d="m 176.25727,198.8633 c -23.68772,-23.64674 -24.49906,-24.41991 -26.7503,-25.49175 -4.55216,-2.16733 -9.11388,-2.17055 -13.60334,-0.01 -2.22046,1.06878 -3.10891,1.90403 -20.87257,19.62262 L 96.477662,211.49087 67.898364,125.92225 C 52.17975,78.859514 39.258366,40.178943 39.184177,39.965428 39.077696,39.658977 210.191,96.551715 210.7197,96.998548 c 0.0763,0.06445 -7.87234,8.148712 -17.66356,17.965012 -11.29533,11.32428 -18.11231,18.38875 -18.65061,19.32772 -2.62177,4.57321 -2.71438,10.25944 -0.24786,15.21817 0.59716,1.20053 6.23919,7.02408 25.242,26.05407 l 24.47294,24.50796 -11.59335,11.5891 -11.59335,11.58911 z"\n  id="path1252" /></svg>';
this.nomouse='<svg\n  version="1.1"\n  id="Capa_1"\n  x="0px"\n  y="0px"\n  viewBox="0 0 260.366 260.366"\n  style="enable-background:new 0 0 260.366 260.366;"\n  xml:space="preserve"\n  sodipodi:docname="noarrow.svg"\n  inkscape:version="1.1 (c68e22c387, 2021-05-23)"\n  xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n  xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n  xmlns="http://www.w3.org/2000/svg"\n  xmlns:svg="http://www.w3.org/2000/svg"><defs\n  id="defs37" /><sodipodi:namedview\n  id="namedview35"\n  pagecolor="#ffffff"\n  bordercolor="#666666"\n  borderopacity="1.0"\n  inkscape:pageshadow="2"\n  inkscape:pageopacity="0.0"\n  inkscape:pagecheckerboard="0"\n  showgrid="false"\n  inkscape:zoom="3.2339092"\n  inkscape:cx="148.11795"\n  inkscape:cy="169.91819"\n  inkscape:window-width="1920"\n  inkscape:window-height="1027"\n  inkscape:window-x="-8"\n  inkscape:window-y="-8"\n  inkscape:window-maximized="1"\n  inkscape:current-layer="Capa_1" />\n\n  <g\n  id="g4">\n  </g>\n  <g\n  id="g6">\n  </g>\n  <g\n  id="g8">\n  </g>\n  <g\n  id="g10">\n  </g>\n  <g\n  id="g12">\n  </g>\n  <g\n  id="g14">\n  </g>\n  <g\n  id="g16">\n  </g>\n  <g\n  id="g18">\n  </g>\n  <g\n  id="g20">\n  </g>\n  <g\n  id="g22">\n  </g>\n  <g\n  id="g24">\n  </g>\n  <g\n  id="g26">\n  </g>\n  <g\n  id="g28">\n  </g>\n  <g\n  id="g30">\n  </g>\n  <g\n  id="g32">\n  </g>\n  <rect\n  style="fill:#000000;stroke:#000000;stroke-width:46.339;stroke-linecap:round"\n  id="rect859"\n  width="0.74869555"\n  height="280.91412"\n  x="179.77588"\n  y="-127.59808"\n  rx="12.106069"\n  ry="12.080462"\n  transform="matrix(0.74419993,0.66795693,-0.68686231,0.72678756,0,0)" /><g\n  id="g1327"><path\n    d="M255.972,189.463l-47.347-47.348l41.082-41.082c3.675-3.675,5.186-8.989,3.993-14.047c-1.191-5.059-4.917-9.14-9.846-10.786  L19.754,1.316c-5.393-1.804-11.341-0.401-15.36,3.62c-4.021,4.021-5.422,9.968-3.62,15.36l74.885,224.101  c1.646,4.929,5.728,8.654,10.786,9.846c5.053,1.193,10.371-0.317,14.047-3.993l42.165-42.165l47.348,47.347  c2.929,2.929,6.768,4.394,10.606,4.394s7.678-1.465,10.606-4.394l44.755-44.755C261.83,204.819,261.83,195.321,255.972,189.463z   M200.611,223.612l-47.348-47.347c-2.929-2.929-6.768-4.394-10.606-4.394s-7.678,1.465-10.606,4.394l-35.624,35.624L38.752,39.294  l172.595,57.674l-34.541,34.541c-5.858,5.857-5.858,15.355,0,21.213l47.347,47.348L200.611,223.612z"\n    id="path2"\n    style="fill:#000000;fill-opacity:1" /><path\n    style="fill:#000000;stroke:#000000;stroke-width:47.3953;stroke-linecap:round"\n    d="M 175.54224,197.81395 C 141.49161,163.76332 143.2267,163.93691 115.08233,191.76514 L 96.477662,210.16082 68.362417,125.87737 C 52.899031,79.521474 40.41104,41.430054 40.611324,41.22977 40.811607,41.029486 78.915195,53.517478 125.28596,68.980863 l 84.31049,28.115246 -17.78399,17.934951 c -19.09866,19.26078 -21.49193,23.16051 -19.17388,31.24308 0.79101,2.75809 8.75682,11.60498 25.8883,28.75178 l 24.74573,24.76783 -11.46147,11.41381 -11.46147,11.41382 z"\n    id="path1058" /></g></svg>';
this.nolabel='<svg\n  version="1.1"\n  id="Capa_1"\n  x="0px"\n  y="0px"\n  viewBox="0 0 37.628 37.628"\n  style="enable-background:new 0 0 37.628 37.628;"\n  xml:space="preserve"\n  sodipodi:docname="nolabel.svg"\n  inkscape:version="1.1 (c68e22c387, 2021-05-23)"\n  xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n  xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n  xmlns="http://www.w3.org/2000/svg"\n  xmlns:svg="http://www.w3.org/2000/svg"><defs\n  id="defs39" /><sodipodi:namedview\n  id="namedview37"\n  pagecolor="#ffffff"\n  bordercolor="#666666"\n  borderopacity="1.0"\n  inkscape:pageshadow="2"\n  inkscape:pageopacity="0.0"\n  inkscape:pagecheckerboard="0"\n  showgrid="false"\n  inkscape:zoom="11.188477"\n  inkscape:cx="7.1502135"\n  inkscape:cy="14.523871"\n  inkscape:window-x="-8"\n  inkscape:window-y="-8"\n  inkscape:window-maximized="1"\n  inkscape:current-layer="Capa_1" />\n  <g\n  id="g4">\n  <path\n  d="M36.895,23.758L25.092,35.562c-0.488,0.487-1.128,0.731-1.77,0.731c-0.211,0-0.419-0.037-0.625-0.089   c0.418-0.107,0.815-0.315,1.145-0.644l11.803-11.804c0.979-0.977,0.979-2.56,0-3.534L17.488,2.067   c-0.333-0.333-0.752-0.546-1.199-0.651l0.243-0.043c0.807-0.142,1.629,0.116,2.206,0.694l18.156,18.156   C37.872,21.199,37.872,22.782,36.895,23.758z M34.228,23.758L22.425,35.562c-0.488,0.487-1.128,0.731-1.77,0.731   c-0.64,0-1.279-0.244-1.768-0.731L0.732,17.405c-0.578-0.578-0.837-1.401-0.694-2.206L1.822,5.181   c0.184-1.031,0.992-1.839,2.023-2.023l10.019-1.784c0.807-0.142,1.629,0.116,2.206,0.694l18.156,18.156   C35.206,21.199,35.206,22.782,34.228,23.758z M9.454,7.193c-0.985-1-2.595-1.012-3.595-0.027s-1.011,2.595-0.026,3.595   c0.985,0.999,2.594,1.012,3.594,0.026C10.426,9.802,10.438,8.192,9.454,7.193z"\n  id="path2" />\n  </g>\n  <g\n  id="g6">\n  </g>\n  <g\n  id="g8">\n  </g>\n  <g\n  id="g10">\n  </g>\n  <g\n  id="g12">\n  </g>\n  <g\n  id="g14">\n  </g>\n  <g\n  id="g16">\n  </g>\n  <g\n  id="g18">\n  </g>\n  <g\n  id="g20">\n  </g>\n  <g\n  id="g22">\n  </g>\n  <g\n  id="g24">\n  </g>\n  <g\n  id="g26">\n  </g>\n  <g\n  id="g28">\n  </g>\n  <g\n  id="g30">\n  </g>\n  <g\n  id="g32">\n  </g>\n  <g\n  id="g34">\n  </g>\n  <rect\n  style="fill:#000000;stroke:none;stroke-width:106.948;stroke-linecap:round"\n  id="rect1062"\n  width="6.4875011"\n  height="46.886227"\n  x="23.606146"\n  y="-23.715155"\n  rx="3.1189909"\n  ry="3.2421327"\n  transform="matrix(0.68940354,0.7243775,-0.72076393,0.69318061,0,0)" /></svg>\n  ';
this.label='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n  <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    viewBox="0 0 37.628 37.628" style="enable-background:new 0 0 37.628 37.628;"\n    xml:space="preserve">\n  <g>\n    <path d="M36.895,23.758L25.092,35.562c-0.488,0.487-1.128,0.731-1.77,0.731c-0.211,0-0.419-0.037-0.625-0.089\n      c0.418-0.107,0.815-0.315,1.145-0.644l11.803-11.804c0.979-0.977,0.979-2.56,0-3.534L17.488,2.067\n      c-0.333-0.333-0.752-0.546-1.199-0.651l0.243-0.043c0.807-0.142,1.629,0.116,2.206,0.694l18.156,18.156\n      C37.872,21.199,37.872,22.782,36.895,23.758z M34.228,23.758L22.425,35.562c-0.488,0.487-1.128,0.731-1.77,0.731\n      c-0.64,0-1.279-0.244-1.768-0.731L0.732,17.405c-0.578-0.578-0.837-1.401-0.694-2.206L1.822,5.181\n      c0.184-1.031,0.992-1.839,2.023-2.023l10.019-1.784c0.807-0.142,1.629,0.116,2.206,0.694l18.156,18.156\n      C35.206,21.199,35.206,22.782,34.228,23.758z M9.454,7.193c-0.985-1-2.595-1.012-3.595-0.027s-1.011,2.595-0.026,3.595\n      c0.985,0.999,2.594,1.012,3.594,0.026C10.426,9.802,10.438,8.192,9.454,7.193z"/>\n  </g>\n  <g>\n  </g>\n  <g>\n  </g>\n  <g>\n  </g>\n  <g>\n  </g>\n  <g>\n  </g>\n  <g>\n  </g>\n  <g>\n  </g>\n  <g>\n  </g>\n  <g>\n  </g>\n  <g>\n  </g>\n  <g>\n  </g>\n  <g>\n  </g>\n  <g>\n  </g>\n  <g>\n  </g>\n  <g>\n  </g>\n  </svg>';
this.surface='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n  viewBox="0 0 512.011 512.011" style="enable-background:new 0 0 512.011 512.011;" xml:space="preserve">\n<g>\n <g>\n   <g>\n     <path d="M9.881,188.672l234.667,149.333c3.499,2.219,7.488,3.328,11.456,3.328c3.989,0,7.957-1.109,11.456-3.328l234.667-149.333\n       c6.144-3.925,9.877-10.709,9.877-18.005c0-7.296-3.733-14.08-9.877-17.984L267.459,3.328c-6.997-4.437-15.915-4.437-22.912,0\n       L9.881,152.683c-6.144,3.904-9.877,10.688-9.877,17.984C0.003,177.963,3.737,184.747,9.881,188.672z"/>\n     <path d="M502.13,323.339l-66.069-42.048l-145.685,92.715c-10.347,6.549-22.208,10.005-34.368,10.005s-24.021-3.456-34.304-9.984\n       L75.954,281.291L9.885,323.339c-6.144,3.925-9.877,10.709-9.877,18.005c0,7.296,3.733,14.08,9.877,17.984l234.667,149.355\n       c3.499,2.219,7.467,3.328,11.456,3.328c3.968,0,7.957-1.109,11.456-3.328L502.13,359.328c6.144-3.904,9.877-10.688,9.877-17.984\n       C512.008,334.048,508.274,327.264,502.13,323.339z"/>\n   </g>\n </g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n</svg>\n';
this.molecule='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\nviewBox="0 0 512.002 512.002" style="enable-background:new 0 0 512.002 512.002;" xml:space="preserve">\n<g>\n<g>\n <path d="M361.461,225.296c-11.33-8.988-20.694-20.332-27.358-33.296l-65.887,54.064c-13.889-11.727-30.673-20.423-49.582-24.736\n   c-25.298-5.773-51.19-3.108-74.431,7.392l-8.563-12.027c-9.292,11.086-21.341,19.775-35.083,25.021l8.225,11.553\n   c-15.352,15.449-26.146,34.892-31.11,56.652c-14.439,63.288,25.302,126.524,88.591,140.963c8.779,2.004,17.549,2.963,26.197,2.963\n   c53.687,0,102.329-37.047,114.765-91.554c6.672-29.25,1.752-58.479-11.697-82.894L361.461,225.296z M182.458,391.885\n   c-1.823,7.991-8.926,13.408-16.789,13.408c-1.27,0-2.56-0.142-3.85-0.437c-32.367-7.385-52.691-39.723-45.306-72.089\n   c2.117-9.281,11.358-15.09,20.638-12.971c9.281,2.117,15.088,11.358,12.971,20.638c-1.528,6.701-0.356,13.597,3.301,19.416\n   c3.657,5.82,9.363,9.867,16.063,11.396C178.768,373.364,184.575,382.605,182.458,391.885z"/>\n</g>\n</g>\n<g>\n<g>\n <path d="M443.878,60.382c-22.81-5.201-46.283-1.212-66.094,11.237c-19.81,12.451-33.586,31.87-38.789,54.68\n   c-10.744,47.09,18.826,94.14,65.917,104.884v0.001c6.533,1.49,13.057,2.203,19.492,2.203c39.947,0,76.139-27.565,85.393-68.122\n   C520.538,118.178,490.968,71.127,443.878,60.382z"/>\n</g>\n</g>\n<g>\n<g>\n <path d="M129.651,124.586c-9.977-15.877-25.542-26.918-43.824-31.088c-37.742-8.611-75.449,15.09-84.06,52.83\n   s15.088,75.449,52.828,84.059c5.236,1.195,10.466,1.767,15.622,1.767c32.016,0,61.022-22.092,68.438-54.597\n   C142.827,159.274,139.63,140.463,129.651,124.586z"/>\n</g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n</svg>';
this.change='<svg\n  version="1.1"\n  id="Layer_1"\n  x="0px"\n  y="0px"\n  viewBox="0 0 512 512"\n  style="enable-background:new 0 0 512 512;"\n  xml:space="preserve"\n  sodipodi:docname="change.svg"\n  inkscape:version="1.1 (c68e22c387, 2021-05-23)"\n  xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n  xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n  xmlns="http://www.w3.org/2000/svg"\n  xmlns:svg="http://www.w3.org/2000/svg"><defs\n  id="defs47" /><sodipodi:namedview\n  id="namedview45"\n  pagecolor="#ffffff"\n  bordercolor="#666666"\n  borderopacity="1.0"\n  inkscape:pageshadow="2"\n  inkscape:pageopacity="0.0"\n  inkscape:pagecheckerboard="0"\n  showgrid="false"\n  inkscape:zoom="1"\n  inkscape:cx="226"\n  inkscape:cy="256.5"\n  inkscape:window-width="1920"\n  inkscape:window-height="1027"\n  inkscape:window-x="-8"\n  inkscape:window-y="-8"\n  inkscape:window-maximized="1"\n  inkscape:current-layer="Layer_1" />\n\n\n<g\n  id="g14">\n</g>\n<g\n  id="g16">\n</g>\n<g\n  id="g18">\n</g>\n<g\n  id="g20">\n</g>\n<g\n  id="g22">\n</g>\n<g\n  id="g24">\n</g>\n<g\n  id="g26">\n</g>\n<g\n  id="g28">\n</g>\n<g\n  id="g30">\n</g>\n<g\n  id="g32">\n</g>\n<g\n  id="g34">\n</g>\n<g\n  id="g36">\n</g>\n<g\n  id="g38">\n</g>\n<g\n  id="g40">\n</g>\n<g\n  id="g42">\n</g>\n<g\n  id="g1800"\n  transform="translate(-0.1537225,-4.3038075)"><path\n    style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:22.416;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n    d="m 102.46172,128.30302 76.00859,-76.010515 0.15658,38.005766 0.1566,38.005769 h 153.53462 153.53462 v 38.00475 38.00475 H 256.15293 26.453131 Z"\n    id="path1171" /><path\n    style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:22.416;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n    d="m 409.84573,392.3046 -76.00859,76.01051 -0.15658,-38.00576 -0.1566,-38.00577 H 179.98934 26.454715 V 354.29883 316.29408 H 256.15452 485.85431 Z"\n    id="path1796" /></g></svg>'};
c.UI.Form=function(){function d(p,e){function k(z,F){var t=this.control={value:null,type:F,key:z,active:!1},q=this.ui=ra("<div></div>");if(this.placeholder={ui:ra("<div></div>")},this.active=new d.Checkbox({value:!1,key:z}),"string"==p[z].type||"element"==p[z].type)this.placeholder=new d.Input(t),this.placeholder.ui.attr("type","text");else if("number"==p[z].type){var n=!1;null!=p[z].min&&null!=p[z].max&&null!=p[z].default&&(n=!0);n?(t.min=p[z].min,t.max=p[z].max,t.default=p[z].default,t.step=p[z].step||
(t.max-t.max)/1E3,this.placeholder=new d.Slider(t)):(this.placeholder=new d.Input(t),this.placeholder.ui.attr("type","text"),this.placeholder.validateOnlyNumber(p[z].floatType))}else"array_range"==p[z].type?(this.placeholder=new d.Input(t),this.placeholder.ui.attr("type","text"),this.placeholder.validateInputRange()):"color"==p[z].type?(this.placeholder=new d.Color(t),p[z].spectrum&&this.placeholder.enableSpectrum()):"boolean"==p[z].type?this.placeholder=new d.Checkbox(t):"properties"==p[z].type?
(this.placeholder=new d.Input(t),this.placeholder.ui.attr("type","text")):"colorscheme"==p[z].type?(this.placeholder=new d.ListInput(t,Object.keys(c.builtinColorSchemes)),this.placeholder.ui.attr("type","text")):null==p[z].type?p[z].validItems&&(this.placeholder=new d.ListInput(t,p[z].validItems)):"form"==p[z].type?(this.placeholder=new d(p[z].validItems,t),this.placeholder.ui.append(ra("<div></div>").css(c.defaultCSS.LinkBreak))):this.placeholder=new d.EmptyElement(t);this.getValue=function(){return this.placeholder.getValue?
this.placeholder.getValue():null};var v=this.placeholder;"boolean"!=F?(v.ui.hide(),q.append(this.active.ui),this.active.update=function(x){x.value?v.ui.show():v.ui.hide();t.active=x.value}):this.placeholder.update=function(x){t.active=x.value};q.append(this.placeholder.ui);this.placeholder.onUpdate&&this.placeholder.onUpdate(H)}p=p||{};var f=this.ui=ra("<div></div>"),h=ra("<div></div>");h.text(e.key);h.css({"border-bottom":"1px solid black","font-family":"Arial","font-size":"14px","font-weight":"bold",
"padding-top":"2px","padding-bottom":"4px"});f.append(h);f.addClass("form");var r=this.inputs=[];Object.keys(p).forEach(function(z){p[z].gui&&(z=new k(z,p[z].type),r.push(z),f.append(z.ui))});this.update=function(){};var u=function(z){};r.forEach(function(z){z.update=u});this.getValue=function(){return e.value={},r.forEach(function(z){z=z.getValue();z.active&&(e.value[z.key]=z.value)}),e};var H=function(z){e.value[z.key]=control.value};this.validate=function(){return null==r.map(function(z){return!z.active.getValue().value||
z.placeholder.validate()}).find(function(z){return 0==z})};this.setValue=function(z){for(var F=Object.keys(z),t=0;t<F.length;t++){var q=r.find(function(n){if(n.control.key==F[t])return n});q.placeholder.setValue(z[F[t]]);q.active.setValue(!0);q.placeholder.ui.show();q.control.active=!0}this.update(e);this.getValue()};this.getInputs=function(){return r}}return d.Color=function(p){function e(n){n="rgb("+r.R.value+", "+r.G.value+", "+r.B.value+")";t.css("background",n);p.value=n;q.update(r)}var k=ra("<div></div>");
k.height(10);k.width(10);k.css("border-radius","50%");k.css("background","red");k.css("margin-right","3px");var f=k.clone();f.css("background","blue");var h=k.clone();h.css("background","green");var r=this.control={R:{value:0,min:0,max:255,label:k},G:{value:0,min:0,max:255,label:h},B:{value:0,min:0,max:255,label:f}};f=this.ui=ra("<div></div>");k=ra("<div></div>");f.append(k);var u={key:"Spectrum",value:null},H=new d.Checkbox(u);k.append(H.ui);H.ui.css({"margin-left":"2px"});f=new d.Slider(r.R);h=
new d.Slider(r.G);var z=new d.Slider(r.B),F=ra("<div></div>");F.append(f.ui,h.ui,z.ui);var t=ra("<div></div>");k.append(F);k.append(t);f.slide.css("color","red");h.slide.css("color","green");z.slide.css("color","blue");t.height(15);t.css("margin-top","6px");t.css("margin-bottom","6px");t.css("border","1px solid grey");t.css("border-radius","500px");this.update=function(n){};var q=this;f.update=h.update=z.update=e;e();H.update=function(n){F.toggle();n.value?(t.css({background:"linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet)"}),
p.value="spectrum"):e()};this.getValue=function(){return p};this.validate=function(){return!0};this.setValue=function(n){"spectrum"==n&&(H.setValue(!0),H.update(u),F.hide(),p.value="spectrum")};H.ui.hide();this.enableSpectrum=function(){H.ui.show()}},d.ListInput=function(p,e){var k=this.ui=ra("<div></div>"),f=ra("<div></div>"),h=e;k.append(f);var r=ra("<select></select>");r.css(c.defaultCSS.ListInput.select);f.append(r);this.showAlertBox=!0;var u=ra("<div></div>");u.text("Please select some value");
u.css({color:"crimson","font-family":"Arial","font-weight":"bold","font-size":"10px"});u.hide();f.append(u);this.update=function(H){};r.on("click",{parent:this},function(H){p.value=r.children("option:selected").val();H.data.parent.update(p)});this.getValue=function(){return p};this.validate=function(){return"select"==p.value||null==p.value?(this.showAlertBox&&u.show(),r.css({"box-shadow":"0px 0px 2px red"}),!1):(u.hide(),f.css({"box-shadow":"none"}),!0)};this.setValue=function(H){-1!=e.indexOf(H)?
(r.empty(),ra("<option></option>").text("select"),h.forEach(function(z){var F=ra("<option></option>");F.text(z);F.attr("value",z);r.append(F);H==z&&F.prop("selected",!0)}),p.value=r.children("option:selected").val()):console.error("UI::Form::ListInput:incorrect value",H)};this.updateList=function(H){r.empty();var z=ra("<option></option>");z.text("select");z.attr("value","select");r.append(z);(h=H).forEach(function(F){var t=ra("<option></option>");t.text(F);t.attr("value",F);r.append(t)})};this.updateList(h)},
d.Input=function(p){function e(F,t){","==(F=F.replaceAll(" ",""))[F.length-1]&&(F=F.slice(0,-1));t=F.split(",");return!/,,/g.exec(F)&&!isNaN(parseInt(t[0]))&&null==t.map(function(q){q=q.split("-");return!(2<q.length)&&(0==q.length||(1==q.length?!isNaN(parseInt(q[0])):2==q.length&&!isNaN(parseInt(q[0]))&&!isNaN(parseInt(q[1]))))}).find(function(q){return 0==q})}var k=this.ui=ra("<div></div>"),f=ra("<div></div>");k.append(f);var h=this.validationType="text";k.css({width:"100%","box-sizing":"border-box"});
var r=this.domElement=ra('<input type="text">');f.append(r);var u=ra("<div></div>");u.css({border:"1px solid darkred","border-radius":"3px","font-family":"Arial","font-size":"10px","font-weight":"bold",margin:"2px","margin-left":"4px",padding:"2px",color:"darkred",background:"lightcoral"});f.append(u);u.hide();this.setWidth=function(F){r.width(F-6)};this.setWidth(75);r.css({});this.update=function(F){};r.on("change",{parent:this,control:p},function(F){inputString=r.val();","==inputString[inputString.length-
1]&&(inputString=inputString.slice(0,-1));p.value="range"==h?inputString.split(","):inputString;F.data.parent.update(p)});r.on("select",function(F){r.val().substring(F.target.selectionStart,F.target.selectionEnd)});this.getValue=function(){return p};var H=this.error=function(F){u.show();u.text(F)};this.setValue=function(F){if("range"==h){var t=F.join(",");r.val(t)}else r.val(F);p.value=F};var z=this.checkInput=function(){var F=r.val();return"number"==h?function(){var t=r.val();return""==t.replaceAll(/[0-9]/g,
"")&&!isNaN(parseInt(t))}()?(u.hide(),!0):(H("Invalid input please check the value entered"),!1):"float"==h?function(){var t=r.val(),q=t.match(/\./g)||[],n=t.replaceAll(/\./g,"").replaceAll(/[0-9]/g,"");return!(1<q.length||""!=n||isNaN(parseFloat(t)))}()?(u.hide(),!0):(H("Invalid input please check the value entered"),!1):"range"!=h||(""==F.replaceAll(",","").replaceAll("-","").replaceAll(/[0-9]/g,"").replaceAll(" ","")&&e(F)?(u.hide(),!0):(H("Invalid input please check the value entered"),!1))};
this.validateOnlyNumber=function(F){h=(void 0===F?0:F)?"float":"number";r.on("keydown keyup paste cut",function(t){z()})};this.validateInputRange=function(){h="range";r.on("keydown keyup paste cut",function(){z()})};this.isEmpty=function(){if(""==p.value)return!0};this.validate=function(){return 1==p.active&&null!=p.value&&""!=p.value&&z()||0==p.active?(r.css("box-shadow","none"),!0):(r.css("box-shadow","0px 0px 2px red"),!1)};r.css(c.defaultCSS.Input.input);f.css(c.defaultCSS.Input.boundingBox)},
d.Checkbox=function(p){var e=ra("<div></div>");e.text(p.key);e.css(c.defaultCSS.TextDefault);var k=this.ui=ra("<div></div>"),f=ra("<div></div>");k.append(f);k.append(e);var h=ra('<input type="checkbox" />');f.append(h);this.click=function(){};this.update=function(r){};this.getValue=function(){return p};h.on("click",{parent:this},function(r){p.value=h.prop("checked");r.data.parent.update(p)});e.css("display","inline-block");f.css("display","inline-block");this.validate=function(){return!0};this.setValue=
function(r){h.prop("checked",r);this.update(p);p.value=r}},d.Slider=function(p,e){var k=this.ui=ra("<div></div>");e=ra("<div></div>");k.append(e);e.css("display","flex");var f=this.slide=ra('<input type="range">');f.css("width","100%");k=p.min||0;var h=p.max||100,r=p.step||1,u=p.default||k,H=p.label||"",z=ra("<div></div>");z.append(H);e.append(z);f.attr("min",k);f.attr("max",h);f.attr("step",r);f.attr("value",u);p.value=u;e.append(f);var F=!1;this.update=function(t){};this.getValue=function(){return p};
f.on("mousedown",function(){F=!0});f.on("mousemove",{parent:this},function(t){F&&(p.value=f.val(),t.data.parent.update(p))});f.on("mouseup",function(){F=!1});e.css("align-items","center");e.height("21px");f.css("padding","0px");f.css("margin","0px");this.validate=function(){return!0};this.setValue=function(t){slider.val(t);p.value=slider.val()}},d.EmptyElement=function(p){this.ui=ra("<div></div>");this.onUpdate=function(e){e};this.getValue=function(){return p};this.validate=function(){return!0}},
d}();c.labelStyles={purple:{backgroundColor:8388736,backgroundOpacity:.8},milk:{font:"Arial",fontSize:12,fontColor:c.htmlColors.black,borderThickness:1,borderColor:c.htmlColors.azure,backgroundColor:c.htmlColors.aliceblue,backgroundOpacity:.9},blue:{font:"Arial",fontSize:12,fontColor:c.htmlColors.aliceblue,borderThickness:1,borderColor:c.htmlColors.darkviolet,backgroundColor:c.htmlColors.darkblue,backgroundOpacity:.9},chocolate:{font:"Arial",fontSize:12,fontColor:c.htmlColors.aliceblue,borderThickness:1,
borderColor:c.htmlColors.brown,backgroundColor:c.htmlColors.chocolate,backgroundOpacity:.9},lime:{font:"Arial",fontSize:12,fontColor:c.htmlColors.black,borderThickness:1,borderColor:c.htmlColors.lightgreen,backgroundColor:c.htmlColors.lime,backgroundOpacity:.9},rose:{font:"Arial",fontSize:12,fontColor:c.htmlColors.black,borderThickness:1,borderColor:c.htmlColors.mintcream,backgroundColor:c.htmlColors.mistyrose,backgroundOpacity:.9},yellow:{font:"Arial",fontSize:12,fontColor:c.htmlColors.black,borderThickness:1,
borderColor:c.htmlColors.orange,backgroundColor:c.htmlColors.yellow,backgroundOpacity:.9}};c.longPressDuration=1500;c.defaultCSS={ListInput:{select:{width:"auto",border:"none",margin:"0px","font-family":"Arial",padding:"0px",height:"20px","border-radius":"4px","box-sizing":"border-box"}},Input:{input:{"margin-bottom":"0px",padding:"0px","border-radius":"4px","font-family":"Arial",width:"96%"},boundingBox:{"margin-left":"4px","margin-right":""}},Checkbox:{},Slider:{},Color:{},TextDefault:{"font-family":"Arial",
"margin-left":"4px"},LinkBreak:{height:"3px","border-bottom":"1px solid #687193"}}}}]);
